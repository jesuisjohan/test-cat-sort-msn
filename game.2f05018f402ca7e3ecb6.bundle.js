(function(){var e=[,,,,function(e,t,n){"use strict";var i=n(12),r=function(){function e(e,t){if(this.scene=void 0,this.config=void 0,this.isStarted=void 0,this.tween=void 0,!(t.targets.length<1)){this.buildConfig(e,t);var n=this.config.targets[0].scene;n&&(this.scene=n,this.isStarted=!1,this.tween=n.tweens.create(this.config))}}var t=e.prototype;return t.buildConfig=function(e,t){this.config=(0,i.TS)(e,t)},t.play=function(){this.tween&&(this.isStarted&&this.tween.hasStarted?this.restart():(this.tween.play(),this.isStarted=!0))},t.restart=function(){var e;null==(e=this.tween)||e.restart()},t.stop=function(){var e;null==(e=this.tween)||e.stop()},t.remove=function(){var e;null==(e=this.tween)||e.remove()},t.next=function(e){return this.tween?(this.tween.off(Phaser.Tweens.Events.TWEEN_COMPLETE,e),this.tween.once(Phaser.Tweens.Events.TWEEN_COMPLETE,e),this.tween):null},e}();t.Z=r},,,function(e,t,n){"use strict";n.d(t,{_:function(){return i}});var i={BUTTON_CLICK:"button_click",SCREEN_OPEN:"screen_open",LOAD_START:"load_start",LOAD_COMPLETE:"load_complete",APP_READY:"app_ready",TUTORIAL_BEGIN:"tutorial_begin",TUTORIAL_STEP:"tutorial_step",TUTORIAL_COMPLETE:"tutorial_complete",MATCH_START:"match_start",MATCH_RESCUE:"match_rescue",MATCH_END:"match_end",LEVEL_START:"level_start",LEVEL_RESCUE:"level_rescue",LEVEL_END:"level_end",SHARE:"share",MESSAGE:"message",INVITE:"invite",SHORTCUT_CREATE:"shortcut_create",SHORTCUT_CREATE_POPUP:"shortcut_create_popup",BOT_SUBSCRIBE:"bot_subscribe",BOT_SUBSCRIBE_POPUP:"bot_subscribe_popup",AD_LOAD:"ad_load",AD_LOAD_FAILED:"ad_load_failed",AD_SHOW:"ad_show",AD_SHOW_FAILED:"ad_show_failed",MISSING_AD_SHOW:"missing_ad_show",NEW_USER:"new_user",AD_IMPRESSION:"ad_impression",JOIN_GROUP:"join_group",TOURNAMENT_SHARE:"tournament_share",TOURNAMENT_CREATE:"tournament_create",TOURNAMENT_POST_SCORE:"tournament_post_score",GET_SOLUTION:"get_solution",GET_SOLUTION_TIME_OUT:"get_solution_time_out"}},function(e,t){"use strict";var n=GameCore.Utils.Image.getImageScale(),i={TUTORIAL:{KEY:"tutorial-resources",TEXTURE:"./assets/textures/"+n+"x/tutorial-resources.png",JSON:"./assets/textures/"+n+"x/tutorial-resources.json",FRAME:{BLANK:"blank"}},GAME_PLAY:{KEY:"game-play-resources",TEXTURE:"./assets/textures/"+n+"x/game-play-resources.png",JSON:"./assets/textures/"+n+"x/game-play-resources.json",FRAME:{ICON_AD:"icons/ad-small",ICON_DOT:"icons/dot",ICON_ADD_FRIEND:"icons/icon-add-friend",ICON_BACK:"icons/icon-back",ICON_BRANCH:"icons/icon-branch",ICON_NEXT:"icons/icon-next",ICON_PAUSE:"icons/icon-pause",ICON_RETURN:"icons/return",ICON_RETURN_BIG:"icons/return-big",ICON_HINT:"icons/icon-hint",TREE_BRANCH:"tree-branch",BUTTON_CIRCLE_BLUE:"buttons/circle-blue"}},DEFAULT:{KEY:"default-resources",TEXTURE:"./assets/textures/"+n+"x/default-resources.png",JSON:"./assets/textures/"+n+"x/default-resources.json",FRAME:{BLANK:"blank",PRELOADER:"preloader/dual-ring",RIBBON_COMPLETE:"ribbon/ribbon-completed",RIBBON_PAUSE:"ribbon/ribbon-pause",RIBBON_FAILED:"ribbon/ribbon-failed",RIBBON_MAP:"ribbon/map",RIBBON_RED:"ribbon/ribbon-red",RIBBON_PINK:"ribbon/ribbon-pink",RIBBON_PINK_SHORT:"ribbon/ribbon-pink-short",RIBBON_GREY:"ribbon/ribbon-grey",POPUP_TOP_LEFT:"popup/top-left",POPUP_TOP_MID:"popup/top-middle",POPUP_TOP_RIGHT:"popup/top-right",POPUP_MID_LEFT:"popup/middle-left",POPUP_MID_MID:"popup/middle-middle",POPUP_MID_RIGHT:"popup/middle-right",POPUP_BOTTOM_LEFT:"popup/bottom-left",POPUP_BOTTOM_MID:"popup/bottom-middle",POPUP_BOTTOM_RIGHT:"popup/bottom-right",POPUP_EAR_LEFT:"popup/ear-left",POPUP_EAR_RIGHT:"popup/ear-right",ICON_REMOVE_BOMB:"icons/remove-bomb",ICON_CHECK:"icons/check",ICON_DOT_SELECTED:"icons/dot-selected",ICON_DOT_UNSELECT:"icons/don-unselect",ICON_MAP:"icons/icon-map",ICON_NEXT_LEVEL:"icons/icon-next-level",ICON_RETRY:"icons/icon-retry",ICON_SHARE:"icons/icon-share",ICON_LOCK:"icons/lock",ICON_MAP_INCOMPLETE:"icons/map-incomplete",ICON_MAP_LOCK:"icons/map-lock",ICON_MUSIC_ON:"icons/music",ICON_SOUND_ON:"icons/sound",ICON_VIBRATE_OFF:"icons/vibrate-off",ICON_VIBRATE_ON:"icons/vibrate-on",ICON_MAGNIFYING_GLASS:"icons/magnifying-glass",ICON_COIN:"icons/coin",STAR:"icons/star",EMPTY_STAR:"icons/star-empty",ON_TOP_STAR:"icons/star-on-top",SMALL_STAR:"icons/star-small",EMPTY_SMALL_STAR:"icons/star-small-empty",ICON_HOME:"icons/home",ICON_SHOP:"icons/shop",ICON_NO_ADS:"icons/no-ads",ICON_RESUME:"icons/resume",ICON_AD:"icons/ad",COIN_TOP_PANEL:"panel/panel-top",TEXT_RETRY:"texts/retry",TEXT_NEXT_LEVEL:"texts/next-level",BUTTON_CLOSE:"buttons/button-close",BUTTON_LONG_BLUE:"buttons/long-blue",BUTTON_LONG_BLUE_2:"buttons/long-blue-2",BUTTON_LONG_BLUE_3:"buttons/long-blue-3",BUTTON_SMALL_GREEN:"buttons/small-green",BUTTON_LONG_GREEN:"buttons/long-green",BUTTON_LONG_GREEN_2:"buttons/long-green-2",BUTTON_LONG_GREEN_3:"buttons/long-green-3",BUTTON_BLUE_CIRCLE:"buttons/button-circle-blue",BUTTON_GREY_CIRCLE:"buttons/button-circle-grey",TOGGLE_BUTTON_ON:"buttons/button-on",TOGGLE_BUTTON_OFF:"buttons/button-off",CONFETTI_PARTICLE_1:"confetti/confetti-1",CONFETTI_PARTICLE_2:"confetti/confetti-2",CONFETTI_PARTICLE_3:"confetti/confetti-3",CONFETTI_PARTICLE_4:"confetti/confetti-4",CONFETTI_PARTICLE_5:"confetti/confetti-5",CONFETTI_PARTICLE_6:"confetti/confetti-6",CONFETTI_PARTICLE_7:"confetti/confetti-7",RIBBON_PARTICLE_1:"confetti/ribbon-1",RIBBON_PARTICLE_2:"confetti/ribbon-2",RIBBON_PARTICLE_3:"confetti/ribbon-3",RIBBON_PARTICLE_4:"confetti/ribbon-4",RIBBON_PARTICLE_5:"confetti/ribbon-5",RIBBON_PARTICLE_6:"confetti/ribbon-6",HAND:"hand",RULE_X:"x",RULE_CHECK:"check",HAND_CLICK:"click",HAPPY_CAT:"cats/happy",SAD_CAT:"cats/sad"}},BIRD_SPINE:{KEY_JSON:"bird-spine-json",KEY_ATLAS:"bird-spine-atlas",jsonPATH:"./assets/spines/birds/cat-1.json",atlasPATH:"./assets/spines/birds/cat-1.atlas"},BIRD_SPINE_1:{KEY_JSON:"bird-spine-json-1",KEY_ATLAS:"bird-spine-atlas-1",jsonPATH:"./assets/spines/birds/cat-2.json",atlasPATH:"./assets/spines/birds/cat-2.atlas"},BIRD_SPINE_2:{KEY_JSON:"bird-spine-json-2",KEY_ATLAS:"bird-spine-atlas-2",jsonPATH:"./assets/spines/birds/cat-3.json",atlasPATH:"./assets/spines/birds/cat-3.atlas"},BIRD_SPINE_3:{KEY_JSON:"bird-spine-json-3",KEY_ATLAS:"bird-spine-atlas-3",jsonPATH:"./assets/spines/birds/cat-4.json",atlasPATH:"./assets/spines/birds/cat-4.atlas"},BIRD_SPINE_4:{KEY_JSON:"bird-spine-json-4",KEY_ATLAS:"bird-spine-atlas-4",jsonPATH:"./assets/spines/birds/cat-5.json",atlasPATH:"./assets/spines/birds/cat-5.atlas"},BIRD_SPINE_5:{KEY_JSON:"bird-spine-json-5",KEY_ATLAS:"bird-spine-atlas-5",jsonPATH:"./assets/spines/birds/cat-6.json",atlasPATH:"./assets/spines/birds/cat-6.atlas"},BIRD_SPINE_6:{KEY_JSON:"bird-spine-json-6",KEY_ATLAS:"bird-spine-atlas-6",jsonPATH:"./assets/spines/birds/cat-7.json",atlasPATH:"./assets/spines/birds/cat-7.atlas"},BIRD_SPINE_7:{KEY_JSON:"bird-spine-json-7",KEY_ATLAS:"bird-spine-atlas-7",jsonPATH:"./assets/spines/birds/cat-8.json",atlasPATH:"./assets/spines/birds/cat-8.atlas"},BIRD_SPINE_8:{KEY_JSON:"bird-spine-json-8",KEY_ATLAS:"bird-spine-atlas-8",jsonPATH:"./assets/spines/birds/cat-9.json",atlasPATH:"./assets/spines/birds/cat-9.atlas"},BIRD_SPINE_9:{KEY_JSON:"bird-spine-json-9",KEY_ATLAS:"bird-spine-atlas-9",jsonPATH:"./assets/spines/birds/cat-10.json",atlasPATH:"./assets/spines/birds/cat-10.atlas"},BIRD_SPINE_10:{KEY_JSON:"bird-spine-json-10",KEY_ATLAS:"bird-spine-atlas-10",jsonPATH:"./assets/spines/birds/cat-11.json",atlasPATH:"./assets/spines/birds/cat-11.atlas"},BIRD_SPINE_11:{KEY_JSON:"bird-spine-json-11",KEY_ATLAS:"bird-spine-atlas-11",jsonPATH:"./assets/spines/birds/cat-12.json",atlasPATH:"./assets/spines/birds/cat-12.atlas"},BIRD_SPINE_12:{KEY_JSON:"bird-spine-json-12",KEY_ATLAS:"bird-spine-atlas-12",jsonPATH:"./assets/spines/birds/cat-13.json",atlasPATH:"./assets/spines/birds/cat-13.atlas"},BIRD_SPINE_13:{KEY_JSON:"bird-spine-json-13",KEY_ATLAS:"bird-spine-atlas-13",jsonPATH:"./assets/spines/birds/cat-14.json",atlasPATH:"./assets/spines/birds/cat-14.atlas"},DEMO_SPINE:{KEY:"demo-spine",jsonPATH:"./assets/spines/demo/demo.json",atlasPATH:"./assets/spines/demo/demo.atlas"}};t.Z=i},function(e,t,n){"use strict";n.d(t,{F0:function(){return a},Gm:function(){return r},qZ:function(){return i}});var i=function(e){return new Promise((function(t){return setTimeout(t,e)}))},r=function(e){var t=new Date(e),n=new Date;return t.getDate()===n.getDate()&&t.getMonth()===n.getMonth()&&t.getFullYear()===n.getFullYear()},a=function(e,t){void 0===t&&(t=!0);var n=new Date(e).toISOString();return t?n.slice(11,-5):n.slice(14,-5)}},function(e,t){"use strict";t.Z={BACKGROUND:1,FIREWORKS:5,ITEM:10,LOGO:15,BUTTON:20,TREE_BRANCH:21,BIRD:22,TILE:25,TEXT:30,ENCOURAGING:31,BIRD_FLY:47,EFFECT:48,MESSAGE:49,TUTORIAL:49,POPUP:50,PRIORITY:80,DEBUG:90,ON_TOP:1e4}},,,,function(e,t,n){"use strict";n.d(t,{R0:function(){return c},Tv:function(){return s},j6:function(){return r},sw:function(){return a},tO:function(){return u}});n(28);var i=!1,r=function(){var e=setInterval((function(){window.Sentry&&(clearInterval(e),console.warn({isSentryEnabled:i}))}),100)},a=function(e,t){window.Sentry&&window.Sentry.addBreadcrumb({category:e,message:t})},s=function(e){window.Sentry&&window.Sentry.setUser(e)},o=function(e){console.error(e)},c=function(e,t){e&&console.error(e)},u=function(e){e&&o(e)}},,function(e,t){"use strict";t.Z={PRIMARY:{KEY:"fb_stroke",en:{TEXTURE:"./assets/fonts/fb_stroke.png",DATA:"./assets/fonts/fb_stroke.xml"},ru:{TEXTURE:"./assets/fonts/gamefont-ru-stroke.png",DATA:"./assets/fonts/gamefont-ru-stroke.xml"}},MIKADO:{KEY:"mikado",en:{TEXTURE:"./assets/fonts/fb.png",DATA:"./assets/fonts/fb.xml"},ru:{TEXTURE:"./assets/fonts/gamefont-ru.png",DATA:"./assets/fonts/gamefont-ru.xml"}},FONT_FAMILY:'-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",sans-serif'}},function(e,t,n){"use strict";var i=n(11),r=n.n(i)()(.48,1.57,.6,.83);t.Z=r},,,,,,,,,function(e,t){"use strict";t.Z=function(e,t){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789*#%&!",i="",r=e;void 0!=t&&(r-=t.length,i+=t);for(var a=0;a<r;a++){var s=Math.floor(67*Math.random());i+=n.charAt(s)}return i}},,,,function(e,t,n){"use strict";var i=n(31),r=function(){function e(e,t,n,r){this.playerId=void 0,this.name=void 0,this.photo=void 0,this.locale=void 0,this.playerId=e,this.name=t,this.photo=n||i.Z.AVATAR.FILE,this.locale=r||"en_US"}return e.prototype.toObject=function(){return{playerId:this.playerId,name:this.name,photo:this.photo,locale:this.locale}},e}();t.Z=r},function(e,t){"use strict";var n={AVATAR:{KEY:"avatar",FILE:"./assets/images/others/avatar.png",CONFIG:{}},ICON_EARTH:{KEY:"icon-earth",FILE:"./assets/images/others/icon-earth.png",CONFIG:{}},BACKGROUND:{KEY:"background",FILE:"./assets/images/"+GameCore.Utils.Image.getImageScale()+"x/bg.jpg",CONFIG:{}},LANDSCAPE_BACKGROUND:{KEY:"landscape-background",FILE:"./assets/images/2x/landscape-bg.jpg",CONFIG:{}}};t.Z=n},function(e,t){"use strict";t.Z={GENERIC_NOTIFICATION:0,NEW_USER_NOTIFICATION:1,MONDAY_NOTIFICATION:2,TUESDAY_NOTIFICATION:3,WEDNESDAY_NOTIFICATION:4,THURSDAY_NOTIFICATION:5,FRIDAY_NOTIFICATION:6,SATURDAY_NOTIFICATION:7,SUNDAY_NOTIFICATION:8}},,,function(e,t,n){"use strict";n.d(t,{DW:function(){return c},EH:function(){return a},fJ:function(){return r},kL:function(){return i},qj:function(){return s},rh:function(){return o}});var i="CONTEXT_RECEIVED",r="CONTEXT_PROCESSED",a="CONTEXT_GAME_MODE_DETECTED",s="MESSAGES_SENT_UPDATE",o="MESSAGES_SENT_REMOVE",c="SCENE_KEY_UPDATE"},,function(e,t){"use strict";t.Z={RESIZE:"resize",CHANGE_LAYOUT:"change-layout"}},function(e,t,n){"use strict";n.d(t,{U:function(){return b},v:function(){return A}});var i=n(5),r=n(3),a=n(1),s=n.n(a),o=n(0),c=n(15),u=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="BadRequest",i.message=t||"This request is bad",i.payload=n,i}return(0,o.Z)(t,e),t}((0,c.Z)(Error)),l=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="RequestTimeout",i.message=t||"This request is timeout",i.payload=n,i}return(0,o.Z)(t,e),t}((0,c.Z)(Error)),h=n(9),d=GameCore.Configs,p=d.AppId,f=d.Network,m=function(e){if(!e.ok)throw new u(null,{response:e})},g=function(){var e=window.game.auth.getToken();return{token:e,timeout:f.Timeout,headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"}}},v=function(e,t,n,i){return(0,r.Z)(s().mark((function r(){var a,o,c,h,d;return s().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,a=e+"/apps/"+p+"/"+t,o=new AbortController,n.signal=o.signal,c=setTimeout((function(){o.abort()}),n.timeout),GameCore.Utils.Valid.isObject(i)&&(n.body=JSON.stringify(i)),r.next=8,fetch(a,n);case 8:return h=r.sent,clearTimeout(c),m(h),r.next=13,h.json();case 13:if(r.t0=r.sent,r.t0){r.next=16;break}r.t0={};case 16:return d=r.t0,r.abrupt("return",d);case 20:if(r.prev=20,r.t1=r.catch(0),!(r.t1 instanceof u)){r.next=24;break}return r.abrupt("return",null);case 24:if(!(r.t1 instanceof Object&&GameCore.Utils.Object.hasOwn(r.t1,"name"))){r.next=27;break}if("AbortError"!==r.t1.name){r.next=27;break}throw new l(null);case 27:throw r.t1;case 28:case"end":return r.stop()}}),r,null,[[0,20]])})))},y=function(){var e=(0,r.Z)(s().mark((function e(t,n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",t());case 4:if(e.prev=4,e.t0=e.catch(0),!(e.t0 instanceof l&&n>0)){e.next=18;break}return e.prev=7,e.next=10,(0,h.qZ)(600);case 10:return e.next=12,y(t,n-1);case 12:return e.abrupt("return",e.sent);case 15:return e.prev=15,e.t1=e.catch(7),e.abrupt("return",{});case 18:if(!(e.t0 instanceof l)){e.next=20;break}return e.abrupt("return",{});case 20:return console.warn(e.t0),e.abrupt("return",{});case 22:case"end":return e.stop()}}),e,null,[[0,4],[7,15]])})));return function(t,n){return e.apply(this,arguments)}}(),b=function(){var e=(0,r.Z)(s().mark((function e(t,n,r,a){var o,c;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n={}),void 0===a&&(a=f.Retries),e.prev=2,o=(0,i.Z)({},g(),n,{method:"GET"}),c=v(r,t,o),e.next=7,y(c,a);case 7:return e.abrupt("return",e.sent);case 10:return e.prev=10,e.t0=e.catch(2),console.warn(e.t0),e.abrupt("return",{});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n,i,r){return e.apply(this,arguments)}}(),A=function(){var e=(0,r.Z)(s().mark((function e(t,n,r,a,o){var c,u;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===r&&(r={}),void 0===o&&(o=f.Retries),e.prev=2,c=(0,i.Z)({},g(),r,{method:"POST"}),u=v(a,t,c,n),e.next=7,y(u,o);case 7:return e.abrupt("return",e.sent);case 10:return e.prev=10,e.t0=e.catch(2),console.warn(e.t0),e.abrupt("return",{});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n,i,r,a){return e.apply(this,arguments)}}()},function(e,t,n){"use strict";n.d(t,{C:function(){return i},K:function(){return r}});var i={BOOT_SCENE:"BOOT_SCENE",LOAD_SCENE:"LOAD_SCENE",GAME_SCENE:"GAME_SCENE",GLOBAL_SCENE:"GLOBAL_SCENE",DASHBOARD_SCENE:"DASHBOARD_SCENE",GAME_OVER_SCENE:"GAME_OVER_SCENE",LEADERBOARD_SCENE:"LEADERBOARD_SCENE",RESULT_MATCH_SCENE:"RESULT_MATCH_SCENE",PAUSE_SCENE:"PAUSE_SCENE",LEVEL_SCENE:"LEVEL_SCENE",COMPLETE_ALL_LEVEL_SCENE:"COMPLETE_ALL_LEVEL_SCENE",TEST_SCENE:"TEST_SCENE",ANIMATIONS_SCENE:"ANIMATIONS_SCENE"},r={SWITCH:Symbol("SWITCH")}},function(e,t,n){"use strict";n.d(t,{I:function(){return r}});var i=n(35),r=function(e){return{type:i.DW,payload:{sceneKey:e}}}},function(e,t,n){"use strict";n.d(t,{Ks:function(){return r},o4:function(){return i}});var i={PAUSE_SCREEN:"PAUSE_SCREEN",NOTIFY_SCREEN:"NOTIFY_SCREEN",REWARD_SCREEN:"REWARD_SCREEN",RESCUE_SCREEN:"RESCUE_SCREEN",SETTINGS_SCREEN:"SETTINGS_SCREEN",BEST_SCORE_SCREEN:"BEST_SCORE_SCREEN",DAILY_REWARD_SCREEN:"DAILY_REWARD_SCREEN",DAILY_MISSIONS_SCREEN:"DAILY_MISSIONS_SCREEN",LUCKY_REWARD_SCREEN:"LUCKY_REWARD_SCREEN",LEVEL_COMPLETE_SCREEN:"LEVEL_COMPLETE_SCREEN",LEVEL_FAILED_SCREEN:"LEVEL_FAILED_SCREEN"},r={SCREEN:200,POPUP:300,PRIORITY:999}},function(e,t){"use strict";t.Z={BIRD_1:"cat1",BIRD_2:"cat2",BIRD_3:"cat3",BIRD_4:"cat4",BIRD_5:"cat5",BIRD_6:"cat6",BIRD_7:"cat7",BIRD_8:"cat8",BIRD_9:"cat9",BIRD_10:"cat10",BIRD_11:"cat11",BIRD_12:"cat12",BIRD_FLY:"cat_movement_jump",BIRDS_FLY:"cat_movement_jump",CAT_LANDING:"cat_tiep_dat_sound",BUTTON_CLICK:"button_click",CONFETTI:"confetti",HIGHLIGHT:"hightlight",UN_HIGHLIGHT:"un_hightlight",YOU_LOSE:"you_lose",YOU_WIN:"you_win"}},function(e,t,n){"use strict";n.d(t,{Z:function(){return R}});var i=n(6),r=n(0),a=n(46),s=n(47),o=n(8),c=n(39),u=n(41),l=n(40),h=(0,n(36).P1)([function(e){return e.scene.currentSceneKey}],(function(e){return e})),d=n(14),p=n(48),f=n(2),m=n(16),g=n(10),v=o.Z.DEFAULT,y=v.KEY,b=v.FRAME,A=function(e){function t(t){var n;return(n=e.call(this,t,0,0)||this).fps=0,n.fpsString="FPS: %1",n.fpsText=void 0,n.background=void 0,n.lastUpdate=void 0,n.update=function(e){if(!(e-n.lastUpdate<800)){n.lastUpdate=e;var t=Math.floor(n.scene.game.loop.actualFps);n.setFps(t)}},n.createFps(),n.setDepth(g.Z.DEBUG),n.scene.add.existing((0,f.Z)(n)),n.scene.events.on(Phaser.Scenes.Events.UPDATE,n.update),n}(0,r.Z)(t,e);var n=t.prototype;return n.setFps=function(e){this.fps=e;var t=Phaser.Utils.String.Format(this.fpsString,[e]);this.fpsText.setText(t)},n.createFps=function(){this.background=this.scene.make.image({key:y,frame:b.BLANK}),this.background.setName("BG"),this.background.setTint(13801480),this.background.setWorldSize(45,25),this.fpsText=this.scene.make.bitmapText({size:this.scene.fontSize(14),text:this.fpsString,font:m.Z.PRIMARY.KEY,origin:{x:.5,y:.5}}),this.fpsText.setName("FPS Meter"),Phaser.Display.Align.In.Center(this.fpsText,this.background),this.add([this.background,this.fpsText]),this.setFps(0)},t}(Phaser.GameObjects.Container),S=A,E=function(e){function t(t){var n;if((n=e.call(this,t,0,0)||this).performance=void 0,n.memory=0,n.maxMemoryLimit=void 0,n.maxPercentThreshold=void 0,n.normalColor=3459162,n.warningColor=16768343,n.alarmColor=15812200,n.memoryString="Memory: %1MB / %2MB",n.memoryText=void 0,n.lastUpdate=void 0,n.update=function(e){if(!(e-n.lastUpdate<1e3)){n.lastUpdate=e;var t=n.performance.memory.usedJSHeapSize,i=1048576*n.maxMemoryLimit,r=Math.round(t/1048576);n.setMemory(r),n.memoryText.setTint(n.normalColor),t>n.maxPercentThreshold/100*i&&n.memoryText.setTint(n.warningColor),t>i&&n.memoryText.setTint(n.alarmColor)}},n.performance=window.performance,n.createMemory(),n.setDepth(g.Z.DEBUG),n.scene.add.existing((0,f.Z)(n)),!n.isSupport())return n.memoryText.setText("Memory: not supported!"),(0,f.Z)(n);var i=n.performance.memory.jsHeapSizeLimit;return n.maxPercentThreshold=90,n.setMaxMemory(i/1048576),n.scene.events.on(Phaser.Scenes.Events.UPDATE,n.update),n}(0,r.Z)(t,e);var n=t.prototype;return n.isSupport=function(){var e;return this.performance&&!(null==(e=this.performance)||!e.memory)},n.setMaxMemory=function(e){this.maxMemoryLimit=Math.round(e)},n.setMemory=function(e){this.memory=e;var t=Phaser.Utils.String.Format(this.memoryString,[e,this.maxMemoryLimit]);this.memoryText.setText(t)},n.createMemory=function(){this.memoryText=this.scene.make.bitmapText({size:this.scene.fontSize(14),text:this.memoryString,font:m.Z.PRIMARY.KEY,depth:2e3}),this.memoryText.setName("Memory Meter"),this.add(this.memoryText),this.setMemory(0)},t}(Phaser.GameObjects.Container),w=E,C=n(45),T=n(44),I=function(e){function t(t,n,i,r){var a;return(a=e.call(this,t,n,i,r)||this).loadingIcon=void 0,a.messageText=void 0,a.openAnimation=void 0,a.closeTimerEvent=void 0,a.addLoadingIcon(),a.addMessageText(),a.setDepth(u.Ks.PRIORITY),a.background.setAlpha(.8),a}(0,r.Z)(t,e);var n=t.prototype;return n.open=function(t){var n,i=this;e.prototype.open.call(this,t),this.setOuterOverlayAlpha(this.background.alpha);var r=this.getData(["message","duration","loading"]),a=r[0],s=void 0===a?"":a,o=r[1],c=void 0===o?0:o,u=r[2],l=void 0!==u&&u;this.setMessage(s),this.showLoading(l),null==(n=this.closeTimerEvent)||n.remove(),c>0&&(this.closeTimerEvent=this.scene.time.addEvent({delay:c,callback:function(){i.visible&&i.scene.screen.close(i.name)}})),this.runOpenAnimation()},n.close=function(){e.prototype.close.call(this),this.setOuterOverlayAlpha(0)},n.addLoadingIcon=function(){this.loadingIcon=new T.Z(this.scene),this.add(this.loadingIcon),Phaser.Display.Align.In.Center(this.loadingIcon,this.zone)},n.addMessageText=function(){this.messageText=this.scene.make.bitmapText({size:this.scene.fontSize(20),font:m.Z.PRIMARY.KEY,origin:{x:.5,y:.5}}),this.messageText.setCenterAlign(),this.add(this.messageText)},n.setMessage=function(e){this.messageText.setText(e)},n.showLoading=function(e){this.loadingIcon.setVisible(e);var t=!1===e?20:80;Phaser.Display.Align.In.Center(this.messageText,this.zone,0,t)},n.runOpenAnimation=function(){var e,t,n=this;null==(e=this.openAnimation)||e.stop(),null==(t=this.openAnimation)||t.remove();this.loadingIcon.setWorldSize(70,70),this.messageText.setFontSize(this.scene.fontSize(20));var i=[this.messageText,this.loadingIcon],r=i.map((function(e){return.3})),a=i.map((function(e){return 1}));this.openAnimation=new C.Z({targets:i,props:{scale:{getStart:function(e,t,n,i){return r[i]},getEnd:function(e,t,n,i){return a[i]}}},onUpdate:function(){n.setOuterOverlayAlpha(n.background.alpha)}}),this.openAnimation.play()},n.logPageviewOnOpen=function(){},n.logPageviewOnClose=function(){},n.setOuterOverlayAlpha=function(e){var t=document.getElementById("app-bg-overlay");t&&(t.style.opacity=e.toString(),t.style.visibility=e>0?"visible":"hidden")},t}(GameCore.Screen),x=I,k=o.Z.DEFAULT,P=k.KEY,L=k.FRAME,O=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this).mask=void 0,t.fadeInAnim=void 0,t.fadeOutAnim=void 0,t.fpsMeter=void 0,t.memoryMeter=void 0,t.switchScene=function(e){t.currentScene.switch(e)},t.emitGameEventStartScene=function(e){var n=e.scene.key;console.info("%cScene start","color: #D27D2D",n),t.updateSceneState(),t.runMaskFadeOutAnimation(),t.updateActiveSceneKey(n),t.game.events.emit(Phaser.Scenes.Events.START,n),(0,d.sw)("scene","Start scene: "+n)},t.emitGameEventSleepScene=function(e){var n=e.scene.scene.key;console.info("%cScene sleep","color: #D27D2D",n),n!==c.C.LOAD_SCENE&&(t.runMaskFadeInAnimation(),t.game.events.emit(Phaser.Scenes.Events.SLEEP,n))},t.emitGameEventWakeScene=function(e){var n=e.scene.scene.key;console.info("%cScene wake","color: #D27D2D",n),n!==c.C.LOAD_SCENE&&(t.updateSceneState(),t.runMaskFadeOutAnimation(),t.updateActiveSceneKey(n),t.game.events.emit(Phaser.Scenes.Events.WAKE,n))},t.emitGameEventPauseScene=function(e){var n=e.scene.scene.key;console.info("%cScene pause","color: #D27D2D",n),t.game.events.emit(Phaser.Scenes.Events.PAUSE,n)},t.emitGameEventResumeScene=function(e){var n=e.scene.key;console.info("%cScene resume","color: #D27D2D",n),t.game.events.emit(Phaser.Scenes.Events.RESUME,n)},t.emitGameEventShutdownScene=function(e){var n=e.scene.scene.key;console.info("%cScene shutdown","color: #D27D2D",n),t.game.events.emit(Phaser.Scenes.Events.SHUTDOWN,n)},t}(0,r.Z)(t,e);var n=t.prototype;return n.init=function(){this.listenScenesEvents(),this.game.globalScene=this},n.setup=function(){this.scaleGame(),this.addNotifyScreen(),this.addFPS(),this.addMemory()},n.addNotifyScreen=function(){var e=this.screen.add(u.o4.NOTIFY_SCREEN,x);Phaser.Display.Align.In.Center(e,this.gameZone)},n.addMask=function(){this.mask=this.make.image({key:P,frame:L.BLANK});var e=this.gameZone,t=e.width,n=e.height;this.mask.setAlpha(0),this.mask.setOrigin(0,0),this.mask.setTint(0),this.mask.setWorldSize(t,n)},n.addFPS=function(){GameCore.Configs.Statistics.ShowFPSInGame&&(this.fpsMeter=new S(this),Phaser.Display.Align.In.TopLeft(this.fpsMeter,this.gameZone,-20,-10))},n.addMemory=function(){GameCore.Configs.Statistics.ShowMemoryInGame&&(this.memoryMeter=new w(this),Phaser.Display.Align.In.TopLeft(this.memoryMeter,this.gameZone,-45,-3))},n.updateSceneState=function(){this.setGlobalSceneOnTop()},n.setGlobalSceneOnTop=function(){this.scene.bringToTop(this)},n.runMaskFadeInAnimation=function(){var e,t;this.mask&&GameCore.Configs.EnableEffectSceneTransition&&(null==(e=this.fadeInAnim)||e.remove(),null==(t=this.fadeOutAnim)||t.remove(),this.fadeInAnim=new a.Z({targets:[this.mask],duration:400,ease:Phaser.Math.Easing.Cubic.In,props:{alpha:{start:0,from:0,to:.6}}}),this.mask.setAlpha(0),this.fadeInAnim.play())},n.runMaskFadeOutAnimation=function(){var e,t;this.mask&&GameCore.Configs.EnableEffectSceneTransition&&(null==(e=this.fadeInAnim)||e.remove(),null==(t=this.fadeOutAnim)||t.remove(),this.fadeOutAnim=new s.Z({targets:[this.mask],duration:400,ease:Phaser.Math.Easing.Cubic.Out,props:{alpha:{start:.6,from:.6,to:0}}}),this.mask.setAlpha(1),this.fadeOutAnim.play())},n.listenScenesEvents=function(){var e=this;this.scene.manager.getScenes(!1).forEach((function(t){t.events.on(Phaser.Scenes.Events.CREATE,e.emitGameEventStartScene),t.events.on(Phaser.Scenes.Events.SLEEP,e.emitGameEventSleepScene),t.events.on(Phaser.Scenes.Events.WAKE,e.emitGameEventWakeScene),t.events.on(Phaser.Scenes.Events.PAUSE,e.emitGameEventPauseScene),t.events.on(Phaser.Scenes.Events.RESUME,e.emitGameEventResumeScene),t.events.on(Phaser.Scenes.Events.SHUTDOWN,e.emitGameEventShutdownScene)})),this.events.on(c.K.SWITCH,this.switchScene)},n.getActiveScene=function(){return this.scene.manager.getScenes(!0)[0]},n.getCurrentScene=function(){return this.currentScene},n.updateActiveSceneKey=function(e){e!==c.C.GLOBAL_SCENE&&this.storage.dispatch((0,l.I)(e))},n.logEventOpen=function(){},n.logPageviewOnOpen=function(){},(0,i.Z)(t,[{key:"currentScene",get:function(){var e=this.storage.getState(),t=h(e);return(t?this.scene.manager.getScene(t):this.getActiveScene()).scene}}]),t}(p.Z),R=O},function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var i=n(2),r=n(0),a=n(8),s=n(4),o={targets:[],duration:600,ease:Phaser.Math.Easing.Linear,props:{angle:{from:0,to:360}}},c=function(e){function t(t){return e.call(this,o,t)||this}return(0,r.Z)(t,e),t}(s.Z),u=a.Z.DEFAULT,l=u.KEY,h=u.FRAME,d=function(e){function t(t){var n;return(n=e.call(this,t,0,0,l,h.PRELOADER)||this).anim=void 0,n.runAnimation(),n.setWorldSize(113,113),n.scene.add.existing((0,i.Z)(n)),n}(0,r.Z)(t,e);var n=t.prototype;return n.runAnimation=function(){var e;null==(e=this.anim)||e.remove(),this.anim=new c({targets:[this],repeat:-1,duration:1200}),this.anim.play()},n.setVisible=function(t){return e.prototype.setVisible.call(this,t),t?this.runAnimation():this.anim.stop(),this},t}(Phaser.GameObjects.Image)},function(e,t,n){"use strict";var i=n(0),r=n(4),a={targets:[],duration:300,ease:n(17).Z,props:{scale:{from:1.2,to:1}}},s=function(e){function t(t){return e.call(this,a,t)||this}return(0,i.Z)(t,e),t}(r.Z);t.Z=s},function(e,t,n){"use strict";var i=n(0),r=n(4),a={targets:[],duration:600,ease:Phaser.Math.Easing.Cubic.Out,props:{alpha:{start:0,from:0,to:1}}},s=function(e){function t(t){return e.call(this,a,t)||this}return(0,i.Z)(t,e),t}(r.Z);t.Z=s},function(e,t,n){"use strict";var i=n(0),r=n(4),a={targets:[],duration:600,ease:Phaser.Math.Easing.Quadratic.Out,props:{alpha:{start:1,from:1,to:0}}},s=function(e){function t(t){return e.call(this,a,t)||this}return(0,i.Z)(t,e),t}(r.Z);t.Z=s},function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var i=n(0),r=n(7),a=function(e){function t(t,n,i){var r;return(r=e.call(this,t,0,0,n,i)||this).setOrigin(0,0),r}return(0,i.Z)(t,e),t}(Phaser.GameObjects.Zone),s=n(37),o=n(49),c=function(e){function t(){var t;return(t=e.call(this,{visible:!1})||this).unsubscribeList=void 0,t.gameZone=void 0,t.background=void 0,t.handleOpenScene=function(){t.logPageviewOnOpen(),t.logEventOpen()},t.handleResize=function(){if(t.background&&t.gameZone){var e=t.world.getResizeEventData(),n=e.width,i=e.height;t.gameZone.setSize(n,i),t.background.setPosition(n/2,i/2),t.background.setDisplaySize(n,i),t.events.emit(o.Z.LAYOUT_UPDATE)}},t.removeStateChange=function(){t.unsubscribeList.forEach((function(e){return e()}))},t}(0,i.Z)(t,e);var n=t.prototype;return n.create=function(){this.events.on("wake",this.handleOpenScene),this.events.on("resume",this.handleOpenScene),this.events.on("create",this.handleOpenScene),this.world.events.on(s.Z.RESIZE,this.handleResize),this.scaleGame(),this.createGameZone()},n.scaleGame=function(){var e=this.getCamera("main"),t=this.world.getZoomRatio(),n=this.world.getWorldSize(),i=n.width,r=n.height;e.setZoom(t),e.centerOn(i/2,r/2)},n.createGameZone=function(){var e=this.world.getWorldSize(),t=e.width,n=e.height;this.gameZone=new a(this,t,n)},n.getCamera=function(e){return"main"===e?this.cameras.main:this.cameras.getCamera(e)},n.createMask=function(e){void 0===e&&(e=1),this.getCamera("main").setBackgroundColor("rgba(0, 0, 0, "+e+")")},n.fontSize=function(e){return e/1},n.createBackground=function(e,t,n,i){this.background?(this.background.setTexture(e),t&&this.background.setFrame(t)):this.background=this.make.image({key:e,frame:t}),this.background.setName(e);var r=this.gameZone,a=r.displayWidth,s=r.displayHeight;this.background.setDisplaySize(a,s),GameCore.Utils.Valid.isNumber(n)&&this.background.setAlpha(n),GameCore.Utils.Valid.isNumber(i)&&this.background.setTint(i),Phaser.Display.Align.In.Center(this.background,this.gameZone)},n.handleStateChange=function(e){var t=this;this.unsubscribeList=[],e.forEach((function(e){var n=e.selector,i=e.callback,r=t.storage.watch(n,i);t.unsubscribeList.push(r)})),this.events.once("sleep",this.removeStateChange),this.events.once("destroy",this.removeStateChange),this.events.once("shutdown",this.removeStateChange)},n.logPageviewOnOpen=function(){this.analytics.pageview(this.scene.key)},n.logEventOpen=function(){this.analytics.event(r._.SCREEN_OPEN,{screen_name:this.getSceneName()})},n.getSceneName=function(){return GameCore.Utils.String.toUpperCamelCase(this.scene.key.toLowerCase())},t}(Phaser.Scene)},function(e,t){"use strict";t.Z={LAYOUT_UPDATE:"layout-update"}},function(e,t,n){"use strict";var i=n(0),r=n(4),a={targets:[],duration:400,ease:n(17).Z,props:{scale:"-=0.1"}},s=function(e){function t(t){return e.call(this,a,t)||this}return(0,i.Z)(t,e),t}(r.Z);t.Z=s},function(e,t,n){"use strict";var i=n(6),r=n(2),a=n(0),s=n(7),o=n(50),c=n(10),u=n(42),l=n(14),h=function(e){function t(t,n,i,a,s,l){var h;return void 0===l&&(l=!1),(h=e.call(this,t)||this).useSound=!0,h.isClicked=!1,h.scaleUp=-1,h.scaleDown=-1,h.button=void 0,h.upAnimation=void 0,h.downAnimation=void 0,h.isUsePixelPerfect=!1,h.hitArea=void 0,h.hitZone=void 0,h.scaleDownPress=void 0,h.parentName=void 0,h.handelObjectDestroy=function(){h.scene&&h.scene.events.off(Phaser.Scenes.Events.SLEEP,h.handleSceneSleep)},h.handleSceneSleep=function(){h.scene&&h.scene.tweens.killTweensOf((0,r.Z)(h))},h.handlePointerDown=function(){var e;h.isClicked||null!=(e=h.upAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(h.isClicked=!0,h.runDownAnimation())},h.handleOnClick=function(e){return function(){var t,n;h.isClicked&&(null!=(t=h.upAnimation)&&null!=(t=t.tween)&&t.isPlaying()||(h.isClicked=!1,h.runUpAnimation(),null==(n=h.upAnimation)||null==(n=n.tween)||n.once(Phaser.Tweens.Events.TWEEN_COMPLETE,(function(){h.logButtonEvent(),h.addDebugData(),h.processCallback(e)}))))}},h.handlePointerOut=function(){var e;h.isClicked&&(null!=(e=h.upAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(h.isClicked=!1,h.runUpAnimation()))},h.runDownAnimation=function(){var e;-1===h.scaleDown&&(h.scaleUp=h.scale,h.scaleDown=h.scaleDownPress),h.useSound&&h.scene.audio.playSound(u.Z.BUTTON_CLICK),null==(e=h.downAnimation)||e.remove(),h.downAnimation=new o.Z({targets:[(0,r.Z)(h)],duration:100,props:{scale:h.scaleDown},onUpdate:function(){h.hitZone.scale=1/h.scale}}),h.downAnimation.play()},h.runUpAnimation=function(){var e;-1!==h.scaleUp&&(null==(e=h.upAnimation)||e.remove(),h.upAnimation=new o.Z({targets:[(0,r.Z)(h)],duration:250,ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.3],props:{scale:h.scaleUp},onUpdate:function(){h.hitZone.scale=1/h.scale}}),h.upAnimation.play())},h.isUsePixelPerfect=l,h.setDepth(c.Z.BUTTON),h.createButton(n,i,a,s),h.updateSize(),h.listenEvents(),h.scene.add.existing((0,r.Z)(h)),h}(0,a.Z)(t,e);var n=t.prototype;return n.listenEvents=function(){this.scene.events.on(Phaser.Scenes.Events.SLEEP,this.handleSceneSleep),this.once(Phaser.GameObjects.Events.DESTROY,this.handelObjectDestroy)},n.processCallback=function(e){var t,n,i;null==(t=this.upAnimation)||t.stop(),null==(n=this.downAnimation)||n.stop(),null==(i=this.scene)||i.tweens.killTweensOf(this),-1!==this.scaleUp&&this.setScale(this.scaleUp),e()},n.setDisabled=function(e){var t,n;e?null==(t=this.hitArea)||t.disableInteractive():null==(n=this.hitArea)||n.setInteractive()},n.createButton=function(e,t,n,i){this.button=this.scene.add.image(0,0,e,t),n&&i&&this.button.setWorldSize(n,i),this.scaleDownPress=this.scale-.1;var r=this.button,a=r.displayWidth,s=r.displayHeight;this.hitZone=this.scene.make.zone({displayWidth:a,displayHeight:s}),this.add([this.button,this.hitZone])},n.updateSize=function(){var e=this.button,t=e.width,n=e.height,i=t/100*10,r=n/100*10,a=i<10?i:10,s=r<10?r:10;this.setSize(t+a,n+s),this.hitZone.setSize(t+a,n+s)},n.addDebugData=function(){var e=this.getParentName(),t=this.name;(0,l.sw)("ui-click",e+":"+t)},n.logButtonEvent=function(){var e=this.getParentName(),t=this.name;this.scene.analytics.event(s._.BUTTON_CLICK,{button_name:t,screen_name:e})},n.getParentName=function(){if(this.parentName)return this.parentName;for(var e=this.parentContainer;e;){if(e instanceof GameCore.Screen){var t=e;return this.parentName=t.getScreenName(),this.parentName}e=e.parentContainer}return this.parentName=this.scene.getSceneName(),this.parentName},(0,i.Z)(t,[{key:"onClick",set:function(e){this.isUsePixelPerfect?(this.hitArea=this.button,this.hitArea.setInteractive({useHandCursor:!0,pixelPerfect:!0})):(this.hitArea=this.hitZone,this.updateSize(),this.hitArea.setInteractive({useHandCursor:!0})),this.hitArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.handlePointerDown),this.hitArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,this.handleOnClick(e)),this.hitArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,this.handlePointerOut)}},{key:"isUsePixelPerFect",get:function(){return this.isUsePixelPerfect}}]),t}(Phaser.GameObjects.Container);t.Z=h},,,function(){HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(e,t,n){for(var i=atob(this.toDataURL(t,n).split(",")[1]),r=i.length,a=r>>2,s=new Uint8Array(r),o=new Uint32Array(s.buffer,0,a),c=0,u=0;c<a;c++)o[c]=i.charCodeAt(u++)|i.charCodeAt(u++)<<8|i.charCodeAt(u++)<<16|i.charCodeAt(u++)<<24;for(var l=3&r;l--;)s[u]=i.charCodeAt(u++);e(new Blob([s],{type:t||"image/png"}))}})},function(e,t,n){"use strict";var i=function(e,t){return void 0===t&&(t=1),Array.from({length:Math.ceil(e.length/t)},(function(n,i){return e.slice(i*t,i*t+t)}))},r=function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),i=[e[n],e[t]];e[t]=i[0],e[n]=i[1]}},a=function(e,t,n){return n.indexOf(e)===t&&null!==e&&void 0!==e},s=function(e){return e.filter(a)},o={chunk:i,difference:function(e,t){return e.filter((function(e){return!t.includes(e)}))},shuffle:r,unique:s},c=n(22),u=n.n(c),l=u()((function(e,t){if("string"===typeof e){var n=t[e.toLowerCase()];if("string"===typeof n)return n}return"?"})),h=u()((function(e){for(var t=null,n=[],i=/:([A-Z0-9?]+)/gm;null!==(t=i.exec(e));)n.push(t[1]);return n})),d=u()((function(e){for(var t=null,n=[],i=/([0-9]+[A-Z?]{1}|[A-Z?]{1})/gm;null!==(t=i.exec(e));){var r=t[0];if(r.length>=2){var a=r.length,s=r.slice(0,a-1),o=r[a-1],c=new Array(+s).fill(o);n.push.apply(n,c)}else n.push(r)}return n})),p=function(e,t){var n=e,i=GameCore.Utils.Object.invert(t),r={},a=0,s=0;return h(n).forEach((function(e){a=0,s++,r[s]||(r[s]={}),d(e).forEach((function(e){a++,r[s][a]=l(e,i)}))})),r},f=u()((function(e,t){var n=t[e];return"string"===typeof n?""+n.toUpperCase():"?"})),m=function e(t,n,i){void 0===i&&(i=!1);var r="";if(!GameCore.Utils.Valid.isObject(t))return r;var a="",s=1;for(var o in t)if(GameCore.Utils.Object.hasOwn(t,o)){var c=t[o];if(GameCore.Utils.Valid.isObject(c))r+=":"+e(c,n,!0);else if(GameCore.Utils.Valid.isString(c)){var u=f(c,n);u===a?(s++,r=r.slice(0,-2)):s=1,r+=""+s+u,a=u}}return r=r.replace(/1([A-Z])/g,"$1")},g=function(e){try{return atob(e)}catch(t){return""}},v={decodeMap:p,encodeMap:m,hashToString:g,stringToHash:function(e){try{return btoa(e)}catch(t){return""}}},y=function(e){try{return JSON.parse(e)}catch(t){return null}},b=function(e){try{return JSON.stringify(e,null,0)}catch(t){return""}},A=function(e){return y(b(e))},S={clone:A,decode:y,encode:b},E=function(e){var t="object"===typeof e||"function"===typeof e,n=Array.isArray(e);return null!==e&&t&&!n},w=function(e){return void 0===e||null===e},C=function e(t){if(!E(t))return t;for(var n in t){w(t[n])&&delete t[n];var i=t[n];E(i)&&(t[n]=e(i))}return t},T=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},I=function(e){var t={};return Object.keys(e).forEach((function(n){if(T(e,n)){var i=e[n];"string"===typeof i&&(t[i]=n)}})),t},x=function(e,t){if(!Array.isArray(e))return{};var n={};return e.forEach((function(e){if(T(e,t)){var i=e[t];"string"===typeof i&&(n[i]=e)}})),n},k={clear:C,hasOwn:T,invert:I,keyBy:x},P=function(e){var t=0;if(0==e.length)return t;for(var n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t&=t}return t},L=function(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[\u0111\u0110]/g,(function(e){return"\u0111"===e?"d":"D"}))},O=function(e,t){var n=e.split(" "),i=(n.length<=1?[].concat(n):[n[0],n.pop()]).join(" "),r=i.lastIndexOf(" ")||0,a=r>=0?r:t;return(i.length>t?i.substring(0,a):i).substring(0,t)},R=function(e){void 0===e&&(e=16);var t=function(t){return Math.floor(t).toString(e)};return t(Date.now()/1e3)+" ".repeat(e).replace(/./g,(function(){return t(Math.random()*e)}))},D={capitalize:function(e){return e?e[0].toUpperCase()+e.slice(1):e},hashCode:P,params:function(e){return Object.keys(e).reduce((function(t,n){var i=e[n];return void 0!==i&&t.push(n+"="+i),t}),[]).join("&")},toCamelCase:function(e){var t=e.replace(/[-_\s.]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}));return t.substr(0,1).toLowerCase()+t.substr(1)},toUpperCamelCase:function(e){var t=e.replace(/[-_\s.]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}));return t.substr(0,1).toUpperCase()+t.substr(1)},randomColor:function(e){void 0===e&&(e="0x");for(var t=e,n=0;n<6;n++)t+="0123456789ABCDEF"[Math.floor(16*Math.random())];return t},random:n(26).Z,removeDiacritics:L,getShortName:O,generateObjectId:R},B={isBoolean:function(e){return"boolean"===typeof e},isDebugger:function(){return!1},isFunction:function(e){return"function"===typeof e},isNumber:function(e){return"number"===typeof e},isObject:E,isPropertyKey:function(e){return["string","number","symbol"].indexOf(typeof e)>-1},isString:function(e){return"string"===typeof e},isValueChangeAsync:function(e,t,n){var i=n||{},r=i.timeout,a=void 0===r?1e3:r,s=i.checkInterval,o=void 0===s?100:s;return new Promise((function(n){var i=setInterval((function(){("function"===typeof e?e():e)===("function"===typeof t?t():t)&&(clearInterval(i),n(!0))}),o);a>0&&setTimeout((function(){clearInterval(i),n(!1)}),a)}))}},N=function(e){var t=e.scene,n=e.key,i=e.newKey,r=t.textures.get(n).getSourceImage();if(!r)return!1;var a=Math.min(r.width,r.height);i||t.textures.removeKey(n);var s=t.textures.createCanvas(i||n,a,a),o=s.context;return o.beginPath(),o.arc(a/2,a/2,a/2,0,2*Math.PI,!1),o.clip(),s.draw((r.width-a)/2,(r.height-a)/2,r),!0},M=function(e){var t=e.scene,n=e.key,i=e.newKey,r=e.radius,a=e.width,s=e.height,o=t.textures.get(n).getSourceImage();if(!o)return!1;a||(a=o.width),s||(s=o.height),i||t.textures.removeKey(n);var c=t.textures.createCanvas(i||n,a,s),u=c.context,l=Math.min(a,s)/100*r/2;return u.beginPath(),u.moveTo(0+l,0),u.lineTo(0+a-l,0),u.quadraticCurveTo(0+a,0,0+a,0+l),u.lineTo(0+a,0+s-l),u.quadraticCurveTo(0+a,0+s,0+a-l,0+s),u.lineTo(0+l,0+s),u.quadraticCurveTo(0,0+s,0,0+s-l),u.lineTo(0,0+l),u.quadraticCurveTo(0,0,0+l,0),u.closePath(),u.clip(),c.draw(0,0,o),!0},_=function(){return GameCore.Utils.Device.isDesktop()||GameCore.Utils.Device.pixelRatio()>1?2:1},Z=function(e,t){var n=e.split(","),i=n[0].match(/:(.*?);/);if(!i)return null;for(var r=i[1],a=atob(n[n.length-1]),s=a.length,o=new Uint8Array(s);s--;)o[s]=a.charCodeAt(s);return new File([o],t,{type:r})},G=new Image,U=function(e,t){return void 0===t&&(t=!0),new Promise((function(n){t&&(G=new Image),G.onload=function(){n(G)},G.onerror=function(){n(null)},G.src=URL.createObjectURL(e)}))},F=n(3),H=n(1),z=n.n(H),K=function(){var e=(0,F.Z)(z().mark((function e(t,n){var i;return z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t).then((function(e){return e.blob()})).catch((function(){return null}));case 2:if(i=e.sent){e.next=5;break}return e.abrupt("return",null);case 5:return e.abrupt("return",new File([i],n));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Y=function(e){if(e.indexOf(".")<0)return e;for(var t=e.length-1;t>=0;t--){if("."==e[t])return e.substring(0,t);if("0"!=e[t])return e.substring(0,t+1)}return e},W=function(e,t){var n=t||{},i=n.fractionalDigits,r=void 0===i?0:i,a=n.startAbbreviate,s=void 0===a?1e3:a,o=n.abbreviateStep,c=void 0===o?3:o,u=n.maxLength,l=void 0===u?-1:u,h=n.removeLastZero,d=void 0===h||h,p=n.suffixes,f=void 0===p?["","k","m","b","t","q"]:p,m=-1===l?99999999:l;if(e>=s){var g=Math.floor(e/Math.pow(10,c)),v=Math.floor((g.toString().length-1)/c)+1,y=(e/Math.pow(Math.pow(10,c),v)).toFixed(r),b=m-f[v].length,A=y.substring(0,b);return(d?Y(A):A)+f[v]}var S=e.toFixed(r),E=m-f[0].length,w=S.substring(0,E);return d?Y(w):w+f[0]},j={Array:o,Hash:v,Json:S,Object:k,String:D,Valid:B,Image:{drawCircle:N,drawBorder:M,getImageScale:_,base64ToFile:Z,blobToHtmlImage:U,blobUrlToFile:K},Number:{toAbbreviatedString:W,padStart:function(e,t,n){void 0===n&&(n="0");for(var i=e.toString(),r=i.length,a=0;a<t-r;a++)i=n+i;return i},padEnd:function(e,t,n){void 0===n&&(n="0");for(var i=e.toString(),r=i.length,a=0;a<t-r;a++)i+=n;return i}},Device:{isDesktop:function(){return!/Android|iPhone|iPad|iPod/i.test(navigator.userAgent)},isMobile:function(){return/Android|iPhone|iPad|iPod/i.test(navigator.userAgent)},isAndroid:function(){return window.__fbPlatform?"ANDROID"===window.__fbPlatform:/Android/i.test(navigator.userAgent)},isIOS:function(){return window.__fbPlatform?"IOS"===window.__fbPlatform:/iPhone|iPad|iPod/i.test(navigator.userAgent)},isMobileWeb:function(){return window.__fbPlatform?"MOBILE_WEB"===window.__fbPlatform:/mobile/i.test(navigator.userAgent)},pixelRatio:function(){return Math.round(window.devicePixelRatio)||1}},Time:{isToday:function(e){var t=new Date(e),n=new Date;return t.getDate()===n.getDate()&&t.getMonth()===n.getMonth()&&t.getFullYear()===n.getFullYear()},sleepAsync:function(e){return new Promise((function(t){return setTimeout(t,e)}))}}},V=n(5),q=n(12),X={AppId:"3602662493384735",Ads:{BannerAdOptions:[{bannerHeight:600,bannerWidth:160,placementId:"456",platform:"DESKTOP",position:"right",secondsReload:60}]}},J={ENV:"production",Notification:{Enable:!1},LeadersBoard:{Prefix:"leaderboards"},Debugger:{ShowConsole:!1,ShowInspector:!1,ShowMonitoring:!1},Statistics:{Enable:!1,ShowFPSInGame:!1,ShowMemoryInGame:!1}},Q={ENV:"development",AppId:"577934723914393",ApiHost:"https://fbig-singleplay-apps-dev.sunstudio.io",OtherHost:"https://leaderboards-dev.sunstudio.io",SyncProfileFromAPI:!0,Level:{url:"./assets/levels-compress/",maxLevel:2e4,alwaysLoadNew:!1,retryCount:3,retryDelay:2e3},Notification:{Enable:!0,DisableSendNotification:!1,ApiUrl:"https://notifications.sunstudio.io",GameTitle:"Sun Studio",GameImage:"https://sunstudio.io/images/logo.png",DailyNotificationMessages:{MONDAY:"Your daily dose of cuteness! \ud83e\udd70 Complete the puzzle to see the adorable cat of the day. ",TUESDAY:"Puzzle time is anytime! \u23f0 Take a break and enjoy a quick game with your kitty companions.",WEDNESDAY:"Your kitties are calling! \ud83d\udce2 Return to the game for a heartwarming reunion and a fun puzzle.",THURSDAY:"Your virtual kitties are feeling lonely! \ud83d\ude3f Come back and give them some company with a quick game.",FRIDAY:"It's a purr-fect day to play! \ud83c\udf1e Jump in and enjoy a cozy puzzle with your favorite feline friends.",SATURDAY:"Feline fine? \ud83d\ude38 Show off your puzzle-solving prowess in today's game!",SUNDAY:"Your puzzle pals are waiting! \ud83d\udc31 Come back and play to see what's new in the world of whiskers."}},AddShortcut:{UseMock:!1},SubscribeBot:{UseMock:!1},PlayerMock:{id:"",signature:""},OpponentMock:{id:"",signature:""},MatchMockFailRate:5,Gameplay:{UndoCount:5,UndoClaim:5,HintCount:2,HintClaim:2,EnableVibrate:!0},Tutorial:{LevelTutorial:[1],LevelRuleTutorial:[2]},PlayerDataStore:"playerData",Game:{AutoResize:!0,PortraitRatio:450/667,PortraitWidth:375,PortraitHeight:667,LandscapeRatio:375/667,LandscapeWidth:375,LandscapeHeight:667,ForcePixelRatio:0,DisableLandscape:!1,FullSizeOnLandscape:!1},Debugger:{ShowInspector:!1,ShowMonitoring:!1,ShowConsole:!1,Expanded:!0,AutoRefresh:!0,InspectorAutoUpdate:!0,Opacity:.8,ListPlayerDevIds:[]},Statistics:{Enable:!1,DisplayMode:0,FPS:!0,MS:!0,MB:!0,Opacity:.8,ShowFPSInGame:!0,ShowMemoryInGame:!1},ParticleEditor:{Enable:!1,Opacity:.8,Expanded:!0},ProfilerPlugin:{Enable:!1},CanvasRecorder:{Enable:!1,Options:{Type:"png",Quality:.85,RecordFps:60,SyncFps:!0}},Match:{MaxRescueCount:1,RescueGamePopupTimeout:15,ContinueSingleMatchEnabled:!1,SingleMatchStore:"singleMatch",LocalSingleMatchDefault:{_id:"12345678890",status:"open",playerId:"",score:0,level:1,startedAt:0,updateAt:0,finishAt:0,data:{}}},DailyRewards:{MaxDays:6,MockTime:0,CheckInterrupt:!0},DailyCountItems:{ForceNewDay:!1},DailyTasks:{Duration:86400},Tournament:{UseMock:!1,ForcePlay:!1,UseLeaderboard:!1,TournamentContextIds:[],YourMockTournamentCount:1},LeadersBoard:{Name:null,UseMock:!1,Prefix:"leaderboards",LeaderboardId:"62c2b488b2198c615726a99f",Limit:50,MockOptions:{PlayerEntryIndex:-1}},LanguageSupport:{en:"en"},EnableEffectSceneTransition:!0,DefaultTheme:"default",ThemeSupport:{default:"default"},Ads:{Enabled:!0,CalculateSafeAreaBottom:!0,EnableRewardVideoResetInterstitial:!1,Mockup:{Enable:!1,ErrorRate:5,GiphyApiKey:""},InterstitialAdOptions:{pID:"",showWhenStartGame:!1,secondsFirstTime:30,secondsBetweenAds:30},RewardAdOptions:{pID:"",secondsFirstTime:0,secondsBetweenAds:0},BannerAdOptions:[{placementId:"123",position:"bottom",bannerWidth:320,bannerHeight:50,platform:"MOBILE",secondsReload:60},{placementId:"456",position:"right",bannerWidth:160,bannerHeight:600,platform:"DESKTOP",secondsReload:60}]},Network:{MaximumRequest:6,Timeout:15e3,Retries:3},Analytics:{GoogleAnalytics:{consoleLog:!1},FacebookAnalytics:{prefix:"fba",consoleLog:!1}},Sentry:{errorCodes:{accepted:[],ignored:["USER_INPUT","NETWORK_FAILURE"]},errorMessages:{accepted:[],ignored:["Load image failed","Script error."]}},Rollbar:{Enable:!1,UseMockup:!1,FilterError:{Codes:{accepted:[],ignored:["USER_INPUT","NETWORK_FAILURE"]},Messages:{accepted:[],ignored:["Load image failed","Request failed to be processed","Script error."]}}},Performance:{Enable:!1,trackingSceneKeys:["DASHBOARD_SCENE","GAME_SCENE"],minQuality:1,maxQuality:2,fpsThreshold:48,checkInterval:2e3,qualityAdjustStep:.1,autoUpgradeQuality:!0,onlyUpdateWhenSwitchScene:!0}};Q=(0,q.TS)((0,V.Z)({},Q),J);var $=Q=(0,q.TS)((0,V.Z)({},Q),X),ee=function(e){return function(t){try{var n=window.game,i=t.module;if(n.scene.getScenes(!0)[0].scene.key!==e)return;var r=i.default;n.scene.remove(e),n.scene.add(e,r,!0),n.scene.bringToTop(n.globalScene),console.log("%c HotScene: ","font-size:12px;background-color: #465975;color:#fff;",e)}catch(s){var a;null==(a=void 0)||a.invalidate()}}},te=n(13),ne=!1,ie=function e(t,n,i){n.forEach((function(n){if(n.name){var r=null;if(r=i?i.getByName(n.name):t.children.getByName(n.name),ne&&console.log("%c Checking object: ","font-size:12px;background-color: #465975;color:#fff;",n.name,n.type),r){if("Container"===n.type){var a=r,s=n.getAll();if(e(t,s,a),!a.hotContainer)return;console.log("%c Update container: ","font-size:12px;background-color: #33A5FF;color:#fff;",a.name)}var o=Reflect.ownKeys(n),c=["_events","_sysEvents","input","localTransform","list","displayList"],u=o.filter((function(e){if("string"!==typeof e)return!1;if(c.indexOf(e)>=0)return!1;if(!r)return!1;var t=Reflect.get(n,e);return!(t instanceof Function)&&(!(t instanceof Phaser.Scene)&&(!(t instanceof Phaser.GameObjects.Group)&&(!(t instanceof Phaser.GameObjects.GameObject)&&t===Reflect.get(r,e))))}));u.length<1||(ne&&console.log("%c HotObject: ","font-size:12px;background-color: #2EAFB0;color:#fff;",n.name,u),u.forEach((function(e){if(r){var t=Reflect.get(n,e),i=Reflect.get(r,e),a=Reflect.set(r,e,t);ne&&console.log("%c Update property: ","font-size:12px;background-color: #B03734;color:#fff;",a,e,{oldValue:i,newValue:t})}})))}}}))},re={Configs:$,Utils:j,LiveUpdate:{Scene:ee,SceneObjects:function(e,t){return void 0===t&&(t=ne),function(n){try{var i=window.game,r=n.module,a=i.scene.getScenes(!0)[0];if(a.scene.key!==e)return;ne=t;var s=r.default,o=e+"-draft";i.scene.remove(o);var c=i.scene.add(o,s);console.log("%c HotSceneObjects: ","font-size:12px;background-color: #465975;color:#fff;",e),a=i.scene.getScene(e),c.events.once(Phaser.Scenes.Events.RENDER,(0,te.D)((function(){var e=c.children.getAll();ie(a,e),i.scene.remove(o)})),50),i.scene.run(o),i.scene.bringToTop(a),i.scene.bringToTop(i.globalScene)}catch(u){console.warn(u)}}}}};window.GameCore=re},function(e,t,n){"use strict";var i=n(14),r=n(28),a=n(5),s=n(3),o=n(0),c=n(1),u=n.n(c),l=n(52),h=n(59),d=0,p=0,f=function(){function e(e){this.game=void 0,this.progressFbTimeEvent=void 0,this.game=e}var t=e.prototype;return t.loadingProgressFbBootScene=function(){var e=this,t=100;p=30;!function n(){t<=0?clearTimeout(e.progressFbTimeEvent):e.progressFbTimeEvent=setTimeout((function(){e.game.facebook.setLoadingProgress(Math.round(p)),p+=30/t,t--,n()}),50)}()},t.finishLoadingProgressFbBootScene=function(){clearTimeout(this.progressFbTimeEvent)},t.loadingProgressFbLoadScene=function(){var e=this;(!p||p<30)&&(p=60),d=p;!function t(){e.progressFbTimeEvent=setTimeout((function(){e.game.facebook.setLoadingProgress(Math.round(p)),p+=.1,t()}),50)}()},t.onProgress=function(e){var t=100-p,n=Math.round(e*t+p);n>d&&clearTimeout(this.progressFbTimeEvent),this.game.facebook.setLoadingProgress(n)},e}(),m=f,g=function(){function e(e){this.game=void 0,this.game=e}var t=e.prototype;return t.addKillRevive=function(){var e=this;[Phaser.GameObjects.Container,Phaser.GameObjects.Image,Phaser.GameObjects.Sprite,Phaser.GameObjects.Graphics,Phaser.GameObjects.Text,Phaser.GameObjects.BitmapText,Phaser.GameObjects.Particles.ParticleEmitter,Phaser.GameObjects.Particles.ParticleEmitterManager].forEach((function(t){t.prototype.kill=e.kill,t.prototype.revive=e.revive}))},t.addKillReviveGroup=function(){Phaser.GameObjects.Group.prototype.killGroup=this.killGroup,Phaser.GameObjects.Group.prototype.reviveGroup=this.reviveGroup},t.addSetWorldSize=function(){var e=this;[Phaser.GameObjects.Image,Phaser.GameObjects.Sprite].forEach((function(t){t.prototype.setWorldSize=e.setWorldSize}))},t.addSetWorldSizeForContainer=function(){var e=this;[Phaser.GameObjects.Container].forEach((function(t){t.prototype.setWorldSize=e.setWorldSizeForContainer}))},t.addGetWorldPosition=function(){var e=this;[Phaser.GameObjects.Container,Phaser.GameObjects.Image,Phaser.GameObjects.Sprite,Phaser.GameObjects.Graphics,Phaser.GameObjects.Text,Phaser.GameObjects.BitmapText].forEach((function(t){t.prototype.getWorldPosition=e.getWorldPosition}))},t.addDrawDebugBox=function(){var e=this;[Phaser.GameObjects.Container,Phaser.GameObjects.Image,Phaser.GameObjects.Sprite,Phaser.GameObjects.Graphics,Phaser.GameObjects.Text,Phaser.GameObjects.BitmapText,Phaser.GameObjects.Zone].forEach((function(t){t.prototype.drawDebugBox=e.drawDebugBox}))},t.addHighQuality=function(){var e=this;[Phaser.GameObjects.Text].forEach((function(t){t.prototype.setHighQuality=e.setHighQuality}))},t.addSetLineHeightForBitmapText=function(){Phaser.GameObjects.BitmapText.prototype.setLineHeight=function(e){this.lineHeight=e,this.updateDisplayOrigin()}},t.kill=function(){this.setActive(!1),this.setVisible(!1)},t.revive=function(){this.setActive(!0),this.setVisible(!0)},t.killGroup=function(){this.getChildren().forEach((function(e){e.setActive(!1),e.setVisible(!1)}))},t.reviveGroup=function(){this.getChildren().forEach((function(e){e.setActive(!0),e.setVisible(!0)}))},t.setWorldSize=function(e,t){this.setSize(e,t),this.setDisplaySize(e,t)},t.setWorldSizeForContainer=function(e,t,n){void 0===n&&(n=2),this.setSize(e*n,t*n),this.setDisplaySize(e,t)},t.getWorldPosition=function(){var e=this.getWorldTransformMatrix().decomposeMatrix();return{x:e.translateX,y:e.translateY}},t.drawDebugBox=function(e,t){var n=this.x,i=this.y,r=this.width,a=this.height,s=this.depth,o=this.originX,c=this.originY,u=this.scene.add.rectangle(n,i,r,a,e,t);u.setName("Debug Box"),u.setDepth(s);var l=GameCore.Utils.Valid.isNumber;return l(o)&&l(c)&&u.setOrigin(o,c),u},t.setHighQuality=function(){return this.renderer instanceof Phaser.Renderer.WebGL.WebGLRenderer?this.setResolution(2*this.scene.game.world.getZoomRatio()):this},e}(),v=g,y=[{url:"./assets/images/others/mock1.jpg",title:"Buy lottery tickets on behalf",description:"\ud83d\udca5\ud83d\udca5\ud83d\udca5 Place an order for lottery tickets from 3 regions!!! \u2705 Fast - Convenient - Safe \u2705 Diverse products \u2705 Payment...",buttonName:"Discover more"},{url:"./assets/images/others/mock2.jpg",title:"SYSTEM-WIDE SALE UP TO 50%",description:'\ud83d\udd25 \ud835\uddec\ud835\uddd8\ud835\uddd4\ud835\udde5 \ud835\uddd8\ud835\udde1\ud835\uddd7 \ud835\udde6\ud835\uddd4\ud835\udddf\ud835\uddd8 | \ud835\udde8\ud835\udde3 \ud835\udde7\ud835\udde2 \ud835\udff1\ud835\udfec% "BIG PARTY" AUTHENTIC SPORTSWEAR SHOCKINGLY REDUCED PRICES! \ud83c\udf81 From...',buttonName:"Discover more"},{url:"./assets/images/others/mock3.jpg",title:"Register now",description:"Play safe, play fun, play 9club!",buttonName:"Register"}],b=function(){function e(){}return e.loadBannerAdAsync=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i,r,a,s,o,c,l,h;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.currentIdx=(this.currentIdx+1)%y.length,this.hideBannerAdAsync(),e.next=4,new Promise((function(e){setTimeout((function(){e()}),2e3)}));case 4:if(!document.getElementById("mock-banner-ads")){e.next=16;break}return t=y[this.currentIdx],n=t.url,i=t.buttonName,r=t.title,a=t.description,(s=document.getElementById("banner-content-text1"))&&(s.innerHTML=r),(o=document.getElementById("banner-content-text2"))&&(o.innerHTML=a),(c=document.getElementById("mock-banner-ads-avatar"))&&(c.style.background="url("+n+") center center/contain no-repeat"),(l=document.getElementById("banner-content-button"))&&(l.innerHTML=i),e.abrupt("return");case 16:h=GameCore.Utils.Device.isDesktop(),50,h?this.createDesktopBannerAd(50):this.createMobileBannerAd(50);case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e.createDesktopBannerAd=function(e){var t=this,n=y[this.currentIdx],i=n.url,r=n.buttonName,a=n.title,s=n.description,o=document.createElement("div");o.id="mock-banner-ads",o.style.width="100%",o.style.height=e+"px",o.style.bottom="var(--sab)",o.style.display="flex",o.style.position="absolute",o.style.opacity=this.currentOpacity;var c=document.createElement("div");c.id="mock-banner-ads-display-area",c.style.width="100%",c.style.height="100%",c.style.background="#323436 center center/auto no-repeat",c.style.borderRadius="10px",c.style.marginLeft="4px",c.style.marginRight="4px",c.style.display="block",c.style.alignContent="center";var u=document.createElement("div");u.id="mock-banner-ads-content",u.style.boxSizing="border-box",u.style.flexDirection="row",u.style.display="flex",u.style.position="relative",u.style.alignItems="stretch",u.style.paddingLeft="4px",u.style.paddingRight="4px",u.style.justifyContent="space-between";var l=document.createElement("div");l.id="mock-banner-ads-avatar",l.style.marginLeft="10px",l.style.width=e+"px",l.style.minWidth=e+"px",l.style.height=e+"px",l.style.display="flex",l.style.flexDirection="column",l.style.position="relative",l.style.background="url("+i+") center center/contain no-repeat",l.style.borderRadius="50%";var h=document.createElement("div");h.id="mock-banner-ads-right-content",h.style.width="100%",h.style.paddingLeft="10px",h.style.display="flex",h.style.flexDirection="row",h.style.position="relative",h.style.color="#E4E6EB",h.style.wordWrap="break-word",h.style.textAlign="left",h.style.alignContent="center",h.style.alignItems="center",h.style.fontSize="12px",h.style.fontFamily="Helvetica, Arial, sans-serif, Roboto, Helvetica, Arial, sans-serif",l.style.boxSizing="border-box";var d=document.createElement("div");d.style.flexDirection="column",d.style.display="flex",d.style.justifyContent="center",d.style.flexShrink="1",d.style.flexGrow="1",d.style.flexBasis="0",d.style.boxSizing="border-box",d.style.minWidth="0",d.innerHTML="\n            <div id='banner-content-text1' style=\"font-weight:600;line-height: 1.3333;font-size: .9375rem;text-overflow: ellipsis;-webkit-line-clamp: 1;overflow: hidden;display: -webkit-box;-webkit-box-orient: vertical;\">"+a+"</div>\n            <div id='banner-content-text2' style=\"font-weight:400;line-height: 1.2308;font-size: .8125rem;text-overflow: ellipsis;-webkit-line-clamp: 2;overflow: hidden;display: -webkit-box;-webkit-box-orient: vertical;\">"+s+"</div>";var p=document.createElement("button");p.id="banner-content-button",p.type="button",p.style.width="120px",p.style.height=e-20+"px",p.style.fontWeight="600",p.style.backgroundColor="#3963fc",p.style.border="none",p.style.color="white",p.style.borderRadius="5px",p.style.textAlign="center",p.style.display="inline-block",p.style.cursor="pointer",p.style.marginRight="10px",p.style.marginLeft="10px",p.style.flexShrink="1",p.style.boxSizing="border-box",p.style.paddingRight="2px",p.style.paddingLeft="2px",p.innerHTML=r,p.onclick=function(){"0.2"===t.currentOpacity?o.style.opacity="1":o.style.opacity="0.2",t.currentOpacity=o.style.opacity};var f=document.createElement("button");f.type="button",f.style.width=e-20+"px",f.style.height=e-20+"px",f.style.fontWeight="1000",f.style.backgroundColor="#5a5c5c",f.style.border="none",f.style.color="white",f.style.borderRadius="50%",f.style.textAlign="center",f.style.display="inline-block",f.style.cursor="pointer",f.style.marginRight="10px",f.style.marginLeft="10px",f.style.flexShrink="0",f.style.boxSizing="border-box",f.style.paddingRight="2px",f.style.paddingLeft="2px",f.innerHTML="...",document.body.appendChild(o),o.appendChild(c),c.appendChild(u),u.appendChild(l),u.appendChild(h),h.appendChild(d),h.appendChild(p),h.appendChild(f)},e.createMobileBannerAd=function(e){var t=this,n=y[this.currentIdx],i=n.url,r=n.buttonName,a=n.title,s=n.description,o=document.createElement("div");o.id="mock-banner-ads",o.style.width="100%",o.style.height=e+"px",o.style.bottom="var(--sab)",o.style.display="block",o.style.position="absolute",o.style.opacity=this.currentOpacity;var c=document.createElement("div");c.id="mock-banner-ads-display-area",c.style.background="#ffffff center center/auto no-repeat",c.style.display="block",c.style.alignContent="center";var u=document.createElement("div");u.id="mock-banner-ads-content",u.style.boxSizing="border-box",u.style.flexDirection="row",u.style.display="flex",u.style.position="relative",u.style.alignItems="stretch",u.style.justifyContent="space-between";var l=document.createElement("div");l.id="mock-banner-ads-avatar",l.style.width=e+"px",l.style.minWidth=e+"px",l.style.height=e+"px",l.style.display="flex",l.style.flexDirection="column",l.style.position="relative",l.style.background="url("+i+") center center/contain no-repeat";var h=document.createElement("div");h.id="mock-banner-ads-right-content",h.style.width="100%",h.style.paddingLeft="10px",h.style.display="flex",h.style.flexDirection="row",h.style.position="relative",h.style.color="#000",h.style.wordWrap="break-word",h.style.textAlign="left",h.style.alignContent="center",h.style.alignItems="center",h.style.fontSize="12px",h.style.fontFamily="Helvetica, Arial, sans-serif, Roboto, Helvetica, Arial, sans-serif",l.style.boxSizing="border-box";var d=document.createElement("div");d.style.flexDirection="column",d.style.display="flex",d.style.justifyContent="center",d.style.flexShrink="1",d.style.flexGrow="1",d.style.flexBasis="0",d.style.boxSizing="border-box",d.style.minWidth="0",d.innerHTML="\n            <div id='banner-content-text1' style=\"font-weight:600;line-height: 1.3333;font-size: .9375rem;text-overflow: ellipsis;-webkit-line-clamp: 1;overflow: hidden;display: -webkit-box;-webkit-box-orient: vertical;\">"+a+"</div>\n            <div id='banner-content-text2' style=\"font-weight:400;line-height: 1.2308;font-size: .8125rem;text-overflow: ellipsis;-webkit-line-clamp: 1;overflow: hidden;display: -webkit-box;-webkit-box-orient: vertical;\">"+s+"</div>";var p=document.createElement("button");p.id="banner-content-button",p.type="button",p.style.height="100%",p.style.fontWeight="600",p.style.backgroundColor="#3963fc",p.style.border="none",p.style.color="white",p.style.textAlign="center",p.style.display="inline-block",p.style.cursor="pointer",p.style.marginLeft="10px",p.style.flexShrink="1",p.style.boxSizing="border-box",p.style.paddingRight="7px",p.style.paddingLeft="7px",p.innerHTML=r,p.onclick=function(){"0.2"===t.currentOpacity?o.style.opacity="1":o.style.opacity="0.2",t.currentOpacity=o.style.opacity},document.body.appendChild(o),o.appendChild(c),c.appendChild(u),u.appendChild(l),u.appendChild(h),h.appendChild(d),h.appendChild(p)},e.hideBannerAdAsync=function(){var e=(0,s.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=document.getElementById("mock-banner-ads")){e.next=3;break}return e.abrupt("return");case 3:t.remove();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e}();b.currentIdx=-1,b.currentOpacity="1";var A={LOADED:"loaded",DISPLAYED:"displayed"},S=function(e){return e.IDLE="idle",e.LOADING="loading",e.FILLED="filled",e.SHOWING="showing",e}(S||{}),E=S,w=function(e){return e.REWARDED="rewarded",e.PRE_ROLL="pre-roll",e.INTERSTITIAL="interstitial",e}(w||{}),C=w,T=n(15),I=function(e){function t(t,n){var i;return(i=e.call(this,n)||this).code=void 0,i.code=t,i.message=n,i}return(0,o.Z)(t,e),t}((0,T.Z)(Error)),x=function(e){this.type=void 0,this.status=void 0,this.type=e,this.status=E.IDLE};GameCore.Ads={Types:C,Status:E,Events:A,AdError:I,AdInstance:x};var k=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this).events=void 0,t.enabled=void 0,t.config=void 0,t.lastInterAdShownTime=void 0,t.lastInterAdLoadedTime=void 0,t.lastRewardAdShownTime=void 0,t.interstitial=void 0,t.rewardedVideo=void 0,t.preRoll=void 0,t.safeAreaBottom=void 0,t.showingBannerAd=void 0,t.reloadBannerAdIntervals=void 0,t.bannerAdConfig=void 0,t.isHaveBannerAdOptions=void 0,t}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.events=new Phaser.Events.EventEmitter,this.safeAreaBottom=0,this.lastInterAdShownTime=0,this.lastInterAdLoadedTime=0,this.lastRewardAdShownTime=0,this.showingBannerAd={},this.reloadBannerAdIntervals={},this.isHaveBannerAdOptions=!0},n.calculateSafeAreaBottom=function(){try{if(!this.config.calculateSafeAreaBottom)return;this.safeAreaBottom=parseInt(getComputedStyle(document.documentElement).getPropertyValue("--sab")),isNaN(this.safeAreaBottom)&&(this.safeAreaBottom=0)}catch(e){this.safeAreaBottom=0}},n.configure=function(e,t){this.enabled=t.enabled,this.config=t,0===this.config.bannerAdOptions.length&&(this.isHaveBannerAdOptions=!1),this.setAdInstance(e),this.calculateSafeAreaBottom()},n.setAdInstance=function(e){var t=this.config,n=t.rewardAdOptions,i=t.interstitialAdOptions;this.interstitial=new e(C.INTERSTITIAL,i.pID),this.rewardedVideo=new e(C.REWARDED,n.pID),this.preRoll=new e(C.PRE_ROLL,i.pID)},n.preloadInterstitialAdAsync=function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.preloadAdAsync(C.INTERSTITIAL);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.showInterstitialAdAsync=function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.canbeShowInterstitialAdByTime()){e.next=2;break}throw new I("INTERSTITIAL_AD_CAN_NOT_SHOW","Can't show interstitial ad");case 2:return e.next=4,this.showAdAsync(C.INTERSTITIAL);case 4:this.lastInterAdShownTime=window.performance.now()/1e3;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.preloadPreRollAdAsync=function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.preloadAdAsync(C.PRE_ROLL);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.showPreRollAdAsync=function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.showAdAsync(C.PRE_ROLL);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.preloadRewardedVideoAsync=function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.preloadAdAsync(C.REWARDED);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.showRewardedVideoAsync=function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.canbeShowRewardAd()){e.next=2;break}throw new I("REWARDED_VIDEO_CAN_NOT_SHOW","Can't show rewarded video");case 2:return e.next=4,this.showAdAsync(C.REWARDED);case 4:this.lastRewardAdShownTime=window.performance.now()/1e3;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.getRemainingRewardTime=function(){var e=window.performance.now()/1e3,t=this.config.rewardAdOptions.secondsBetweenAds,n=e-this.lastRewardAdShownTime;return n<t?t-n:0},n.preloadAdAsync=function(){var e=(0,s.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}throw new I("ADS_NOT_ENABLED","Ads is't enabled");case 2:if(null!==(n=this.getAdInstanceByType(t))){e.next=5;break}throw new I("AD_INSTANCE_NOT_INITIATED","The instance ads not yet initiated");case 5:return t!==C.INTERSTITIAL&&t!==C.PRE_ROLL||(this.lastInterAdLoadedTime=window.performance.now()/1e3),e.next=8,n.loadAsync();case 8:this.events.emit(A.LOADED,t);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.showAdAsync=function(){var e=(0,s.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}throw new I("ADS_NOT_ENABLED","Ads is't enabled");case 2:if(null!==(n=this.getAdInstanceByType(t))){e.next=5;break}throw new I("AD_INSTANCE_NOT_INITIATED","The instance ads not yet initiated");case 5:return t!==C.INTERSTITIAL&&t!==C.PRE_ROLL||(this.lastInterAdShownTime=window.performance.now()/1e3),t===C.REWARDED&&(this.lastRewardAdShownTime=window.performance.now()/1e3,this.config.enableRewardVideoResetInterstitial&&(this.lastInterAdShownTime=this.lastRewardAdShownTime)),e.next=9,n.showAsync();case 9:this.events.emit(A.DISPLAYED,t);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getAdStatus=function(e){var t=this.getAdInstanceByType(e);return t?t.getStatus():null},n.getAdInstanceByType=function(e){switch(e){case C.INTERSTITIAL:return this.interstitial;case C.REWARDED:return this.rewardedVideo;case C.PRE_ROLL:return this.preRoll;default:return null}},n.canbeShowInterstitialAd=function(){var e=this.canbeLoadInterstitialAdByTime();return e&&(e=this.canbeShowInterstitialAdByTime()),e},n.canbeLoadInterstitialAdByTime=function(){var e=window.performance.now()/1e3,t=this.config.interstitialAdOptions,n=t.secondsFirstTime,i=t.secondsBetweenAds,r=Math.floor(e-this.lastInterAdLoadedTime);return this.lastInterAdLoadedTime>0?r>=i:r>=n},n.canbeShowInterstitialAdByTime=function(){var e=window.performance.now()/1e3,t=this.config.interstitialAdOptions,n=t.secondsFirstTime,i=t.secondsBetweenAds,r=Math.floor(e-this.lastInterAdShownTime);return this.lastInterAdShownTime>0?r>=i:r>=n},n.canbeShowRewardAd=function(){var e=window.performance.now()/1e3,t=this.config.rewardAdOptions,n=t.secondsFirstTime,i=t.secondsBetweenAds,r=Math.floor(e-this.lastRewardAdShownTime);return this.lastRewardAdShownTime>0?r>=i:r>=n},n.canShowBannerAd=function(){if(!this.isHaveBannerAdOptions)return!1;for(var e=this.config.bannerAdOptions,t=GameCore.Utils.Device.isDesktop(),n=0;n<e.length;n++){var i=e[n],r=i.platform;if("ALL"==r||"DESKTOP"==r&&t||"MOBILE"==r&&!t)return this.bannerAdConfig=i,!0}return!1},n.disableBannerAds=function(){this.config.bannerAdOptions=[]},n.showBannerAdAsync=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i,r=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}return e.abrupt("return");case 2:if(this.canShowBannerAd()){e.next=4;break}return e.abrupt("return");case 4:if(this.reloadBannerAdIntervals=this.reloadBannerAdIntervals||{},t=this.bannerAdConfig,n=t.placementId,i=t.secondsReload,n&&""!=n){e.next=8;break}return e.abrupt("return");case 8:if(!(i>0)){e.next=14;break}if(!this.reloadBannerAdIntervals[n]){e.next=11;break}return e.abrupt("return");case 11:return this.loadBannerAdAsync(n,this.bannerAdConfig),this.reloadBannerAdIntervals[n]=setInterval((function(){r.loadBannerAdAsync(n,r.bannerAdConfig)}),1e3*i),e.abrupt("return");case 14:return this.loadBannerAdAsync(n,this.bannerAdConfig),e.abrupt("return");case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.loadBannerAdAsync=function(){var e=(0,s.Z)(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}return e.abrupt("return");case 2:if(e.prev=2,!GameCore.Configs.Ads.Mockup.Enable){e.next=9;break}return e.next=7,b.loadBannerAdAsync();case 7:e.next=11;break;case 9:return e.next=11,GameSDK.loadBannerAdAsync(t,n);case 11:this.showingBannerAd[t]=!0,e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),console.log(e.t0);case 17:case"end":return e.stop()}}),e,this,[[2,14]])})));return function(t,n){return e.apply(this,arguments)}}(),n.hideBannerAdAsync=function(){var e=(0,s.Z)(u().mark((function e(){var t=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}return e.abrupt("return");case 2:if(this.isHaveBannerAdOptions){e.next=4;break}return e.abrupt("return");case 4:if(e.prev=4,!GameCore.Configs.Ads.Mockup.Enable){e.next=11;break}return e.next=9,b.hideBannerAdAsync();case 9:e.next=15;break;case 11:return this.config.bannerAdOptions.forEach((function(e){var n=e.placementId,i=t.reloadBannerAdIntervals[n];i&&(clearInterval(i),t.reloadBannerAdIntervals[n]=null),t.showingBannerAd[n]=!1})),e.next=15,GameSDK.hideBannerAdAsync();case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(4),console.log(e.t0);case 20:case"end":return e.stop()}}),e,this,[[4,17]])})));return function(){return e.apply(this,arguments)}}(),n.getBannerHeight=function(){if(!this.enabled)return 0;if(!this.canShowBannerAd())return 0;if(!this.bannerAdConfig.position.includes("bottom"))return 0;var e=(this.bannerAdConfig||{}).bannerHeight,t=(void 0===e?0:e)+this.safeAreaBottom+20;if(this.game.world){var n=this.game.world,i=n.getPixelRatio(),r=n.getZoomRatio();return this.game.world.getPhysicPixels(t,i/r)}return t},t}(Phaser.Plugins.BasePlugin),P=k,L=function(){function e(e,t,n){this.name=void 0,this.color=void 0,this.selfLog=void 0,this.options=void 0,this.name=e,this.color=n||"#FFF",this.options=t,this.selfLog=!0,console.info("%c"+this.name+": init","color: "+this.color,this.options)}var t=e.prototype;return t.event=function(e,t,n){this.processEvent(e,t,n),this.selfLog&&console.info("%c"+this.name+": event","color: "+this.color,{name:e,value:n,payload:t})},t.pageview=function(e){var t=this.getPageByKey(e);this.processPageView(t),this.selfLog&&console.info("%c"+this.name+": pageview","color: "+this.color,{page:t})},t.levelStart=function(e,t,n,i){this.processLevelStart(e,t,n),this.selfLog&&console.info("%c"+this.name+": level start","color: "+this.color,{level:e,score:t,levelName:n})},t.levelFail=function(e,t,n,i){this.processLevelFail(e,t,n),this.selfLog&&console.info("%c"+this.name+": level fail","color: "+this.color,(0,a.Z)({level:e,score:t,levelName:n},i))},t.levelRescue=function(e,t,n){this.processLevelRescue(e,t,n),this.selfLog&&console.info("%c"+this.name+": level rescue","color: "+this.color,{level:e,score:t,levelName:n})},t.levelComplete=function(e,t,n,i){this.processLevelComplete(e,t,n),this.selfLog&&console.info("%c"+this.name+": level complete","color: "+this.color,{level:e,score:t,levelName:n})},t.loadPreRollAd=function(e){this.processLoadPreRollAd(e),this.selfLog&&console.info("%c"+this.name+": load pre-roll ad","color: "+this.color,{placement:e})},t.showPreRollAd=function(e){this.processShowPreRollAd(e),this.selfLog&&console.info("%c"+this.name+": show pre-roll","color: "+this.color,{placement:e})},t.loadInterstitialAd=function(e){this.processLoadInterstitialAd(e),this.selfLog&&console.info("%c"+this.name+": load interstitial ad","color: "+this.color,{placement:e})},t.showInterstitialAd=function(e){this.processShowInterstitialAd(e),this.selfLog&&console.info("%c"+this.name+": show interstitial ad","color: "+this.color,{placement:e})},t.loadRewardedVideoAd=function(e){this.processLoadRewardedVideoAd(e),this.selfLog&&console.info("%c"+this.name+": load rewarded video ad","color: "+this.color,{placement:e})},t.showRewardedVideoAd=function(e){this.processShowRewardedVideoAd(e),this.selfLog&&console.info("%c"+this.name+": show rewarded video ad","color: "+this.color,{placement:e})},t.receiveReward=function(e){this.processReceiveReward(e),this.selfLog&&console.info("%c"+this.name+": receive reward","color: "+this.color,{placement:e})},t.loadAdFail=function(e,t,n){this.processLoadAdFail(e,t,n),this.selfLog&&console.info("%c"+this.name+": load ad fail","color: "+this.color,{type:e,placement:t,reason:n})},t.showAdFail=function(e,t,n){this.processShowAdFail(e,t,n),this.selfLog&&console.info("%c"+this.name+": show ad fail","color: "+this.color,{type:e,placement:t,reason:n})},t.getPageByKey=function(e){var t=e.replace(/_/g,"-");return t=t.toLowerCase()},t.processLevelStart=function(e,t,n,i){},t.processLevelFail=function(e,t,n){},t.processLevelRescue=function(e,t,n){},t.processLevelComplete=function(e,t,n){},t.processLoadInterstitialAd=function(e){},t.processShowInterstitialAd=function(e){},t.processLoadPreRollAd=function(e){},t.processShowPreRollAd=function(e){},t.processLoadRewardedVideoAd=function(e){},t.processShowRewardedVideoAd=function(e){},t.processReceiveReward=function(e){},t.processLoadAdFail=function(e,t,n){},t.processShowAdFail=function(e,t,n){},e}(),O=L;GameCore.Analytics={BaseAnalytics:O};var R=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this).analytics=void 0,t.pageview=function(e){t.isActive()&&t.analytics.forEach((function(t){t.pageview(e)}))},t}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.analytics=[]},n.add=function(e){this.analytics.push(e)},n.event=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.event(e,t,n)}))},n.levelStart=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.levelStart(e,t,n)}))},n.levelRescue=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.levelRescue(e,t,n)}))},n.levelFail=function(e,t,n,i){this.isActive()&&this.analytics.forEach((function(r){r.levelFail(e,t,n,i)}))},n.levelComplete=function(e,t,n,i){this.isActive()&&this.analytics.forEach((function(i){i.levelComplete(e,t,n)}))},n.loadPreRollAd=function(e){this.isActive()&&this.analytics.forEach((function(t){t.loadPreRollAd(e)}))},n.showPreRollAd=function(e){this.isActive()&&this.analytics.forEach((function(t){t.showPreRollAd(e)}))},n.loadInterstitialAd=function(e){this.isActive()&&this.analytics.forEach((function(t){t.loadInterstitialAd(e)}))},n.showInterstitialAd=function(e){this.isActive()&&this.analytics.forEach((function(t){t.showInterstitialAd(e)}))},n.loadRewardedVideoAd=function(e){this.isActive()&&this.analytics.forEach((function(t){t.loadRewardedVideoAd(e)}))},n.showRewardedVideoAd=function(e){this.isActive()&&this.analytics.forEach((function(t){t.showRewardedVideoAd(e)}))},n.receiveReward=function(e){this.isActive()&&this.analytics.forEach((function(t){t.receiveReward(e)}))},n.loadAdFail=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.loadAdFail(e,t,n)}))},n.showAdFail=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.showAdFail(e,t,n)}))},n.isActive=function(){return this.analytics.length>=1},t}(Phaser.Plugins.BasePlugin),D=R,B=function(){function e(e){var t=this;this.game=void 0,this.audios=void 0,this.volume=void 0,this.soundKeys=void 0,this.isMusicEnabled=function(){return!!t.game.player.getPlayerSetting("music")},this.isSoundEnabled=function(){return!!t.game.player.getPlayerSetting("sound")},this.game=e,this.audios=new Map,this.soundKeys=new Map}var t=e.prototype;return t.addSoundKeys=function(e){var t=this;Object.keys(e).forEach((function(n){var i=e[n];"string"===typeof i&&t.soundKeys.set(n,i)}))},t.clearSoundKeys=function(){this.soundKeys.clear()},t.play=function(e,t){var n=this,i=(0,a.Z)({volume:this.volume},t||{});i.volume!==this.volume&&(i.volume*=this.volume);var r=this.audios.get(e);if(!r&&this.game.cache.audio.exists(e)){var s=this.game.sound.add(e);this.audios.set(e,s),r=s}if(r)r.play(void 0,i);else{var o=this.soundKeys.get(e);if(!o)return console.log(this.soundKeys.get(e),e),void console.warn(e+" not found. Use importSoundEffectKeys from audio plugin to add it.");try{console.log(e,o,"load_sound_plugin"),this.game.globalScene.load.audio(e,o),this.game.globalScene.load.on(Phaser.Loader.Events.FILE_KEY_COMPLETE+"audio-"+e,(function(){console.log(e,o,"finish");var t=n.game.sound.add(e);n.audios.set(e,t),t.play(void 0,i)})),this.game.globalScene.load.start()}catch(c){console.warn(c)}}},t.pauseAll=function(){this.audios.forEach((function(e){e.pause()}))},t.resumeAll=function(){this.audios.forEach((function(e){e.resume()}))},t.stopAll=function(){this.audios.forEach((function(e){e.stop()}))},t.pause=function(e){var t=this.audios.get(e);t&&t.pause()},t.stop=function(e){var t=this.audios.get(e);t&&t.stop()},t.setVolume=function(e){this.volume=e},e}(),N=B,M=function(){function e(e,t){var n=this;this.name=void 0,this.game=void 0,this.isSprite=void 0,this.audio=void 0,this.markers=void 0,this.volume=void 0,this.isMusicEnabled=function(){return!!n.game.player.getPlayerSetting("music")},this.isSoundEnabled=function(){return!!n.game.player.getPlayerSetting("sound")},this.name=t,this.game=e,this.markers={},this.isSprite=!1,this.isSprite||(this.audio=this.game.sound.add(this.name))}var t=e.prototype;return t.play=function(e,t){var n,i,r,s=(0,a.Z)({volume:this.volume},t||{});if(s.volume!==this.volume&&(s.volume*=this.volume),!this.isSprite)return(null==(i=this.audio)?void 0:i.seek)>0?void this.audio.resume():void(null==(r=this.audio)||r.play(e,s));this.createMaker(e),null==(n=this.markers[e])||n.play(e,s)},t.pause=function(e){var t,n;this.isSprite?null==(t=this.markers[e])||t.pause():null==(n=this.audio)||n.pause()},t.stop=function(e){var t,n;this.isSprite?null==(t=this.markers[e])||t.stop():null==(n=this.audio)||n.stop()},t.setVolume=function(e){this.volume=e},t.createMaker=function(e){if(!this.markers[e])try{this.markers[e]=this.game.sound.addAudioSprite(this.name)}catch(t){console.warn("createMaker",t)}},e}(),_=M,Z=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this).soundManager=void 0,t.musicManager=void 0,t.isMuteAll=void 0,t.initMusic=function(e){t.musicManager=new _(t.game,e),t.setMusicVolume(10)},t.initSound=function(){t.soundManager=new N(t.game),t.setSoundVolume(1)},t}(0,o.Z)(t,e);var n=t.prototype;return n.importSoundEffectKeys=function(e){this.soundManager.addSoundKeys(e)},n.playSound=function(e,t){try{if(!this.soundManager||this.isMuteAll||!this.game.visibility.isGameVisible())return;if(!this.soundManager.isSoundEnabled())return;this.soundManager.play(e,t)}catch(n){}},n.stopSound=function(e){try{this.soundManager.stop(e)}catch(t){}},n.playMusic=function(e){void 0===e&&(e={});try{if(!this.musicManager||this.isMuteAll||!this.game.visibility.isGameVisible())return;if(!this.musicManager.isMusicEnabled())return;this.musicManager.play("",(0,a.Z)({loop:!0,volume:.2},e))}catch(t){}},n.pauseMusic=function(){try{if(!this.musicManager)return;this.musicManager.pause("")}catch(e){}},n.stopMusic=function(){try{if(!this.musicManager)return;this.musicManager.stop("")}catch(e){}},n.pauseAllSounds=function(){try{if(!this.soundManager)return;this.soundManager.pauseAll()}catch(e){}},n.resumeAllSounds=function(){try{if(!this.soundManager)return;this.soundManager.resumeAll()}catch(e){}},n.setSoundVolume=function(e){try{if(!this.soundManager)return;this.soundManager.setVolume(e)}catch(t){console.warn("setSoundVolume",t)}},n.setMusicVolume=function(e){try{if(!this.musicManager)return;this.musicManager.setVolume(e)}catch(t){console.warn("setMusicVolume",t)}},n.muteAll=function(){this.isMuteAll=!0,this.game.sound.mute=!0},n.unmuteAll=function(){this.isMuteAll=!1,this.game.sound.mute=!1},t}(Phaser.Plugins.BasePlugin),G=Z,U=n(6),F="AUTH_TOKEN_REQUEST",H="AUTH_TOKEN_RECEIVED",z=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).payload=void 0,i.name="RequestTokenFail",i.message=t||"Request token fail",i.payload=n||{},i}return(0,o.Z)(t,e),t}((0,T.Z)(Error)),K=n(36),Y="auth",W=(0,K.P1)([function(e){return e[Y].token}],(function(e){return e})),j=(0,K.P1)([function(e){return e[Y].isRequesting}],(function(e){return e})),V=function(e){return{type:H,payload:{token:e}}},q=function(e){function t(){return e.apply(this,arguments)||this}(0,o.Z)(t,e);var n=t.prototype;return n.requestToken=function(){var e=(0,s.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.storage,e.next=3,t.dispatch(function(){var e=(0,s.Z)(u().mark((function e(t,n){var r,a,s,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r=window.game.facebook,a=n(),s=W(a),!j(a)&&""===s){e.next=7;break}return e.abrupt("return");case 7:return t({type:F,payload:{}}),e.next=10,r.getPlayerToken();case 10:o=e.sent,t(V(o)),e.next=25;break;case 14:if(e.prev=14,e.t0=e.catch(0),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=19;break}if("PENDING_REQUEST"!==e.t0.code){e.next=19;break}return e.abrupt("return");case 19:if(t(V("")),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"message"))){e.next=24;break}if("string"!==typeof e.t0.message){e.next=24;break}return(0,i.tO)(new Error(e.t0.message)),e.abrupt("return");case 24:(0,i.tO)(new z);case 25:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.getToken=function(){return W(this.state)},(0,U.Z)(t,[{key:"state",get:function(){return this.game.storage.getState()}}]),t}(Phaser.Plugins.BasePlugin),X=q,J=function(e,t){void 0===t&&(t=1);var n=new Image;n.onload=function(){var n,i,r=(n=this.width*t,i=this.height*t,{string:"+",style:"font-size: 1px; padding: "+Math.floor(i/2)+"px "+Math.floor(n/2)+"px;"});console.info("%c "+r.string,r.style+" background: transparent url("+e+") no-repeat center center; background-size: "+this.width*t+"px "+this.height*t+"px;")},n.src=e},Q=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this).width=void 0,t.height=void 0,t.renderOptions=void 0,t.canvas=void 0,t}(0,o.Z)(t,e);var n=t.prototype;return n.preload=function(e){var t=this,n=Object.keys(e);n.length<1||(n.forEach((function(n){t.scene.load.image(n,e[n])})),this.scene.load.start())},n.capture=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.width,i=t.height,r=t.renderOptions,this.width=n,this.height=i,this.renderOptions=r,this.createCanvas(),e.next=7,this.loadImages();case 7:return this.drawObjects(),e.abrupt("return",this.snapshotFrame());case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.createCanvas=function(){this.canvas||(this.canvas=this.game.textures.createCanvas("FrameCaptureCanvas")),this.canvas.clear(),this.canvas.setSize(this.width,this.height)},n.loadImages=function(){var e=this;return new Promise((function(t,n){for(var i in e.renderOptions){var r=e.renderOptions[i],a=r.name,s=r.image;if(s)e.scene.textures.get(a).key!==a&&e.scene.load.image(a,s)}e.scene.load.on(Phaser.Loader.Events.COMPLETE,t),e.scene.load.on(Phaser.Loader.Events.FILE_LOAD_ERROR,(function(){var e=new Error("Load image failed");n(e)})),e.scene.load.start()}))},n.drawObjects=function(){for(var e in this.renderOptions){var t=this.renderOptions[e];switch(t.type){case"text":this.drawText(t);break;case"image":this.drawImage(t)}}},n.drawText=function(e){var t=this.canvas.context,n=e.x,i=e.y,r=e.font,a=e.text,s=e.fillStyle,o=e.lineWidth,c=e.textAlign;t.font=r+' nunito,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",sans-serif',t.fillStyle=s||"#ffffff",o&&(t.lineWidth=o),c&&(t.textAlign=c),t.fillText(a,n,i)},n.drawImage=function(e){var t=this.canvas.context,n=e.x,i=e.y,r=e.name,a=e.frame,s=e.width,o=e.height,c=e.fallbackWithImage,u=this.scene.textures.get(r),l=u.getSourceImage(a);"__MISSING"===u.key&&c&&(l=(u=this.scene.textures.get(c)).getSourceImage()),t.drawImage(l,n,i,s,o)},n.snapshotFrame=function(){var e=this.canvas.getCanvas().toDataURL("image/jpeg",.85);return GameCore.Utils.Valid.isDebugger()&&J(e),e},t}(Phaser.Plugins.ScenePlugin),$=Q,ee=function(e){function t(t,n,i){var r;return(r=e.call(this)||this).game=void 0,r.options=void 0,r.performance=void 0,r.isRunning=!1,r.checkTimer=void 0,r.fpsHistory=void 0,r.start=function(){if(!r.isRunning){r.isRunning=!0;var e=r.options.checkInterval;r.checkTimer=e,r.fpsHistory=[],r.game.events.on(Phaser.Core.Events.POST_STEP,r.onPostStep)}},r.stop=function(){r.isRunning&&(r.isRunning=!1,r.game.events.off(Phaser.Core.Events.POST_STEP,r.onPostStep),r.options.onlyUpdateWhenSwitchScene&&r.checkFps())},r.onPostStep=function(e,t){if(r.checkTimer-=t,!(r.checkTimer>0)){var n=r.options,i=n.checkInterval,a=n.onlyUpdateWhenSwitchScene;r.checkTimer+=i,r.fpsHistory.push(r.game.loop.actualFps),!1===a&&r.fpsHistory.length>=5&&r.checkFps()}},r.game=t,r.options=i,r.performance=n,r}(0,o.Z)(t,e);var n=t.prototype;return n.checkFps=function(){if(0!==this.fpsHistory.length){var e=this.options.autoUpgradeQuality,t=!1;this.isLowFps()?t=this.performance.downgradeGraphicsQuality():e&&this.isHighFps()&&(t=this.performance.upgradeGraphicsQuality()),t&&(this.fpsHistory=[])}},n.getFpsMedian=function(){return Phaser.Math.Median(this.fpsHistory)},n.isLowFps=function(){return this.getFpsMedian()<this.options.fpsThreshold},n.isHighFps=function(){return this.getFpsMedian()>1.2*this.options.fpsThreshold},t}(Phaser.Events.EventEmitter),te=ee,ne=["pixelRatio","minQuality","maxQuality","qualityAdjustStep","trackingSceneKeys"],ie=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this).fpsTracker=void 0,t.pixelRatio=void 0,t.minQuality=void 0,t.maxQuality=void 0,t.qualityAdjustStep=void 0,t.trackingSceneKeys=[],t.trackingScene=function(e){if(t.trackingSceneKeys.includes(e)){var n=t.game.scene.getScene(e);n.events.once(Phaser.Scenes.Events.UPDATE,t.fpsTracker.start),n.events.once(Phaser.Scenes.Events.SLEEP,t.fpsTracker.stop)}},t}(0,o.Z)(t,e);var n=t.prototype;return n.configure=function(e){var t=e.pixelRatio,n=e.minQuality,i=e.maxQuality,a=e.qualityAdjustStep,s=e.trackingSceneKeys,o=(0,r.Z)(e,ne);this.pixelRatio=t,this.minQuality=n,this.maxQuality=i,this.qualityAdjustStep=a,this.trackingSceneKeys=s,this.fpsTracker=new te(this.game,this,o)},n.active=function(){this.game.events.on(Phaser.Scenes.Events.WAKE,this.trackingScene),this.game.events.on(Phaser.Scenes.Events.START,this.trackingScene)},n.downgradeGraphicsQuality=function(){var e=this.pixelRatio;if(e<=this.minQuality)return!1;var t=+(e-this.qualityAdjustStep).toFixed(2);return!(t<this.minQuality)&&(this.pixelRatio=t,this.game.world.resize(this.pixelRatio),console.warn("\ud83d\udcab Graphics quality was downgraded! ("+e+" -> "+t+")"),!0)},n.upgradeGraphicsQuality=function(){var e=this.pixelRatio;if(e>=this.maxQuality)return!1;var t=+(e+this.qualityAdjustStep).toFixed(2);return!(t>this.maxQuality)&&(this.pixelRatio=t,this.game.world.resize(this.pixelRatio),console.warn("\ud83d\ude80 Graphics quality was upgraded! ("+e+" -> "+t+")"),!0)},t}(Phaser.Plugins.BasePlugin),re=ie,ae={sound:!0,music:!0,vibrate:!0,language:"en",theme:GameCore.Configs.DefaultTheme},se=ae.sound,oe=ae.music,ce=ae.vibrate,ue=ae.language,le=ae.theme,he=function(){function e(e){this.sound=void 0,this.music=void 0,this.vibrate=void 0,this.language=void 0,this.theme=void 0;var t=e||{},n=t.sound,i=t.music,r=t.vibrate,a=t.language,s=t.theme;this.sound=GameCore.Utils.Valid.isBoolean(n)?n:se,this.music=GameCore.Utils.Valid.isBoolean(i)?i:oe,this.vibrate=GameCore.Utils.Valid.isBoolean(r)?r:ce,this.language=GameCore.Utils.Valid.isString(a)?a:ue,this.theme=GameCore.Utils.Valid.isString(s)?s:le}return e.prototype.toObject=function(){return{sound:this.sound,music:this.music,vibrate:this.vibrate,language:this.language,theme:this.theme}},e}(),de=he,pe=GameCore.Utils,fe=pe.Valid,me=pe.Object,ge=function(){function e(e){this.score=void 0,this.settings=void 0,this.gameData=void 0,this.userGuideDisplays=void 0,this.setupDefaultData(),this.updateScore(e),this.updateSettings(e),this.updateGameData(e),this.updateUserGuideDisplays(e)}var t=e.prototype;return t.setupDefaultData=function(){this.score=0,this.settings=(0,a.Z)({},ae),this.gameData={coins:0,diamond:0,lastReceiveGift:0,dailyRewarded:{lastRewarded:0,logDays:[]},dailyTasks:{startedTime:0,logTasks:{}},countItems:{undoCount:0,hintCount:0,lastTimeUpdate:0}},this.userGuideDisplays=0},t.updateScore=function(e){var t=e.score;!1!==fe.isNumber(t)&&(this.score=t)},t.updateSettings=function(e){var t=e.settings;if(!1!==fe.isObject(t)){var n=new de(t).toObject();this.settings=n}},t.updateGameData=function(e){var t=e.gameData;if(!1!==fe.isObject(t)){if(me.hasOwn(t,"coins")&&fe.isNumber(t.coins)&&(this.gameData.coins=t.coins),me.hasOwn(t,"diamond")&&fe.isNumber(t.diamond)&&(this.gameData.diamond=t.diamond),me.hasOwn(t,"lastReceiveGift")&&fe.isNumber(t.lastReceiveGift)&&(this.gameData.lastReceiveGift=t.lastReceiveGift),me.hasOwn(t,"dailyRewarded")&&fe.isObject(t.dailyRewarded)){var n=t.dailyRewarded;me.hasOwn(n,"lastRewarded")&&fe.isNumber(n.lastRewarded)&&(this.gameData.dailyRewarded.lastRewarded=n.lastRewarded),me.hasOwn(n,"logDays")&&Array.isArray(n.logDays)&&(this.gameData.dailyRewarded.logDays=n.logDays)}if(me.hasOwn(t,"dailyTasks")&&fe.isObject(t.dailyTasks)){var i=t.dailyTasks;me.hasOwn(i,"startedTime")&&fe.isNumber(i.startedTime)&&(this.gameData.dailyTasks.startedTime=i.startedTime),me.hasOwn(i,"logTasks")&&fe.isObject(i.logTasks)&&(this.gameData.dailyTasks.logTasks=i.logTasks)}}},t.updateUserGuideDisplays=function(e){var t=e.userGuideDisplays;!1!==fe.isNumber(t)&&(this.userGuideDisplays=t)},t.toObject=function(){return{score:this.score,settings:this.settings,gameData:this.gameData,userGuideDisplays:this.userGuideDisplays}},t.convertToPlayerData=function(){var e=this.gameData,t=e.coins,n=e.diamond,i=e.dailyTasks,r=e.dailyRewarded,a=e.lastReceiveGift;return{score:this.score,settings:this.settings,customFields:{coins:t,diamond:n,dailyTasks:i,dailyRewarded:r,lastReceiveGift:a},userGuideDisplays:this.userGuideDisplays}},t.convertToFacebookData=function(e){var t=e.score,n=e.settings,i=e.customFields,r=e.userGuideDisplays;return this.updateScore({score:t}),this.updateSettings({settings:n}),this.updateGameData({gameData:i}),this.updateUserGuideDisplays({userGuideDisplays:r}),this.toObject()},e}(),ve=n(38),ye=GameCore.Configs.ApiHost,be=function(){var e=(0,s.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,ve.v)("players?platform=ms-games",t,{},ye,10);case 2:return n=e.sent,e.abrupt("return",(null==n?void 0:n.data)||{});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ae=function(){var e=(0,s.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,ve.v)("players/"+t+"/user-guide-displays/inc",{},{},ye);case 2:return n=e.sent,e.abrupt("return",(null==n?void 0:n.data)||{});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Se="PLAYER_RECEIVED",Ee="PLAYER_DATA_UPDATE",we="PLAYER_SCORE_UPDATE",Ce="PLAYER_PROFILE_UPDATE",Te="PLAYER_SETTING_UPDATE",Ie="PLAYER_CONNECTED_PLAYERS_UPDATE",xe=n(30),ke=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).payload=void 0,i.name="PlayerDataNameNotSupport",i.message=t||"The name of player data is not supported",i.payload=n||{},i}return(0,o.Z)(t,e),t}((0,T.Z)(Error)),Pe="player",Le=(0,K.P1)([function(e){return e[Pe]}],(function(e){return e})),Oe=(0,K.P1)([Le],(function(e){return e.playerId})),Re=(0,K.P1)([Le],(function(e){return e.ASID})),De=(0,K.P1)([function(e){return e[Pe].data}],(function(e){return e})),Be=((0,K.P1)([De],(function(e){return e.settings})),(0,K.P1)([function(e){return e[Pe].connectedPlayers}],(function(e){return e}))),Ne=(0,K.P1)([Be,function(e,t){return t.limit},function(e,t){return t.offset}],(function(e,t,n){return"number"!==typeof t||"number"!==typeof n?[]:Object.keys(e).slice(n,t+n)||[]})),Me=(0,K.P1)([De],(function(e){return e.score})),_e=(0,K.P1)([De],(function(e){return e.customFields})),Ze=(0,K.P1)([_e],(function(e){return(null==e?void 0:e.level)||1})),Ge=GameCore.Configs,Ue=Ge.AppId,Fe=(Ge.Tutorial,function(e,t){return function(n){var i=e.playerId,r=e.name,a=e.photo,s=e.locale;n({type:Se,payload:{playerId:i,name:r,photo:a,locale:s,data:t||{}}})}}),He=function(e){return{type:Ie,payload:{connectedPlayers:e}}},ze=function(e,t){return function(){var n=(0,s.Z)(u().mark((function n(r,a){var s,o,c;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,r({type:Te,payload:{name:e,value:t}});case 3:s=a(),o=De(s),c=new ge({}).convertToFacebookData(o),FBInstant.player.setDataAsync(c),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),(0,i.tO)(n.t0);case 12:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e,t){return n.apply(this,arguments)}}()},Ke=function(e,t){return function(){var n=(0,s.Z)(u().mark((function n(r,a){var s,o,c,l,h;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,o={customFields:(s={},s[e]=t,s)},n.next=4,r(We(o));case 4:c=a(),l=De(c),h=new ge({}).convertToFacebookData(l),FBInstant.player.setDataAsync(h),n.next=15;break;case 10:if(n.prev=10,n.t0=n.catch(0),!(n.t0 instanceof ke)){n.next=14;break}return n.abrupt("return");case 14:(0,i.tO)(n.t0);case 15:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e,t){return n.apply(this,arguments)}}()},Ye=function(e){return function(){var t=(0,s.Z)(u().mark((function t(n,r){var a,s,o,c;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a={customFields:e},t.next=4,n(We(a));case 4:s=r(),o=De(s),c=new ge({}).convertToFacebookData(o),FBInstant.player.setDataAsync(c),t.next=16;break;case 10:if(t.prev=10,t.t0=t.catch(0),console.log("\ud83e\udd16 ? error",t.t0),!(t.t0 instanceof ke)){t.next=15;break}return t.abrupt("return");case 15:(0,i.tO)(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,n){return t.apply(this,arguments)}}()},We=function(e){return{type:Ee,payload:{data:e}}},je=function(e){return function(){var t=(0,s.Z)(u().mark((function t(n,r){var a,s,o;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n({type:we,payload:{score:e}});case 3:be({score:e}),a=r(),s=De(a),o=new ge({}).convertToFacebookData(s),FBInstant.player.setDataAsync(o),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),(0,i.tO)(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,n){return t.apply(this,arguments)}}()},Ve=function(e){return function(){var t=(0,s.Z)(u().mark((function t(n,r){var a;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a={customFields:e},t.next=4,n(We(a));case 4:t.next=11;break;case 6:if(t.prev=6,t.t0=t.catch(0),!(t.t0 instanceof ke)){t.next=10;break}return t.abrupt("return");case 10:(0,i.tO)(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e,n){return t.apply(this,arguments)}}()},qe=function(e){function t(){return e.apply(this,arguments)||this}(0,o.Z)(t,e);var n=t.prototype;return n.incUserGuideDisplays=function(){var e=(0,s.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.storage,e.next=3,t.dispatch(function(){var e=(0,s.Z)(u().mark((function e(t,n){var r,a,s,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t(We({userGuideDisplays:1}));case 3:r=n(),a=Oe(r),s=De(r),o=new ge({}).convertToFacebookData(s),FBInstant.player.setDataAsync(o),Ae(a),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),(0,i.tO)(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.receiveData=function(){var e=(0,s.Z)(u().mark((function e(t,n){var i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.game.storage,e.next=3,i.dispatch(Fe(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.updateData=function(){var e=(0,s.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.storage,e.next=3,t.dispatch(function(){var e=(0,s.Z)(u().mark((function e(t,n){var r,a,s,o,c,l,h,d;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=n(),a=Le(r),s=a.playerId,o=a.name,c=a.photo,l=a.locale,e.next=6,FBInstant.player.getASIDAsync();case 6:return h=e.sent,d={appId:Ue,playerId:s,name:o,photo:c,locale:l,ASID:h},e.next=10,t({type:Ce,payload:{profile:d}});case 10:return e.next=12,be(d);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),(0,i.tO)(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.setBestScore=function(){var e=(0,s.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch(je(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.setSetting=function(){var e=(0,s.Z)(u().mark((function e(t,n){var i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.game.storage,e.next=3,i.dispatch(ze(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.setCustomData=function(){var e=(0,s.Z)(u().mark((function e(t,n){var i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.game.storage,e.next=3,i.dispatch(Ke(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.setMultiCustomData=function(){var e=(0,s.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch(Ye(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.requestConnectedPlayers=function(){var e=(0,s.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.storage,e.next=3,t.dispatch(function(){var e=(0,s.Z)(u().mark((function e(t){var n,r,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,FBInstant.player.getConnectedPlayersAsync();case 3:if(n=e.sent,r=function(e){return!!e},a=n.map((function(e){var t=e.getID(),n=e.getName(),i=e.getPhoto();return t&&n&&i?new xe.Z(t,n,i).toObject():null})).filter(r),!(a.length<1)){e.next=8;break}return e.abrupt("return");case 8:t(He(a)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),(0,i.tO)(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.updateConnectedPlayers=function(){var e=(0,s.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch(He(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getPlayer=function(){return Le(this.state)},n.getPlayerId=function(){return this.getPlayer().playerId},n.getPlayerASID=function(){return Re(this.state)},n.getPlayerData=function(){return this.getPlayer().data},n.getPlayerSetting=function(e){var t=this.getPlayerSettings();return"string"!==typeof e?null:GameCore.Utils.Object.hasOwn(t,e)?t[e]:GameCore.Utils.Object.hasOwn(ae,e)?ae[e]:null},n.getPlayerSettings=function(){return this.getPlayerData().settings},n.getPlayerIsNew=function(){return 1==this.getLevel()},n.getDiamond=function(){var e=this.getCustomData("diamond");return GameCore.Utils.Valid.isNumber(e)?e:0},n.getBestScore=function(){return Me(this.state)},n.getCustomData=function(e){var t=_e(this.state);return GameCore.Utils.Valid.isObject(t)&&GameCore.Utils.Object.hasOwn(t,e)?t[e]:null},n.getConnectedPlayers=function(){return Be(this.state)},n.getConnectedPlayerIds=function(e,t){return Ne(this.state,{limit:e,offset:t})},n.getLevel=function(){return Ze(this.state)},n.getCountItems=function(){return this.getCustomData("countItems")},(0,U.Z)(t,[{key:"state",get:function(){return this.game.storage.getState()}}]),t}(Phaser.Plugins.BasePlugin),Xe=qe,Je=GameCore.Configs.ApiHost,Qe=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=GameCore.Utils.String.params(t),e.next=3,(0,ve.U)("players?"+n,{},Je);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||[]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$e="PROFILES_DATA_UPDATE",et="profile",tt=(0,K.P1)([function(e){return e[et].data}],(function(e){return e})),nt=(0,K.P1)([function(e){return e[et].profileIds}],(function(e){return e})),it=function(e){return function(){var t=(0,s.Z)(u().mark((function t(n,r){var a,s,o,c;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,a=r(),s=nt(a),!((o=GameCore.Utils.Array.difference(e,s)).length<1)){t.next=6;break}return t.abrupt("return");case 6:return t.next=8,Qe({playerIds:o});case 8:c=t.sent,n({type:$e,payload:{data:c}}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),(0,i.tO)(t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e,n){return t.apply(this,arguments)}}()},rt=function(e){function t(){return e.apply(this,arguments)||this}(0,o.Z)(t,e);var n=t.prototype;return n.requestProfiles=function(){var e=(0,s.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch(it(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getProfiles=function(){return tt(this.state)},(0,U.Z)(t,[{key:"state",get:function(){return this.game.storage.getState()}}]),t}(Phaser.Plugins.BasePlugin),at=rt,st=n(21),ot=n.n(st),ct=["player","match"],ut="null",lt=GameCore.Utils,ht=lt.Valid,dt=lt.Object,pt=GameCore.Configs.Rollbar,ft=pt.UseMockup,mt=pt.FilterError,gt=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i))||this).enable=void 0,t.rollbar=void 0,t.events=[],t.beforeSend=function(e,n,i){ft&&t.showPopupError(i)},t.checkIgnore=function(e,n,i){try{return!!t.isErrorIgnore(n)&&(console.warn(n),!0)}catch(r){return!1}},t.showPopupError=function(e){var n,i,r,a=null==e||null==(n=e.body)||null==(n=n.trace)?void 0:n.exception;a&&t.events.push(a);var s=(null==e||null==(i=e.body)||null==(i=i.trace)?void 0:i.frames)||[];(r=t.events).push.apply(r,s);var o=document.getElementById("popup-error");o||((o=document.createElement("div")).id="popup-error",document.body.appendChild(o)),o.innerHTML='<div style="color: #fff; display: flex; flex-flow: column; align-items: center; ">\n      <pre id="json" style="overflow: auto; background-color: rgb(195 112 97 / 80%); padding: 10px; max-height: 80vh; max-width: 90vw; border: 5px solid #545454;">'+JSON.stringify(t.events,null,2)+'</pre>\n      <button id="close" style="cursor: pointer; padding: 10px 20px; border-radius: 100px;">Close</button>\n      </div>',o.style="top: 0px; z-index: 10000; width: 100vw; max-height: 100vh; position: absolute; display: flex; align-items: center; justify-content: center;";var c=document.getElementById("close");c&&(c.onclick=t.closePopup)},t.closePopup=function(){t.events=[{}];var e=document.getElementById("popup-error");null==e||e.remove()},t.isNoneErrorEvent=function(e){if(!e||0===e.length)return!1;if(!e[0].message)return!1;return"Non-Error promise rejection captured with keys: code, message"===e[0].message},t.isErrorIgnore=function(e){if(!e||0===e.length)return!1;var n=!1,i=e[0];return i instanceof Object&&(n=t.isIgnoreByCode(i)||t.isIgnoreByMessage(i)),n},t.isIgnoreByCode=function(e){if(dt.hasOwn(e,"code")){var t=e.code,n=mt.Codes,i=n.accepted,r=n.ignored;if("string"===typeof t){if(i.indexOf(t)>=0)return!1;if(r.indexOf(t)>=0)return!0}}if(dt.hasOwn(e,"name")){var a=e.name,s=mt.Codes,o=s.accepted,c=s.ignored;if("string"===typeof a){if(o.indexOf(a)>=0)return!1;if(c.indexOf(a)>=0)return!0}}return!1},t.isIgnoreByMessage=function(e){if(dt.hasOwn(e,"message")){var t=e.message,n=mt.Messages,i=n.accepted,r=n.ignored;if("string"===typeof t){if(i.indexOf(t)>=0)return!1;if(r.indexOf(t)>=0)return!0}}return!1},t.addExtraState=function(){try{if(!dt.hasOwn(window,"game"))return;if(!dt.hasOwn(window.game,"storage"))return;if(!dt.hasOwn(window.game.storage,"getState"))return;var e=(0,window.game.storage.getState)()||{},n=e.player,i=e.match,a=(0,r.Z)(e,ct);t.rollbar.configure({payload:{player:n,match:i,other:a}})}catch(s){console.warn("%c addExtraState: ","font-size:12px;background-color: #42b983;color:#fff;",s)}},t}(0,o.Z)(t,e);var n=t.prototype;return n.setup=function(){this.rollbar=new(ot())({accessToken:ut,checkIgnore:this.checkIgnore,onSendCallback:this.beforeSend,captureUncaught:!0,scrubTelemetryInputs:!0,captureUnhandledRejections:!0,autoInstrument:{dom:!1,navigation:!1},payload:{environment:"production",client:{javascript:{code_version:"0"}},server:{root:"webpack:///./",branch:"master"}}}),this.enable=!0,this.sendTestException()},n.configure=function(e){this.rollbar&&this.rollbar.configure(e)},n.sendTestException=function(){if(!ht.isDebugger()){var e=FBInstant.player.getID();e&&this.rollbar.debug(new Error("Test rollbar"),{playerID:e})}},n.sendException=function(e,t){e&&(this.enable?this.rollbar&&(this.addExtraState(),this.rollbar.error(e,t)):console.error(e))},t}(Phaser.Plugins.BasePlugin),vt=gt,yt=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.emit=function(t,n){return e.prototype.emit.call(this,t,n)},t}(Phaser.Events.EventEmitter),bt=yt,At=n(7),St=n(37),Et=function(e){function t(t,n,i,r){var a;(a=e.call(this,t)||this).zone=void 0,a.background=void 0,a.setName(n),a.setVisible(!1);var s=a.scene.world.getWorldSize(),o=s.width,c=s.height;return a.setSize(i||o,r||c),a.addZone(),a.addBackground(),a.registerEvents(),a}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(e){GameCore.Utils.Valid.isObject(e)&&(this.setDataEnabled(),this.setData(e)),this.setBlockInputOutsideEnabled(!0),this.scene.screen.bringToTop(this.name),this.visible||(this.setVisible(!0),this.logPageviewOnOpen(),this.logEventOpen(),this.handleResize())},n.close=function(){this.setBlockInputOutsideEnabled(!1),this.visible&&(this.setVisible(!1),this.logPageviewOnClose())},n.incY=function(e){this.y+=e,this.background.y-=e},n.incX=function(e){this.x+=e,this.background.x-=e},n.incScale=function(e){this.scale+=e,this.background.scale-=e^e*(100/e)},n.setBlockInputOutsideEnabled=function(e){this.scene.input.setTopOnly(e)},n.addZone=function(){this.zone=this.scene.add.zone(0,0,this.width,this.height),this.zone.setInteractive({}),this.add(this.zone)},n.addBackground=function(){var e="screen-background";if(!this.scene.textures.exists(e)){var t=this.width+2,n=this.height+2,i=this.scene.add.graphics();i.fillStyle(0,1),i.fillRect(0,0,t,n),i.generateTexture(e,t,n),i.destroy()}this.background=this.scene.add.image(0,0,e),this.add(this.background)},n.registerEvents=function(){this.scene.world.events.on(St.Z.RESIZE,this.handleResize,this)},n.handleResize=function(){var e=this.scene.world.getWorldSize(),t=e.width,n=e.height;this.setSize(t,n).setPosition(t/2,n/2),this.zone.setSize(this.width,this.height),this.background.setDisplaySize(this.width,this.height)},n.logPageviewOnOpen=function(){this.scene.analytics.pageview(this.name)},n.logPageviewOnClose=function(){this.scene.analytics.pageview(this.scene.scene.key)},n.logEventOpen=function(){this.scene.analytics.event(At._.SCREEN_OPEN,{screen_name:this.getScreenName()})},n.getScreenName=function(){return GameCore.Utils.String.toUpperCamelCase(this.name.toLowerCase())},t}(Phaser.GameObjects.Container),wt=Et,Ct={OPEN:"open",CLOSE:"close",CREATED:"created"};GameCore.Screen=wt,GameCore.Screens={Events:Ct};var Tt=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this).events=void 0,t}(0,o.Z)(t,e);var n=t.prototype;return n.boot=function(){this.events=new bt,this.registryScreenFactory()},n.get=function(e){var t=this.scene.children.getByName(e);return null===t?null:t},n.add=function(e,t,n,i){var r=this.get(e);return r||(r=this.scene.add.screen(e,t,n,i),this.events.emit(GameCore.Screens.Events.CREATED,r),r)},n.open=function(e,t){var n=this.get(e);return!!n&&(n.open(t),n.emit(GameCore.Screens.Events.OPEN,n),this.events.emit(GameCore.Screens.Events.OPEN,n),console.log("Screen open",e,t),!0)},n.close=function(e){var t=this.get(e);return!!t&&(t.close(),t.emit(GameCore.Screens.Events.CLOSE,t),this.events.emit(GameCore.Screens.Events.CLOSE,t),console.log("Screen close",e),!0)},n.bringToTop=function(e){var t=this.scene.children.getByName(e);t&&this.scene.children.bringToTop(t)},n.registryScreenFactory=function(){Phaser.GameObjects.GameObjectFactory.register("screen",this.createScreen)},n.createScreen=function(e,t,n,i){var r=new t(this.scene,e,n,i);return Phaser.Display.Align.In.Center(r,this.scene.gameZone),this.existing(r),r},t}(Phaser.Plugins.ScenePlugin),It=Tt,xt=n(23),kt=n.n(xt),Pt=n(33),Lt=n(35),Ot=n(34),Rt={currentSceneKey:"",prevSceneKey:""};(0,Ot.pV)();var Dt,Bt,Nt,Mt,_t,Zt,Gt,Ut,Ft,Ht={processed:!1,contextId:"",contextType:"SOLO",entryPointData:{},currentGameMode:""},zt=Ht,Kt={data:{}},Yt={token:"",isRequesting:!1},Wt=(Dt={},Dt[Y]=function(e,t){return void 0===e&&(e=Yt),(0,Ot.ZP)(e,(function(e){var n=t.payload;if(n){var i=n.token;switch(t.type){case F:e.isRequesting=!0;break;case H:e.token=i,e.isRequesting=!1}}}))},Dt),jt=n(12),Vt={ASID:"",playerId:"",name:"",photo:"",locale:"",connectedPlayers:{},data:{score:0,settings:ae,userGuideDisplays:0,customFields:{level:1}},isUserNew:!0},qt=(Bt={},Bt[Pe]=function(e,t){return void 0===e&&(e=Vt),(0,Ot.ZP)(e,(function(n){var i=t.payload;if(i){var r=i.name,a=i.value,s=i.data,o=void 0===s?{}:s,c=i.score,u=i.connectedPlayers,l=void 0===u?[]:u,h=i.profile;switch(t.type){case Se:var d=i.playerId,p=i.name,f=i.photo,m=i.locale,g=i.data;if(n.playerId=d,n.name=p,n.photo=f,n.locale=m,GameCore.Utils.Valid.isObject(g)){var v=g;n.data=(0,jt.TS)(e.data,v)}break;case Ce:var y=h.playerId,b=h.name,A=h.photo,S=h.locale,E=h.ASID;n.ASID=E,n.playerId=y,n.name=b,n.photo=A,n.locale=S;break;case we:n.data.score=c;break;case Te:if(!GameCore.Utils.Object.hasOwn(n.data.settings,r))break;n.data.settings[r]=a;break;case Ee:n.data=(0,jt.TS)(e.data,o),o.userGuideDisplays>0&&(n.isUserNew=!1);break;case Ie:if(l.length<=0)break;var w=GameCore.Utils.Object.keyBy(l,"playerId");n.connectedPlayers=(0,jt.TS)(e.connectedPlayers,w)}}}))},Bt),Xt={data:{},profileIds:[]},Jt=(Nt={},Nt[et]=function(e,t){return void 0===e&&(e=Xt),(0,Ot.ZP)(e,(function(n){var i=t.payload;if(i){var r=i.data,s=void 0===r?[]:r;if(t.type===$e){var o=GameCore.Utils.Object.keyBy(s,"playerId"),c=Object.keys(o);n.data=(0,jt.TS)((0,a.Z)({},e.data),o),n.profileIds=[].concat(new Set([].concat(e.profileIds,c)))}}}))},Nt),Qt="match",$t="MATCH_GAMEPLAY_INITIALIZE",en="MATCH_GAMEPLAY_START",tn="MATCH_GAMEPLAY_FINISH",nn="MATCH_GAMEPLAY_UPDATE",rn="MATCH_GAMEPLAY_RESCUE",an="MATCH_STATS_DATA_CLEAR",sn="MATCH_STATS_DATA_UPDATE",on="MATCH_STATS_CURRENT_UPDATE",cn="MATCH_SINGLE_CREATE_REQUEST",un="MATCH_SINGLE_DETAIL_REQUEST",ln="MATCH_SINGLE_MOVE_UPDATED",hn="MATCH_SINGLE_DATA_RECEIVED",dn="MATCH_SINGLE_DATA_CLEAR",pn="MATCH_CHALLENGE_JOIN_REQUEST",fn="MATCH_CHALLENGE_CREATE_REQUEST",mn="MATCH_CHALLENGE_FINISH_REQUEST",gn="MATCH_CHALLENGE_CONTINUE_REQUEST",vn="MATCH_CHALLENGE_DATA_RECEIVED",yn="MATCH_CHALLENGE_DATA_CLEAR",bn="MATCH_GROUP_CREATE_REQUEST",An="MATCH_GROUP_FINISH_REQUEST",Sn="MATCH_ONLINE_CREATE_REQUEST",En="MATCH_ONLINE_DATA_RECEIVED",wn="open",Cn="active",Tn="finished",In={mode:"",status:wn,rescued:0,startAt:0,finishAt:0},xn={single:{_id:"",data:{fen:""},playerId:"",status:wn},group:{status:wn,opponentInfo:{playerId:"",name:"",photo:""}},challenge:{_id:"",status:wn,whitePlayerId:"",blackPlayerId:"",opponentInfo:{playerId:"",name:"",photo:""}},online:{_id:"",status:wn,players:{}},updateAt:0,isRequesting:!1},kn={current:{updateAt:0},data:{updateAt:0},isRequesting:!1},Pn=(Mt={},Mt[Qt]=(0,Pt.UY)({gameplay:function(e,t){return void 0===e&&(e=In),(0,Ot.ZP)(e,(function(n){var i=t.payload;if(i){var r=i.mode,a=i.status;switch(t.type){case $t:n.status=wn,n.mode=In.mode,n.rescued=In.rescued,n.startAt=In.startAt,n.finishAt=In.finishAt,n.opponentInfo=In.opponentInfo;break;case en:n.mode=r,n.status=Cn,n.rescued=In.rescued,n.startAt=Date.now();break;case nn:n.mode="string"===typeof r?r:e.mode,n.status=a||e.status;break;case tn:n.status=Tn,n.finishAt=Date.now();break;case rn:n.rescued+=1}}}))},match:function(e,t){return void 0===e&&(e=xn),(0,Ot.ZP)(e,(function(n){var i=t.payload;if(i){var r=i.match,s=i.opponentInfo,o=i.players;switch(t.type){case cn:case un:case pn:case mn:case Sn:n.isRequesting=!0;break;case ln:n.single=(0,a.Z)({},e.single,r),n.updateAt=Date.now();break;case hn:n.isRequesting=!1,n.single=r||xn.single;break;case dn:n.isRequesting=!1,n.single=xn.single;break;case fn:case gn:n.isRequesting=!0,n.challenge.opponentInfo=s;break;case vn:n.isRequesting=!1,n.challenge=(0,a.Z)({},r||xn.challenge),n.challenge.opponentInfo=e.challenge.opponentInfo;break;case yn:n.isRequesting=!1,n.challenge=xn.challenge;break;case bn:n.group.status=Cn,s&&(n.group.opponentInfo=s);break;case An:n.group.status=Tn;break;case"MATCH_ONLINE_DATA_CLEAR":n.online.status=xn.online.status,n.online.players=xn.online.players;break;case En:n.online.status=Cn,n.online.players=o;break;case"MATCH_ONLINE_FINISH_REQUEST":n.online.status=Tn}}}))},stats:function(e,t){return void 0===e&&(e=kn),(0,Ot.ZP)(e,(function(n){var i=t.payload;if(i){var r=i.playerId,s=i.stats,o=i.match,c=i.current,u=i.players,l=i.leaders;switch(t.type){case an:delete n.data[r],n.current=kn.current;break;case"MATCH_STATS_CONTEXT_REQUEST":n.data=kn.data,n.isRequesting=!0;break;case"MATCH_STATS_CONTEXT_RECEIVED":n.data=s,n.isRequesting=!1;break;case sn:n.data[r]=s;break;case on:n.current=(0,jt.TS)((0,a.Z)({},e.current),s);break;case En:Object.keys(u).forEach((function(e){n.data[e]={score:0}}));break;case"MATCH_ONLINE_STATS_UPDATE":l.forEach((function(e){var t=e.playerId,i=e.score,r=e.rank;n.data[t]={score:i,rank:r}}));break;case vn:var h=o||{},d=h.blackPlayerId,p=h.blackPlayerScore,f=h.whitePlayerId,m=h.whitePlayerScore,g=h.whitePlayerLevel,v=h.blackPlayerLevel;if(!d||!f)break;c&&(n.current=c),n.data[d]={score:p,level:v},n.data[f]={score:m,level:g}}}}))}}),Mt),Ln="TOURNAMENT_ACTIVE",On="TOURNAMENT_REQUEST",Rn="TOURNAMENT_RECEIVED",Dn={active:!1,tournamentId:null,bestSessionScore:0,isRequesting:!1},Bn=(_t={},_t.tournament=function(e,t){return void 0===e&&(e=Dn),(0,Ot.ZP)(e,(function(n){var i=t.payload;if(i){var r=i.score,a=void 0===r?0:r,s=i.tournamentId;switch(t.type){case Ln:n.active=!0,n.tournamentId=s;break;case On:n.isRequesting=!0;break;case Rn:n.isRequesting=!1,a>e.bestSessionScore&&(n.bestSessionScore=a)}}}))},_t),Nn="leaderboards",Mn="LEADERBOARD_DATA_REQUEST",_n="LEADERBOARD_DATA_UPDATE",Zn="LEADERBOARD_DATA_CLEAR",Gn={leaderboardId:"",type:"",limit:0,offset:0,leaders:{},isRequesting:!1},Un=(Zt={},Zt[Nn]=function(e,t){return void 0===e&&(e=Gn),(0,Ot.ZP)(e,(function(n){var i=t.payload;if(i){var r=i.leaderboardId,s=i.type,o=i.limit,c=i.offset,u=i.leaders;switch(t.type){case Mn:e.type!==s&&0===c&&(n.leaders=Gn.leaders),n.isRequesting=!0,n.leaderboardId=r,n.type=s,n.limit=o,n.offset=c;break;case _n:if(n.isRequesting=!1,e.type!==s)break;var l=GameCore.Utils.Json.clone((0,a.Z)({},e.leaders,u)),h=Object.values(l).filter((function(e){return!!e.name&&!!e.photo}));h.sort((function(e,t){return+t.score-+e.score})),h.forEach((function(t,i){t.rank=i+1,e.leaders[t.playerId]||(n.leaders[t.playerId]=t)}));break;case Zn:n.isRequesting=!1,n.type=Gn.type,n.limit=Gn.limit,n.offset=Gn.offset,n.leaders=Gn.leaders,n.leaderboardId=Gn.leaderboardId}}}))},Zt),Fn="missions",Hn="MISSIONS_DATA_REQUEST",zn="MISSIONS_DATA_RECEIVE",Kn="MISSION_UPDATE",Yn="MISSION_COMPLETED",Wn={mission:null,missions:null,isRequesting:!1},jn=(Gt={},Gt[Fn]=function(e,t){return void 0===e&&(e=Wn),(0,Ot.ZP)(e,(function(n){var i,r,a=t.payload;if(a){var s=a.name,o=a.type,c=a.value,u=a.missions;switch(t.type){case Hn:n.isRequesting=!0;break;case zn:if(n.isRequesting=!1,u.length<1)return;n.missions={},u.forEach((function(e){n.missions[e.name]=e}));break;case"MISSION_START":if(null===e.missions)break;var l=e.missions[s];n.mission={name:s,process:{},require:l.require,reward:l.reward},Object.keys(l.require).forEach((function(e){n.mission.process[e]=0}));break;case Kn:if((null==(i=e.mission)?void 0:i.name)!==s)break;n.mission.process[o]+=c;break;case Yn:if((null==(r=e.mission)?void 0:r.name)!==s)break;n.mission=null}}}))},Gt),Vn="dailyTasks",qn="DAILY_TASKS_DATA_REQUEST",Xn="DAILY_TASKS_DATA_RECEIVE",Jn="DAILY_TASKS_PROCESS_UPDATE",Qn="DAILY_TASK_VALUE_ADD",$n="DAILY_TASK_REWARDED",ei="DAILY_TASKS_SEEN",ti="DAILY_TASK_FINISHED",ni={tasks:[],process:[],isRequesting:!1,isNotice:!1},ii=(Ut={},Ut[Vn]=function(e,t){return void 0===e&&(e=ni),(0,Ot.ZP)(e,(function(n){var i=t.payload;if(i){var r=i.id,a=i.type,s=i.value,o=i.tasks,c=i.process;switch(t.type){case qn:n.isRequesting=!0;break;case Xn:n.isRequesting=!1,n.tasks=o;break;case Jn:n.process=c;break;case Qn:if(!e.process[r])break;n.process[r][a]+=s;break;case $n:if(!e.process[r])break;n.process[r].rewarded=!0;break;case ei:n.isNotice=!1;break;case ti:n.isNotice=!0}}}))},Ut),ri="dailyRewards",ai="DAILY_REWARDS_REQUEST",si="DAILY_REWARDS_RECEIVE",oi={rewards:[],isRequesting:!1},ci=(Ft={},Ft[ri]=function(e,t){return void 0===e&&(e=oi),(0,Ot.ZP)(e,(function(e){var n=t.payload;if(n){var i=n.rewards;switch(t.type){case ai:e.isRequesting=!0;break;case si:e.isRequesting=!1,e.rewards=i}}}))},Ft),ui=(0,Pt.UY)((0,a.Z)({scene:function(e,t){return void 0===e&&(e=Rt),(0,Ot.ZP)(e,(function(n){var i=t.payload;if(i){var r=i.sceneKey;if(t.type===Lt.DW)n.currentSceneKey=r,n.prevSceneKey=e.currentSceneKey}}))},context:function(e,t){return void 0===e&&(e=Ht),(0,Ot.ZP)(e,(function(e){var n=t.payload;if(n){var i=n.gameMode,r=n.contextId,a=n.contextType,s=n.entryPointData;switch(t.type){case Lt.kL:e.contextId=r,e.contextType=a,e.entryPointData=s;break;case Lt.fJ:e.contextId=r,e.contextType=a,e.processed=!0;break;case Lt.EH:e.currentGameMode=i}}}))},messages:function(e,t){return void 0===e&&(e=Kt),(0,Ot.ZP)(e,(function(n){var i=t.payload;if(i){var r=i.opponentId;if("string"===typeof r)switch(t.type){case Lt.qj:e.data[r]?n.data[r].sent=!0:n.data[r]={sent:!0};break;case Lt.rh:e.data[r]?n.data[r].sent=!1:n.data[r]={sent:!1}}}}))}},Wt,qt,Jt,Pn,Bn,Un,jn,ii,ci)),li=ui,hi=n(60),di=function(e){return(0,hi.xC)({reducer:li,preloadedState:e,devTools:!0})},pi=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this).store=void 0,t.initiator=void 0,t.dispatch=function(e){return t.store.dispatch(e)},t.getState=function(){return t.store.getState()},t.subscribe=function(e){return t.store.subscribe(e)},t.watch=function(e,n){var i=kt()((function(){var n=t.getState();return e(n)}));return t.subscribe(i((function(e){n(e)})))},t}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.store=di({})},n.setInitiator=function(e){this.initiator=e},n.syncStore=function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.initiator.initContext(),e.next=3,this.initiator.initPlayer();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.Plugins.BasePlugin),fi=pi,mi=n(57),gi=n.n(mi),vi=function(e){function t(t,n){var i;return(i=e.call(this,t,{type:"webfont",key:n.type})||this).payload=void 0,i.payload=n,i}(0,o.Z)(t,e);var n=t.prototype;return n.load=function(){var e;switch(this.payload.type){case"google":e=this.getGoogleFontConfig(this.payload);break;case"local":e=this.getLocalFontConfig(this.payload)}gi().load(e)},n.getGoogleFontConfig=function(e){var t=this,n=e.character,i=e.fontName,r=e.fontWeight;return{google:{families:[i+":"+(void 0===r?400:r)],text:n},active:function(){t.loader.nextFile(t,!0)},timeout:15e3}},n.getLocalFontConfig=function(e){var t=this,n=e.fontName,i=e.fontType,r=document.createElement("style");document.head.appendChild(r);var a=r.sheet;if(a){var s='@font-face { font-family: "'+n+'"; src: url("assets/fonts/'+n+("opentype"===i?".otf":".ttf")+'") format("'+i+'"); }';a.insertRule(s,0)}return{custom:{families:[n]},active:function(){t.loader.nextFile(t,!0)},timeout:15e3}},t}(Phaser.Loader.File),yi=vi,bi=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.addFont=function(e){var t=new yi(this.scene.load,e);this.scene.load.addFile(t)},t}(Phaser.Plugins.ScenePlugin),Ai=bi,Si=n(13),Ei=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.emit=function(t){return e.prototype.emit.call(this,t)},t}(Phaser.Events.EventEmitter),wi=Ei,Ci=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this).events=void 0,t.previousLayout=void 0,t.resizeEventData=void 0,t.portraitRatio=void 0,t.portraitWidth=void 0,t.portraitHeight=void 0,t.landscapeRatio=void 0,t.landscapeWidth=void 0,t.landscapeHeight=void 0,t.worldWidth=void 0,t.worldHeight=void 0,t.worldRatio=void 0,t.autoResize=void 0,t.disableLandscape=void 0,t.fullSizeOnLandscape=void 0,t.currentLayout=void 0,t.forcePixelRatio=void 0,t.handleResize=(0,Si.D)((function(){t.previousLayout=""+t.currentLayout,t.initWorldSize(),t.resize()}),300),t}(0,o.Z)(t,e);var n=t.prototype;return n.configure=function(e){this.events=new wi;var t=e.autoResize,n=e.portraitRatio,i=e.portraitWidth,r=e.portraitHeight,a=e.landscapeWidth,s=e.landscapeHeight,o=e.landscapeRatio,c=e.disableLandscape,u=e.fullSizeOnLandscape;this.autoResize=t,this.disableLandscape=c,this.fullSizeOnLandscape=u,this.portraitRatio=n,this.portraitWidth=i,this.portraitHeight=r,this.landscapeRatio=o,this.landscapeWidth=a,this.landscapeHeight=s,this.initWorldSize(),this.addEventResize()},n.resize=function(e){var t=this;e&&e>0&&(this.forcePixelRatio=e);var n=this.getCanvasSizeFixedRatio(this.worldRatio),i=n.width,r=n.height;this.resizeCanvas(i,r),this.game.scene.scenes.forEach((function(e){var n=e.cameras.main;if(n){var i=t.getZoomRatio(),r=t.getWorldSize(),a=r.width,s=r.height;if(n.setZoom(i),n.centerOn(a/2,s/2),GameCore.Utils.Object.hasOwn(e,"updateLandscapeBackground"))e.updateLandscapeBackground()}}));var a={width:this.worldWidth,height:this.worldHeight,isLayoutChanged:!1,newLayout:this.currentLayout};this.previousLayout!==this.currentLayout&&(a.isLayoutChanged=!0,a.newLayout=this.currentLayout),this.resizeEventData=a,this.events.emit(St.Z.RESIZE,a)},n.getResizeEventData=function(){return this.resizeEventData},n.resizeCanvas=function(e,t){this.game.canvas.width=e,this.game.canvas.height=t,this.game.scale.resize(e,t)},n.getWorldSize=function(){return{width:this.worldWidth,height:this.worldHeight}},n.initWorldSize=function(){if(this.worldWidth=this.portraitWidth,this.worldHeight=this.portraitHeight,this.isScreenSmallerRatio(this.portraitRatio))this.worldHeight=this.worldWidth/this.getScreenRatio(),this.currentLayout="portrait";else if(!this.disableLandscape&&(this.worldWidth=this.landscapeWidth,this.worldHeight=this.landscapeHeight,this.currentLayout="landscape",this.fullSizeOnLandscape)){this.worldRatio=this.worldWidth/this.worldHeight,this.landscapeRatio=this.getScreenRatio();var e=this.getCanvasSizeFixedRatio(this.landscapeRatio),t=e.width,n=e.height,i=this.getZoomRatio();this.worldWidth=t/i,this.worldHeight=n/i}this.worldRatio=this.worldWidth/this.worldHeight,console.info("\ud83d\ude80 > this.worldRatio",this.worldRatio)},n.getZoomRatio=function(){var e=this.getWorldSize().width;return this.getCanvasSizeFixedRatio(this.worldRatio).width/e},n.getPixelRatio=function(){if(this.forcePixelRatio>0)return this.forcePixelRatio;if(GameCore.Utils.Device.isDesktop())return 2;var e=GameCore.Utils.Device.pixelRatio();return e>2&&(e=2),e},n.getPhysicPixels=function(e,t){return e*t},n.getCanvasSizeFixedRatio=function(e){var t=this.getPixelRatio(),n=this.getScreenWidth()*t,i=this.getScreenHeight()*t;return this.isScreenSmallerRatio(e)?i=n/e:n=i*e,{width:n,height:i}},n.getScreenRatio=function(){return this.getScreenWidth()/this.getScreenHeight()},n.getScreenHeight=function(){var e=document,t=e.body,n=e.documentElement,i=t.clientHeight,r=n.clientHeight;return Math.max(r,i)||0},n.getScreenWidth=function(){var e=document,t=e.body,n=e.documentElement,i=t.clientWidth,r=n.clientWidth;return Math.max(r,i)||0},n.isScreenSmallerRatio=function(e){return this.getScreenRatio()<e},n.addEventResize=function(){this.autoResize&&window.addEventListener("resize",this.handleResize)},n.isLandscape=function(){return!this.disableLandscape&&this.worldRatio>this.portraitRatio},t}(Phaser.Plugins.BasePlugin),Ti=Ci,Ii=function(){function e(e,t,n){this.contextId=void 0,this.contextType=void 0,this.entryPointData=void 0,this.contextId=e||zt.contextId,this.contextType=t||zt.contextType,this.entryPointData=n||zt.entryPointData}return e.prototype.toObject=function(){return{contextId:this.contextId,contextType:this.contextType,entryPointData:this.entryPointData}},e}(),xi=Ii,ki=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidPlayerId",i.message=t||"The playerId is not valid",i.payload=n,i}return(0,o.Z)(t,e),t}((0,T.Z)(Error)),Pi=ki,Li="share_invite",Oi="challenge_friend_match",Ri=n(31),Di=new xe.Z("10","Your Friend",Ri.Z.AVATAR.FILE).toObject(),Bi="single",Ni="challenge-friends",Mi="matching-group",_i="tournaments",Zi=(0,K.P1)([function(e){return e.context}],(function(e){return e})),Gi=(0,K.P1)([function(e){return e.context.currentGameMode}],(function(e){return e})),Ui=function(e,t){return{type:Lt.fJ,payload:{contextId:e,contextType:t}}},Fi=function(e){return function(t){t({type:Lt.EH,payload:{gameMode:e}}),(0,i.sw)("game-mode",e)}},Hi={score:"score",settings:"settings",gameData:"gameData",userGuideDisplays:"userGuideDisplays"},zi=GameCore.Configs.SyncProfileFromAPI,Ki=function(e){var t=this;this.game=void 0,this.initContext=function(){var e=window.GameSDK.context.getID(),n=window.GameSDK.context.getType(),i=window.GameSDK.getEntryPointData(),r=new xi(e,n,i).toObject(),a=r.contextId,s=r.contextType,o=r.entryPointData;t.game.storage.dispatch(function(e,t,n){return{type:Lt.kL,payload:{contextId:e,contextType:t,entryPointData:n}}}(a,s,o))},this.initPlayer=(0,s.Z)(u().mark((function e(){var n,i,r,a,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.game.player,i=t.getPlayerInfo(),r=Object.values(Hi),e.next=5,FBInstant.player.getDataAsync(r);case 5:return a=e.sent,console.info("\ud83d\ude80 > rawData",a),s=new ge(a),console.info("\ud83d\ude80 > playerData",s),e.next=11,t.maintainDataStructure(s);case 11:return s=e.sent,!0===s.toObject().settings.music&&window.game.audio.playMusic(),e.next=16,n.receiveData(i,s.convertToPlayerData());case 16:case"end":return e.stop()}}),e)}))),this.maintainDataStructure=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i,r,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,zi){e.next=3;break}return e.abrupt("return",t);case 3:return e.next=5,FBInstant.player.getDataAsync(["isSynced","customFields"]);case 5:if(e.t0=e.sent,e.t0){e.next=8;break}e.t0={};case 8:if(n=e.t0,!0!==(n.isSynced||!1)){e.next=12;break}return e.abrupt("return",t);case 12:if(i=n.customFields||!1){e.next=15;break}return e.abrupt("return",t);case 15:return(r=t.convertToPlayerData()).customFields=i,s=new ge({}).convertToFacebookData(r),e.next=20,FBInstant.player.setDataAsync((0,a.Z)({},s,{isSynced:!0}));case 20:return e.abrupt("return",new ge(s));case 23:return e.prev=23,e.t1=e.catch(0),console.warn(e.t1),e.abrupt("return",t);case 27:case"end":return e.stop()}}),e,null,[[0,23]])})));return function(t){return e.apply(this,arguments)}}(),this.getPlayerInfo=function(){try{var e=window.GameSDK.player.getID(),t=window.GameSDK.player.getName(),n=window.GameSDK.player.getPhoto(),i=window.GameSDK.getLocale();if(!GameCore.Utils.Valid.isString(e))throw new Pi(null,{playerId:e});return GameCore.Utils.Valid.isString(t)||(t="You"),new xe.Z(e,t,n,i).toObject()}catch(r){return new xe.Z("123","You").toObject()}},this.game=e},Yi=n(39),Wi=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this).Text=void 0,t.Texture=void 0,t.currentLocale=void 0,t.supportedLanguages=void 0,t.data=void 0,t.options=void 0,t}(0,o.Z)(t,e);var n=t.prototype;return n.configure=function(e){this.applyOptions(e)},n.getCurrentLanguage=function(){return this.currentLocale},n.switchLanguage=function(e){void 0===e&&(e="en");var t=this.getCorrectLocale(e);this.currentLocale=t,this.Text=this.data[t].Text,this.Texture=this.data[t].Texture},n.getText=function(e){if("object"==typeof e){var t=e.key,n=e.variables,i=void 0===n?[]:n,r=e.locale,a=void 0===r?this.currentLocale:r,s=this.getCorrectLocale(a),o=this.data[s].Text[t];return this.replaceVariables(o,i)}return this.Text[e]},n.getTexture=function(e){if("object"==typeof e){var t=e.key,n=e.variables,i=void 0===n?[]:n,r=e.locale,a=void 0===r?this.currentLocale:r,s=this.getCorrectLocale(a),o=this.data[s].Texture[t];return this.replaceVariables(o,i)}return this.Texture[e]},n.isSupportLanguage=function(e){return this.supportedLanguages.indexOf(e)>=0},n.applyOptions=function(e){this.options=(0,a.Z)({},e);var t=e.data,n=e.locale,i=void 0===n?"en":n,r=e.upperCaseText,s=void 0!==r&&r;this.data=t,this.supportedLanguages=Object.keys(t);var o=this.getCorrectLocale(i);if(this.currentLocale=o,this.Text=t[o].Text,this.Texture=t[o].Texture,s)for(var c in this.Text)this.Text[c]=this.Text[c].toUpperCase()},n.makeText=function(e,t){var n=t.maxWidth,i=void 0===n?Phaser.Math.MAX_SAFE_INTEGER:n,r=t.maxHeight,a=void 0===r?Phaser.Math.MAX_SAFE_INTEGER:r,s=t.align,o=void 0===s?"center":s,c=t.drawMaxBoxDebug,u=void 0!==c&&c,l=e.make.bitmapText(t);for("center"===o?l.setCenterAlign():"left"===o?l.setLeftAlign():"right"===o&&l.setRightAlign(),(t.text||"").indexOf(" ")>=0&&l.setMaxWidth(i);l.width>i||l.height>=a;)l.setFontSize(.95*l.fontSize),console.log({t:t.text,w:l.width,h:l.height});if(u&&GameCore.Utils.Valid.isDebugger()){var h=e.game.globalScene.add.graphics({lineStyle:{width:2,color:16711680}});h.setDepth(Phaser.Math.MAX_SAFE_INTEGER),e.game.globalScene.events.on(Phaser.Scenes.Events.UPDATE,(function(){if(h.clear(),l&&l.visible&&l.active){var e=l.getWorldPosition(),t=e.x,n=e.y;h.strokeRect(t-.5*i+(.5-l.originX)*l.width,n-.5*a+(.5-l.originY)*l.height,i,a)}}))}return l},n.setFontSize=function(e,t,n){var i=t||Phaser.Math.MAX_SAFE_INTEGER,r=n||Phaser.Math.MAX_SAFE_INTEGER;for((e.text||"").indexOf(" ")>=0&&e.setMaxWidth(i);e.width>i||e.height>=r;)e.setFontSize(.95*e.fontSize)},n.replaceVariables=function(e,t){var n=t.length;if(0==n)return e;var i=0;return e.replace(/{.*}/,(function(){return String(t[Math.min(i++,n-1)])}))},n.getCorrectLocale=function(e){var t=e;return this.isSupportLanguage(e)||(t="en"),t},t}(Phaser.Plugins.BasePlugin),ji=JSON.parse('{"Text":{"empty_{X}":"empty_{X}"},"Texture":{"empty_2_{abc}":"empty_2_{abc}"}}'),Vi={en:ji},qi=Vi,Xi=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.configure=function(t){e.prototype.configure.call(this,(0,a.Z)({data:qi,locale:"en",upperCaseText:!1},t))},t}(Wi),Ji=Xi,Qi=GameCore.Ads.Types,$i=[At._.SCREEN_OPEN],er=(function(e){function t(t,n){var i;(i=e.call(this,"GoogleAnalytics",(0,a.Z)({},n),"#E35335")||this).game=void 0,i.trackingId=void 0,i.currentPath="/";var r=n.trackingId;i.game=t;var s=(GameCore.Configs.Analytics.GoogleAnalytics||{}).consoleLog;return i.selfLog=!!s,i.trackingId=r,i}(0,o.Z)(t,e);var n=t.prototype;n.processEvent=function(e,t,n){if(!($i.indexOf(e)>=0)){var i=this.formatEventName(e),r=t?(0,a.Z)({},t):{};r=n?(0,a.Z)({},r,{value:n}):r,r=(0,a.Z)({},r,{page_path:this.currentPath,send_to:"GA"}),gtag("event",i,r)}},n.processLevelStart=function(e,t,n){this.processEvent(At._.LEVEL_START,{level:e,score:t,level_name:n})},n.processLevelRescue=function(e,t,n){this.processEvent(At._.LEVEL_RESCUE,{level:e,score:t,level_name:n})},n.processLevelFail=function(e,t,n,i){this.processEvent(At._.LEVEL_END,(0,a.Z)({level:e,score:t,level_name:n,success:!1},i))},n.processLevelComplete=function(e,t,n,i){this.processEvent(At._.LEVEL_END,{level:e,score:t,level_name:n,success:!0})},n.processLoadPreRollAd=function(e){var t=this.getEdaType(Qi.PRE_ROLL);this.processEvent(At._.AD_LOAD,{ad_type:t,screen_name:""+e})},n.processShowPreRollAd=function(e){var t=this.getEdaType(Qi.PRE_ROLL);this.processEvent(At._.AD_SHOW,{ad_type:t,screen_name:""+e}),this.processEvent(At._.AD_IMPRESSION,{ad_format:t})},n.processLoadInterstitialAd=function(e){var t=this.getEdaType(Qi.INTERSTITIAL);this.processEvent(At._.AD_LOAD,{ad_type:t,screen_name:""+e})},n.processShowInterstitialAd=function(e){var t=this.getEdaType(Qi.INTERSTITIAL);this.processEvent(At._.AD_SHOW,{ad_type:t,screen_name:""+e,level:this.game.level.getLevel()}),this.processEvent(At._.AD_IMPRESSION,{ad_format:"Interstitial"})},n.processLoadRewardedVideoAd=function(e){var t=this.getEdaType(Qi.REWARDED);this.processEvent(At._.AD_LOAD,{ad_type:t,screen_name:""+e})},n.processShowRewardedVideoAd=function(e){var t=this.getEdaType(Qi.REWARDED);this.processEvent(At._.AD_SHOW,{ad_type:t,screen_name:""+e,level:this.game.level.getLevel()}),this.processEvent(At._.AD_IMPRESSION,{ad_format:"Rewarded"})},n.processLoadAdFail=function(e,t){var n=this.getEdaType(e);this.processEvent(At._.AD_LOAD_FAILED,{ad_type:n,screen_name:""+t})},n.processShowAdFail=function(e,t,n){var i=(null==n?void 0:n.code)||"unknown",r=this.getEdaType(e);this.processEvent(At._.AD_SHOW_FAILED,{ad_type:r,screen_name:""+t,code:i,level:this.game.level.getLevel()})},n.processPageView=function(e){var t=this.getGameplayMode(),n="/"+t+"/"+e;this.currentPath=n,document.title=this.formatPageTitle(t,e),gtag("event","page_view",{page_path:this.currentPath,send_to:["GA",this.trackingId]})},n.getGameplayMode=function(){var e=this.game.storage.getState();return Gi(e)},n.formatEventName=function(e){return e.toLowerCase().replace(/:/g,"_")},n.formatPageTitle=function(e,t){return this.toUpperCamelCaseWithSpace(e)+"::"+this.toUpperCamelCaseWithSpace(t)},n.toUpperCamelCaseWithSpace=function(e){var t=e.replace(/[-_\s.]+(.)?/g,(function(e,t){return t?" "+t.toUpperCase():""}));return t.substr(0,1).toUpperCase()+t.substr(1)},n.getEdaType=function(e){switch(e){case Qi.INTERSTITIAL:return"interstitial";case Qi.PRE_ROLL:return"pre_roll";case Qi.REWARDED:return"rewarded_video";default:return"unknown"}}}(GameCore.Analytics.BaseAnalytics),function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).startGame=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.auth.requestToken();case 3:return e.next=5,t.storage.syncStore();case 5:return t.configureSentry(),t.configureRollbar(),e.next=9,t.detectGameMode();case 9:t.initGoogleAnalytics(),t.analytics.event(At._.LOAD_START),t.scene.launch(Yi.C.GLOBAL_SCENE),t.scene.start(Yi.C.LOAD_SCENE),t.analytics.pageview(Yi.C.LOAD_SCENE),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),(0,i.tO)(e.t0);case 19:return e.prev=19,t.facebook.progressLoading.finishLoadingProgressFbBootScene(),t.scene.sleep(Yi.C.BOOT_SCENE),e.finish(19);case 23:case"end":return e.stop()}}),e,null,[[0,16,19,23]])}))),t}(0,o.Z)(t,e);var n=t.prototype;return n.create=function(){this.facebook.progressLoading.loadingProgressFbBootScene(),this.startGame()},n.configureSentry=function(){var e=this.player.getPlayer();(0,i.Tv)({id:e.playerId,username:e.name})},n.configureRollbar=function(){if(this.rollbar){var e=this.player.getPlayer();this.rollbar.configure({payload:{person:{id:e.playerId,name:e.name}}})}},n.detectGameMode=function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.storage.dispatch(function(){var e=(0,s.Z)(u().mark((function e(t,n){var i,r,a,s,o,c,l,h,d,p,f,m,g,v,y;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n(),r=Zi(i),a=window.game.player,s=a.getPlayerId(),o=r.contextId,c=r.entryPointData,h=(l=c||{}).type,d=l.matchId,p=l.playerId,f=l.opponentId,m=void 0===f?Di.playerId:f,g=s===p,v=m===Di.playerId||[m,p].indexOf(s)>=0,y=Bi,e.prev=9,e.next=12,window.game.facebook.getTournamentAsync();case 12:y=_i,e.next=17;break;case 15:e.prev=15,e.t0=e.catch(9);case 17:o&&h===Li&&!g&&(y=Ni),d&&o&&v&&h===Oi&&(y=Ni),o&&"matching_group_match"===h&&(y=Mi),t(Fi(y));case 21:case"end":return e.stop()}}),e,null,[[9,15]])})));return function(t,n){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.initGoogleAnalytics=function(){},t}(Phaser.Scene)),tr=er,nr=n(10),ir=n(41),rr={PASS_LEVELS:{ID:"pass-levels",EVENTS:{PASS_LEVEL:"pass-level"}},COLLECT_DIAMONDS:{ID:"collect-diamonds",EVENTS:{COLLECT_DIAMONDS:"collect-diamonds"}},INVITE_FRIENDS:{ID:"invite-friends",EVENTS:{INVITED_FRIEND:"INVITED_FRIEND"}},REACH_SCORE:{ID:"reach-score",EVENTS:{ADD_SCORE:"add-score"}},EVENTS:{TASKS_RESET:"tasks-reset",NOTICE_UPDATE:"notice-update"}},ar=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidContextId",i.message=t||"This contextId is not valid",i.payload=n,i}return(0,o.Z)(t,e),t}((0,T.Z)(Error)),sr=ar,or="global",cr="friend",ur=GameCore.Configs,lr=ur.ApiHost,hr=ur.OtherHost,dr=ur.LeadersBoard,pr=dr.Prefix,fr=dr.LeaderboardId,mr=dr.Name,gr=pr+"/"+fr+"/leaders",vr=pr+"/"+fr+"/players",yr=function(e){var t="";return fr?(e===or?t=gr:e===cr&&(t=vr),t):t},br=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i,r,s,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.map((function(e){return e.playerId})),i=GameCore.Utils.Object.keyBy(t,"playerId"),r=GameCore.Utils.String.params({playerIds:n}),e.next=5,(0,ve.U)("players?"+r,{},lr);case 5:return s=e.sent,o=s.data.map((function(e){var t=i[e.playerId];return(0,a.Z)({},e,{score:t.score,rank:t.rank,getScore:function(){return t.score},getFormattedScore:function(){return""},getTimestamp:function(){return(new Date).valueOf()},getRank:function(){return t.rank},getExtraData:function(){return t.extraData},getPlayer:function(){return{getName:function(){return e.name},getPhoto:function(){return e.photo},getID:function(){return e.playerId}}}})})),e.abrupt("return",o);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ar=function(){var e=(0,s.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),null==fr){e.next=3;break}return e.abrupt("return",Sr(t));case 3:return e.abrupt("return",Er(t));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Sr=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i,r,a,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),n=[],i=yr(or)){e.next=5;break}return e.abrupt("return",n);case 5:return r=GameCore.Utils.String.params(t),e.next=8,(0,ve.U)(i+"?"+r,{},hr);case 8:if(a=e.sent,!((s=(null==a?void 0:a.data)||[]).length<1)){e.next=12;break}return e.abrupt("return",n);case 12:return n=s,e.abrupt("return",br(n));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Er=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i,r,a,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t={}),i=(n=t).limit,r=n.offset,e.next=4,window.GameSDK.getLeaderboardAsync(mr);case 4:return a=e.sent,e.next=7,a.getEntriesAsync(i,r);case 7:return s=e.sent,e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),wr=function(){var e=(0,s.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),null==fr){e.next=3;break}return e.abrupt("return",Cr(t));case 3:return e.abrupt("return",Tr(t));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Cr=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i,r,a,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),n=[],i=yr(cr)){e.next=5;break}return e.abrupt("return",n);case 5:return r=GameCore.Utils.String.params(t),e.next=8,(0,ve.U)(i+"?"+r,{},hr);case 8:if(a=e.sent,!((s=(null==a?void 0:a.data)||[]).length<1)){e.next=12;break}return e.abrupt("return",n);case 12:return n=s,e.abrupt("return",br(n));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Tr=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i,r,a,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t={}),i=(n=t).limit,r=n.offset,e.next=4,window.GameSDK.getLeaderboardAsync(mr);case 4:return a=e.sent,e.next=7,a.getConnectedPlayerEntriesAsync(i,r);case 7:return s=e.sent,e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ir=(function(){var e=(0,s.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==fr){e.next=2;break}return e.abrupt("return",Ir(t));case 2:return e.abrupt("return",xr());case 3:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,s.Z)(u().mark((function e(t){var n,i,r,a,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null,t){e.next=3;break}return e.abrupt("return",n);case 3:if(i=yr(cr)){e.next=6;break}return e.abrupt("return",n);case 6:return r=GameCore.Utils.String.params({playerIds:t}),e.next=9,(0,ve.U)(i+"?"+r,{},hr);case 9:if(a=e.sent,!((s=(null==a?void 0:a.data)||[]).length<1)){e.next=13;break}return e.abrupt("return",n);case 13:return e.next=15,br(s);case 15:return n=e.sent[0],e.abrupt("return",n);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),xr=function(){var e=(0,s.Z)(u().mark((function e(){var t,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.GameSDK.getLeaderboardAsync(mr);case 2:return t=e.sent,e.next=5,t.getPlayerEntryAsync();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),kr=function(){var e=(0,s.Z)(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.GameSDK.submitGameResultsAsync(n).catch((function(e){console.log(e)})),null==fr){e.next=5;break}if(""!==window.game.auth.getToken()){e.next=4;break}return e.abrupt("return",Promise.reject("Not logged in"));case 4:return e.abrupt("return",Pr(t,n));case 5:return e.abrupt("return",Lr(n));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Pr=function(){var e=(0,s.Z)(u().mark((function e(t,n){var i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,ve.v)("leaderboards/"+fr+"/players/"+t,{score:n},{},hr);case 2:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Lr=function(){var e=(0,s.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.GameSDK.getLeaderboardAsync(mr);case 2:return n=e.sent,e.next=5,n.setScoreAsync(t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Or=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="NewScoreIsBad",i.message=t||"The new score is bad",i.payload=n,i}return(0,o.Z)(t,e),t}((0,T.Z)(Error)),Rr=Or,Dr=function(e){return e[Qt]},Br=(0,K.P1)([function(e){return Dr(e).gameplay.mode}],(function(e){return e})),Nr=((0,K.P1)([function(e){return Dr(e).gameplay.status}],(function(e){return e})),(0,K.P1)([function(e){return Dr(e).gameplay.rescued}],(function(e){return e})),(0,K.P1)([function(e){return Dr(e).gameplay.startAt}],(function(e){return e}))),Mr=(0,K.P1)([function(e){return Dr(e).gameplay.finishAt}],(function(e){return e})),_r=n(61),Zr=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="CurrentTournamentScoreIsNotBest",i.message=t||"The new score is not best",i.payload=n,i}return(0,o.Z)(t,e),t}((0,T.Z)(Error)),Gr=Zr,Ur=GameCore.Configs.Tournament.UseLeaderboard,Fr=function(e){return{type:Ln,payload:{tournamentId:e}}},Hr=function(e){return function(){var t=(0,s.Z)(u().mark((function t(n){var r,a,s,o,c,l,h,d,p;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=window.game.facebook,a=e.playerId,s=e.playerName,o=e.score,c=e.autoStartGame,l=s+"'s Tournament",h=GameCore.Utils.String.generateObjectId(),t.next=7,r.tournament.createAsync({initialScore:o,config:{title:l,tournamentTitle:l},data:{playerId:a,playerName:s,leaderboardId:h}});case 7:return d=t.sent,p=d.getID(),c&&(n(Fr(p)),n(ts())),t.next=12,(0,_r.Z5)({_id:h,createdBy:a,name:p,description:l,expireTime:6048e5});case 12:if(t.sent._id!==h){t.next=16;break}return t.next=16,(0,_r.aV)(h,a,o);case 16:t.next=21;break;case 18:t.prev=18,t.t0=t.catch(0),(0,i.tO)(t.t0);case 21:case"end":return t.stop()}}),t,null,[[0,18]])})));return function(e){return t.apply(this,arguments)}}()},zr=function(e){return(0,s.Z)(u().mark((function t(){var n,i,r,a,s;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=window.game.facebook,i=e.playerId,r=e.playerName,a=e.leaderboardId,s=e.score,a&&(0,_r.aV)(a,i,s),t.next=5,n.tournament.shareAsync({score:s,data:{type:"tournament",playerId:i,playerName:r}});case 5:(0,_r.aV)(a,i,s);case 6:case"end":return t.stop()}}),t)})))},Kr=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=window.game.facebook,e.next=4,t.getTournamentAsync();case 4:return n=e.sent,i=JSON.parse(n.getPayload()||"{}"),e.abrupt("return",i.leaderboardId);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),Yr=function(){var e=(0,s.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=window.game.facebook,e.next=4,t.getTournamentAsync();case 4:return e.abrupt("return",e.sent);case 7:return e.prev=7,e.t0=e.catch(0),console.warn("getCurrentTournament ~ error",e.t0),e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),Wr=function(e){return function(){var t=(0,s.Z)(u().mark((function t(n,i){var r,a,s,o,c,l,h,d,p,f,m,g,v;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=null,a=window.game,s=a.player,o=a.facebook,c=a.analytics,t.prev=2,l=i(),h=Br(l),[Bi,_i].includes(h)){t.next=7;break}return t.abrupt("return");case 7:return n({type:On,payload:{}}),d=s.getPlayer(),p=d.playerId,f=d.name,t.next=11,Yr();case 11:if(!t.sent){t.next=23;break}if(r=At._.TOURNAMENT_SHARE,!Ur){t.next=21;break}return t.next=17,Kr();case 17:return m=t.sent,g={playerId:p,playerName:f,score:e,leaderboardId:m},t.next=21,n(zr(g));case 21:t.next=28;break;case 23:if(r=At._.TOURNAMENT_CREATE,!Ur){t.next=28;break}return v={playerId:p,playerName:f,score:e,autoStartGame:!1},t.next=28,n(Hr(v));case 28:if(c.event(r,{success:!0}),!1!==Ur){t.next=32;break}return t.next=32,o.requestTournamentAsync(e);case 32:n(jr(e)),t.next=40;break;case 35:if(t.prev=35,t.t0=t.catch(2),!(t.t0 instanceof Gr)){t.next=39;break}return t.abrupt("return");case 39:r&&c.event(r,{success:!1});case 40:case"end":return t.stop()}}),t,null,[[2,35]])})));return function(e,n){return t.apply(this,arguments)}}()},jr=function(e){return{type:Rn,payload:{score:e}}},Vr=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidMatchId",i.message=t||"Invalid match id",i.payload=n,i}return(0,o.Z)(t,e),t}((0,T.Z)(Error)),qr=Vr,Xr=function(e,t){return t.playerId},Jr=((0,K.P1)([function(e){return Dr(e).match.isRequesting}],(function(e){return e})),(0,K.P1)([function(e){return Dr(e).match.single}],(function(e){return e}))),Qr=(0,K.P1)([function(e){return Dr(e).match.single._id}],(function(e){return e})),$r=(0,K.P1)([function(e){return Dr(e).match.single.score}],(function(e){return e||0})),ea=((0,K.P1)([function(e){return Dr(e).match.single.level}],(function(e){return e||0})),(0,K.P1)([function(e){var t;return null==(t=Dr(e).match.single.data)?void 0:t.diamond}],(function(e){return e||0})),(0,K.P1)([function(e){var t;return null==(t=Dr(e).match.single.data)?void 0:t.fen}],(function(e){return e||null})),(0,K.P1)([function(e){return Dr(e).match.single.status}],(function(e){return e})),(0,K.P1)([function(e){return Dr(e).match.single.playerId}],(function(e){return e})),(0,K.P1)([function(e){return Dr(e).match.challenge}],(function(e){return e}))),ta=(0,K.P1)([function(e){return Dr(e).match.challenge._id}],(function(e){return e})),na=(0,K.P1)([function(e){return Dr(e).match.challenge.status}],(function(e){return e})),ia=(0,K.P1)([function(e){return Dr(e).match.challenge.opponentInfo}],(function(e){return e})),ra=((0,K.P1)([function(e){return Dr(e).match.challenge.whitePlayerId}],(function(e){return e})),(0,K.P1)([function(e){return Dr(e).match.challenge.blackPlayerId}],(function(e){return e})),(0,K.P1)([ea,Xr],(function(e,t){var n=e.whitePlayerId,i=e.blackPlayerId;return n!==t&&i===t?n:i!==t&&n===t?i:""})),(0,K.P1)([ea,Xr],(function(e,t){var n=e.whitePlayerId,i=e.blackPlayerId;return n===t?n:i===t?i:Di.playerId}))),aa=(0,K.P1)([ea,Xr],(function(e,t){var n=e.whitePlayerId,i=e.blackPlayerId,r=e.whitePlayerFinish,a=e.blackPlayerFinish;return t&&n===t?r:!(!t||i!==t)&&a})),sa=(0,K.P1)([ea,function(e,t){return t.opponentId}],(function(e,t){var n=e.whitePlayerId,i=e.blackPlayerId,r=e.whitePlayerFinish,a=e.blackPlayerFinish;return t&&n===t?r:!(!t||i!==t)&&a})),oa=(0,K.P1)([function(e){return Dr(e).match.group.opponentInfo}],(function(e){return e})),ca=((0,K.P1)([function(e){return Dr(e).match.online.players}],(function(e){return e})),(0,K.P1)([function(e){return Dr(e).stats.data}],(function(e){return e}))),ua=(0,K.P1)([function(e){return Dr(e).stats.current}],(function(e){return e})),la=((0,K.P1)([function(e){return Dr(e).stats.isRequesting}],(function(e){return e})),function(e){try{var t=localStorage.getItem(e);return null===t?null:GameCore.Utils.Json.decode(t)}catch(n){return null}}),ha=function(e,t){try{var n=la(e),i={};GameCore.Utils.Valid.isObject(n)&&(i=n);var r=GameCore.Utils.Json.clone(t);if(!GameCore.Utils.Valid.isObject(r))return!1;var a=GameCore.Utils.Object.clear(r),s=(0,jt.TS)(i,a),o=GameCore.Utils.Json.encode(s);return localStorage.setItem(e,o),!0}catch(c){return!1}},da=GameCore.Configs.ApiHost,pa=(function(){var e=(0,s.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"single-matches",e.next=3,(0,ve.v)("single-matches",t,{},da);case 3:return n=e.sent,e.abrupt("return",(null==n?void 0:n.data)||{});case 5:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,s.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"single-matches/active",e.next=3,(0,ve.U)("single-matches/active",{},da);case 3:return t=e.sent,e.abrupt("return",(null==t?void 0:t.data)||{});case 5:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,s.Z)(u().mark((function e(t,n){var i,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="single-matches/"+t+"/move",e.next=3,(0,ve.v)(i,n,{},da);case 3:return r=e.sent,e.abrupt("return",(null==r?void 0:r.data)||{});case 5:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,s.Z)(u().mark((function e(t){var n,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="single-matches/"+t+"/finish",e.next=3,(0,ve.v)(n,{},{},da);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 5:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,s.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"matches",e.next=3,(0,ve.v)("matches",{opponentPlayerId:t},{},da);case 3:return n=e.sent,e.abrupt("return",(null==n?void 0:n.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),fa=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="matches/"+t+"/join",e.next=3,(0,ve.v)(n,{},{},da);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ma=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="matches/"+t,e.next=3,(0,ve.U)(n,{},da);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ga=function(){var e=(0,s.Z)(u().mark((function e(t,n,i,r){var a,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="matches/"+t+"/finish",e.next=3,(0,ve.v)(a,{matchId:t,score:n,level:i,extraData:r},{},da);case 3:return s=e.sent,e.abrupt("return",(null==s?void 0:s.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t,n,i,r){return e.apply(this,arguments)}}(),va=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidMatchStatus",i.message=t||"The match status is not valid",i.payload=n,i}return(0,o.Z)(t,e),t}((0,T.Z)(Error)),ya=va,ba=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidOpponentId",i.message=t||"Invalid opponent id",i.payload=n,i}return(0,o.Z)(t,e),t}((0,T.Z)(Error)),Aa=ba,Sa=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidBlackPlayerId",i.message=t||"Invalid black player id",i.payload=n,i}return(0,o.Z)(t,e),t}((0,T.Z)(Error)),Ea=Sa,wa=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidRequestedMatchId",i.message=t||"The matchId in match data not matched with requested matchId",i.payload=n,i}return(0,o.Z)(t,e),t}((0,T.Z)(Error)),Ca=wa,Ta=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidScore",i.message=t||"The score is not valid",i.payload=n,i}return(0,o.Z)(t,e),t}((0,T.Z)(Error)),Ia=Ta,xa=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidWhitePlayerId",i.message=t||"Invalid white player id",i.payload=n,i}return(0,o.Z)(t,e),t}((0,T.Z)(Error)),ka=xa,Pa=function(e){var t=e.matchId,n=e.currentMatchId;if(""===t||"string"!==typeof t)throw new qr(null,{matchId:t});if(""===n||"string"!==typeof n)throw new qr(null,{currentMatchId:n});if(t!==n)throw new Ca(null,{matchId:t,currentMatchId:n})},La=function(e){var t=e.playerId,n=e.match,i=n._id,r=n.playerId,a=n.status;if(""===i||"string"!==typeof i)throw new qr(null,{matchId:i});if("finished"===a||"string"!==typeof a)throw new ya("This match is finished",{status:a});if(r!==t)throw new Pi(null,{playerId:r,currentPlayerId:t})},Oa=function(e){var t=e.opponentId;if(""===t||"string"!==typeof t)throw new Aa(null,{opponentId:t})},Ra=function(e){var t=e.matchId;if(""===t||"string"!==typeof t)throw new qr(null,{matchId:t})},Da=function(e){var t=e.match,n=t._id,i=t.whitePlayerId,r=t.blackPlayerId;if(""===n||"string"!==typeof n)throw new qr(null,{matchId:n});if(""===i||"string"!==typeof i)throw new ka(null,{whitePlayerId:i});if(""===r||"string"!==typeof r)throw new Ea(null,{blackPlayerId:r})},Ba=GameCore.Configs.Match,Na=function(e){try{return GameCore.Utils.Hash.stringToHash(JSON.stringify(e))}catch(t){return""}},Ma=function(e){try{return JSON.parse(GameCore.Utils.Hash.hashToString(e))}catch(t){return""}},_a=function(){return function(){var e=(0,s.Z)(u().mark((function e(t){var n,r,s,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,n=window.game,r=n.player,n.globalScene.screen.open(ir.o4.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),t({type:cn,payload:{}}),s=r.getPlayerId(),o=(0,a.Z)({},Ba.LocalSingleMatchDefault,{status:"active",playerId:s,startedAt:Date.now()}),La({playerId:s,match:o}),t(Ua(o)),ha(Ba.SingleMatchStore,o),e.next=19;break;case 11:if(e.prev=11,e.t0=e.catch(0),t(Ua(null)),!(e.t0 instanceof qr)){e.next=16;break}return e.abrupt("return");case 16:if(!(e.t0 instanceof ya)){e.next=18;break}return e.abrupt("return");case 18:(0,i.tO)(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()},Za=function(e,t){return function(n,r){try{!function(e){var t=e.matchId,n=e.score;if(""===t||"string"!==typeof t)throw new qr(null,{matchId:t});if("number"!==typeof n)throw new Ia(null,{score:n})}((0,a.Z)({matchId:e},t));var s=r(),o=Qr(s);!function(e){var t=e.matchId,n=e.currentMatchId;if(""===t||"string"!==typeof t)throw new qr(null,{matchId:t});if(""===n||"string"!==typeof n)throw new qr(null,{currentMatchId:n});if(t!==n)throw new Ca(null,{matchId:t,currentMatchId:n})}({matchId:e,currentMatchId:o}),n({type:ln,payload:{match:t}});var c=t.data;t.data=Na(c),ha(Ba.SingleMatchStore,t)}catch(u){if(u instanceof qr)return;(0,i.tO)(u)}}},Ga=function(e){return function(){var t=(0,s.Z)(u().mark((function t(n,r){var s,o,c,l,h,d,p,f;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,s=window.game.player,Ra({matchId:e}),o=r(),c=Qr(o),l=s.getPlayerId(),Pa({matchId:e,currentMatchId:c}),n({type:"MATCH_SINGLE_FINISH_REQUEST",payload:{matchId:e}}),h=Jr(o),La({playerId:l,match:h}),d=(0,a.Z)({},Ba.LocalSingleMatchDefault,h,{_id:e,status:"finished",playerId:l,finishAt:Date.now()}),n(Ua(d)),p=d.data,(f=(0,a.Z)({},d)).data=Na(p),ha(Ba.SingleMatchStore,f),t.next=26;break;case 18:if(t.prev=18,t.t0=t.catch(0),n(Ua(null)),!(t.t0 instanceof qr)){t.next=23;break}return t.abrupt("return");case 23:if(!(t.t0 instanceof ya)){t.next=25;break}return t.abrupt("return");case 25:(0,i.tO)(t.t0);case 26:case"end":return t.stop()}}),t,null,[[0,18]])})));return function(e,n){return t.apply(this,arguments)}}()},Ua=function(e){return{type:hn,payload:{match:e}}},Fa=function(){return{type:dn,payload:{}}},Ha=function(e){return function(){var t=(0,s.Z)(u().mark((function t(n){var r,a,s,o;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=window.game,a=r.profile,r.globalScene.screen.open(ir.o4.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),s=e.playerId,Oa({opponentId:s}),n({type:fn,payload:{opponentInfo:e}}),t.next=8,pa(s);case 8:return o=t.sent,Da({match:o}),t.next=12,a.requestProfiles([s]);case 12:n(Wa(o)),t.next=23;break;case 15:if(t.prev=15,t.t0=t.catch(0),n(Wa(null)),!(t.t0 instanceof qr)){t.next=20;break}return t.abrupt("return");case 20:if(!(t.t0 instanceof Aa)){t.next=22;break}return t.abrupt("return");case 22:(0,i.tO)(t.t0);case 23:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(e){return t.apply(this,arguments)}}()},za=function(e){return function(){var t=(0,s.Z)(u().mark((function t(n){var r,a,s,o,c,l,h,d,p;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=window.game,a=r.player,s=r.profile,r.globalScene.screen.open(ir.o4.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),Ra({matchId:e}),n({type:pn,payload:{matchId:e}}),t.next=7,fa(e);case 7:if(o=t.sent,Da({match:o}),c=o.status,l=o.whitePlayerId,h=o.blackPlayerId,c!==Cn){t.next=16;break}return d=a.getPlayerId(),p=d===l?h:l,t.next=16,s.requestProfiles([p]);case 16:n(Wa(o)),t.next=25;break;case 19:if(t.prev=19,t.t0=t.catch(0),n(Wa(null)),!(t.t0 instanceof qr)){t.next=24;break}return t.abrupt("return");case 24:(0,i.tO)(t.t0);case 25:case"end":return t.stop()}}),t,null,[[0,19]])})));return function(e){return t.apply(this,arguments)}}()},Ka=function(e,t){return function(){var n=(0,s.Z)(u().mark((function n(r){var a,s,o,c,l,h,d,p,f;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a=window.game,s=a.player,a.globalScene.screen.open(ir.o4.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),Ra({matchId:e}),r({type:gn,payload:{matchId:e,opponentInfo:t}}),n.next=7,ma(e);case 7:o=n.sent,Da({match:o}),c=o.whitePlayerId,l=o.whitePlayerScore,h=o.blackPlayerScore,d=s.getPlayerId(),p=s.getPlayerData(),f=p.score,r(Wa(o,{score:d===c?l:h,bestScore:f})),n.next=23;break;case 17:if(n.prev=17,n.t0=n.catch(0),r(Wa(null)),!(n.t0 instanceof qr)){n.next=22;break}return n.abrupt("return");case 22:(0,i.tO)(n.t0);case 23:case"end":return n.stop()}}),n,null,[[0,17]])})));return function(e){return n.apply(this,arguments)}}()},Ya=function(e,t,n){return function(){var r=(0,s.Z)(u().mark((function r(a){var s,o;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,window.game.globalScene.screen.open(ir.o4.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),Ra({matchId:e}),a({type:mn,payload:{matchId:e,score:t,extraData:n}}),s=n.level,r.next=8,ga(e,t,s,n);case 8:return o=r.sent,Da({match:o}),r.next=12,a(Wa(o));case 12:r.next=20;break;case 14:if(r.prev=14,r.t0=r.catch(0),a(Wa(null)),!(r.t0 instanceof qr)){r.next=19;break}return r.abrupt("return");case 19:(0,i.tO)(r.t0);case 20:case"end":return r.stop()}}),r,null,[[0,14]])})));return function(e){return r.apply(this,arguments)}}()},Wa=function(e,t,n){return void 0===n&&(n=null),{type:vn,payload:{match:e,opponentInfo:t,current:n}}},ja=function(e){return{type:bn,payload:{opponentInfo:e}}},Va=function(e,t){return{type:En,payload:{matchId:e,players:t}}},qa=function(e){return{type:an,payload:{playerId:e}}},Xa=function(e,t){return{type:sn,payload:{playerId:e,stats:t}}},Ja=function(e){return{type:on,payload:{stats:e}}},Qa=function(e){var t=e.contextId;if(""===t||"string"!==typeof t)throw new sr(null,{contextId:t})},$a=null,es=function(e){clearTimeout($a),$a=setTimeout((function(){window.game.globalScene.screen.close(ir.o4.NOTIFY_SCREEN)}),e)},ts=function(){return function(e){try{e(Fa()),e(us(_i))}catch(t){(0,i.tO)(t)}}},ns=function(){return function(e){try{e(Fa()),e(us(Bi))}catch(t){(0,i.tO)(t)}}},is=function(e,t){return void 0===e&&(e="10"),void 0===t&&(t=!1),function(n){try{n(rs("reset",e,t))}catch(r){(0,i.tO)(r)}}},rs=function(e,t,n){return void 0===t&&(t="10"),void 0===n&&(n=!1),function(){var r=(0,s.Z)(u().mark((function r(a){var s,o,c,l,h,d,p,f,m,g,v,y,b,A,S,E,w;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,s=window.game,o=s.player,c=s.facebook,(l=s.globalScene).screen.open(ir.o4.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),h=e,d=c.contextType,t||(p=GameCore.Configs.PlayerIdMock,f=GameCore.Configs.PlayerIdMock2,t=o.getPlayerId()===p?f:p),e){r.next=15;break}return r.next=9,c.chooseAsync();case 9:if(!1!==(h=r.sent)){r.next=13;break}return n&&l.events.emit(Yi.K.SWITCH,Yi.C.DASHBOARD_SCENE),r.abrupt("return");case 13:r.next=25;break;case 15:if(!t||t===Di.playerId){r.next=23;break}return r.next=18,c.createAsync(t);case 18:if(!1!==(h=r.sent)){r.next=22;break}return n&&l.events.emit(Yi.K.SWITCH,Yi.C.DASHBOARD_SCENE),r.abrupt("return");case 22:h||"reset"===e||(h=e);case 23:d=c.contextType,a(Ui(h,d));case 25:return Qa({contextId:h}),m=o.getPlayerId(),g=o.getConnectedPlayers(),r.next=30,c.getContextPlayers(m);case 30:return v=r.sent,t!==(y=Di).playerId&&g[t]?y=g[t]:1===v.length&&(y=v[0]),a(qa()),A=(b=y).playerId,S=b.name,E=b.photo,w={playerId:A,name:S,photo:E},r.next=38,a(us(Ni,w));case 38:a(Ui(h,d)),r.next=50;break;case 41:if(r.prev=41,r.t0=r.catch(0),!(r.t0 instanceof sr)){r.next=45;break}return r.abrupt("return");case 45:if("USER_INPUT"!==(null==r.t0?void 0:r.t0.code)){r.next=47;break}return r.abrupt("return");case 47:if("INVALID_OPERATION"!==(null==r.t0?void 0:r.t0.code)){r.next=49;break}return r.abrupt("return");case 49:(0,i.tO)(r.t0);case 50:return r.prev=50,es(1e3),r.finish(50);case 53:case"end":return r.stop()}}),r,null,[[0,41,50,53]])})));return function(e){return r.apply(this,arguments)}}()},as=function(e){return function(){var t=(0,s.Z)(u().mark((function t(n){var r,a,s,o,c;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=window.game,a=r.facebook,s=r.globalScene,o=r.analytics,s.screen.open(ir.o4.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),c=a.getContextID(),Qa({contextId:c}),o.event(At._.JOIN_GROUP,{group_id:c}),t.next=8,n(us(Mi,e));case 8:t.next=17;break;case 10:if(t.prev=10,t.t0=t.catch(0),!(t.t0 instanceof sr)){t.next=14;break}return t.abrupt("return");case 14:if("INVALID_OPERATION"!==(null==t.t0?void 0:t.t0.code)){t.next=16;break}return t.abrupt("return");case 16:(0,i.tO)(t.t0);case 17:return t.prev=17,es(1e3),t.finish(17);case 20:case"end":return t.stop()}}),t,null,[[0,10,17,20]])})));return function(e){return t.apply(this,arguments)}}()},ss=function(e,t){return function(){var n=(0,s.Z)(u().mark((function n(r,a){var s,o,c,l,h,d,p,f,m,g,v,y,b,A,S;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,s=window.game,o=s.player,c=s.profile,l=s.facebook,(h=s.globalScene).screen.open(ir.o4.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),d=a(),p=o.getPlayerId(d),!((f=o.getConnectedPlayers(d)).length>0)||f[t]){n.next=9;break}return h.events.emit(Yi.K.SWITCH,Yi.C.DASHBOARD_SCENE),n.abrupt("return");case 9:return m=Di,n.next=12,l.getContextPlayers(p);case 12:if(g=n.sent,t===p||t===m.playerId||!f[t]){n.next=17;break}m=f[t],n.next=25;break;case 17:if(1!==g.length){n.next=21;break}m=g[0],n.next=25;break;case 21:return n.next=23,c.requestProfiles([t]);case 23:(v=c.getProfiles())[t]&&(m=v[t]);case 25:return n.next=27,r(Ka(e,m));case 27:if(d=a(),ra(d,{playerId:p})!==Di.playerId){n.next=32;break}return n.next=32,r(za(e));case 32:if(d=a(),ra(d,{playerId:p})===p||!f[t]){n.next=37;break}return r(is(t,!0)),n.abrupt("return");case 37:if(ta(d)===e){n.next=41;break}return h.events.emit(Yi.K.SWITCH,Yi.C.DASHBOARD_SCENE),n.abrupt("return");case 41:if(y=na(d),b=aa(d,{playerId:p}),r(hs({mode:Ni,status:y})),A=l.getContextID(),S=l.contextType,r(Ui(A,S)),!b){n.next=52;break}return n.next=50,o.requestConnectedPlayers();case 50:return h.events.emit(Yi.K.SWITCH,Yi.C.GAME_OVER_SCENE),n.abrupt("return");case 52:h.events.emit(Yi.K.SWITCH,Yi.C.GAME_SCENE),n.next=58;break;case 55:n.prev=55,n.t0=n.catch(0),(0,i.tO)(n.t0);case 58:return n.prev=58,es(1e3),n.finish(58);case 61:case"end":return n.stop()}}),n,null,[[0,55,58,61]])})));return function(e,t){return n.apply(this,arguments)}}()},os=function(){return function(){var e=(0,s.Z)(u().mark((function e(t,n){var r,a,s,o,c,l,h,d,p,f,m,g;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=window.game,a=r.analytics,r.facebook,r.globalScene.screen.open(ir.o4.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),s=n(),o=Br(s),c=ua(s),l=c.score,h=void 0===l?0:l,d=c.level,p=void 0===d?0:d,t(Wr(h)),t(cs(h)),e.next=10,t(ls(o,{score:h}));case 10:s=n(),f=Nr(s),m=Mr(s),g=Math.floor((m-f)/1e3),a.event(At._.MATCH_END,{game_mode:GameCore.Utils.String.toUpperCamelCase(o),level:p,level_name:"level_"+p,time_played:g}),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),(0,i.tO)(e.t0);case 20:return e.prev=20,es(300),e.finish(20);case 23:case"end":return e.stop()}}),e,null,[[0,17,20,23]])})));return function(t,n){return e.apply(this,arguments)}}()},cs=function(e){return function(t){try{var n=window.game.player,r=n.getPlayerId();kr(r,e).catch((function(e){(0,i.tO)(new Error(e))}));var a=n.getPlayerData(),s=a.score,o=void 0===s?0:s,c=a.level;o<e&&n.setBestScore(e);var u={score:e,level:c};t(Xa(r,u)),t(Ja(u))}catch(l){if(l instanceof Rr)return;(0,i.tO)(l)}}},us=function(e,t){return void 0===t&&(t=null),function(){var n=(0,s.Z)(u().mark((function n(r,a){var o,c,l,h,d,p,f,m,g,v;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,o=window.game,c=o.player,l=o.analytics,h=o.facebook,d=o.globalScene,p=h.getContextID(),f=0,m=a(),l.event(At._.MATCH_START,{game_mode:GameCore.Utils.String.toUpperCamelCase(e),level:1,level_name:"level_1"}),r({type:$t,payload:{}}),![Bi,_i].indexOf(e)){n.next=16;break}return n.next=10,r((function(e){try{var t=window.game.player;e({type:un,payload:{}});var n=t.getPlayerId(),r=la(Ba.SingleMatchStore)||{},a=r.data;r.data=Ma(a),La({playerId:n,match:r}),e(Ua(r))}catch(s){if(e(Ua(null)),s instanceof qr)return;if(s instanceof Pi)return;if(s instanceof ya)return;(0,i.tO)(s)}}));case 10:if(m=a(),Qr(m)){n.next=15;break}return n.next=15,r(_a());case 15:f=$r(m);case 16:if(e===Mi&&r(ja(t)),e!==Ni){n.next=22;break}return n.next=20,r(Ha(t));case 20:m=a(),p||(p=window.FBInstant.context.getID());case 22:"online"===e&&r(function(){var e=(0,s.Z)(u().mark((function e(t){var n,i,r,a,s,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=window.game.player,i=n.getPlayer(),r=i.playerId,a=i.name,s=i.photo,t({type:Sn,payload:{playerId:r}}),o={},new Array(20).fill(null).map((function(e,t){var n="0"+(t+1);o[n]={playerId:n,name:"MPlayer "+n,photo:"./assets/images/others/avatar.png"}})),o[r]={playerId:r,name:a,photo:s},t(Va("mock",o));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),g=c.getPlayerData(m),v=g.score,r(Ja({score:f,bestScore:void 0===v?0:v})),r({type:en,payload:{mode:e,contextId:p}}),r(Fi(e)),d.events.emit(Yi.K.SWITCH,Yi.C.GAME_SCENE),n.next=37;break;case 30:if(n.prev=30,n.t0=n.catch(0),!(n.t0 instanceof qr)){n.next=36;break}return window.game.globalScene.screen.open(ir.o4.NOTIFY_SCREEN,{message:"Sorry!, you can now\ncreate this match!",duration:2500,loading:!1}),n.abrupt("return");case 36:(0,i.tO)(n.t0);case 37:return n.prev=37,es(0),n.finish(37);case 40:case"end":return n.stop()}}),n,null,[[0,30,37,40]])})));return function(e,t){return n.apply(this,arguments)}}()},ls=function(e,t){return function(){var n=(0,s.Z)(u().mark((function n(i,r){var a,s,o,c,l,h,d,p,f,m,g;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=window.game,s=a.player,o=a.globalScene,c=t.score,l=void 0===c?0:c,h=t.level,d=void 0===h?0:h,p=r(),!([Bi,_i].indexOf(e)>=0)){n.next=7;break}return f=Qr(p),n.next=7,i(Ga(f));case 7:if(e===Mi&&(i({type:An,payload:{}}),m=s.getPlayerId(),i(Xa(m,t))),e!==Ni){n.next=12;break}return g=ta(p),n.next=12,i(Ya(g,l,{level:d}));case 12:i({type:tn,payload:{mode:e}}),o.events.emit(Yi.K.SWITCH,Yi.C.GAME_OVER_SCENE);case 14:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},hs=function(e){return function(t){var n=e.mode,r=e.status;t({type:nn,payload:{mode:n,status:r}}),(0,i.sw)("game-mode",n)}},ds=n(24),ps=n.n(ds),fs=new(ps()),ms=fs,gs=n(48),vs=n(2),ys=n(8),bs=ys.Z.DEFAULT,As=bs.KEY,Ss=bs.FRAME,Es=function(e){function t(t){var n;return(n=e.call(this,t,0,0)||this).soar=void 0,n.fireworks1=void 0,n.fireworks2=void 0,n.colors={red:16462401,blue:1863148,pink:15271420,green:183084,yellow:16631323},n.runSoarExplosiveAnimation=function(){n.setAlpha(0),n.setScale(0),n.soar.setOrigin(.5,.5),n.soar.setFrame(Ss.BLANK),n.scene.tweens.add({targets:[(0,vs.Z)(n)],duration:200,ease:Phaser.Math.Easing.Cubic.Out,props:{alpha:{from:0,to:1},scale:{from:0,to:Phaser.Math.RND.between(.8,1)/n.scene.world.getZoomRatio()}},onComplete:n.runFireworkExplosiveAnimation})},n.runFireworkExplosiveAnimation=function(){n.fireworks1.setAlpha(0),n.fireworks1.setScale(.1),n.fireworks1.setVisible(!0),n.scene.tweens.add({targets:[n.fireworks1],duration:600,ease:Phaser.Math.Easing.Sine.Out,props:{alpha:{from:0,to:1,duration:300},scale:{from:.1,to:Phaser.Math.RND.between(.6,.8)}}}),n.fireworks2.setVisible(!0),n.fireworks2.setScale(.1),n.scene.tweens.add({targets:[n.fireworks2],duration:800,ease:Phaser.Math.Easing.Cubic.Out,props:{scale:{from:.1,to:Phaser.Math.RND.between(.5,.6)}}}),n.runExistAnimation()},n.runExistAnimation=function(){n.scene.tweens.add({targets:[(0,vs.Z)(n)],duration:600,delay:400,ease:Phaser.Math.Easing.Cubic.Out,props:{alpha:0},onComplete:function(){n.setAlpha(1),n.soar.setVisible(!1),n.fireworks1.setVisible(!1),n.fireworks2.setVisible(!1),n.kill()}})},n.kill(),n.createObjects(),n.setDepth(nr.Z.FIREWORKS),n.scene.add.existing((0,vs.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createObjects=function(){this.soar=this.scene.make.image({key:As,frame:Ss.BLANK,visible:!1}),this.fireworks1=this.scene.make.image({key:As,frame:Ss.BLANK,visible:!1}),this.fireworks2=this.scene.make.image({key:As,frame:Ss.BLANK,visible:!1}),this.add([this.soar,this.fireworks2,this.fireworks1])},n.playExplosiveSound=function(){},n.randomColor=function(){var e=Object.values(this.colors),t=Phaser.Math.RND.between(0,e.length-1),n=e[t];this.fireworks1.setTint(n),n=e[t=Phaser.Math.RND.between(0,e.length-1)],this.fireworks2.setAlpha(.5),this.fireworks2.setTint(n)},n.fire=function(e,t,n){this.setVisible(!0),this.setPosition(e,t),this.runFireworkAnimation(n),this.playExplosiveSound()},n.runFireworkAnimation=function(e){if(this.scene){var t=Phaser.Math.RND.between(-120,120);this.setAlpha(.6),this.soar.setVisible(!0),this.soar.setOrigin(.5,.1),this.soar.setFrame(Ss.BLANK),this.scene.tweens.add({targets:[this],duration:600,ease:Phaser.Math.Easing.Sine.Out,props:{y:e+t,alpha:{from:.6,to:.2},scale:{from:.1,to:1/this.scene.world.getZoomRatio()}},onComplete:this.runSoarExplosiveAnimation})}},t}(Phaser.GameObjects.Container),ws=Es,Cs=ys.Z.DEFAULT,Ts=Cs.KEY,Is=Cs.FRAME,xs=function(e){function t(t,n){var i;return(i=e.call(this,t,0,0,Ts,Is.BLANK)||this).onUpdate=void 0,i.onComplete=void 0,i.positions=void 0,i.visibleAnimation=void 0,i.eatAnimation=void 0,i.setWorldSize(25,24),i.positions=n,i.setVisible(!1),i.setDepth(nr.Z.PRIORITY),i.createAnimation(),i.scene.add.existing((0,vs.Z)(i)),i}(0,o.Z)(t,e);var n=t.prototype;return n.createAnimation=function(){var e=this,t=this.positions,n=t.from,i=t.to,r=1/GameCore.Utils.Image.getImageScale();this.visibleAnimation=this.scene.add.tween({targets:this,duration:1e3,paused:!0,props:{alpha:{duration:500,ease:Phaser.Math.Easing.Cubic.Out,value:{from:0,to:1}},x:{getStart:function(){return n.x}},y:{ease:Phaser.Math.Easing.Bounce.Out,value:{getStart:function(){return n.y},getEnd:function(){return n.y+100}}},scale:{duration:400,ease:Phaser.Math.Easing.Cubic.Out,value:{from:2*r,to:r}}},onStart:function(){e.setVisible(!0)},onComplete:function(){e.eatAnimation.play()}}),this.eatAnimation=this.scene.add.tween({targets:this,duration:500,delay:50,ease:"Circ.easeOut",paused:!0,props:{x:{getEnd:function(){return i.x}},y:{getEnd:function(){return i.y}}},onUpdate:function(){"function"===typeof e.onUpdate&&e.onUpdate()},onComplete:function(){e.destroy(),"function"===typeof e.onComplete&&e.onComplete()}})},n.run=function(){this.visibleAnimation.play()},t}(Phaser.GameObjects.Image),ks=xs,Ps=function(){function e(e){this.scene=void 0,this.group=void 0,this.scene=e,this.createGroup()}var t=e.prototype;return t.getAll=function(){return this.group.getChildren()},t.createGroup=function(){this.group=this.scene.add.group()},e}(),Ls=Ps,Os=n(4),Rs=n(11),Ds=n.n(Rs),Bs=Ds()(.55,.47,.43,.91),Ns=Bs,Ms={targets:[],yoyo:!0,repeat:-1,duration:600,repeatDelay:50,ease:Ns,easeParams:[0,.9],props:{scale:{from:1,to:1.2}}},_s=function(e){function t(t){return e.call(this,Ms,t)||this}return(0,o.Z)(t,e),t}(Os.Z),Zs=_s,Gs={targets:[],repeat:-1,yoyo:!0,duration:33,ease:Phaser.Math.Easing.Sine.InOut,props:{x:5}},Us=function(e){function t(t){var n,i,r;return(r=e.call(this,Gs,t)||this).posX=void 0,r.handleSwitchPosition=function(){var e;r.posX=-r.posX,null==(e=r.tween)||e.updateTo("x",-r.posX)},null!=(n=r.config)&&n.props?(r.posX=r.config.props.x,null==(i=r.tween)||i.on(Phaser.Tweens.Events.TWEEN_REPEAT,r.handleSwitchPosition),r):(0,vs.Z)(r)}return(0,o.Z)(t,e),t}(Os.Z),Fs=Us,Hs=n(50),zs=n(46),Ks=n(47),Ys=n(45),Ws={targets:[],duration:1e3,ease:Phaser.Math.Easing.Quadratic.InOut,props:{scale:.2}},js=function(e){function t(t){var n,i;(i=e.call(this,Ws,t)||this).spline=void 0,i.createCounter=function(e,t){var n=i.config.onCurveUpdate,r="function"===typeof n?n:null;t.forEach((function(t,n){if(i.scene){var a=e.data[n],s=a.duration,o=a.delay,c=new Phaser.Math.Vector2;i.scene.tweens.addCounter({delay:o,duration:s,ease:Phaser.Math.Easing.Quadratic.InOut,onUpdate:function(e){i.spline.getPoint(e.getValue(),c),t.x=c.x,t.y=c.y,r&&r(t)}})}}))};var r=i.config.curve;return r?(i.spline=new Phaser.Curves.Spline(r),null==(n=i.tween)||n.on(Phaser.Tweens.Events.TWEEN_START,i.createCounter),i):(0,vs.Z)(i)}return(0,o.Z)(t,e),t}(Os.Z),Vs=n(51),qs=ys.Z.DEFAULT,Xs=qs.KEY,Js=qs.FRAME,Qs=function(e){function t(t){var n;return(n=e.call(this,t)||this).hand=void 0,n.timeline=void 0,n.clickImage=void 0,n.name="TapTutorialHand",n.addHand(),n.setDepth(nr.Z.TUTORIAL),n.scene.add.existing((0,vs.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.addHand=function(){this.hand=this.scene.make.image({key:Xs,frame:Js.HAND,origin:{x:.5,y:.5}}),this.hand.setWorldSize(65.5,55.5),this.clickImage=this.scene.make.image({key:Xs,frame:Js.HAND_CLICK}),this.clickImage.setWorldSize(52.5,27.5),this.add([this.hand,this.clickImage])},n.createTimeline=function(e,t,n){var i=this;void 0===t&&(t=0),void 0===n&&(n=400);var r=1/this.scene.world.getPixelRatio()*(1/1.2);this.hand.angle=30,this.hand.setPosition(e.x,e.y),this.hand.setRotation(0),this.hand.setAngle(0),this.hand.setScale(1*r),this.clickImage.setPosition(e.x-20,e.y-40),this.clickImage.setVisible(!1),this.clickImage.setAlpha(0);var a=this.scene.tweens.createTimeline({loop:-1,loopDelay:n,onStart:function(){return i.revive()}});return a.add({targets:[this.hand],duration:300,ease:Phaser.Math.Easing.Sine.In,props:{alpha:{from:0,to:1,duration:300}},onComplete:function(){i.scene.add.tween({targets:i.clickImage,delay:200,scale:{from:.8*r,to:.9*r},alpha:{from:0,to:1},duration:250,ease:Phaser.Math.Easing.Sine.InOut,yoyo:!0,hold:100})}}),a.add({delay:300,targets:[this.hand],ease:Phaser.Math.Easing.Cubic.Out,props:{scale:{duration:400,from:1*r,to:.7*r}}}),a.add({targets:[this.hand],ease:Phaser.Math.Easing.Cubic.Out,props:{scale:{duration:200,from:.7*r,to:1*r}}}),a.add({targets:[this.hand],delay:300,duration:300,ease:Phaser.Math.Easing.Cubic.Out,props:{alpha:{from:1,to:0,duration:300}},onComplete:function(){i.hand.x=e.x,i.hand.y=e.y,i.hand.scale=1*r}}),a.play(),a},n.playAnimation=function(e,t,n){var i=this;void 0===t&&(t=0),void 0===n&&(n=400),this.timeline?this.timeline.once("loop",(function(){var r;null==(r=i.timeline)||r.stop(),i.timeline=i.createTimeline(e,t,n)})):this.timeline=this.createTimeline(e,t,n)},n.stopAnimation=function(){var e=this;this.timeline&&this.timeline.once("loop",(function(){var t;null==(t=e.timeline)||t.stop(),e.timeline=void 0,e.hand.setAlpha(0),e.clickImage.setAlpha(0),e.kill()}))},n.preDestroy=function(){this.scene.tweens.killTweensOf(this.hand)},t}(Phaser.GameObjects.Container),$s=Qs,eo=n(16),to=ys.Z.DEFAULT,no=to.KEY,io=to.FRAME,ro=function(e){function t(t){var n;return(n=e.call(this,t,no,io.BLANK)||this).emitZone=void 0,n.emitter=void 0,n.createEmitZone(),n.scene.add.existing((0,vs.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createEmitZone=function(){this.emitZone=new Phaser.Geom.Rectangle},n.createEmitters=function(){var e=1/GameCore.Utils.Image.getImageScale();this.emitter=this.createEmitter({on:!1,frame:io.BLANK,emitZone:{source:this.emitZone,type:"random"},speed:20,timeScale:1,frequency:100,alpha:{start:1,end:0,ease:Phaser.Math.Easing.Expo.Out},scale:{start:2*e,end:.1*e,ease:Phaser.Math.Easing.Expo.Out},lifespan:2666})},n.run=function(e,t,n,i,r){this.stop(),this.reset(),this.emitZone.setSize(i,r),this.emitZone.setPosition(t-i/2,n-r/2),this.emitter.setQuantity(e),this.emitter.start()},n.explode=function(e,t,n){this.emitter||this.reset(),this.emitter.explode(e,t,n)},n.stop=function(){var e,t;null==(e=this.emitter)||e.killAll(),null==(t=this.emitter)||t.stop()},n.reset=function(){this.createEmitters()},t}(Phaser.GameObjects.Particles.ParticleEmitterManager),ao=ro,so=n(62),oo=ys.Z.DEFAULT,co=oo.KEY,uo=oo.FRAME,lo=function(e){function t(t){var n;return(n=e.call(this,t,co,uo.BLANK)||this).emitZone=void 0,n.emitter=void 0,n.createEmitZone(),n.createEmitters(),n.scene.add.existing((0,vs.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createEmitZone=function(){this.emitZone=new Phaser.Geom.Rectangle},n.createEmitters=function(){var e=1/GameCore.Utils.Image.getImageScale();this.emitter=this.createEmitter({on:!1,frame:uo.BLANK,emitZone:{source:this.emitZone,type:"random"},deathZone:{source:this.emitZone,type:"onLeave"},timeScale:1,frequency:150,speedY:{min:-20,max:-60},alpha:{start:1,end:0,ease:Phaser.Math.Easing.Cubic.Out},scale:{start:1*e,end:0,ease:Phaser.Math.Easing.Cubic.Out},lifespan:{min:1500,max:2500}})},n.run=function(e,t,n,i,r){this.stop(),this.emitZone.setSize(i,r),this.emitZone.setPosition(t-i/2,n-r/2),this.emitter.setQuantity(e),this.emitter.start()},n.stop=function(){var e,t;null==(e=this.emitter)||e.killAll(),null==(t=this.emitter)||t.stop()},t}(Phaser.GameObjects.Particles.ParticleEmitterManager),ho=lo,po=n(42),fo=GameCore.Configs.Network,mo=ys.Z.DEFAULT,go=mo.KEY,vo=mo.FRAME,yo=function(e){function t(t,n,i,r){var a;return(a=e.call(this,t,n,i,r)||this).rewardValue=void 0,a.onReward=void 0,a.hand=void 0,a.viewAdButton=void 0,a.skipButton=void 0,a.giftIcon=void 0,a.giftIconWhite=void 0,a.currencyIcon=void 0,a.currencyText=void 0,a.popupContents=void 0,a.cometTwinkle=void 0,a.starTwinkleUp=void 0,a.sparksExplosive=void 0,a.popupFadeOutAnimation=void 0,a.backgroundFadeInAnimation=void 0,a.contentShowUpAnimation=void 0,a.giftEntrancesAnimation=void 0,a.giftAttentionAnimation=void 0,a.iconAttentionAnimation=void 0,a.giftShakeAnimation=void 0,a.giftOpenAnimation=void 0,a.adsTimer=void 0,a.open=function(t){e.prototype.open.call((0,vs.Z)(a),t);var n=a.getData("awardDiamonds");a.setRewardValue(n),a.runOpenAnimation()},a.handleClosePopup=function(){a.runCloseAnimation()},a.handleShowRewardedVideoAd=(0,s.Z)(u().mark((function e(){var t,n,i,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.scene,n=t.audio,i=t.game,e.prev=1,a.viewAdButton.setDisabled(!0),i.globalScene.screen.open(ir.o4.NOTIFY_SCREEN,{message:"Loading ads...",duration:0,loading:!0}),n.pauseMusic(),n.muteAll(),e.next=8,new Promise((function(e,t){var n;null==(n=a.adsTimer)||n.remove(),a.adsTimer=a.scene.time.delayedCall(fo.Timeout,t),a.scene.ads.getAdStatus(GameCore.Ads.Types.REWARDED)===GameCore.Ads.Status.LOADING?a.scene.ads.events.once(GameCore.Ads.Events.LOADED,e):a.scene.ads.preloadRewardedVideoAsync().then(e).catch(t)}));case 8:return e.next=10,a.scene.ads.showRewardedVideoAsync();case 10:i.globalScene.screen.close(ir.o4.NOTIFY_SCREEN),a.starTwinkleUp.stop(),a.scene.audio.playSound(po.Z.DAILY_REWARD),a.popupContents.killGroup(),a.runTheGiftEntrancesAnimation(0,1500),e.next=24;break;case 17:if(e.prev=17,e.t0=e.catch(1),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=23;break}if("USER_INPUT"!==e.t0.code){e.next=23;break}return a.showNotifySkipAds(),e.abrupt("return");case 23:a.showNotifyNoAds();case 24:return e.prev=24,null==(r=a.adsTimer)||r.destroy(),n.unmuteAll(),n.playMusic(),a.viewAdButton.setDisabled(!1),e.finish(24);case 30:case"end":return e.stop()}}),e,null,[[1,17,24,30]])}))),a.handleTheGiftClick=function(){a.setTheGiftClickable(!1),a.logButtonEvent("OpenGift"),a.hand.kill(),a.giftIconWhite.revive(),a.scene.tweens.killTweensOf(a.giftIcon),Phaser.Display.Align.In.Center(a.giftIconWhite,a.giftIcon),a.runShakeTheGift(),a.runOpenTheGift()},a.showNotifyNoAds=function(e){e&&e.name!==ir.o4.NOTIFY_SCREEN||a.scene.game.globalScene.screen.open(ir.o4.NOTIFY_SCREEN,{message:"No ads to display!",duration:1200,loading:!1})},a.showNotifySkipAds=function(){a.scene.game.globalScene.screen.open(ir.o4.NOTIFY_SCREEN,{message:"Sorry, No Rewards!\nYou have cancelled the ad!",duration:1500,loading:!1})},a.runCloseAnimation=function(){a.runExitsAnimation(0,200)},a.setDepth(ir.Ks.POPUP),a.background.setAlpha(.8),a.createViewAdsButton(),a.createSkipButton(),a.createCurrencyIcon(),a.createCurrencyText(),a.createEffects(),a.createGiftIcon(),a.createHand(),a.createContentsGroup(),a}(0,o.Z)(t,e);var n=t.prototype;return n.setTheGiftClickable=function(e){e?this.giftIcon.setInteractive():this.giftIcon.disableInteractive()},n.logButtonEvent=function(e){var t=this.getScreenName();this.scene.analytics.event(At._.BUTTON_CLICK,{button_name:e,screen_name:t})},n.runOpenAnimation=function(){this.revive(),this.hand.kill(),this.popupContents.reviveGroup(),this.starTwinkleUp.stop(),this.runBackgroundEntrancesAnimation(0,200),this.runPopupContentEntrancesAnimation(100,400),this.runLogoAttentionAnimation(500)},n.runBackgroundEntrancesAnimation=function(e,t){this.backgroundFadeInAnimation||(this.backgroundFadeInAnimation=new zs.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,to:.8}}})),this.backgroundFadeInAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n;null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new Ys.Z({targets:this.popupContents.getChildren(),duration:t,delay:this.scene.tweens.stagger(100,{start:e}),props:{scale:{getStart:function(e){return e.scale-.3},getEnd:function(e){return e.scale}},alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play()},n.runLogoAttentionAnimation=function(e){var t=this.currencyIcon,n=t.x,i=t.y,r=t.width,a=t.height;this.starTwinkleUp.run(1,n,i,r,a),this.iconAttentionAnimation||(this.iconAttentionAnimation=new Zs({targets:[this.currencyIcon],delay:e,props:{scale:"+=0.05"}})),this.iconAttentionAnimation.play()},n.runTheGiftEntrancesAnimation=function(e,t){var n,i=this;this.giftIcon.revive(),this.giftIcon.setAlpha(1),Phaser.Display.Align.In.TopRight(this.giftIcon,this.zone),null==(n=this.giftEntrancesAnimation)||n.remove();var r=this.giftIcon,a=r.x,s=r.y,o=this.currencyText,c={x:a,y:s},u={x:o.x,y:o.y},l=1/GameCore.Utils.Image.getImageScale();this.giftEntrancesAnimation=new js({targets:[this.giftIcon],delay:e,duration:t,curve:[[c.x,c.y],[c.x-80,c.y+80],[u.x,u.y]],props:{scale:{start:.5*l,to:l},angle:{start:20,to:0}},onCurveUpdate:function(e){var t=e.x+Phaser.Math.RND.between(-40,40),n=e.y+Phaser.Math.RND.between(-40,40);i.cometTwinkle.explode(1,t,n)},onComplete:function(){i.starTwinkleUp.setScale(1.5);var e=i.giftIcon,t=e.x,n=e.y,r=e.width,a=e.height;i.starTwinkleUp.run(1,t,n,r/1.5,a/1.5),i.moveTo(i.starTwinkleUp,i.length-1),i.runTheGiftAttentionAnimation()}}),this.giftEntrancesAnimation.play()},n.runTheGiftAttentionAnimation=function(){this.giftAttentionAnimation||(this.giftAttentionAnimation=new Zs({targets:[this.giftIcon],props:{scale:"+=0.05"}})),this.hand.revive(),Phaser.Display.Align.In.Center(this.hand,this.giftIcon,20,20),this.setTheGiftClickable(!0),this.giftAttentionAnimation.play()},n.runShakeTheGift=function(){this.giftShakeAnimation||(this.giftShakeAnimation=new Fs({targets:[this.giftIcon,this.giftIconWhite],duration:22})),this.giftShakeAnimation.play()},n.runOpenTheGift=function(){var e=this;if(!this.giftOpenAnimation){var t=1/GameCore.Utils.Image.getImageScale();this.giftOpenAnimation=new Hs.Z({targets:[this.giftIcon,this.giftIconWhite],duration:1500,props:{alpha:0,scale:t},onUpdate:function(){e.giftIconWhite.setAlpha(1)},onComplete:function(){e.giftShakeAnimation.stop(),e.giftIcon.kill(),e.giftIconWhite.kill(),e.sparksExplosive.explode(100,e.giftIcon.x,e.giftIcon.y,230),e.onReward(e.rewardValue),e.scene.time.delayedCall(500,e.runCloseAnimation)}})}this.giftOpenAnimation.play()},n.runExitsAnimation=function(e,t){var n=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new Ks.Z({targets:this.getAll(),delay:e,duration:t,props:{alpha:{start:.8,to:0}},onComplete:function(){n.scene.screen.close(n.name)}})),this.popupFadeOutAnimation.play()},n.createHand=function(){this.hand=new $s(this.scene),this.add(this.hand)},n.createContentsGroup=function(){this.popupContents=this.scene.make.group({}),this.popupContents.addMultiple([this.currencyIcon,this.currencyText,this.viewAdButton,this.skipButton])},n.createCurrencyIcon=function(){this.currencyIcon=this.scene.add.image(0,0,go,vo.BLANK),this.currencyIcon.setWorldSize(150,150),Phaser.Display.Align.In.Center(this.currencyIcon,this.zone,0,-80),this.add(this.currencyIcon)},n.createCurrencyText=function(){this.currencyText=this.scene.make.bitmapText({size:this.scene.fontSize(22),font:eo.Z.PRIMARY.KEY,origin:{x:.5,y:.5}}),this.currencyText.setCenterAlign(),this.setRewardValue(0),this.add(this.currencyText)},n.setRewardValue=function(e){this.rewardValue=e,this.currencyText.setText("Watch a video to get\n"+e+" diamonds!"),Phaser.Display.Align.In.BottomCenter(this.currencyText,this.currencyIcon,0,60)},n.createViewAdsButton=function(){this.viewAdButton=new Vs.Z(this.scene,go,vo.BLANK,232,69),this.viewAdButton.setName("ViewAd"),this.viewAdButton.onClick=this.handleShowRewardedVideoAd;var e=this.scene.add.image(0,0,go,vo.BLANK);e.setWorldSize(37,34),Phaser.Display.Align.In.Center(e,this.viewAdButton),e.setX(this.viewAdButton.x-70),this.viewAdButton.add(e);var t=this.scene.make.bitmapText({size:this.scene.fontSize(30),text:"GET NOW!",font:eo.Z.PRIMARY.KEY});Phaser.Display.Align.In.Center(t,this.viewAdButton,15,0),this.viewAdButton.add(t),Phaser.Display.Align.In.Center(this.viewAdButton,this.zone,0,100),this.add(this.viewAdButton)},n.createSkipButton=function(){this.skipButton=new Vs.Z(this.scene,go,vo.BLANK,129,25),this.skipButton.setName("NoThanks"),this.skipButton.onClick=this.handleClosePopup,Phaser.Display.Align.In.BottomCenter(this.skipButton,this.viewAdButton,0,50),this.add(this.skipButton)},n.createGiftIcon=function(){this.giftIconWhite=this.scene.make.image({key:go,frame:vo.BLANK,visible:!1}),this.giftIconWhite.setWorldSize(150,150),this.giftIconWhite.setDepth(nr.Z.PRIORITY),this.add(this.giftIconWhite),this.giftIcon=this.scene.make.image({key:go,frame:vo.BLANK,visible:!1}),this.giftIcon.setInteractive({useHandCursor:!0}),this.giftIcon.setWorldSize(150,150),this.giftIcon.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.handleTheGiftClick),this.setTheGiftClickable(!1),this.add(this.giftIcon)},n.createEffects=function(){this.cometTwinkle=new ao(this.scene),this.starTwinkleUp=new ho(this.scene),this.sparksExplosive=new so.Z(this.scene),this.add([this.cometTwinkle,this.starTwinkleUp,this.sparksExplosive])},t}(GameCore.Screen),bo=yo,Ao=function(e){function t(t,n,i,r,a){var s;return(s=e.call(this,t,n,i)||this).label=void 0,r&&a&&s.button.setWorldSize(r,a),s.createLabel(),s}(0,o.Z)(t,e);var n=t.prototype;return n.setLabel=function(e){this.label.setText(e)},n.createLabel=function(){this.label=this.scene.make.bitmapText({font:eo.Z.PRIMARY.KEY,size:this.scene.fontSize(18),origin:{x:.5,y:.5}}),this.label.setAlpha(.45),this.add(this.label),Phaser.Display.Align.In.BottomCenter(this.label,this.button,0,12)},t}(Vs.Z),So=Ao,Eo=(0,K.P1)([function(e){var t;return null==(t=e[Vn])?void 0:t.tasks}],(function(e){return e})),wo=(0,K.P1)([function(e){var t;return null==(t=e[Vn])?void 0:t.process}],(function(e){return e})),Co=(0,K.P1)([function(e){var t;return null==(t=e[Vn])?void 0:t.isRequesting}],(function(e){return e})),To=(0,K.P1)([function(e){var t;return null==(t=e[Vn])?void 0:t.isNotice}],(function(e){return e})),Io=ys.Z.DEFAULT,xo=Io.KEY,ko=Io.FRAME,Po=function(e){function t(t){var n;return(n=e.call(this,t,xo,ko.BLANK,60,60)||this).noticeIcon=void 0,n.checkNotice=function(){var e=n.scene.storage.getState(),t=To(e)||!1;n.noticeIcon.setVisible(t)},n.setName("Daily"),n.useSound=!1,n.setLabel("Daily"),n.drawNoticeIcon(),n}return(0,o.Z)(t,e),t.prototype.drawNoticeIcon=function(){this.noticeIcon=this.scene.make.image({key:xo,frame:ko.BLANK}),this.noticeIcon.setWorldSize(15,16),this.add(this.noticeIcon),Phaser.Display.Align.In.TopRight(this.noticeIcon,this.button,4,4)},t}(So),Lo=Po,Oo=ys.Z.DEFAULT,Ro=Oo.KEY,Do=Oo.FRAME,Bo=function(e){function t(t){var n;return(n=e.call(this,t,Ro,Do.BLANK,60,60)||this).checkUseable=function(){},n.setName("Gift"),n.setLabel("Gift"),n}return(0,o.Z)(t,e),t}(So),No=Bo,Mo=ys.Z.DEFAULT,_o=Mo.KEY,Zo=Mo.FRAME,Go=function(e){function t(t){var n;return(n=e.call(this,t,_o,Zo.BLANK,60,60)||this).setName("Rank"),n.setLabel("Rank"),n}return(0,o.Z)(t,e),t}(So),Uo=Go,Fo=ys.Z.DEFAULT,Ho=Fo.KEY,zo=Fo.FRAME,Ko=function(e){function t(t){var n;return(n=e.call(this,t,Ho,zo.BLANK,60,60)||this).setName("Setting"),n.useSound=!1,n.setLabel("Settings"),n}return(0,o.Z)(t,e),t}(So),Yo=Ko,Wo=ys.Z.DEFAULT,jo=Wo.KEY,Vo=Wo.FRAME,qo=function(e){function t(t){var n;return(n=e.call(this,t)||this).rankIcon=void 0,n.giftIcon=void 0,n.dailyIcon=void 0,n.settingIcon=void 0,n.buttons=void 0,n.lines=void 0,n.background=void 0,n.createBackground(),n.createLines(),n.createButtons(),n.alignLines(),n.alignButtons(),n.scene.add.existing((0,vs.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.alignLines=function(){var e=-(this.lines.getLength()-1)/2*95;this.lines.setX(e,95)},n.alignButtons=function(){var e=-(this.buttons.getLength()-1)/2*95;this.buttons.setX(e,95),this.buttons.setY(-55)},n.createBackground=function(){this.background=this.scene.make.image({key:jo,frame:Vo.BLANK,origin:{x:.5,y:1}}),this.background.setDepth(nr.Z.BACKGROUND),this.background.setWorldSize(375,85),this.add(this.background)},n.createLines=function(){this.lines=this.scene.make.group({key:jo,frame:Vo.BLANK,repeat:2,setOrigin:{x:.5,y:1}});var e=this.lines.getChildren();e.forEach((function(e){e.setWorldSize(1,85)})),this.add(e)},n.createButtons=function(){this.buttons=this.scene.add.group(),this.createRankButton(),this.createDailyButton(),this.createGiftButton(),this.createSettingsButton()},n.createRankButton=function(){this.rankIcon=new Uo(this.scene),this.add(this.rankIcon),this.buttons.add(this.rankIcon)},n.createDailyButton=function(){this.dailyIcon=new Lo(this.scene),this.add(this.dailyIcon),this.buttons.add(this.dailyIcon)},n.createGiftButton=function(){this.giftIcon=new No(this.scene),this.add(this.giftIcon),this.buttons.add(this.giftIcon)},n.createSettingsButton=function(){this.settingIcon=new Yo(this.scene),this.add(this.settingIcon),this.buttons.add(this.settingIcon)},t}(Phaser.GameObjects.Container),Xo=qo,Jo=function(e){function t(t,n,i){var r;return(r=e.call(this,t)||this).maxValue=void 0,r.key=void 0,r.frames=void 0,r.bar=void 0,r.icon=void 0,r.button=void 0,r.value=void 0,r.key=n,r.frames=i,r.maxValue=1e4,r.createBar(),r.createValue(),r.createIcon(),r.createButton(),r.alignObject(),r.scene.add.existing((0,vs.Z)(r)),r}(0,o.Z)(t,e);var n=t.prototype;return n.setValue=function(e){var t=""+e;e>=this.maxValue&&(t=Math.floor(e/1e3)+"k"),this.value.setText(t)},n.alignObject=function(){var e=this.bar,t=e.width,n=e.height;this.setSize(t,n),Phaser.Display.Align.In.Center(this.value,this.bar,2,-2),Phaser.Display.Align.In.LeftCenter(this.icon,this.bar),this.button&&Phaser.Display.Align.In.RightCenter(this.button,this.bar)},n.createBar=function(){this.bar=this.scene.add.image(0,0,this.key,this.frames.background),this.bar.setY(4),this.add(this.bar)},n.createValue=function(){this.value=this.scene.make.bitmapText({font:eo.Z.PRIMARY.KEY,size:this.scene.fontSize(20),origin:{x:.5,y:.5}}),this.setValue(0),this.add(this.value)},n.createIcon=function(){this.icon=this.scene.add.image(0,0,this.key,this.frames.icon),this.add(this.icon)},n.createButton=function(){this.frames.button&&this.scene.ads.enabled&&(this.button=this.scene.add.image(0,0,this.key,this.frames.button),this.add(this.button))},n.logButtonEvent=function(){var e=this.getParentName(),t=this.name;this.scene.analytics.event(At._.BUTTON_CLICK,{button_name:t,screen_name:e})},n.getParentName=function(){for(var e=this.parentContainer;e;){if(e instanceof GameCore.Screen)return e.getScreenName();e=e.parentContainer}return this.scene.getSceneName()},(0,U.Z)(t,[{key:"onClick",set:function(e){var t=this;this.scene.ads.enabled&&(this.setInteractive({useHandCursor:!0}),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,(function(){t.logButtonEvent(),e()})))}}]),t}(Phaser.GameObjects.Container),Qo=Jo,$o=ys.Z.DEFAULT,ec=$o.KEY,tc=$o.FRAME,nc=function(e){function t(t){var n,i;return(i=e.call(this,t,ec,{background:tc.BLANK,icon:tc.BLANK,button:tc.BLANK})||this).setName("DiamondBar"),i.bar.setWorldSize(105,39),i.icon.setWorldSize(25,24),null==(n=i.button)||n.setWorldSize(18.5,20),i.alignObject(),i}return(0,o.Z)(t,e),t}(Qo),ic=nc,rc=ys.Z.DEFAULT,ac=rc.KEY,sc=rc.FRAME,oc=function(e){function t(t){var n;return(n=e.call(this,t,ac,{background:sc.BLANK,icon:sc.BLANK})||this).setName("ScoreBar"),n.maxValue=1e6,n.bar.setWorldSize(105,39),n.icon.setWorldSize(34,28),n.alignObject(),n}return(0,o.Z)(t,e),t}(Qo),cc=oc,uc=function(e){function t(t){var n;(n=e.call(this,t)||this).scoreBar=void 0,n.diamondBar=void 0;var i=n.scene.gameZone.width;return n.setSize(i,50),n.createScoreBar(),n.createDiamondBar(),n.scene.add.existing((0,vs.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createScoreBar=function(){this.scoreBar=new cc(this.scene),this.add(this.scoreBar)},n.createDiamondBar=function(){this.diamondBar=new ic(this.scene),this.add(this.diamondBar)},t}(Phaser.GameObjects.Container),lc=uc,hc=ys.Z.DEFAULT,dc=hc.KEY,pc=hc.FRAME,fc=function(e){function t(t,n,i){var r;return(r=e.call(this,t,n,i)||this).logo=void 0,r.gems=void 0,r.logoAnimation=void 0,r.gemsAnimation=void 0,r.drawGems(),r.drawLogo(),r.setDepth(nr.Z.LOGO),r.runAnimations(),t.add.existing((0,vs.Z)(r)),r}(0,o.Z)(t,e);var n=t.prototype;return n.drawLogo=function(){this.logo=this.scene.add.image(0,0,dc,pc.BLANK),this.logo.setWorldSize(210,231),this.add(this.logo)},n.drawGems=function(){this.gems=this.scene.add.image(0,0,dc,pc.BLANK),this.gems.setOrigin(.5,.8),this.gems.setWorldSize(233,84.5),this.add(this.gems)},n.runAnimations=function(){this.runLogoAnimation(),this.runGemsAnimation()},n.runLogoAnimation=function(){this.logoAnimation||(this.logoAnimation=new Zs({targets:[this.logo],duration:1400,repeatDelay:200,props:{scale:"+=0.03"}})),this.logoAnimation.play()},n.runGemsAnimation=function(){this.gemsAnimation||(this.gemsAnimation=new Zs({targets:[this.gems],duration:1500,repeatDelay:200,props:{scale:"+=0.1"}})),this.gemsAnimation.play()},t}(Phaser.GameObjects.Container),mc=fc,gc=ys.Z.DEFAULT,vc=gc.KEY,yc=(gc.FRAME,function(e){function t(t){var n;return(n=e.call(this,t,vc,"")||this).button.setWorldSize(170,70.5),n.setName("PlaySingle"),n.createText(),n}return(0,o.Z)(t,e),t.prototype.createText=function(){var e=this.scene.make.bitmapText({font:eo.Z.PRIMARY.KEY,size:this.scene.fontSize(26),text:"PLAY NOW",origin:{x:.5,y:.5}});this.add(e)},t}(Vs.Z)),bc=yc,Ac=ys.Z.DEFAULT,Sc=Ac.KEY,Ec=Ac.FRAME,wc=function(e){function t(t){var n;return(n=e.call(this,t,Sc,Ec.BLANK)||this).button.setWorldSize(231.5,70),n.setName("PlayWithFriends"),n.createText(),n}return(0,o.Z)(t,e),t.prototype.createText=function(){var e=this.scene.make.bitmapText({font:eo.Z.PRIMARY.KEY,size:this.scene.fontSize(26),text:"PLAY WITH FRIENDS",origin:{x:.5,y:.55}});this.add(e)},t}(Vs.Z),Cc=wc,Tc=function(e){function t(t){var n;return(n=e.call(this,t)||this).logo=void 0,n.playSingleButton=void 0,n.playWithFriendsButton=void 0,n.createLogo(),n.createPlaySingleButton(),n.createPlayWithFriendButton(),n.scene.add.existing((0,vs.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createLogo=function(){this.logo=new mc(this.scene,0,0),this.add(this.logo)},n.createPlaySingleButton=function(){this.playSingleButton=new bc(this.scene),this.add(this.playSingleButton)},n.createPlayWithFriendButton=function(){this.playWithFriendsButton=new Cc(this.scene),this.add(this.playWithFriendsButton)},t}(Phaser.GameObjects.Container),Ic=Tc,xc={targets:[],duration:600,ease:Phaser.Math.Easing.Back.Out,props:{y:{from:250,to:0},scale:{from:.9,to:1},alpha:{start:0,from:0,to:1}}},kc=function(e){function t(t){return e.call(this,xc,t)||this}return(0,o.Z)(t,e),t}(Os.Z),Pc=ys.Z.DEFAULT,Lc=Pc.KEY,Oc=Pc.FRAME,Rc=function(e){function t(t,n,i,r,a){var s;return(s=e.call(this,t,n,i)||this).barTopLeft=void 0,s.barTopMid=void 0,s.barTopRight=void 0,s.barMidLeft=void 0,s.barMidBg=void 0,s.barMidRight=void 0,s.barBottomLeft=void 0,s.barBottomMid=void 0,s.barBottomRight=void 0,s.earLeft=void 0,s.earRight=void 0,s.setSize(r,a),s.setDepth(nr.Z.POPUP),s.createPopup(),s.scene.add.existing((0,vs.Z)(s)),s}(0,o.Z)(t,e);var n=t.prototype;return n.createPopup=function(){this.createPopupImages(),this.updatePopupSize(),this.alignPopupImages()},n.createPopupImages=function(){this.barTopLeft=this.scene.add.image(0,0,Lc,Oc.POPUP_TOP_LEFT),this.barTopMid=this.scene.add.image(0,0,Lc,Oc.POPUP_TOP_MID),this.barTopRight=this.scene.add.image(0,0,Lc,Oc.POPUP_TOP_RIGHT),this.barMidLeft=this.scene.add.image(0,0,Lc,Oc.POPUP_MID_LEFT),this.barMidBg=this.scene.add.image(0,0,Lc,Oc.POPUP_MID_MID),this.barMidRight=this.scene.add.image(0,0,Lc,Oc.POPUP_MID_RIGHT),this.barBottomLeft=this.scene.add.image(0,0,Lc,Oc.POPUP_BOTTOM_LEFT),this.barBottomMid=this.scene.add.image(0,0,Lc,Oc.POPUP_BOTTOM_MID),this.barBottomRight=this.scene.add.image(0,0,Lc,Oc.POPUP_BOTTOM_RIGHT),this.earLeft=this.scene.add.image(0,0,Lc,Oc.POPUP_EAR_LEFT),this.earRight=this.scene.add.image(0,0,Lc,Oc.POPUP_EAR_RIGHT);var e=57.5,t=57.5;this.barTopLeft.setWorldSize(e,t),this.barTopMid.setWorldSize(e,t),this.barTopRight.setWorldSize(e,t),this.barMidLeft.setWorldSize(e,t),this.barMidBg.setWorldSize(e,t),this.barMidRight.setWorldSize(e,t),this.barBottomLeft.setWorldSize(e,t),this.barBottomMid.setWorldSize(e,t),this.barBottomRight.setWorldSize(e,t),this.earLeft.setWorldSize(44.5,20),this.earRight.setWorldSize(44.5,20),this.add([this.earLeft,this.earRight,this.barTopRight,this.barTopMid,this.barBottomLeft,this.barBottomRight,this.barMidLeft,this.barMidRight,this.barTopLeft,this.barBottomMid,this.barMidBg])},n.updatePopupSize=function(){this.barTopMid.setWorldSize(this.width-115,this.barTopMid.height),this.barMidLeft.setWorldSize(this.barMidLeft.width,this.height-115),this.barMidBg.setWorldSize(this.width-115,this.height-115),this.barMidRight.setWorldSize(this.barMidRight.width,this.height-115),this.barBottomMid.setWorldSize(this.width-115,this.barBottomMid.height)},n.alignPopupImages=function(){Phaser.Display.Align.In.TopLeft(this.barTopLeft,this),Phaser.Display.Align.In.TopCenter(this.barTopMid,this),Phaser.Display.Align.In.TopRight(this.barTopRight,this),Phaser.Display.Align.In.LeftCenter(this.barMidLeft,this),Phaser.Display.Align.In.Center(this.barMidBg,this),Phaser.Display.Align.In.RightCenter(this.barMidRight,this),Phaser.Display.Align.In.BottomLeft(this.barBottomLeft,this),Phaser.Display.Align.In.BottomCenter(this.barBottomMid,this),Phaser.Display.Align.In.BottomRight(this.barBottomRight,this),Phaser.Display.Align.To.TopLeft(this.earLeft,this,-28),Phaser.Display.Align.To.TopRight(this.earRight,this,-35)},(0,U.Z)(t,[{key:"onClose",set:function(e){this.setInteractive({useHandCursor:!0}),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,e)}}]),t}(Phaser.GameObjects.Container),Dc=Rc,Bc=n(63),Nc=ys.Z.DEFAULT,Mc=Nc.KEY,_c=Nc.FRAME,Zc=function(e){function t(t){var n;return(n=e.call(this,t)||this).cat=void 0,n.effect=void 0,n.runStarTwinkle=function(){var e=n.cat,t=e.x,i=e.y,r=e.displayWidth,a=e.displayHeight,s=i-20;n.effect.run(1,t,s,r,a)},n.createEffect(),n.createCat(),n.runCatAnimation(),n.scene.add.existing((0,vs.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createCat=function(){this.cat=this.scene.make.image({key:Mc,frame:_c.BLANK,origin:{x:.5,y:1}}),this.cat.setWorldSize(204.5,112.5),this.cat.setY(this.cat.height/2),this.add(this.cat)},n.createEffect=function(){this.effect=new Bc.Z(this.scene),this.add(this.effect)},n.runCatAnimation=function(){new Zs({targets:[this.cat],duration:1e3,props:{scale:"+=0.02"}}).play()},t}(Phaser.GameObjects.Container),Gc=Zc,Uc=[{id:"pass-levels",title:"Pass 10 Levels",require:{level:10},reward:{diamond:100}},{id:"collect-diamonds",title:"Collect 300 diamonds",require:{diamond:300},reward:{diamond:100}},{id:"invite-friends",title:"Invite 2 friends",require:{friend:2},reward:{diamond:200}},{id:"reach-score",title:"Reach Total Scores",require:{score:1e5},reward:{diamond:200}}],Fc=function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Uc);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Hc=GameCore.Configs.DailyTasks,zc=function(e){return function(t){t({type:Xn,payload:{tasks:e}});var n=window.game.player.getCustomData("dailyTasks")||{},i=n.startedTime,r=void 0===i?0:i,a=n.logTasks,s=void 0===a?{}:a;t((Date.now()-r)/1e3>Hc.Duration?Kc(e):Yc(s))}},Kc=function(e){return function(t){var n={};e.forEach((function(e){var t=e.id,i=e.require;n[t]={},Object.keys(i).forEach((function(e){var i;n[t]=((i={})[e]=0,i.rewarded=!1,i)}))})),window.game.player.setCustomData("dailyTasks",{logTasks:n,startedTime:Date.now()}),t(Yc(n)),ms.emit(rr.EVENTS.TASKS_RESET)}},Yc=function(e){return{type:Jn,payload:{process:e}}},Wc=function(){return function(e){e({type:ei,payload:{}}),ms.emit(rr.EVENTS.NOTICE_UPDATE)}},jc=n(9),Vc=function(e){function t(t,n){var i;(i=e.call(this,t)||this).payload=void 0,i.process=void 0,i.minProcess=void 0,i.maxProcess=void 0,i.progressBoxLeft=void 0,i.progressBoxBg=void 0,i.progressBoxRight=void 0,i.progressBarLeft=void 0,i.progressBarBg=void 0,i.progressBarRight=void 0,i.progressAnimation=void 0,i.payload=n;var r=n.width;return i.setSize(r,16),i.process=0,i.minProcess=0,i.maxProcess=1,i.createProgressBox(),i.createProgressBar(),i.createContainer(),i}(0,o.Z)(t,e);var n=t.prototype;return n.setProcess=function(e,t){void 0===t&&(t=!1),this.process=this.getCorrectValue(e),this.scene&&!t?this.runProcessAnimation(e):this.updateProcess()},n.updateProcess=function(){var e=this.progressBarBg.displayHeight,t=this.getDisplayWidthByProcess(this.process);this.progressBarBg.setWorldSize(t,e);var n=this.progressBarBg.x;this.progressBarRight.setX(n+t)},n.getCorrectValue=function(e){var t=e;return isFinite(t)||(t=0),t<this.minProcess&&(t=this.minProcess),t>this.maxProcess&&(t=this.maxProcess),t},n.getDisplayWidthByProcess=function(e){return(this.width-17)*e},n.runProcessAnimation=function(e){var t,n=this;null==(t=this.progressAnimation)||t.stop(1),this.progressAnimation=this.scene.add.tween({targets:[this.progressBarBg],duration:300,ease:Phaser.Math.Easing.Quadratic.InOut,props:{displayWidth:function(){var t=n.getCorrectValue(e);return n.getDisplayWidthByProcess(t)}},onStart:function(){var e=n.progressBarBg.displayHeight,t=n.getDisplayWidthByProcess(n.process);n.progressBarBg.setWorldSize(t,e)},onUpdate:function(){var e=n.progressBarBg,t=e.x,i=e.displayWidth;n.progressBarRight.setX(t+i)},onComplete:function(){n.updateProcess()}})},n.createProgressBox=function(){var e=this.payload,t=e.key,n=e.frames;this.progressBoxLeft=this.scene.make.image({key:t,frame:n.PROGRESS_BG_LEFT}),this.progressBoxLeft.setOrigin(0,.5),this.progressBoxLeft.setWorldSize(11,16),this.progressBoxRight=this.scene.make.image({key:t,frame:n.PROGRESS_BG_RIGHT}),this.progressBoxRight.setOrigin(0,.5),this.progressBoxRight.setWorldSize(11,16),this.progressBoxBg=this.scene.make.image({key:t,frame:n.PROGRESS_BG_MID}),this.progressBoxBg.setOrigin(0,.5),this.progressBoxBg.setWorldSize(11,16);var i=this.progressBoxBg.displayHeight,r=this.displayWidth,a=this.progressBoxLeft.displayWidth,s=this.progressBoxRight.displayWidth;this.progressBoxLeft.setWorldSize(a,i),this.progressBoxRight.setWorldSize(s,i),this.progressBoxBg.setWorldSize(r-(a+s),i),Phaser.Display.Align.In.Center(this.progressBoxBg,this,0,0),Phaser.Display.Align.In.LeftCenter(this.progressBoxLeft,this,0,0),Phaser.Display.Align.In.RightCenter(this.progressBoxRight,this,0,0)},n.createProgressBar=function(){var e=this.payload,t=e.key,n=e.frames;this.progressBarLeft=this.scene.make.image({key:t,frame:n.PROGRESS_BAR_LEFT}),this.progressBarLeft.setOrigin(0,.5),this.progressBarLeft.setWorldSize(11,16),this.progressBarRight=this.scene.make.image({key:t,frame:n.PROGRESS_BAR_RIGHT}),this.progressBarRight.setOrigin(0,.5),this.progressBarRight.setWorldSize(11,16),this.progressBarBg=this.scene.make.image({key:t,frame:n.PROGRESS_BAR_MID}),this.progressBarBg.setOrigin(0,.5),this.progressBarBg.setWorldSize(11,16);Phaser.Display.Align.In.LeftCenter(this.progressBarBg,this,-5.8),Phaser.Display.Align.In.LeftCenter(this.progressBarLeft,this,-1),Phaser.Display.Align.In.LeftCenter(this.progressBarRight,this,-1),this.setProcess(0,!0)},n.createContainer=function(){this.add([this.progressBoxBg,this.progressBoxLeft,this.progressBoxRight,this.progressBarBg,this.progressBarLeft,this.progressBarRight]),this.scene.add.existing(this)},t}(Phaser.GameObjects.Container),qc=Vc,Xc=function(){var e=(window.game.player.getCustomData("dailyTasks")||{}).logTasks;return GameCore.Utils.Json.clone(e)},Jc=ys.Z.DEFAULT,Qc=Jc.KEY,$c=Jc.FRAME,eu=function(e){function t(t,n,i){var r;return(r=e.call(this,t)||this).payload=void 0,r.process=void 0,r.isCompleted=void 0,r.background=void 0,r.titleText=void 0,r.processText=void 0,r.progressBar=void 0,r.claimButton=void 0,r.rewardedIcon=void 0,r.handleOnClaim=function(e){return function(){r.updateClaimButton();var t=r.payload,n=t.id,i=t.reward;r.scene.storage.dispatch(function(e){return function(t){var n=Xc();if(GameCore.Utils.Valid.isObject(n)){var i=n;GameCore.Utils.Object.hasOwn(i,e)&&(i[e].rewarded=!0,window.game.player.setCustomData("dailyTasks",{logTasks:i}),t({type:$n,payload:{id:e}}))}}}(n)),Object.keys(i).forEach((function(t){var n=i[t];e(t,n)}))}},r.updateData=function(){var e,t,n=r.getProcessValue(),i=n.current,a=n.target,s=i/a;r.progressBar.setProcess(s,!0),r.setProcessText(i,a),r.isCompleted=i>=a&&!(null!=(e=r.process)&&e.rewarded),r.claimButton.setDisabled(!r.isCompleted),null!=(t=r.process)&&t.rewarded&&r.updateClaimButton()},r.updateClaimButton=function(){r.rewardedIcon=r.scene.make.image({key:Qc,frame:$c.BLANK}),r.rewardedIcon.setWorldSize(25.5,26),r.add(r.rewardedIcon),Phaser.Display.Align.In.Center(r.rewardedIcon,r.claimButton),r.claimButton.kill()},r.payload=n,r.process=i,r.setName("Task: "+n.id),r.createBackground(),r.updateSize(),r.createTitle(),r.createProcessBar(),r.createProcessStatus(),r.createClaimButton(),r.updateData(),r}(0,o.Z)(t,e);var n=t.prototype;return n.setProcess=function(e){this.process=e,this.updateData()},n.getId=function(){return this.payload.id},n.getProcessValue=function(){var e=this,t=this.payload.require,n=Object.keys(t),i=0,r=0;return n.forEach((function(n){i=t[n]||0;var a=e.process[n];r="number"===typeof a?a:0})),{current:r,target:i}},n.setProcessText=function(e,t){this.processText.setText(e+" / "+t)},n.createBackground=function(){this.background=this.scene.make.image({key:Qc,frame:$c.BLANK}),this.background.setWorldSize(262,55),this.add(this.background)},n.updateSize=function(){var e=this.background,t=e.width,n=e.height;this.setSize(t,n)},n.createTitle=function(){var e=this.payload.title;this.titleText=this.scene.make.bitmapText({font:eo.Z.PRIMARY.KEY,size:this.scene.fontSize(17),text:e,origin:{x:0,y:.5}}),this.titleText.setTint(11436629),this.add(this.titleText),Phaser.Display.Align.In.LeftCenter(this.titleText,this,-10,-10)},n.createProcessBar=function(){this.progressBar=new qc(this.scene,{width:170,key:Qc,frames:$c}),this.add(this.progressBar),Phaser.Display.Align.In.LeftCenter(this.progressBar,this,-10,10)},n.createProcessStatus=function(){this.processText=this.scene.make.bitmapText({font:eo.Z.PRIMARY.KEY,size:this.scene.fontSize(15),origin:{x:.5,y:.5}}),this.add(this.processText),Phaser.Display.Align.In.Center(this.processText,this.progressBar,0,0)},n.createClaimButton=function(){this.claimButton=new Vs.Z(this.scene,Qc,$c.BLANK,62.5,38.5);var e="Claim:"+GameCore.Utils.String.toUpperCamelCase(this.payload.id);this.claimButton.setName(e),this.createRewardIcon(),this.createRewardValue(),this.add(this.claimButton),Phaser.Display.Align.In.RightCenter(this.claimButton,this,-6)},n.createRewardIcon=function(){var e=this.scene.make.image({key:Qc,frame:$c.BLANK});e.setWorldSize(19,18),this.claimButton.add(e),Phaser.Display.Align.In.Center(e,this.claimButton,-15)},n.createRewardValue=function(){var e=this.payload.reward,t=this.scene.make.bitmapText({font:eo.Z.PRIMARY.KEY,size:this.scene.fontSize(16),text:""+e.diamond,origin:{x:0,y:.5}});this.claimButton.add(t),Phaser.Display.Align.In.Center(t,this.claimButton,10,-1)},(0,U.Z)(t,[{key:"onClaim",set:function(e){this.claimButton.onClick=this.handleOnClaim(e),this.updateData()}}]),t}(Phaser.GameObjects.Container),tu=eu,nu=ys.Z.DEFAULT,iu=nu.KEY,ru=nu.FRAME,au=GameCore.Configs.DailyTasks,su=function(e){function t(t,n,i,r){var a;return(a=e.call(this,t,n,i,r)||this).onReward=void 0,a.missionsData=void 0,a.missionProcess=void 0,a.startedTime=void 0,a.popup=void 0,a.missionBlocks=void 0,a.countdownTimer=void 0,a.countdownText=void 0,a.countdownContainer=void 0,a.backgroundFadeInAnimation=void 0,a.popupShowUpAnimation=void 0,a.popupExitsAnimation=void 0,a.contentShowUpAnimation=void 0,a.handleClosePopup=function(){a.scene.storage.dispatch(Wc()),a.runCloseAnimation()},a.handleOnClaim=function(e,t){a.claimReward(e,t)},a.resetTaskData=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.startedTime=Date.now(),e.next=3,a.scene.storage.dispatch(Kc(a.missionsData));case 3:a.updateTasksData(),a.createMissionBlocks();case 5:case"end":return e.stop()}}),e)}))),a.updateTasksData=function(){var e=a.scene,t=e.player,n=e.storage.getState(),i=Eo(n)||[],r=wo(n)||{},s=(t.getCustomData("dailyTasks")||{}).startedTime,o=void 0===s?0:s;a.missionsData=i,a.missionProcess=r,a.startedTime=o},a.updateCountdown=(0,s.Z)(u().mark((function e(){var t,n,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.startedTime){e.next=2;break}return e.abrupt("return");case 2:if(t=Date.now(),n=t-a.startedTime,!((i=1e3*au.Duration-n)<0)){e.next=9;break}return i=0,e.next=9,a.resetTaskData();case 9:a.countdownText.setText(""+(0,jc.F0)(i,!0));case 10:case"end":return e.stop()}}),e)}))),a.createPopup(),a.createPopupContents(),a.createDebugTools(),a.setDepth(ir.Ks.POPUP),a.background.setAlpha(.8),a}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(t){e.prototype.open.call(this,t),this.scene.storage.dispatch(Wc()),this.updateTasksData(),this.createCountdownTimer(),this.createMissionBlocks(),this.runOpenAnimation()},n.claimReward=function(e,t){"function"===typeof this.onReward&&(this.onReward(e,t),this.updateTasksData(),this.updateMissionBlocks())},n.runOpenAnimation=function(){this.setVisible(!0),this.runBackgroundEntrancesAnimation(0,300),this.runPopupEntrancesAnimation(200,500),this.runPopupContentEntrancesAnimation(400,400)},n.runCloseAnimation=function(){this.runPopupExitsAnimation(0,200)},n.runBackgroundEntrancesAnimation=function(e,t){var n;this.backgroundFadeInAnimation||(this.backgroundFadeInAnimation=new zs.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:.8}}})),null==(n=this.backgroundFadeInAnimation)||n.play()},n.runPopupEntrancesAnimation=function(e,t){var n,i;if(!this.popupShowUpAnimation)return this.popupShowUpAnimation=new kc({targets:[this.popup],delay:e,duration:t,props:{y:{from:350,to:this.popup.y},scale:{start:0,from:0,to:1},alpha:{start:1,from:1,to:1}}}),void(null==(i=this.popupShowUpAnimation)||i.play());null==(n=this.popupShowUpAnimation)||n.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n,i,r=this.missionBlocks.getChildren();r.length<1||(this.missionBlocks.setAlpha(0),null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new Ys.Z({targets:r,duration:t,delay:this.scene.tweens.stagger(80,{start:e}),props:{alpha:{from:0,to:1}}}),null==(i=this.contentShowUpAnimation)||i.play())},n.runPopupExitsAnimation=function(e,t){var n,i,r=this;if(!this.popupExitsAnimation)return this.popupExitsAnimation=new Ks.Z({targets:[this.popup],delay:e,duration:t,props:{y:250,scale:0},onComplete:function(){r.scene.screen.close(r.name)}}),void(null==(i=this.popupExitsAnimation)||i.play());null==(n=this.popupExitsAnimation)||n.play()},n.createDebugTools=function(){if(GameCore.Utils.Valid.isDebugger()){var e=new Vs.Z(this.scene,iu,ru.BLANK);e.button.setSize(21,23),e.button.setDisplaySize(21,23),e.setName("Reset"),e.onClick=this.resetTaskData,this.add(e),Phaser.Display.Align.In.TopLeft(e,this.zone,-60,-90)}},n.createPopup=function(){this.popup=new Dc(this.scene,0,0,284,440),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone,0,15)},n.createPopupContents=function(){this.createCat(),this.createTitle(),this.createCountdown()},n.createCat=function(){var e=new Gc(this.scene);this.popup.add(e),Phaser.Display.Align.In.TopCenter(e,this.popup,0,35)},n.createTitle=function(){var e=this.scene.add.container(),t=this.scene.make.image({key:iu,frame:ru.BLANK});t.setWorldSize(341,79.5);var n=this.scene.make.bitmapText({font:eo.Z.PRIMARY.KEY,size:this.scene.fontSize(30),text:"Daily Missions"});Phaser.Display.Align.In.Center(n,t,0,-10);var i=new Vs.Z(this.scene,iu,ru.BLANK);i.button.setWorldSize(37.5,37.5),i.setName("Close"),i.useSound=!1,i.onClick=this.handleClosePopup,Phaser.Display.Align.In.RightCenter(i,t,-5,-5),e.add([t,n,i]),this.popup.add(e),Phaser.Display.Align.In.TopCenter(e,this.popup,0,-55)},n.createCountdown=function(){this.countdownContainer=this.scene.add.container();var e=this.scene.make.image({key:iu,frame:ru.BLANK});e.setWorldSize(96,27);var t=this.scene.make.image({key:iu,frame:ru.BLANK});t.setWorldSize(26,28),Phaser.Display.Align.In.LeftCenter(t,e,6),this.countdownText=this.scene.make.bitmapText({font:eo.Z.PRIMARY.KEY,size:this.scene.fontSize(20),text:"00:00:00"}),this.countdownText.setTint(11436629),Phaser.Display.Align.In.Center(this.countdownText,e,10,-1.3),this.countdownContainer.add([e,t,this.countdownText]),this.popup.add(this.countdownContainer),Phaser.Display.Align.In.TopCenter(this.countdownContainer,this.popup,0,-98)},n.createCountdownTimer=function(){var e;null==(e=this.countdownTimer)||e.destroy(),this.countdownTimer=this.scene.time.addEvent({loop:!0,delay:1e3,startAt:1e3,callback:this.updateCountdown})},n.createMissionBlocks=function(){var e,t=this;null==(e=this.missionBlocks)||e.destroy(!0);var n=this.missionsData.length,i=new Array(n).fill(null);this.missionBlocks=this.scene.add.group({maxSize:n}),i.forEach((function(e,n){var i=t.creatMissionBlock(n);null!==i&&t.missionBlocks.add(i)})),this.missionBlocks.setX(0),this.missionBlocks.setY(-50,58)},n.creatMissionBlock=function(e){var t=this.missionsData[e].id;if(!GameCore.Utils.Object.hasOwn(this.missionProcess,t))return null;var n=this.missionProcess[t];if(!GameCore.Utils.Valid.isObject(n))return null;var i=new tu(this.scene,this.missionsData[e],n);return i.onClaim=this.handleOnClaim,this.popup.add(i),i},n.updateMissionBlocks=function(){var e=this;this.missionBlocks.getChildren().forEach((function(t){if(t instanceof tu){var n=t.getId();if(!GameCore.Utils.Object.hasOwn(e.missionProcess,n))return;var i=e.missionProcess[n];if(!GameCore.Utils.Valid.isObject(i))return;t.setProcess(i)}}))},t}(GameCore.Screen),ou=su,cu=n(44),uu=[{id:1,type:"diamond",value:50},{id:2,type:"diamond",value:75},{id:3,type:"diamond",value:100},{id:4,type:"diamond",value:125},{id:5,type:"diamond",value:150},{id:6,type:"diamond",value:200}],lu=function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",uu);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),hu={REWARDED:"rewarded",SKIPPED:"skipped",READY:"ready",WAITING:"waiting"},du=(0,K.P1)([function(e){var t;return null==(t=e[ri])?void 0:t.rewards}],(function(e){return e})),pu=(0,K.P1)([function(e){var t;return null==(t=e[ri])?void 0:t.isRequesting}],(function(e){return e})),fu=GameCore.Configs.DailyRewards,mu=function(e){return function(t){var n=window.game.player.getCustomData("dailyRewarded")||{},i=n.logDays,r=void 0===i?[]:i,s=n.lastRewarded,o=void 0===s?0:s,c=new Date,u=new Date(o),l=new Date(u.toDateString()),h=Math.abs(c.valueOf()-l.valueOf()),d=Math.floor(h/864e5)>1,p=fu.CheckInterrupt&&d||r.length>=fu.MaxDays,f=p?[!1]:[].concat(r,[!1]);gu(f);var m=e.map((function(e,t){var n=t<f.length,i=f.length===t+1,r=!1===f[t],s=hu.WAITING;return i?s=hu.READY:p?s=hu.WAITING:n&&r?s=hu.SKIPPED:n&&(s=hu.REWARDED),(0,a.Z)({},e,{status:s})}));t({type:si,payload:{rewards:m}})}},gu=function(e,t){void 0===t&&(t=!1),window.game.player.setCustomData("dailyRewarded",{logDays:e,lastRewarded:t?0:Date.now()})},vu=ys.Z.DEFAULT,yu=vu.KEY,bu=vu.FRAME,Au=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).payload=void 0,i.background=void 0,i.blockBg=void 0,i.titleBg=void 0,i.titleText=void 0,i.iconStatus=void 0,i.currencyIcon=void 0,i.currencyText=void 0,i.label=void 0,i.starTwinkleUp=void 0,i.pulsateBubbleAnimation=void 0,i.payload=n,i.setName("Day: "+n.day),i.draw(),i.setStatus(),i}(0,o.Z)(t,e);var n=t.prototype;return n.setStatus=function(){switch(this.payload.status){case hu.READY:this.setStatusReady(),this.runAnimations();break;case hu.SKIPPED:this.setStatusSkipped();break;case hu.REWARDED:this.setStatusRewarded();break;default:this.setStatusWaiting()}},n.setStatusReady=function(){this.blockBg.setVisible(!1),this.titleBg.setFrame(bu.BLANK),this.setCurrentIconByDay(this.payload.day)},n.setStatusRewarded=function(){this.iconStatus.setVisible(!0),this.blockBg.setFrame(bu.BLANK),this.titleBg.setFrame(bu.BLANK),this.iconStatus.setFrame(bu.BLANK),this.setCurrentIconByDay(this.payload.day)},n.setStatusSkipped=function(){this.iconStatus.setVisible(!0),this.blockBg.setFrame(bu.BLANK),this.titleBg.setFrame(bu.BLANK),this.iconStatus.setFrame(bu.BLANK),this.setCurrentIconByDay(this.payload.day)},n.setStatusWaiting=function(){this.setCurrentIconByDay(this.payload.day)},n.setCurrentIconByDay=function(e){var t=bu.BLANK;switch(e){case 1:t=bu.BLANK,this.currencyIcon.setFrame(t),this.currencyIcon.setWorldSize(38.5,36.5);break;case 2:t=bu.BLANK,this.currencyIcon.setFrame(t),this.currencyIcon.setWorldSize(52,38);break;case 3:t=bu.BLANK,this.currencyIcon.setFrame(t),this.currencyIcon.setWorldSize(60,40.5);break;case 4:t=bu.BLANK,this.currencyIcon.setFrame(t),this.currencyIcon.setWorldSize(55,53.5);break;case 5:t=bu.BLANK,this.currencyIcon.setFrame(t),this.currencyIcon.setWorldSize(62.5,54);break;case 6:t=bu.BLANK,this.currencyIcon.setFrame(t),this.currencyIcon.setWorldSize(64,53)}},n.draw=function(){this.createBackground(),this.updateBlockSize(),this.createBlockBG(),this.createTitleBg(),this.createTitleText(),this.createLabel(),this.createCurrencyText(),this.createCurrencyIcon(),this.createIconStatus()},n.createBackground=function(){this.background=this.scene.make.image({key:yu,frame:bu.BLANK}),this.background.setWorldSize(82,102),this.add(this.background)},n.updateBlockSize=function(){var e=this.background,t=e.width,n=e.height;this.setSize(t,n)},n.createBlockBG=function(){this.blockBg=this.scene.make.image({key:yu,frame:bu.BLANK}),this.blockBg.setWorldSize(76,69),this.add(this.blockBg),Phaser.Display.Align.In.BottomCenter(this.blockBg,this.background,0,-4)},n.createTitleBg=function(){this.titleBg=this.scene.make.image({key:yu,frame:bu.BLANK}),this.titleBg.setWorldSize(68,25),this.add(this.titleBg),Phaser.Display.Align.In.TopCenter(this.titleBg,this,0,-1)},n.createTitleText=function(){var e=this.payload.day;this.titleText=this.scene.make.bitmapText({font:eo.Z.PRIMARY.KEY,size:this.scene.fontSize(16),text:"DAY "+e,origin:{x:.5,y:.5}}),this.add(this.titleText),Phaser.Display.Align.In.Center(this.titleText,this.titleBg)},n.createCurrencyIcon=function(){this.currencyIcon=this.scene.make.image({key:yu,frame:bu.BLANK}),this.currencyIcon.setWorldSize(38.5,36.5),this.add(this.currencyIcon),Phaser.Display.Align.In.Center(this.currencyIcon,this.background)},n.createIconStatus=function(){this.iconStatus=this.scene.make.image({key:yu,frame:bu.BLANK}),this.iconStatus.setVisible(!1),this.iconStatus.setWorldSize(15,16),this.add(this.iconStatus),Phaser.Display.Align.In.Center(this.iconStatus,this.currencyIcon,20,10)},n.createLabel=function(){this.label=this.scene.make.image({key:yu,frame:bu.BLANK}),this.label.setWorldSize(73,19),this.add(this.label),Phaser.Display.Align.In.BottomCenter(this.label,this.background,0,-5)},n.createCurrencyText=function(){var e=this.payload.value;this.currencyText=this.scene.make.bitmapText({font:eo.Z.PRIMARY.KEY,size:this.scene.fontSize(14),text:"+"+e,origin:{x:.5,y:.5}}),this.add(this.currencyText),Phaser.Display.Align.In.Center(this.currencyText,this.label,-2,-1)},n.runAnimations=function(){this.runSparksIdle()},n.runSparksIdle=function(){this.starTwinkleUp||(this.starTwinkleUp=new ho(this.scene),this.starTwinkleUp.emitter.setFrequency(100),this.add(this.starTwinkleUp));var e=this.currencyIcon,t=e.x,n=e.y,i=e.width,r=e.height;this.starTwinkleUp.run(1,t,n,i,r)},n.runPulsateBubbleAnimation=function(){this.pulsateBubbleAnimation||(this.pulsateBubbleAnimation=new Zs({targets:[this.currencyIcon],props:{scale:"+=0.04"}})),this.pulsateBubbleAnimation.play()},t}(Phaser.GameObjects.Container),Su=Au,Eu=ys.Z.DEFAULT,wu=Eu.KEY,Cu=Eu.FRAME,Tu=GameCore.Configs,Iu=Tu.Network,xu=Tu.DailyRewards,ku={id:0,type:"diamond",value:0},Pu=function(e){function t(t,n,i,r){var a;return(a=e.call(this,t,n,i,r)||this).onReward=void 0,a.onSkipAd=void 0,a.onNoAd=void 0,a.logDays=void 0,a.rewardsData=void 0,a.popup=void 0,a.loading=void 0,a.dayBlocks=void 0,a.claimButton=void 0,a.claimButton2X=void 0,a.backgroundFadeInAnimation=void 0,a.popupShowUpAnimation=void 0,a.popupExitsAnimation=void 0,a.contentShowUpAnimation=void 0,a.adsTimer=void 0,a.handleClosePopup=function(){a.runCloseAnimation()},a.handleOnClaim=function(){var e=a.getCurrentRewardValue();a.claimReward(e)},a.handleOnClaimX2=(0,s.Z)(u().mark((function e(){var t,n,i,r,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.scene,n=t.audio,i=t.game,e.prev=1,a.claimButton.setDisabled(!0),a.claimButton2X.setDisabled(!0),i.globalScene.screen.open(ir.o4.NOTIFY_SCREEN,{message:"Loading...",duration:0,loading:!0}),n.pauseMusic(),n.muteAll(),e.next=9,new Promise((function(e,t){var n;null==(n=a.adsTimer)||n.remove(),a.adsTimer=a.scene.time.delayedCall(Iu.Timeout,t),a.scene.ads.getAdStatus(GameCore.Ads.Types.REWARDED)===GameCore.Ads.Status.LOADING?a.scene.ads.events.once(GameCore.Ads.Events.LOADED,e):a.scene.ads.preloadRewardedVideoAsync().then(e).catch(t)}));case 9:return e.next=11,a.scene.ads.showRewardedVideoAsync();case 11:i.globalScene.screen.close(ir.o4.NOTIFY_SCREEN),r=a.getCurrentRewardValue(),a.claimReward(2*r),e.next=23;break;case 16:if(e.prev=16,e.t0=e.catch(1),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=22;break}if("USER_INPUT"!==e.t0.code){e.next=22;break}return a.onSkipAd(),e.abrupt("return");case 22:a.onNoAd();case 23:return e.prev=23,null==(s=a.adsTimer)||s.destroy(),n.unmuteAll(),n.playMusic(),a.claimButton.setDisabled(!1),a.claimButton2X.setDisabled(!1),e.finish(23);case 30:case"end":return e.stop()}}),e,null,[[1,16,23,30]])}))),a.updateRewardsData=(0,s.Z)(u().mark((function e(){var t,n,i,r,o,c,l,h;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.scene,n=t.storage,i=t.player,e.next=3,n.dispatch(function(){var e=(0,s.Z)(u().mark((function e(t,n){var i,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n(),!pu(i)){e.next=4;break}return e.abrupt("return");case 4:return t({type:ai,payload:{}}),e.next=7,lu();case 7:r=e.sent,t(mu(r));case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:if(r=n.getState(),!((null==(o=du(r)||[])?void 0:o.length)<1)){e.next=7;break}return e.abrupt("return");case 7:a.rewardsData=o,c=i.getCustomData("dailyRewarded"),l=(c||{}).logDays,h=void 0===l?[]:l,a.logDays=[].concat(h);case 11:case"end":return e.stop()}}),e)}))),a.checkOpenable=(0,s.Z)(u().mark((function e(){var t,n,i,r,s,o,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.scene.player,n=t.getCustomData("dailyRewarded"),r=(i=n||{}).logDays,s=void 0===r?[]:r,o=i.lastRewarded,c=void 0===o?0:o,!(s.length>xu.MaxDays)){e.next=5;break}return e.abrupt("return",!0);case 5:if(!(xu.MockTime>0)){e.next=9;break}if(!(Date.now()-c>=1e3*xu.MockTime)){e.next=9;break}return e.abrupt("return",!0);case 9:if(!(0,jc.Gm)(c)){e.next=11;break}return e.abrupt("return",!1);case 11:return e.abrupt("return",!0);case 12:case"end":return e.stop()}}),e)}))),a.rewardsData=[],a.createPopup(),a.createPopupContents(),a.setDepth(ir.Ks.POPUP),a.background.setAlpha(.8),a}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(){var t=(0,s.Z)(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.checkOpenable();case 2:if(t.sent){t.next=5;break}return t.abrupt("return");case 5:return e.prototype.open.call(this),t.next=8,this.updateRewardsData();case 8:this.createDayBlocks(),this.runOpenAnimation();case 10:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),n.claimReward=function(e){var t;"function"===typeof this.onReward&&((null==(t=this.logDays)?void 0:t.length)<1||(this.logDays[this.logDays.length-1]=!0,gu(this.logDays),this.onReward(e),this.runCloseAnimation()))},n.getCurrentRewardValue=function(){var e=this.rewardsData.find((function(e){return e.status===hu.READY}));return(null==e?void 0:e.value)||0},n.getRewardByDay=function(e){return this.rewardsData.find((function(t){return t.id===e}))||ku},n.runOpenAnimation=function(){this.setVisible(!0),this.runBackgroundEntrancesAnimation(0,300),this.runPopupEntrancesAnimation(150,400),this.runPopupContentEntrancesAnimation(300,300)},n.runCloseAnimation=function(){this.runPopupExitsAnimation(0,200)},n.runBackgroundEntrancesAnimation=function(e,t){this.backgroundFadeInAnimation||(this.backgroundFadeInAnimation=new zs.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{getStart:function(){return 0},getEnd:function(){return.8}}}})),this.backgroundFadeInAnimation.play()},n.runPopupEntrancesAnimation=function(e,t){this.popupShowUpAnimation||(this.popupShowUpAnimation=new kc({targets:[this.popup],delay:e,duration:t,props:{scale:{start:0,from:0,to:1},alpha:{start:1,from:1,to:1}}})),this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n,i=this.dayBlocks.getChildren();i.length<1||(null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new Ys.Z({targets:i,duration:t,delay:this.scene.tweens.stagger(150,{start:e}),props:{alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play())},n.runPopupExitsAnimation=function(e,t){var n=this;this.popupExitsAnimation||(this.popupExitsAnimation=new Ks.Z({targets:[this.popup],delay:e,duration:t,props:{y:250,scale:0},onComplete:function(){n.scene.screen.close(n.name)}})),this.dayBlocks.destroy(!0,!0),this.popupExitsAnimation.play()},n.createPopup=function(){this.popup=new Dc(this.scene,0,0,310,390),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone)},n.createPopupContents=function(){this.createTitle(),this.createLoading(),this.createClaimButton(),this.createClaimX2Button()},n.createTitle=function(){var e=this.scene.add.container(),t=this.scene.make.image({key:wu,frame:Cu.BLANK});t.setWorldSize(271,81);var n=this.scene.make.bitmapText({font:eo.Z.PRIMARY.KEY,size:this.scene.fontSize(30),text:"Daily Rewards"});Phaser.Display.Align.In.Center(n,t,0,-10);var i=new Vs.Z(this.scene,wu,Cu.BLANK,38,38);i.setName("Close"),i.useSound=!1,i.onClick=this.handleClosePopup,Phaser.Display.Align.In.RightCenter(i,t,-5,-5),e.add([t,n,i]),this.popup.add(e),Phaser.Display.Align.In.TopCenter(e,this.popup)},n.createLoading=function(){this.loading=new cu.Z(this.scene),this.loading.setVisible(!1),this.loading.setTint(12237498),this.popup.add(this.loading),Phaser.Display.Align.In.Center(this.loading,this.popup)},n.createDayBlocks=function(){var e,t=this;null==(e=this.dayBlocks)||e.destroy(!0,!0);var n=xu.MaxDays;this.dayBlocks=this.scene.make.group({maxSize:n}),new Array(n).fill(null).forEach((function(e,n){var i=t.createDayBlock(n+1);t.dayBlocks.add(i)})),Phaser.Actions.GridAlign(this.dayBlocks.getChildren(),{width:3,height:2,cellWidth:92,cellHeight:112,x:-88,y:-75})},n.createDayBlock=function(e){var t=this.getRewardByDay(e),n=t.type,i=t.value,r=t.status,a=void 0===r?"":r,s=new Su(this.scene,{day:e,type:n,value:i,status:a});return s.setAlpha(0),this.popup.add(s),s},n.createClaimButton=function(){this.claimButton=new Vs.Z(this.scene,wu,Cu.BLANK,79,68),this.claimButton.setName("Claim");var e=this.scene.make.bitmapText({font:eo.Z.PRIMARY.KEY,size:this.scene.fontSize(22),text:"Claim",origin:{x:.5,y:.5}});this.claimButton.add(e),Phaser.Display.Align.In.Center(e,this.claimButton,0,-3),this.popup.add(this.claimButton),Phaser.Display.Align.In.BottomCenter(this.claimButton,this.popup,-86,-30),this.claimButton.onClick=this.handleOnClaim},n.createClaimX2Button=function(){this.claimButton2X=new Vs.Z(this.scene,wu,Cu.BLANK,161,68),this.claimButton2X.setName("ClaimX2");var e=this.scene.make.bitmapText({font:eo.Z.PRIMARY.KEY,size:this.scene.fontSize(22),text:"Claim X2",origin:{x:0,y:.5}}),t=this.scene.make.image({key:wu,frame:Cu.BLANK});t.setWorldSize(37,34),Phaser.Display.Align.In.Center(t,this.claimButton2X,-38,-2),Phaser.Display.Align.In.Center(e,this.claimButton2X,24,-3),this.claimButton2X.add([e,t]),this.popup.add(this.claimButton2X),Phaser.Display.Align.In.BottomCenter(this.claimButton2X,this.popup,52,-30),this.claimButton2X.onClick=this.handleOnClaimX2},t}(GameCore.Screen),Lu=Pu,Ou=ys.Z.DEFAULT.KEY,Ru=function(e){function t(t,n){var i;return(i=e.call(this,t,Ou,n.backgroundOn)||this).options=void 0,i.icon=void 0,i.getFrameByStatus=function(){var e=i.options,t=e.enable,n=e.frameOn,r=e.frameOff;return t?n:r},i.getBackgroundByStatus=function(){var e=i.options,t=e.enable,n=e.backgroundOn,r=e.backgroundOff;return t?n:r},i.createButton=function(e){var t=i.getBackgroundByStatus();i.button=i.scene.add.image(0,0,e,t),i.add(i.button)},i.options=n,i.createIcon(),i}(0,o.Z)(t,e);var n=t.prototype;return n.processCallback=function(e){var t=this.options.enable;this.updateStatus(!t),e(!t)},n.updateStatus=function(e){this.options.enable=e;var t=this.getFrameByStatus();this.icon.setFrame(t);var n=this.getBackgroundByStatus();this.button.setFrame(n)},n.createIcon=function(){var e=this.getFrameByStatus();this.icon=this.scene.make.image({key:Ou,frame:e}),this.add(this.icon),Phaser.Display.Align.In.Center(this.icon,this.button)},n.logButtonEvent=function(){var e=this.getParentName(),t=this.name,n=!this.options.enable;this.scene.analytics.event(At._.BUTTON_CLICK,{button_name:t,screen_name:e,enable:n})},t}(Vs.Z),Du=Ru,Bu=function(){var e=GameCore.Utils.Device,t=window.navigator.vibrate;return e.isAndroid()&&"function"===typeof t||e.isMobileWeb()&&"function"===typeof t},Nu=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i,r,a,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Math.round(t/80),i=0,r=function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,FBInstant.performHapticFeedbackAsync();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log("can not haptic");case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();case 3:if(!(i<n)){e.next=11;break}return a=r(),o=(0,jc.qZ)(80),i+=1,e.next=9,Promise.all([a,o]);case 9:e.next=3;break;case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Mu=function(e){window.navigator.vibrate(0),window.navigator.vibrate(e)},_u=function(e){try{if(!Bu())return!1;var t=GameCore.Utils.Device;t.isAndroid()||t.isMobileWeb()?Mu(e):t.isIOS()&&Nu(e).catch((function(e){return console.log(e)}))}catch(n){}},Zu=ys.Z.DEFAULT,Gu=Zu.KEY,Uu=Zu.FRAME,Fu=function(e){function t(t,n,i,r){var a;return(a=e.call(this,t,n,i,r)||this).popup=void 0,a.title=void 0,a.buttonClose=void 0,a.contents=void 0,a.settingMusic=void 0,a.settingSound=void 0,a.settingVibrate=void 0,a.popupShowUpAnimation=void 0,a.popupFadeOutAnimation=void 0,a.contentShowUpAnimation=void 0,a.handleClose=function(){a.runCloseAnimation()},a.handleMusicSetting=function(e){a.scene.player.setSetting("music",e),e?a.scene.audio.playMusic():a.scene.audio.pauseMusic()},a.handleSoundSetting=function(e){a.scene.player.setSetting("sound",e)},a.handleVibrateSetting=function(e){a.scene.player.setSetting("vibrate",e)},a.createPopup(),a.createTitle(),a.createButtons(),a.addItem(),a.arrangeItems(),a.createInput(),a.setDepth(ir.Ks.POPUP),a.background.setAlpha(.8),a}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(){e.prototype.open.call(this);var t=this.scene.player.getPlayerSettings(),n=t.music,i=t.sound,r=t.vibrate;if(this.settingMusic.updateStatus(n),this.settingSound.updateStatus(i),this.settingVibrate.updateStatus(r),!Bu()){this.settingVibrate.setVisible(!1);Phaser.Display.Align.In.Center(this.settingMusic,this.popup,-65,5),Phaser.Display.Align.In.Center(this.settingSound,this.popup,65,5)}this.runOpenAnimation()},n.createInput=function(){this.buttonClose.useSound=!1,this.buttonClose.onClick=this.handleClose,this.settingMusic.onClick=this.handleMusicSetting,this.settingSound.onClick=this.handleSoundSetting,this.settingVibrate.onClick=this.handleVibrateSetting},n.createPopup=function(){this.popup=new Dc(this.scene,0,0,310,180),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone)},n.createTitle=function(){this.title=this.scene.add.container();var e=this.scene.make.image({key:Gu,frame:Uu.BLANK});e.setWorldSize(271,81);var t=this.scene.make.bitmapText({font:eo.Z.PRIMARY.KEY,size:this.scene.fontSize(30),text:"SETTINGS",origin:{x:.5,y:.5}});Phaser.Display.Align.In.Center(t,e,0,-10),this.buttonClose=new Vs.Z(this.scene,Gu,Uu.BLANK,38,38),this.buttonClose.setName("Close"),Phaser.Display.Align.In.RightCenter(this.buttonClose,e,-5,-5),this.title.add([e,t,this.buttonClose])},n.createButtons=function(){var e=this.scene.player.getPlayerSettings(),t=e.music,n=e.sound,i=e.vibrate;this.createMusicButton(t),this.createVibrateButton(i),this.createSoundButton(n)},n.createMusicButton=function(e){this.settingMusic=new Du(this.scene,{enable:e,frameOn:Uu.BLANK,frameOff:Uu.BLANK,backgroundOn:Uu.BLANK,backgroundOff:Uu.BLANK}),this.settingMusic.setName("Music"),this.settingMusic.icon.setWorldSize(43,43),this.settingMusic.button.setWorldSize(70,70)},n.createVibrateButton=function(e){this.settingVibrate=new Du(this.scene,{enable:e,frameOn:Uu.BLANK,frameOff:Uu.BLANK,backgroundOn:Uu.BLANK,backgroundOff:Uu.BLANK}),this.settingVibrate.setName("Vibrate"),this.settingVibrate.icon.setWorldSize(43,43),this.settingVibrate.button.setWorldSize(70,70)},n.createSoundButton=function(e){this.settingSound=new Du(this.scene,{enable:e,frameOn:Uu.BLANK,frameOff:Uu.BLANK,backgroundOn:Uu.BLANK,backgroundOff:Uu.BLANK}),this.settingSound.setName("Sound"),this.settingSound.icon.setWorldSize(43,43),this.settingSound.button.setWorldSize(70,70)},n.addItem=function(){this.popup.add([this.title,this.settingVibrate,this.settingMusic,this.settingSound]),this.contents=this.scene.add.group(),this.contents.addMultiple([this.settingVibrate,this.settingMusic,this.settingSound])},n.arrangeItems=function(){Phaser.Display.Align.In.TopCenter(this.title,this.popup);Phaser.Display.Align.In.Center(this.settingVibrate,this.popup,0,5),Phaser.Display.Align.In.Center(this.settingSound,this.popup,-90,5),Phaser.Display.Align.In.Center(this.settingMusic,this.popup,90,5)},n.runOpenAnimation=function(){var e;null!=(e=this.popupShowUpAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.runPopupEntrancesAnimation(0,400),this.runPopupContentEntrancesAnimation(200,300))},n.runCloseAnimation=function(){var e;null!=(e=this.popupFadeOutAnimation)&&null!=(e=e.tween)&&e.isPlaying()||this.runPopupExitsAnimation(0,200)},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup,i=n.y,r=n.scale;this.popupShowUpAnimation=new kc({targets:[this.popup],delay:e,duration:t,props:{y:{from:350,to:i},alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:r}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n;null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new Ys.Z({targets:this.contents.getChildren(),duration:t,delay:e,props:{alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new Ks.Z({targets:[this.popup],delay:e,duration:t,props:{y:250,scale:0},onComplete:function(){n.popup.setY(0),n.scene.screen.close(n.name)}})),this.popupFadeOutAnimation.play()},t}(GameCore.Screen),Hu=Fu,zu=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.screen=void 0,n.header=void 0,n.main=void 0,n.footer=void 0,n.diamonds=void 0,n.fireworks=void 0,n.rewardScreen=void 0,n.settingsScreen=void 0,n.dailyRewardsScreen=void 0,n.dailyMissionScreen=void 0,n.scene=t,n.screen=t.screen,n.createObjects(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createObjects=function(){this.createHeaderBar(),this.createMainContent(),this.createFooterBar()},n.createHeaderBar=function(){this.header=new lc(this.scene),this.header.setDepth(nr.Z.BUTTON)},n.createMainContent=function(){this.main=new Ic(this.scene),this.main.setDepth(nr.Z.LOGO)},n.createFooterBar=function(){this.footer=new Xo(this.scene),this.footer.setDepth(nr.Z.BUTTON)},n.createSettingsScreen=function(){this.settingsScreen=this.screen.add(ir.o4.SETTINGS_SCREEN,Hu)},n.createRewardScreen=function(){return this.screen.add(ir.o4.REWARD_SCREEN,bo)},n.createDailyMissionScreen=function(){return this.screen.add(ir.o4.DAILY_MISSIONS_SCREEN,ou)},n.createDailyRewardsScreen=function(){return this.screen.add(ir.o4.DAILY_REWARD_SCREEN,Lu)},n.createFirework=function(){this.fireworks||(this.fireworks=this.scene.add.group());var e=this.fireworks.getFirstDead();if(e instanceof ws)return e.revive(),e;var t=new ws(this.scene);return this.fireworks.add(t),t},n.createDiamondDrop=function(e){this.diamonds||(this.diamonds=this.scene.add.group());var t=this.diamonds.getFirstDead();if(t instanceof ks)return t.positions=e,t;var n=new ks(this.scene,e);return n.setDepth(nr.Z.ON_TOP),this.diamonds.add(n),n},t}(Ls),Ku=zu,Yu=function(){function e(e){this.scene=void 0,this.objects=void 0,this.allUI=void 0,this.groups=void 0,this.scene=e,this.objects=null,this.createGroups()}var t=e.prototype;return t.setUIObjects=function(e){this.objects=e,this.allUI.addMultiple(this.objects.getAll())},t.createGroups=function(){this.groups={},this.allUI=this.scene.add.group(),this.groups.allUI=this.allUI},t.killAllUI=function(){this.allUI.killGroup()},t.reviveAllUI=function(){this.allUI.reviveGroup()},e}(),Wu=Yu,ju=function(e){function t(t){var n;return(n=e.call(this,t)||this).objects=void 0,n.guideUI=void 0,n.objects=null,n}(0,o.Z)(t,e);var n=t.prototype;return n.alignUI=function(){if(null!==this.objects){var e=this.scene.gameZone,t=this.objects,n=t.header,i=t.main,r=t.footer;i.setPosition(0,0),Phaser.Display.Align.In.Center(i.logo,i,0,-110),Phaser.Display.Align.In.Center(i.playSingleButton,i,0,160),Phaser.Display.Align.In.Center(i.playWithFriendsButton,i,0,80),i.setScale(1),n.setPosition(0,0),n.setSize(e.width,50),Phaser.Display.Align.In.TopLeft(n.scoreBar,n,-25,-15),Phaser.Display.Align.In.TopRight(n.diamondBar,n,-25,-15),Phaser.Display.Align.In.BottomCenter(r,e),Phaser.Display.Align.In.Center(i,e),Phaser.Display.Align.In.TopCenter(n,e),console.log("PortraitLayout alignUI Header",n.width,n.height)}},n.createGroups=function(){e.prototype.createGroups.call(this),this.guideUI=this.scene.add.group(),this.groups.guideUI=this.guideUI},n.setUIObjects=function(t){e.prototype.setUIObjects.call(this,t),this.addUIObjectsToGroups()},n.addUIObjectsToGroups=function(){null!==this.objects&&this.addObjectForGuideUI()},n.addObjectForGuideUI=function(){this.objects},t}(Wu),Vu=ju,qu=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.alignUI=function(){if(null!==this.objects){var e=this.scene.gameZone,t=this.objects,n=t.header,i=t.main,r=t.footer;i.setPosition(0,0),Phaser.Display.Align.In.Center(i.logo,i,0,-110),Phaser.Display.Align.In.Center(i.playSingleButton,i,0,160),Phaser.Display.Align.In.Center(i.playWithFriendsButton,i,0,80),i.setScale(.8),n.setPosition(0,0),n.setSize(e.width,50),Phaser.Display.Align.In.TopLeft(n.scoreBar,n,-100,-15),Phaser.Display.Align.In.TopRight(n.diamondBar,n,-100,-15),Phaser.Display.Align.In.BottomCenter(r,e),Phaser.Display.Align.In.Center(i,e),Phaser.Display.Align.In.TopCenter(n,e)}},t}(Vu),Xu=qu,Ju={STATUS:{READY:"ready",RUNNING:"running",STOPPED:"stopped"}},Qu=Ju.STATUS,$u=function(){function e(e){this.state=void 0,this.scene=void 0,this.scene=e}var t=e.prototype;return t.init=function(){this.setState(Qu.READY)},t.start=function(){this.isRunning()||this.setState(Qu.RUNNING)},t.stop=function(){this.isRunning()&&this.setState(Qu.STOPPED)},t.setState=function(e){this.state=e},t.isReady=function(){return this.state===Qu.READY},t.isRunning=function(){return this.state===Qu.RUNNING},t.isStopped=function(){return this.state===Qu.STOPPED},e}(),el=$u,tl=n(49),nl=Ju.STATUS,il=function(e){function t(t){var n;return(n=e.call(this,t)||this).layout=void 0,n.objects=void 0,n.changeLayout=function(){n.scene.world.getResizeEventData().isLayoutChanged?(n.createLayouts(),n.layout.setUIObjects(n.objects),n.layout.alignUI()):n.layout.alignUI()},n.scene=t,n.createObjects(),n.createLayouts(),n.registerEvents(),n}(0,o.Z)(t,e);var n=t.prototype;return n.registerEvents=function(){this.scene.events.on(tl.Z.LAYOUT_UPDATE,this.changeLayout)},n.init=function(){this.initUILogic(),this.layout.alignUI(),this.setState(nl.READY)},n.start=function(){this.isRunning()||(this.updateUIState(),this.setState(nl.RUNNING))},n.stop=function(){this.isRunning()&&this.setState(nl.STOPPED)},t}(el),rl=il,al=GameCore.Configs.Gameplay,sl=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.scene=t,n}(0,o.Z)(t,e);var n=t.prototype;return n.createObjects=function(){this.objects=new Ku(this.scene)},n.createLayouts=function(){this.scene.world.isLandscape()?this.layout=new Xu(this.scene):this.layout=new Vu(this.scene),this.layout.setUIObjects(this.objects)},n.initUILogic=function(){var e=this.objects,t=e.header,n=e.main,i=e.footer;t.diamondBar.onClick=this.scene.handleDiamondBarClick,n.playSingleButton.onClick=this.scene.handlePlaySingle,n.playWithFriendsButton.onClick=this.scene.handlePlayWithFriend,i.rankIcon.onClick=this.scene.handleRankIconClick,i.dailyIcon.onClick=this.scene.handleDailyIconClick,i.giftIcon.onClick=this.scene.handleGiftIconClick,i.settingIcon.onClick=this.scene.handleSettingClick},n.updateUIState=function(){var e,t,n=this.objects.footer;null==(e=n.giftIcon)||e.checkUseable(),null==(t=n.dailyIcon)||t.checkNotice(),ms.off(rr.EVENTS.NOTICE_UPDATE,n.dailyIcon.checkNotice),ms.on(rr.EVENTS.NOTICE_UPDATE,n.dailyIcon.checkNotice)},n.showSettingScreen=function(){this.objects.settingsScreen||this.objects.createSettingsScreen(),this.scene.screen.open(ir.o4.SETTINGS_SCREEN)},n.showDailyRewardScreen=function(){var e=this,t=this.objects.dailyRewardsScreen;t||((t=this.objects.createDailyRewardsScreen()).onNoAd=this.scene.showNotifyNoAds,t.onSkipAd=this.scene.showNotifySkipAds,t.onReward=function(t){e.scene.eatDiamond(t)}),this.scene.screen.open(ir.o4.DAILY_REWARD_SCREEN)},n.showDailyMissionScreen=function(){var e=this,t=this.objects.dailyMissionScreen;t||((t=this.objects.createDailyMissionScreen()).onReward=function(t,n){"diamond"===t&&e.scene.eatDiamond(n)},this.objects.dailyMissionScreen=t),this.scene.screen.open(ir.o4.DAILY_MISSIONS_SCREEN)},n.showRewardScreen=function(){var e=this,t=this.objects.rewardScreen;t||((t=this.objects.createRewardScreen()).onReward=function(){var t=(0,s.Z)(u().mark((function t(n){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.scene.eatDiamond(n),t.next=3,e.scene.player.setCustomData("lastReceiveGift",Date.now());case 3:e.objects.footer.giftIcon.checkUseable();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.scene.screen.open(ir.o4.REWARD_SCREEN,{awardDiamonds:al.AwardDiamonds})},t}(rl),ol=sl,cl=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this).currentDiamond=void 0,t.timerFireworks=void 0,t.timerDailyRewards=void 0,t.layoutManager=void 0,t.run=function(){var e;t.layoutManager.init(),t.currentDiamond=0,t.updateCurrentBestScore(),t.updateCurrentDiamond(),null==(e=t.timerDailyRewards)||e.remove(),t.timerDailyRewards=t.time.delayedCall(300,(function(){t.screen.open(ir.o4.DAILY_REWARD_SCREEN)})),t.facebook.attemptToAddShortcut(),t.layoutManager.start(),t.timerFireworks&&t.timerFireworks.remove(),t.fireFireworks()},t.eatDiamond=function(e){t.createDiamondsEffect(10,e),ms.emit(rr.COLLECT_DIAMONDS.EVENTS.COLLECT_DIAMONDS,{type:"diamond",value:e})},t.fireFireworks=function(){var e=t.gameZone,n=e.width,i=e.height,r=t.layoutManager.objects.main.logo.getWorldPosition().y;t.timerFireworks=t.tweens.addCounter({duration:300,repeat:Phaser.Math.RND.between(2,4),onRepeat:function(){var e=t.layoutManager.objects.createFirework();e.randomColor();var a=Phaser.Math.RND.between(20,n-20);e.fire(a,i,r)},completeDelay:1e3,onComplete:t.fireFireworks})},t.showNotifyNoAds=function(){t.game.globalScene.screen.open(ir.o4.NOTIFY_SCREEN,{message:"No ads to display!",duration:1200,loading:!1})},t.showNotifySkipAds=function(){t.game.globalScene.screen.open(ir.o4.NOTIFY_SCREEN,{message:"Sorry, No Rewards!\nYou have cancelled the ad!",duration:1500,loading:!1})},t.handlePlaySingle=function(){t.storage.dispatch(ns())},t.handlePlayWithFriend=function(){t.storage.dispatch(rs())},t.handleSettingClick=function(){t.layoutManager.showSettingScreen()},t.handleRankIconClick=function(){t.scene.switch(Yi.C.LEADERBOARD_SCENE)},t.handleDailyIconClick=function(){t.layoutManager.showDailyMissionScreen()},t.handleGiftIconClick=function(){t.layoutManager.showRewardScreen()},t.handleDiamondBarClick=function(){t.layoutManager.showRewardScreen()},t}(0,o.Z)(t,e);var n=t.prototype;return n.updateCurrentBestScore=function(){this.player.getBestScore();this.layoutManager.objects.header.scoreBar.setValue(bestScore)},n.create=function(){e.prototype.create.call(this),this.createBackground(Ri.Z.BACKGROUND.KEY),this.createLayoutManager()},n.createLayoutManager=function(){this.layoutManager=new ol(this)},n.createDiamondsEffect=function(e,t){var n=this,i=this.layoutManager.objects,r=i.header,a=i.main,s=r.diamondBar.getWorldPosition(),o=s.x,c=s.y,u=a.logo.getWorldPosition(),l=u.x,h=u.y,d=0;this.tweens.addCounter({duration:1e3/e,repeat:e,repeatDelay:30,onRepeat:function(){var i=Phaser.Math.RND.between(l-60,l+60),a=n.layoutManager.objects.createDiamondDrop({from:{x:i,y:h-80},to:{x:o-40,y:c+7}});a.onUpdate=function(){r.setDepth(nr.Z.ON_TOP)},a.onComplete=function(){var i=n.currentDiamond+Math.floor(t/e);n.setDiamond(i),++d>=e&&(r.setDepth(nr.Z.ITEM),n.player.setCustomData("diamond",n.currentDiamond))},a.run()}})},n.setDiamond=function(e){var t=e<0?0:e;this.currentDiamond=t,this.layoutManager.objects.header.diamondBar.setValue(t)},t}(gs.Z);var ul=cl,ll=ys.Z.DEFAULT,hl=ll.KEY,dl=ll.FRAME,pl=function(e){function t(t,n){var i;return(i=e.call(this,t,hl,dl.BLANK)||this).config=void 0,i.emitter=void 0,i.config=n||{},i.scene.add.existing((0,vs.Z)(i)),i}(0,o.Z)(t,e);var n=t.prototype;return n.createEmitters=function(){var e=dl.BLANK,t=dl.BLANK,n=dl.BLANK,i=dl.BLANK,r=1/GameCore.Utils.Image.getImageScale(),a={on:!1,particleBringToTop:!0,frame:[e,t,n,i],tint:[14223402,1021804,5420529,16702052],timeScale:1,frequency:300,maxParticles:120,gravityY:-10,speedX:{min:-100,max:100},speedY:{min:80,max:250},alpha:{start:1,end:.8},rotate:{start:0,end:1080},scale:{min:.8*r,max:2*r},angle:{min:20,max:160},lifespan:{min:8e3,max:12e3}},s=(0,jt.TS)(a,this.config);this.emitter=this.createEmitter(s)},n.run=function(e,t,n){this.stop(),this.emitter.setQuantity(e),this.emitter.setPosition(t,n),this.emitter.start()},n.explode=function(e,t,n){this.emitter||this.createEmitters(),this.emitter.explode(e,t,n)},n.stop=function(){var e,t,n;null==(e=this.emitter)||e.killAll(),null==(t=this.emitter)||t.stop(),null==(n=this.emitter)||n.remove(),this.createEmitters()},t}(Phaser.GameObjects.Particles.ParticleEmitterManager),fl=pl;function ml(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return gl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gl(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function gl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var vl=GameCore.Configs.LeadersBoard,yl=vl.UseMock,bl=vl.Limit,Al=vl.MockOptions,Sl=function(e,t,n,r){return void 0===n&&(n=bl),void 0===r&&(r=0),function(){var a=(0,s.Z)(u().mark((function a(s){var o,c,l,h,d,p,f,m,g,v,y,b,A,S,E,w;return u().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,o=window.game.player,c=o.getPlayerId(),s(wl()),s({type:Mn,payload:{leaderboardId:e,type:t,limit:n,offset:r}}),!yl){a.next=11;break}return a.next=8,(0,jc.qZ)(1e3);case 8:return l=new Array(n).fill(null).map((function(e,t){var n=(t+1)*(r+1),i=Al.PlayerEntryIndex===t,a={playerId:"0"+n,name:"MPlayer "+n,photo:"./assets/images/others/avatar.png",rank:n,score:Math.floor(1e5/n)};if(i){var s=window.game.player.getPlayer(),o=s.playerId,c=s.name,u=s.photo;a.playerId=o,a.name=c,a.photo=u}return a})),s(El(l,t)),a.abrupt("return");case 11:if(h=[],t!==or){a.next=18;break}return a.next=15,Ar({limit:n,offset:r});case 15:h=a.sent,a.next=26;break;case 18:if(t!==cr){a.next=26;break}return(d=o.getConnectedPlayerIds(n,r)).push(c),p=GameCore.Utils.Array.unique(d),a.next=24,wr({playerIds:p,limit:p.length});case 24:h=a.sent,p.forEach((function(e){var t=h.filter((function(t){return t.playerId===e}));t&&0!==t.length||h.push({playerId:e,score:0})}));case 26:for(f={},m=ml(h);!(g=m()).done;)v=g.value,y=v.playerId,b=v.score,A=v.rank,S=v.getPlayer(),E=S.getPhoto(),w=S.getName(),f[y]={playerId:y,name:w,photo:E,score:b,rank:A};console.log("Request leaderboard data",f),s(El(f,t)),a.next=36;break;case 32:a.prev=32,a.t0=a.catch(0),s(El([],t)),(0,i.tO)(a.t0);case 36:case"end":return a.stop()}}),a,null,[[0,32]])})));return function(e){return a.apply(this,arguments)}}()},El=function(e,t){return{type:_n,payload:{leaders:e,type:t}}},wl=function(){return{type:Zn,payload:{}}},Cl=function(e){return e[Nn]},Tl=((0,K.P1)([function(e){return Cl(e).leaderboardId}],(function(e){return e})),(0,K.P1)([function(e){return Cl(e).leaders}],(function(e){return e}))),Il=(0,K.P1)([function(e){return Cl(e).isRequesting}],(function(e){return e})),xl={targets:[],duration:600,ease:Phaser.Math.Easing.Back.Out,props:{y:{from:500,to:0}}},kl=function(e){function t(t){return e.call(this,xl,t)||this}return(0,o.Z)(t,e),t}(Os.Z),Pl=ys.Z.DEFAULT,Ll=Pl.KEY,Ol=Pl.FRAME,Rl=function(e){function t(t){var n;return(n=e.call(this,t,Ll,Ol.BLANK,100.05,78.2)||this).scene=void 0,n.setName("Home"),n.scene=t,n.createIcon(),n}return(0,o.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.make.image({key:Ll,frame:Ol.BLANK});e.setSize(43,43).setDisplaySize(43,43),Phaser.Display.Align.In.Center(e,this.button),this.add(e)},t}(Vs.Z),Dl=Rl,Bl=ys.Z.DEFAULT,Nl=Bl.KEY,Ml=Bl.FRAME,_l=function(e){function t(t){var n;return(n=e.call(this,t,Nl,Ml.BLANK,176,77.05)||this).scene=void 0,n.setName("PlayWithFriends"),n.scene=t,n.createLabel(),n}return(0,o.Z)(t,e),t.prototype.createLabel=function(){var e=this.scene.make.bitmapText({font:eo.Z.PRIMARY.KEY,size:this.scene.fontSize(30),text:"PLAY"});Phaser.Display.Align.In.Center(e,this.button,0,-12);var t=this.scene.make.bitmapText({font:eo.Z.PRIMARY.KEY,size:this.scene.fontSize(18),text:"WITH FRIENDS"});Phaser.Display.Align.In.Center(t,this.button,0,11),this.add([e,t])},t}(Vs.Z),Zl=_l,Gl=ys.Z.DEFAULT,Ul=Gl.KEY,Fl=Gl.FRAME,Hl=function(e){function t(t){var n;return(n=e.call(this,t,Ul,Fl.BLANK,100.05,78.2)||this).scene=void 0,n.setName("Rank"),n.scene=t,n.createIcon(),n}return(0,o.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.make.image({key:Ul,frame:Fl.BLANK});e.setSize(43,43).setDisplaySize(43,43),Phaser.Display.Align.In.Center(e,this.button),this.add(e)},t}(Vs.Z),zl=Hl,Kl=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.homeButton=void 0,n.rankButton=void 0,n.pwfButton=void 0,n.entrancesAnimation=void 0,n.runAnimation=function(){n.entrancesAnimation.play()},n.scene=t,n.setName("FooterBar"),n.createHomeButton(),n.createRankButton(),n.createPlayWithFriendsButton(),n.createEntrancesAnimation(),n.alignIcons(),n.scene.add.existing((0,vs.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createEntrancesAnimation=function(){this.entrancesAnimation=new kl({targets:[this],delay:800,props:{y:"-=5",alpha:{start:0,from:0,to:1}}})},n.alignIcons=function(){Phaser.Display.Align.In.Center(this.homeButton,this,-130,-6),Phaser.Display.Align.In.Center(this.pwfButton,this,0,-6),Phaser.Display.Align.In.Center(this.rankButton,this,130,-6)},n.createHomeButton=function(){this.homeButton=new Dl(this.scene),this.add(this.homeButton)},n.createRankButton=function(){this.rankButton=new zl(this.scene),this.add(this.rankButton)},n.createPlayWithFriendsButton=function(){this.pwfButton=new Zl(this.scene),this.add(this.pwfButton)},t}(Phaser.GameObjects.Container),Yl=Kl,Wl={targets:[],yoyo:!0,duration:120,ease:Phaser.Math.Easing.Circular.Out,props:{scale:{from:1,to:1.3}}},jl=function(e){function t(t){return e.call(this,Wl,t)||this}return(0,o.Z)(t,e),t}(Os.Z),Vl=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).payload=void 0,i.mainText=void 0,i.shadowText=void 0,i.payload=n,i.createMainText(),i.createShadowText(),i.updateSize(),i.moveDown(i.shadowText),i.scene.add.existing((0,vs.Z)(i)),i}(0,o.Z)(t,e);var n=t.prototype;return n.setText=function(e){this.mainText.setText(e),this.shadowText.setText(e),this.updateSize()},n.setTintText=function(e,t,n,i){this.mainText.setTint(e,t,n,i)},n.setDropShadow=function(e,t,n,i){void 0===i&&(i=1),this.shadowText.setVisible(!0),this.shadowText.setTint(n),this.shadowText.setAlpha(i),Phaser.Display.Align.In.Center(this.shadowText,this.mainText,e,t)},n.updateSize=function(){var e=this.mainText,t=e.width,n=e.height;this.setSize(t,n)},n.createMainText=function(){this.mainText=this.scene.make.bitmapText({font:this.payload.font,size:this.payload.size,origin:{x:.5,y:.5}}),this.add(this.mainText)},n.createShadowText=function(){this.shadowText=this.scene.make.bitmapText({font:this.payload.font,size:this.payload.size,origin:{x:.5,y:.5},visible:!1}),this.add(this.shadowText)},t}(Phaser.GameObjects.Container),ql=Vl,Xl=ys.Z.DEFAULT,Jl=Xl.KEY,Ql=Xl.FRAME,$l=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.bestScore=void 0,n.payload=void 0,n.theCat=void 0,n.popup=void 0,n.ribbon=void 0,n.yourScoreText=void 0,n.bestScoreText=void 0,n.currentScoreText=void 0,n.entrancesAnimation=void 0,n.scoreAnimation=void 0,n.counterAnimation=void 0,n.scene=t,n.bestScore=0,n.createPopup(),n.createTheCat(),n.createRibbon(),n.createYourScoreText(),n.createCurrentScore(),n.createBestScore(),n.createScoreAnimation(),n.createEntrancesAnimation(),n.scene.add.existing((0,vs.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.updateData=function(e){this.payload=e;var t=e.bestScore,n=e.currentScore;if(n<=t)return this.setBestScore(t),this.setCurrentScore(n),void this.runScoreAnimation();this.runAnimation()},n.runAnimation=function(){var e=this;this.runScoreCounter(),this.scene.time.delayedCall(1300,(function(){e.entrancesAnimation.play()}))},n.runScoreCounter=function(){var e,t=this,n=this.payload,i=n.bestScore,r=n.currentScore;null==(e=this.counterAnimation)||e.remove(),this.counterAnimation=this.scene.tweens.addCounter({from:0,to:r,delay:500,duration:2e3,completeDelay:300,onUpdate:function(e){var n=Math.floor(e.getValue());t.runScoreAnimation(),t.setCurrentScore(n)},onComplete:function(){t.bestScore=i,t.setBestScore(i),t.setCurrentScore(r),t.counterAnimation.remove()}})},n.runScoreAnimation=function(){this.scoreAnimation.play()},n.setBestScore=function(e){this.bestScoreText.setText("Best score: "+e)},n.setCurrentScore=function(e){this.currentScoreText.setText(""+e)},n.createPopup=function(){this.popup=new Dc(this.scene,0,0,284,240),this.add(this.popup)},n.createTheCat=function(){this.theCat=new Gc(this.scene),Phaser.Display.Align.In.TopCenter(this.theCat,this.popup),this.add(this.theCat)},n.createRibbon=function(){this.ribbon=this.scene.make.image({key:Jl,frame:Ql.BLANK}),this.ribbon.setSize(341,80).setDisplaySize(341,80),Phaser.Display.Align.In.Center(this.ribbon,this.theCat,0,93),this.add(this.ribbon)},n.createYourScoreText=function(){this.yourScoreText=this.scene.make.bitmapText({font:eo.Z.PRIMARY.KEY,size:this.scene.fontSize(30),origin:{x:.5,y:.5},text:"Your score"}),Phaser.Display.Align.In.Center(this.yourScoreText,this.ribbon,0,-10),this.add(this.yourScoreText)},n.createCurrentScore=function(){this.currentScoreText=new ql(this.scene,{font:eo.Z.PRIMARY.KEY,size:this.scene.fontSize(60)}),this.currentScoreText.setTintText(15779090,15779090,15704623,15704623),this.currentScoreText.setDropShadow(0,2,8804140),Phaser.Display.Align.In.Center(this.currentScoreText,this.popup,0,30),this.add(this.currentScoreText)},n.createBestScore=function(){this.bestScoreText=this.scene.make.bitmapText({font:eo.Z.PRIMARY.KEY,size:this.scene.fontSize(24),origin:{x:.5,y:.5},text:"Best score: "+this.bestScore}),this.bestScoreText.setTint(10494183),Phaser.Display.Align.In.BottomCenter(this.bestScoreText,this.popup,0,-25),this.add(this.bestScoreText)},n.createEntrancesAnimation=function(){this.entrancesAnimation=new Zs({targets:[this],repeat:0,duration:200,props:{scale:"+=0.03"}})},n.createScoreAnimation=function(){this.scoreAnimation=new jl({targets:[this.currentScoreText],props:{scale:{from:1,to:1.3}}})},t}(Phaser.GameObjects.Container),eh=$l,th=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.bestScoreBlock=void 0,n.scene=t,n.createBestScoreBlock(),n.scene.add.existing((0,vs.Z)(n)),n}return(0,o.Z)(t,e),t.prototype.createBestScoreBlock=function(){this.bestScoreBlock=new eh(this.scene),this.add(this.bestScoreBlock)},t}(Phaser.GameObjects.Container),nh=th,ih=n(65),rh=function(e){function t(t,n){var i;(i=e.call(this,t)||this).payload=void 0,i.loading=void 0,i.photo=void 0,i.avtFrame=void 0,i.background=void 0,i.loadPhotoTimer=void 0,i.handleLoadPhotoAfterDelay=function(e,t){return function(){var n=i.scene.textures.get(e);n&&n.key===e?i.handleLoadComplete(e):(i.scene.load.once("filecomplete-image-"+e,i.handleLoadComplete),i.scene.load.image(e,t),i.scene.load.start())}},i.handleLoadComplete=function(e){if(i.scene){var t=i.payload,n=t.id,r=t.radius,a=void 0===r?0:r;if(n&&n===e){var s=n+"_bordered_"+a,o=a>0?s:n,c=i.scene.textures.get(o);if(c&&c.key===o)i.setPhoto(c.key);else if(0!=a&&a<100){if(!GameCore.Utils.Image.drawBorder({scene:i.scene,key:n,newKey:s,radius:a}))return void i.showLoading(!1);i.setPhoto(s)}else if(100==a){if(!GameCore.Utils.Image.drawCircle({scene:i.scene,key:n,newKey:s}))return void i.showLoading(!1);i.setPhoto(s)}else i.setPhoto(n)}}},i.handleLoadPhotoFailed=function(e){e.key===i.payload.id&&i.setDefaultAvatar(e.key)},i.scene.add.existing((0,vs.Z)(i)),i.payload=n,i.setSize(n.width,n.height),i.createBackground(),i.createLoading(),i.createPhoto(),i.createFrame();var r=i.payload,a=r.id,s=r.url,o=r.radius;return a&&s&&i.loadPhoto(a,s,o),i.addDefaultListeners(),i}(0,o.Z)(t,e);var n=t.prototype;return n.setFrame=function(e){this.avtFrame.setFrame(e),this.avtFrame.setVisible(!0)},n.setBackground=function(e){this.background.setFrame(e)},n.loadPhoto=function(e,t,n){var i;if(void 0===n&&(n=0),this.payload.id=e,this.payload.url=t,this.payload.radius=n,null==(i=this.loadPhotoTimer)||i.remove(),e&&t){var r=this.scene.textures.get(e);if(r&&r.key===e)this.handleLoadComplete(e);else{this.showLoading(!0);var a=this.payload.loadDelay||0;this.loadPhotoTimer=this.scene.time.delayedCall(a,this.handleLoadPhotoAfterDelay(e,t))}}else this.setPhoto(Ri.Z.AVATAR.KEY)},n.addDefaultListeners=function(){var e=this;this.scene.load.on(Phaser.Loader.Events.FILE_LOAD_ERROR,this.handleLoadPhotoFailed),this.on(Phaser.GameObjects.Events.DESTROY,(function(){var t;null==(t=e.loadPhotoTimer)||t.remove(),e.scene.load.off(Phaser.Loader.Events.FILE_LOAD_ERROR,e.handleLoadPhotoFailed)}))},n.setDefaultAvatar=function(e){this.loadPhoto(e,Ri.Z.AVATAR.FILE,this.payload.radius)},n.createBackground=function(){var e=this.payload,t=e.key,n=e.background;this.background=this.scene.make.image({key:t,frame:n}),this.background.setWorldSize(this.width,this.height),this.add(this.background)},n.createLoading=function(){this.loading=new cu.Z(this.scene),this.loading.setWorldSize(.75*this.width,.75*this.height),this.loading.setVisible(!1),this.add(this.loading)},n.createPhoto=function(){this.photo=this.scene.make.image({x:0,y:0,origin:{x:.5,y:.5},visible:!1}),this.add(this.photo)},n.createFrame=function(){var e=this.payload,t=e.key,n=e.frame,i=e.width,r=e.height;n?(this.avtFrame=this.scene.make.image({key:t,frame:n}),this.avtFrame.setWorldSize(i,r)):this.avtFrame=this.scene.make.image({x:0,y:0,origin:{x:.5,y:.5},visible:!1}),this.add(this.avtFrame)},n.showLoading=function(e){this.photo.setVisible(!e),this.loading.setVisible(e)},n.setPhoto=function(e){this.showLoading(!1),this.photo.setTexture(e),this.photo.setFrame(0);var t=this.payload,n=t.width,i=t.height,r=Math.min(n,i)-10;this.photo.setWorldSize(r,r),Phaser.Display.Align.In.Center(this.photo,this.background)},t}(Phaser.GameObjects.Container),ah=rh,sh=n(64),oh=ys.Z.DEFAULT,ch=oh.KEY,uh=oh.FRAME,lh=function(e){function t(t){var n;return(n=e.call(this,t)||this).halo=void 0,n.star=void 0,n.createStar(),n.createHalo(),n.scene.add.existing((0,vs.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.run=function(){this.runStarAnimation(),this.runHaloAnimation()},n.createStar=function(){this.star=this.scene.make.image({key:ch,frame:uh.BLANK,visible:!1}),this.star.setWorldSize(35,35),this.add(this.star)},n.createHalo=function(){this.halo=this.scene.make.image({key:ch,frame:uh.BLANK,visible:!1}),this.halo.setWorldSize(162,162),this.add(this.halo)},n.runStarAnimation=function(){var e=this;this.scene.tweens.killTweensOf(this.star),this.star.setVisible(!0);var t=1/GameCore.Utils.Image.getImageScale();this.scene.tweens.add({targets:[this.star],duration:400,ease:Phaser.Math.Easing.Quintic.Out,props:{scaleX:{start:16*t,to:0},scaleY:{start:10*t,to:0}},onComplete:function(){e.star.setVisible(!1)}})},n.runHaloAnimation=function(){var e=this;this.scene.tweens.killTweensOf(this.halo),this.halo.setScale(0),this.halo.setVisible(!0),this.scene.tweens.add({targets:[this.halo],duration:200,ease:Phaser.Math.Easing.Cubic.Out,props:{scale:{from:0,to:8},alpha:{from:1,to:0}},onComplete:function(){e.halo.setVisible(!1)}})},t}(Phaser.GameObjects.Container),hh=lh,dh=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="WideFrameRenderFail",i.message=t||"Wide frame render fail",i.payload=n,i}return(0,o.Z)(t,e),t}((0,T.Z)(Error)),ph=function(e){if("string"!==typeof e||!e)throw new dh(null,{imageShare:e})},fh=function(){return(0,s.Z)(u().mark((function e(){var t,n,r,a,s,o,c,l,h,d;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.player,r=t.analytics,a=t.facebook,s=t.globalScene,e.prev=1,s.screen.open(ir.o4.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),e.next=5,mh();case 5:return o=e.sent,ph(o),c=n.getPlayer(),l=c.playerId,h=c.name,d=c.photo,e.next=10,a.shareAsync({text:"Great! I have a best score!",intent:"SHARE",image:o||"",data:{playerId:l,playerName:h,playerPhoto:d,type:Li}});case 10:r.event(At._.SHARE,{share_content_type:"BestScore",success:!0}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),r.event(At._.SHARE,{share_content_type:"BestScore",success:!1}),(0,i.tO)(e.t0);case 17:return e.prev=17,s.screen.close(ir.o4.NOTIFY_SCREEN),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[1,13,17,20]])})))},mh=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i,r,a,s,o,c,l;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.game,n=t.player,i=t.globalScene,r=n.getPlayer(),a=r.playerId,s=r.photo,r.data,o=n.getLevel(),c=gh({playerId:a,playerPhoto:s,playerScore:o})){e.next=7;break}return console.warn("getRenderOptionsBestScore"),e.abrupt("return");case 7:return l={name:"share-best-score",width:952,height:492,renderOptions:c},e.next=10,i.frameCapture.capture(l);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),gh=(function(){var e=(0,s.Z)(u().mark((function e(t){var n,i,r,a,s,o,c,l,h;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.game,i=n.player,r=n.globalScene,a=i.getPlayer(),s=a.playerId,o=a.photo,c=i.getLevel(),l=gh({playerId:s,playerPhoto:o,playerScore:c})){e.next=7;break}return console.warn("getRenderOptionsCurrentScore"),e.abrupt("return");case 7:return h={name:"share-current-score",width:952,height:492,renderOptions:l},e.next=10,r.frameCapture.capture(h);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e)})))}(),function(e){var t=e.playerId,n=void 0===t?"10":t,i=e.playerPhoto,r=void 0===i?"":i,a=e.playerScore,s=void 0===a?0:a;return"string"!==typeof n||"string"!==typeof r||"number"!==typeof s?null:{avatar:{name:""+n,type:"image",x:620,y:110,image:r,width:240,height:240,fallbackWithImage:Ri.Z.AVATAR.KEY},wideFrame:{name:"wide-frame-message-win",type:"image",x:0,y:0,image:"./assets/wideframes/wide-frame-message-win.png",width:952,height:492},playerScoreShadow:{type:"text",x:740,y:454,font:"600 70px",fillStyle:"#c4683f",text:"Level "+s,textAlign:"center"},playerScore:{type:"text",x:740,y:450,font:"600 70px",fillStyle:"#f2a62e",text:"Level "+s,textAlign:"center"}}}),vh=function(){return(0,s.Z)(u().mark((function e(){var t,n,r,a,s,o,c,l,h,d;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.player,r=t.analytics,a=t.facebook,s=t.globalScene,e.prev=1,s.screen.open(ir.o4.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),e.next=5,yh();case 5:return o=e.sent,ph(o),c=n.getPlayer(),l=c.playerId,h=c.name,d=c.photo,e.next=10,a.shareAsync({text:"A ha, I'm the best!",intent:"CHALLENGE",image:o||"",data:{playerId:l,playerName:h,playerPhoto:d,type:Li}});case 10:r.event(At._.SHARE,{share_content_type:"Leaderboard",success:!0}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),r.event(At._.SHARE,{share_content_type:"Leaderboard",success:!1}),(0,i.tO)(e.t0);case 17:return e.prev=17,s.screen.close(ir.o4.NOTIFY_SCREEN),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[1,13,17,20]])})))},yh=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i,r,a,s,o,c,l,h,d,p,f,m,g,v,y,b,A,S;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.player,i=t.profile,r=t.globalScene,a=n.getPlayer(),s=a.playerId,o=a.name,c=a.photo,(l=n.getConnectedPlayerIds(99,0)).push(s),h=[],e.next=7,wr({playerIds:GameCore.Utils.Array.unique(l),limit:l.length});case 7:d=e.sent,p=GameCore.Utils.Object.keyBy(d,"playerId"),f={playerId:s,name:o,photo:c,score:0},GameCore.Utils.Object.hasOwn(p,s)&&(f=p[s]),h.push(f),e.t0=u().keys(p);case 14:if((e.t1=e.t0()).done){e.next=27;break}if(m=e.t1.value,!GameCore.Utils.Object.hasOwn(p,m)){e.next=25;break}if(g=p[m],3!==h.length){e.next=20;break}return e.abrupt("break",27);case 20:if(g.playerId!==s){e.next=22;break}return e.abrupt("continue",14);case 22:if(!(Number(g.score)>Number(f.score))){e.next=24;break}return e.abrupt("continue",14);case 24:h.push(g);case 25:e.next=14;break;case 27:return v=GameCore.Utils.Array.unique(l),e.next=30,i.requestProfiles(v);case 30:if(y=i.getProfiles(),h.forEach((function(e,t){var n=e.playerId;if(GameCore.Utils.Object.hasOwn(y,n)){var i=y[n],r=i.name,a=i.photo;h[t].name=r,h[t].photo=a}})),h.length<3)for(b=0;b<=3-h.length;)h.push({playerId:"bot"+b,name:"???",score:0,photo:"./assets/images/others/avatar.png"}),b++;if(A=bh({playerId:s,playerName:o,playerPhoto:c,listLeaders:h})){e.next=37;break}return console.warn("getRenderOptionsLeaderboard"),e.abrupt("return");case 37:return S={name:"share-leaderboard",width:1500,height:2e3,renderOptions:A},e.next=40,r.frameCapture.capture(S);case 40:return e.abrupt("return",e.sent);case 41:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),bh=function(e){var t=e.playerId,n=void 0===t?"10":t,i=e.playerPhoto,r=void 0===i?"":i,a=e.listLeaders,s=void 0===a?[]:a;if(!Array.isArray(s))return null;if("string"!==typeof n)return null;if("string"!==typeof r)return null;var o={avatar:{name:""+n,type:"image",x:510,y:280,image:r,width:510,height:510,fallbackWithImage:Ri.Z.AVATAR.KEY}};return s.forEach((function(e,t){var n=e.playerId,i=e.photo;o["photo_"+n]={name:""+n,type:"image",x:472,y:1170+220*t,image:i,width:144,height:144,fallbackWithImage:Ri.Z.AVATAR.KEY}})),o.wideFrame={name:"wide-frame-share",type:"image",x:0,y:0,image:"./assets/wideframes/wide-frame-share.png",width:1500,height:2e3},s.forEach((function(e,t){var n=e.playerId,i=e.name,r=e.score;o["name_"+n]={type:"text",x:650,y:1256+220*t,font:"600 48px",text:i,fillStyle:"#b18151"},o["score_"+n]={type:"text",x:1e3,y:1256+220*t,font:"600 48px",text:r,fillStyle:"#b18151"}})),o},Ah=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i,r,a,s,o,c,l,h,d,p,f,m,g,v,y,b,A;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.game,i=n.player,r=n.globalScene,a=ca(t),s=i.getPlayer(),o=s.photo,c=s.playerId,l=ia(t),h=l.playerId,d=l.photo,p=aa(t,{playerId:c}),f=sa(t,{opponentId:h}),m=a[c]||{},g=m.score,v=a[h]||{},y=v.score,b=Sh({playerId:c,playerPhoto:o,playerScore:g,opponentId:h,opponentPhoto:d,opponentScore:y,isPlayerFinished:p,isOpponentFinished:f})){e.next=12;break}return console.warn("getRenderOptionsLeaderboard"),e.abrupt("return");case 12:return A={name:"share-game-result",width:952,height:492,renderOptions:b},e.next=15,r.frameCapture.capture(A);case 15:return e.abrupt("return",e.sent);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Sh=(function(){var e=(0,s.Z)(u().mark((function e(t){var n,i,r,a,s,o,c,l,h,d,p,f,m,g,v;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.game,i=n.player,r=n.globalScene,a=ca(t),s=i.getPlayer(),o=s.photo,c=s.playerId,l=oa(t),h=l.playerId,d=l.photo,p=l.score,f=a[c]||{},m=f.score,g=Sh({playerId:c,playerPhoto:o,playerScore:m,opponentId:h,opponentPhoto:d,opponentScore:p})){e.next=9;break}return console.warn("getRenderOptionsGroupResult"),e.abrupt("return");case 9:return v={name:"share-group-match-result",width:952,height:492,renderOptions:g},e.next=12,r.frameCapture.capture(v);case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e)})))}(),function(e){var t=e.playerId,n=void 0===t?"10":t,i=e.playerPhoto,r=void 0===i?"":i,a=e.playerScore,s=void 0===a?0:a,o=e.opponentId,c=void 0===o?"20":o,u=e.opponentPhoto,l=void 0===u?"":u,h=e.opponentScore,d=void 0===h?0:h,p=e.isPlayerFinished,f=e.isOpponentFinished;if("string"!==typeof n)return null;if("string"!==typeof r)return null;if("number"!==typeof s)return null;if("string"!==typeof c)return null;if("string"!==typeof l)return null;if("number"!==typeof d)return null;if("boolean"!==typeof p)return null;if("boolean"!==typeof f)return null;var m=s===d,g=s>d,v=p||f,y=p&&f,b={leftPhoto:{name:""+n,type:"image",x:56,y:140,image:r,width:220,height:220,fallbackWithImage:Ri.Z.AVATAR.KEY},rightPhoto:{name:""+c,type:"image",x:690,y:140,image:l,width:220,height:220,fallbackWithImage:Ri.Z.AVATAR.KEY},wideFrame:{name:"wide-frame-game-result",type:"image",x:0,y:0,image:"./assets/wideframes/wide-frame-game-result.png",width:952,height:492}};return v&&(b.leftScoreShadow={type:"text",x:162,y:444,font:"600 70px",fillStyle:"#c4683f",text:p?""+s:"???",textAlign:"center"},b.leftScore={type:"text",x:162,y:440,font:"600 70px",fillStyle:"#f2a62e",text:p?""+s:"???",textAlign:"center"},b.rightScoreShadow={type:"text",x:796,y:444,font:"600 70px",fillStyle:"#c4683f",text:f?""+d:"???",textAlign:"center"},b.rightScore={type:"text",x:796,y:440,font:"600 70px",fillStyle:"#f2a62e",text:f?""+d:"???",textAlign:"center"}),!m&&y&&(g?b.leftCrown={name:"crown-icon",type:"image",x:112,y:72,image:"./assets/images/others/crown-icon.png",width:106,height:78}:b.rightCrown={name:"crown-icon",type:"image",x:750,y:72,image:"./assets/images/others/crown-icon.png",width:106,height:78}),b}),Eh=ys.Z.DEFAULT,wh=Eh.KEY,Ch=Eh.FRAME,Th=function(e){function t(t,n,i,r){var a;return(a=e.call(this,t,n,i,r)||this).avatar=void 0,a.scoreText=void 0,a.shareButton=void 0,a.bigStarExplosive=void 0,a.open=function(t){e.prototype.open.call((0,vs.Z)(a),t);var n=a.getData("bestScore");a.setBestScore(n);var i=a.scene.player.getPlayer();a.avatar.loadPhoto(i.playerId,i.photo),a.runOpenAnimation()},a.handleClose=function(){a.scene.screen.close(a.name)},a.handleShareBestScore=function(){a.scene.storage.dispatch(fh())},a.runBigStarExplosive=function(){Phaser.Display.Align.In.Center(a.bigStarExplosive,a.scoreText),a.bigStarExplosive.run()},a.setDepth(ir.Ks.POPUP),a.background.setAlpha(.8),a.createObjects(),a}(0,o.Z)(t,e);var n=t.prototype;return n.createObjects=function(){this.createTitle(),this.createClose(),this.createBestScoreTitle(),this.createPlayerAvatar(),this.createGlowEffect(),this.createBestScoreNumber(),this.createShareButton(),this.createStarTwinkleEffect(),this.createBigStarExplosive()},n.setBestScore=function(e){this.scoreText.setText(""+e)},n.createTitle=function(){var e=this.scene.make.image({key:wh,frame:Ch.BLANK});e.setSize(162,36).setDisplaySize(162,36);var t=-90;Phaser.Display.Align.In.TopCenter(e,this.zone,0,t);var n=this.scene.make.bitmapText({font:eo.Z.PRIMARY.KEY,size:10,text:"Today Record"});t=-5,Phaser.Display.Align.In.Center(n,e,0,t),this.add([e,n])},n.createClose=function(){var e=new Vs.Z(this.scene,wh,Ch.BLANK,38,38);e.setName("Close"),this.add(e),Phaser.Display.Align.In.TopRight(e,this.zone,-60,-50),e.onClick=this.handleClose},n.createBestScoreTitle=function(){var e=this.scene.make.bitmapText({font:eo.Z.PRIMARY.KEY,size:22,text:"Best Score"});this.add(e),e.setTint(13256697),Phaser.Display.Align.In.TopCenter(e,this.zone,0,-130)},n.createBestScoreNumber=function(){this.scoreText=new ql(this.scene,{font:eo.Z.PRIMARY.KEY,size:40}),this.add(this.scoreText),this.scoreText.setTintText(15911443,15911443,15902254,15902254),this.scoreText.setDropShadow(0,2,12871743),Phaser.Display.Align.In.TopCenter(this.scoreText,this.zone,0,-230)},n.createPlayerAvatar=function(){this.avatar=new ah(this.scene,{key:wh,frame:Ch.BLANK,background:Ch.BLANK,width:89,height:89}),this.avatar.background.setSize(89,95).setDisplaySize(89,95),this.avatar.photo.setSize(89,95).setDisplaySize(89,95),this.avatar.avtFrame.setSize(89,95).setDisplaySize(89,95),this.add(this.avatar),Phaser.Display.Align.In.Center(this.avatar,this.zone,0,20)},n.createGlowEffect=function(){var e=ys.Z.DEFAULT,t=e.KEY,n=e.FRAME,i=this.scene.make.image({key:t,frame:n.BLANK});i.setWorldSize(246,246),this.add(i),this.moveDown(i),Phaser.Display.Align.In.Center(i,this.avatar),this.scene.tweens.add({targets:[i],duration:6e3,repeat:-1,props:{angle:360,scale:{value:"+=0.01",yoyo:!0,duration:800,ease:Phaser.Math.Easing.Sine.InOut}}})},n.createShareButton=function(){this.shareButton=new sh.Z(this.scene,{key:wh,button:Ch.BLANK,icon:Ch.BLANK,text:"Share"},168,82.8),this.shareButton.setName("Share"),this.add(this.shareButton),Phaser.Display.Align.In.BottomCenter(this.shareButton,this.zone,0,-80),this.shareButton.onClick=this.handleShareBestScore},n.createStarTwinkleEffect=function(){var e=new Bc.Z(this.scene),t=this.scoreText,n=t.x,i=t.y;e.run(2,n,i,300,120)},n.createBigStarExplosive=function(){this.bigStarExplosive=new hh(this.scene)},n.runOpenAnimation=function(){this.runBigStarExplosive(),this.runScoreEntrancesAnimation(),this.runAvatarEntrancesAnimation(),this.runShareEntrancesAnimation()},n.runScoreEntrancesAnimation=function(){this.scene.tweens.killTweensOf(this.scoreText),new kc({targets:[this.scoreText],duration:300,props:{y:{from:0,to:this.scoreText.y}}}).play()},n.runAvatarEntrancesAnimation=function(){this.scene.tweens.killTweensOf(this.avatar);var e=this.avatar.scale;new ih.Z({targets:[this.avatar],duration:400,props:{scale:{from:0,to:e}}}).play()},n.runShareEntrancesAnimation=function(){this.scene.tweens.killTweensOf(this.shareButton),this.shareButton.setAlpha(0),new zs.Z({targets:[this.shareButton],delay:300}).play()},t}(GameCore.Screen),Ih=Th,xh=function(e){var t=e?e.split("_"):[],n=t.length>0?t[0]:"en_US";switch(n){case"id":case"in":n="id"}return n},kh=ys.Z.DEFAULT,Ph=kh.KEY,Lh=kh.FRAME,Oh=function(e){function t(t){var n;return(n=e.call(this,t,{key:Ph,frame:Lh.BLANK,background:Lh.BLANK,width:60,height:60})||this).scene=void 0,n.scene=t,n}return(0,o.Z)(t,e),t.prototype.setHighlight=function(e){this.background.setFrame(Lh.BLANK),this.avtFrame.setFrame(Lh.BLANK)},t}(ah),Rh=Oh,Dh=ys.Z.DEFAULT,Bh=Dh.KEY,Nh=Dh.FRAME,Mh=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).scene=void 0,i.payload=void 0,i.avatar=void 0,i.block=void 0,i.rankIcon=void 0,i.rankText=void 0,i.playerScore=void 0,i.label=void 0,i.scene=t,i.createBlock(),i.createAvatar(),i.createRankIcon(),i.createRankText(),i.createLabel(),i.createPlayerScore(),n&&i.updateInfo(n),i.scene.add.existing((0,vs.Z)(i)),i}(0,o.Z)(t,e);var n=t.prototype;return n.updateInfo=function(e){this.payload=e,this.updateAvatar(),this.updateRankIcon(),this.updateRankText(),this.updatePlayerScore()},n.setLabel=function(e){this.label.setText(e)},n.setRank=function(e){this.rankText.setText(e)},n.setScore=function(e){this.playerScore.setText(e)},n.setHighlight=function(e){e?(this.y-=6,this.scale+=.1,this.label.scale+=.15,this.block.setFrame(Nh.BLANK)):(this.y+=6,this.scale-=.1,this.label.scale-=.15,this.block.setFrame(Nh.BLANK)),this.avatar.setHighlight(e)},n.createBlock=function(){this.block=this.scene.make.image({key:Bh,frame:Nh.BLANK}),this.block.setWorldSize(79,99),this.add(this.block)},n.createAvatar=function(){this.avatar=new Rh(this.scene),Phaser.Display.Align.In.TopCenter(this.avatar,this.block,0,this.avatar.displayHeight/2-4),this.add(this.avatar)},n.updateAvatar=function(){var e=this.payload,t=e.playerId,n=e.photo;this.avatar.loadPhoto(t,n,50)},n.getRankFrame=function(){var e=Nh.BLANK;switch(this.payload.rank){case 1:case 2:case 3:e=Nh.BLANK}return e},n.createRankIcon=function(){var e=Nh.BLANK;this.rankIcon=this.scene.make.image({key:Bh,frame:e}),e!=Nh.BLANK?this.rankIcon.setWorldSize(46,30):this.rankIcon.setWorldSize(27,27),Phaser.Display.Align.In.Center(this.rankIcon,this.block,0,-15),this.add(this.rankIcon)},n.updateRankIcon=function(){var e=this.getRankFrame();this.rankIcon.setFrame(e),e!=Nh.BLANK?this.rankIcon.setWorldSize(46,30):this.rankIcon.setWorldSize(27,27),Phaser.Display.Align.In.Center(this.rankIcon,this.block,0,-15)},n.createRankText=function(){this.rankText=this.scene.make.bitmapText({font:eo.Z.PRIMARY.KEY,size:this.scene.fontSize(18),origin:{x:.5,y:.5},text:"1"}),Phaser.Display.Align.In.Center(this.rankText,this.rankIcon,0,-2),this.add(this.rankText)},n.updateRankText=function(){this.rankText.setText(this.payload.rank.toString())},n.createLabel=function(){this.label=this.scene.make.bitmapText({font:eo.Z.PRIMARY.KEY,size:this.scene.fontSize(14),origin:{x:.5,y:0},text:"Play"}),Phaser.Display.Align.In.BottomCenter(this.label,this.block,0,-10),this.add(this.label)},n.createPlayerScore=function(){this.playerScore=this.scene.make.bitmapText({font:eo.Z.PRIMARY.KEY,size:this.scene.fontSize(18),origin:{x:.5,y:.5},text:"132500"}),this.playerScore.setTint(5582186),Phaser.Display.Align.In.Center(this.playerScore,this.block,0,5),this.add(this.playerScore)},n.updatePlayerScore=function(){this.playerScore.setText(Math.floor(this.payload.score).toString())},(0,U.Z)(t,[{key:"onClick",set:function(e){var t=this.block,n=t.width,i=t.height;this.setSize(n,i+this.avatar.height),this.setInteractive({useHandCursor:!0}),this.off(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,e)}}]),t}(Phaser.GameObjects.Container),_h=Mh,Zh=function(e){function t(t,n){var r;return(r=e.call(this,t)||this).scene=void 0,r.payload=void 0,r.leaderBlocks=void 0,r.entrancesAnimation=void 0,r.listLeaderBlocks=void 0,r.handleChallengeFriend=function(e){return function(){r.scene.storage.dispatch(is(e))}},r.handleShareLeaderboard=function(){r.scene.storage.dispatch(vh())},r.handleMatchingGroup=(0,s.Z)(u().mark((function e(){var t,n,a,s,o,c,l,h,d;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.scene,n=t.player,a=t.storage,s=t.game,o=t.facebook,e.prev=1,s.globalScene.screen.open(ir.o4.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),c=n.getPlayer(),l="global","en"===(h=xh(c.locale))&&(l="en"),"in"===h&&(l="in"),e.next=10,o.matchPlayerAsync(l,!0,!0);case 10:if(d=e.sent,s.globalScene.screen.close(ir.o4.NOTIFY_SCREEN),d){e.next=14;break}return e.abrupt("return");case 14:a.dispatch(as()),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(1),s.globalScene.screen.close(ir.o4.NOTIFY_SCREEN),e.t0 instanceof Error&&(0,i.tO)(e.t0);case 21:case"end":return e.stop()}}),e,null,[[1,17]])}))),r.scene=t,r.setName("LeadersBar"),r.listLeaderBlocks=[],r.createLeaderBlocks(),r.createEntrancesAnimation(),n&&r.updateInfo(n),r.scene.add.existing((0,vs.Z)(r)),r}(0,o.Z)(t,e);var n=t.prototype;return n.updateInfo=function(e){var t=this;this.payload=e;var n=!1,i=this.payload,r=i.playerId;i.leaders.forEach((function(e){var i=t.leaderBlocks.getFirstDead(!0);i.updateInfo(e),-1===e.score?(i.setRank(""),i.setLabel("Join"),i.setScore("Global"),i.onClick=t.handleMatchingGroup):e.playerId===r?(i.setLabel("Share"),i.setHighlight(!0),i.onClick=t.handleShareLeaderboard):i.onClick=t.handleChallengeFriend(e.playerId),t.add(i),i.setVisible(!0),i.setActive(!0),t.listLeaderBlocks.indexOf(i)<0&&(n=!0)})),this.alignBlocks(),n&&(this.listLeaderBlocks=this.leaderBlocks.getChildren().filter((function(e){return e.active})),this.createEntrancesAnimation()),this.runAnimation()},n.killAndHideAll=function(){var e=this;this.removeAll(!1),this.leaderBlocks.getChildren().forEach((function(t){return e.leaderBlocks.killAndHide(t)}))},n.runAnimation=function(){this.leaderBlocks.setAlpha(0),this.entrancesAnimation.play()},n.createEntrancesAnimation=function(){this.entrancesAnimation=new kl({targets:this.listLeaderBlocks,delay:this.scene.tweens.stagger(50,{start:400}),props:{y:{from:100,to:0},alpha:{from:0,to:1}}})},n.alignBlocks=function(){var e=-(this.leaderBlocks.getLength()-1)/2*95;this.leaderBlocks.setX(e,95)},n.createLeaderBlocks=function(){this.leaderBlocks=this.scene.add.group({classType:_h})},t}(Phaser.GameObjects.Container),Gh=Zh,Uh=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.screen=void 0,n.main=void 0,n.footer=void 0,n.leadersBar=void 0,n.bestScoreScreen=void 0,n.scene=t,n.screen=t.screen,n}(0,o.Z)(t,e);var n=t.prototype;return n.createObjects=function(){this.createMainContent(),this.createLeadersBar(),this.createFooterBar()},n.createMainContent=function(){this.main=new nh(this.scene),this.main.setDepth(nr.Z.LOGO)},n.createLeadersBar=function(){this.leadersBar=new Gh(this.scene)},n.createFooterBar=function(){this.footer=new Yl(this.scene),this.footer.setDepth(nr.Z.BUTTON)},n.createBestScoreScreen=function(){return this.screen.add(ir.o4.BEST_SCORE_SCREEN,Ih)},t}(Ls),Fh=Uh,Hh=function(e){function t(t){var n;return(n=e.call(this,t)||this).objects=void 0,n.guideUI=void 0,n.objects=null,n}(0,o.Z)(t,e);var n=t.prototype;return n.alignUI=function(){if(null!==this.objects){var e=this.scene.gameZone,t=this.objects,n=t.main,i=t.leadersBar,r=t.footer;Phaser.Display.Align.In.TopCenter(n,e,0,-230),Phaser.Display.Align.In.Center(i,e,0,120),Phaser.Display.Align.In.BottomCenter(r,e,0,-70)}},n.createGroups=function(){e.prototype.createGroups.call(this),this.guideUI=this.scene.add.group(),this.groups.guideUI=this.guideUI},n.setUIObjects=function(t){e.prototype.setUIObjects.call(this,t),this.addUIObjectsToGroups()},n.addUIObjectsToGroups=function(){null!==this.objects&&this.addObjectForGuideUI()},n.addObjectForGuideUI=function(){this.objects},t}(Wu),zh=Hh,Kh=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.alignUI=function(){e.prototype.alignUI.call(this)},t}(zh),Yh=Kh,Wh=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.scene=t,n}(0,o.Z)(t,e);var n=t.prototype;return n.createObjects=function(){this.objects=new Fh(this.scene)},n.createLayouts=function(){this.scene.world.isLandscape()?this.layout=new Yh(this.scene):this.layout=new zh(this.scene);var e=this.objects.footer;e.setAlpha(0),e.runAnimation(),this.layout.setUIObjects(this.objects)},n.initUILogic=function(){var e=this.objects.footer;e.homeButton.onClick=this.scene.handleHomeClick,e.pwfButton.onClick=this.scene.handlePlayWithFriend,e.rankButton.onClick=this.scene.handleLeaderboardClick},n.updateUIState=function(){},t}(rl),jh=Wh,Vh=GameCore.Configs.LeadersBoard,qh=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this).bestScore=void 0,t.currentScore=void 0,t.loading=void 0,t.layoutManager=void 0,t.confettiLeftEffect=void 0,t.confettiRightEffect=void 0,t.run=function(){t.layoutManager.init(),t.updateLeaders(),t.updateScore(),t.handleShowScorePopups(),t.explodeConfettiEffect(),t.audio.pauseMusic(),t.audio.playSound(po.Z.GAME_OVER_SCENE),t.layoutManager.start()},t.runConfettiEffect=function(){var e=t.gameZone.displayWidth;t.confettiLeftEffect.stop(),t.confettiRightEffect.stop(),t.children.bringToTop(t.confettiLeftEffect),t.children.bringToTop(t.confettiRightEffect),t.confettiLeftEffect.run(1,0,-100),t.confettiRightEffect.run(1,0+e,-100),t.tweens.addCounter({delay:1e4,from:100,to:0,ease:Phaser.Math.Easing.Cubic.Out,duration:400,onUpdate:function(e){var n,i,r=e.getValue()/100;null==(n=t.confettiLeftEffect.emitter)||n.setAlpha(r),null==(i=t.confettiRightEffect.emitter)||i.setAlpha(r)},onComplete:function(){var e,n;null==(e=t.confettiLeftEffect.emitter)||e.setAlpha(1),null==(n=t.confettiRightEffect.emitter)||n.setAlpha(1),t.confettiLeftEffect.stop(),t.confettiRightEffect.stop()}})},t.explodeConfettiEffect=function(){var e=t.gameZone.displayWidth,n=-100,i=e;t.tweens.addCounter({repeat:3,duration:500,onStart:function(){t.confettiLeftEffect.explode(6,0,n),t.confettiRightEffect.explode(6,0+i,n)},onRepeat:function(){t.confettiLeftEffect.explode(6,0,n),t.confettiRightEffect.explode(6,0+i,n)},completeDelay:7e3,onComplete:function(){t.tweens.addCounter({from:100,to:0,ease:Phaser.Math.Easing.Cubic.Out,duration:400,onUpdate:function(e){var n,i,r=e.getValue()/100;null==(n=t.confettiLeftEffect.emitter)||n.setAlpha(r),null==(i=t.confettiRightEffect.emitter)||i.setAlpha(r)},onComplete:function(){var e,n;null==(e=t.confettiLeftEffect.emitter)||e.setAlpha(1),null==(n=t.confettiRightEffect.emitter)||n.setAlpha(1),t.confettiLeftEffect.stop(),t.confettiRightEffect.stop()}})}})},t.handlePlayWithFriend=function(){t.storage.dispatch(rs())},t.handleHomeClick=function(){t.scene.switch(Yi.C.DASHBOARD_SCENE)},t.handleLeaderboardClick=function(){t.scene.switch(Yi.C.LEADERBOARD_SCENE)},t}(0,o.Z)(t,e);var n=t.prototype;return n.preload=function(){var e=this;this.events.on("resume",(function(){e.updateScore()})),this.events.on("sleep",(function(){e.storage.dispatch(Fa())})),this.events.on("wake",this.run),this.events.on("create",this.run)},n.create=function(){e.prototype.create.call(this),this.createBackground(Ri.Z.BACKGROUND.KEY),this.bestScore=0,this.currentScore=0,this.createLoading(),this.createLayoutManager(),this.createConfettiSmallAnimation()},n.handleShowScorePopups=function(){var e=this,t=this.layoutManager.objects.main;t.bestScoreBlock.counterAnimation&&t.bestScoreBlock.counterAnimation.state!==Phaser.Tweens.REMOVED?t.bestScoreBlock.counterAnimation.on(Phaser.Tweens.Events.TWEEN_COMPLETE,(function(){e.handleShowBestScorePopup(),e.handleShowResultChallengePopup()})):this.time.delayedCall(800,(function(){e.handleShowBestScorePopup(),e.handleShowResultChallengePopup()}))},n.updateLeaders=function(){var e=this;this.layoutManager.objects.leadersBar.killAndHideAll();var t=[{selector:Il,callback:function(t){if(!1===t){var n=window.game.player.getPlayerId(),i=e.getLeadersExcludeIds([n]);e.updateLeaderBar(i)}e.loading.setVisible(t)}}];this.handleStateChange(t),this.storage.dispatch(Sl(Vh.LeaderboardId,cr,20))},n.getLeadersExcludeIds=function(e){var t=this.storage.getState(),n=Tl(t),i={};if(!e||0===e.length)return n;for(var r in n)if(e.indexOf(r)<0){var a=n[r],s=a.playerId,o=a.photo,c=a.score,u=a.rank;i[r]={playerId:s,photo:o,score:c,rank:u}}return i},n.updateScore=function(){var e=this.layoutManager.objects.main,t=this.storage.getState(),n=ua(t),i=n.score,r=void 0===i?0:i,a=n.bestScore,s=void 0===a?0:a;this.bestScore=s<this.bestScore?this.bestScore:s,this.currentScore=r,e.bestScoreBlock.updateData({bestScore:this.bestScore,currentScore:this.currentScore})},n.createLoading=function(){this.loading=new cu.Z(this),Phaser.Display.Align.In.Center(this.loading,this.gameZone,0,120)},n.updateLeaderBar=function(e){var t=this.player.getPlayerId(),n=this.layoutManager.objects.leadersBar,i={playerId:t,leaders:[]};for(var r in e){if(i.leaders.length>=3)break;var a=e[r],s=a.playerId,o=a.photo,c=a.score,u=a.rank;i.leaders.push({playerId:s,photo:o,score:c,rank:u})}i.leaders.push({playerId:Ri.Z.ICON_EARTH.KEY,photo:Ri.Z.ICON_EARTH.FILE,rank:4,score:-1}),n.updateInfo(i)},n.createLayoutManager=function(){this.layoutManager=new jh(this)},n.createConfettiSmallAnimation=function(){this.confettiLeftEffect=new fl(this,{speedX:{min:-20,max:100},rotate:{start:-1080,end:0}}),this.confettiRightEffect=new fl(this,{speedX:{min:20,max:-100},rotate:{start:0,end:1080}}),this.confettiLeftEffect.setDepth(nr.Z.EFFECT),this.confettiRightEffect.setDepth(nr.Z.EFFECT)},n.handleShowBestScorePopup=function(){this.currentScore>this.bestScore&&this.storage.dispatch(Ja({bestScore:this.currentScore}));var e=this.storage.getState(),t=Br(e),n=[Bi,_i].indexOf(t)>=0;if(this.currentScore>this.bestScore&&n){var i=this.layoutManager.objects,r=i.bestScoreScreen;r||(r=i.createBestScoreScreen()),this.screen.open(ir.o4.BEST_SCORE_SCREEN,{bestScore:this.currentScore}),this.runConfettiEffect()}},n.handleShowResultChallengePopup=function(){var e=this.storage.getState(),t=Br(e);if(-1!==[Ni,Mi].indexOf(t)&&ta(e)){var n=ia(e).playerId;t===Mi&&n===Di.playerId||(this.scene.pause(Yi.C.GAME_OVER_SCENE),this.scene.launch(Yi.C.RESULT_MATCH_SCENE))}},t}(gs.Z);var Xh=qh,Jh={REPLAY:"replay",RESCUE:"rescue",RECEIVE_DIAMONDS:"receive-coins"},Qh=["chim_1","chim_2","chim_3","chim_4","chim_5","chim_6","chim_7","chim_8","chim_9","chim_10","chim_11","chim_12"],$h=["jump"],ed=["idle"],td=["sit"],nd=["idle"],id="stroke",rd="sit_blink",ad={red:Qh[0],orange:Qh[1],pink:Qh[2],yellow:Qh[3],lime:Qh[4],blue:Qh[5],brown:Qh[6],purple:Qh[7],teal:Qh[8],green:Qh[9],blueGrey:Qh[10],mahogany:Qh[11]},sd=["cat1","cat2","cat3","cat4","cat5","cat6","cat7","cat8","cat9","cat10","cat11","cat12"],od={red:sd[0],orange:sd[1],pink:sd[2],yellow:sd[3],lime:sd[4],blue:sd[5],brown:sd[6],purple:sd[7],teal:sd[8],green:sd[9],blueGrey:sd[10],mahogany:sd[11]},cd=function(e){return e[e.MOVING=0]="MOVING",e[e.IDLE=1]="IDLE",e}({}),ud=Math.atan,ld=Math.pow,hd=Math.sqrt,dd=Math.cos,pd=Math.tan,fd=Math.abs,md=function(){function e(e,t){void 0===t&&(t=-20),this.horizontalTween=void 0,this.cat=void 0,this.g=void 0,this.verticalTween=void 0,this.cat=e,this.g=t}var t=e.prototype;return t.completeMoving=function(){var e,t;null==(e=this.horizontalTween)||e.complete(),null==(t=this.verticalTween)||t.complete()},t.jumpAsync=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i,r,a,s,o,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.delay,i=t.canMoveHorizontally,r=t.canMoveVertically,a=[],s=this.cat.scene,e.next=5,s.waitForMilliseconds(n);case 5:return i&&(o=this.moveHorizontallyAsync(t),a.push(o)),r&&(c=this.moveVerticallyAsync(t),a.push(c)),e.next=9,Promise.all(a);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.moveHorizontallyAsync=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i,r,a=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.targetPosition,r=t.duration,null==(n=this.horizontalTween)||n.remove(),e.abrupt("return",new Promise((function(e){a.verticalTween=a.cat.scene.add.tween({targets:a.cat,duration:r,props:{x:i.x},onComplete:function(){e()}})})));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.moveVerticallyAsync=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i,r,a,s,o,c,l;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.targetPosition,i=t.duration,r={x:this.cat.x,y:this.cat.y},0!==(a={x:n.x-this.cat.x,y:n.y-this.cat.y}).x){e.next=5;break}return e.abrupt("return",this.jumpStraight(t));case 5:if(s=this.findAnglesAndV(a,this.g)){e.next=8;break}return e.abrupt("return");case 8:return o=s.angles,c=s.v,l=o[0],e.abrupt("return",this.jumpParabolic({duration:i,startPosition:r,targetPosition:n,angle:l,v:c}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.jumpStraight=function(e){return e.targetPosition.y<this.cat.y?this.jumpUp(e):this.jumpDown(e)},t.jumpDown=function(e){var t=this,n=e.targetPosition,i=e.duration,r=this.cat.y;return new Promise((function(e){t.horizontalTween=t.cat.scene.tweens.addCounter({from:0,to:hd(2*fd(n.y-t.cat.y)/fd(t.g)),duration:i,onUpdate:function(e){var n=e.getValue();t.cat.setY(r+-.5*t.g*ld(n,2))},onComplete:function(){e()}})}))},t.jumpUp=function(e){var t=this,n=e.targetPosition,i=e.duration;return new Promise((function(e){t.horizontalTween=t.cat.scene.add.tween({targets:t.cat,duration:i,ease:Phaser.Math.Easing.Back.Out,props:{y:n.y},onComplete:function(){e()}})}))},t.jumpParabolic=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i,r,a,s,o,c=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.duration,i=t.startPosition,r=t.angle,a=t.v,s=t.targetPosition,o={x:this.cat.x-i.x,y:this.cat.y-i.y},e.abrupt("return",new Promise((function(e){c.horizontalTween=c.cat.scene.tweens.addCounter({from:0,to:n,duration:n,onStart:function(){i.y=c.cat.y},onUpdate:function(){o.x=c.cat.x-i.x,o.y=c.cat.y-i.y;var e=c.findY({theta:r,x:o.x,g:c.g,v:a});c.cat.setY(i.y+e)},onComplete:function(){c.cat.setY(s.y),e()}})})));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.findAnglesAndV=function(e,t){for(var n=1;n<1e3;n++){var i=this.findTheta((0,a.Z)({},e,{g:t,v:n}));if(-1!==i)return{v:n,angles:i}}},t.findTheta=function(e){var t=e.v,n=e.g,i=e.x,r=e.y,a=ld(t,4)-n*(n*ld(i,2)+2*r*ld(t,2));if(a<0)return-1;return[1,-1].map((function(e){var r=hd(a),s=ld(t,2)+e*r;return ud(s/(n*i))}))},t.findY=function(e){var t=e.theta,n=e.x,i=e.g,r=e.v;return pd(t)*n-i*ld(n,2)/(2*ld(r*dd(t),2))},e}(),gd=md,vd=function(){function e(e,t){this.cat=void 0,this.options=void 0,this.horizontalTween=void 0,this.verticalTween1=void 0,this.verticalTween2=void 0,this.cat=e,this.validateOptions(t),this.options=t}var t=e.prototype;return t.validateOptions=function(e){var t=e.firstVerticalScale,n=e.peakY;if(!("number"===typeof n&&n>0))throw new Error("Invalid peakY "+n);var i=t.toEqual,r=t.toHigher,a=t.toLower;if(!("number"===typeof i&&i>0&&i<=1))throw new Error("Invalid toEqual "+i);if(!("number"===typeof r&&r>0&&r<=1))throw new Error("Invalid toHigher "+r);if(!("number"===typeof a&&a>0&&a<=1))throw new Error("Invalid toLower "+a)},t.jumpAsync=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i,r,a,s,o,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.delay,i=t.canMoveHorizontally,r=t.canMoveVertically,a=this.cat.scene,e.next=4,a.waitForMilliseconds(n);case 4:return s=[],i&&(o=this.moveHorizontallyAsync(t),s.push(o)),r&&(c=this.moveVerticallyAsync(t),s.push(c)),e.next=9,Promise.all(s);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.moveHorizontallyAsync=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i,r=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.duration,i=t.targetPosition,e.abrupt("return",new Promise((function(e){r.horizontalTween=r.cat.scene.add.tween({targets:r.cat,duration:n,props:{x:i.x},onComplete:function(){e()}})})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.moveVerticallyAsync=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i,r,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.duration,i=this.getFirstScale(t),a=n-(r=n*i),e.next=6,this.firstMoveVerticallyAsync(t,r);case 6:return e.next=8,this.secondMoveVerticalAsync(t,a);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.getFirstScale=function(e){var t=this.options.firstVerticalScale,n=t.toEqual,i=t.toHigher,r=t.toLower,a=e.targetPosition.y,s=this.cat.y;return a>s?r:a<s?i:n},t.firstMoveVerticallyAsync=function(){var e=(0,s.Z)(u().mark((function e(t,n){var i,r,a=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.targetPosition,r=Math.min(this.cat.y,i.y)-this.options.peakY,e.abrupt("return",new Promise((function(e){a.verticalTween1=a.cat.scene.add.tween({targets:a.cat,duration:n,ease:Phaser.Math.Easing.Quadratic.Out,props:{y:r},onComplete:function(){e()}})})));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),t.secondMoveVerticalAsync=function(){var e=(0,s.Z)(u().mark((function e(t,n){var i,r=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.targetPosition,e.abrupt("return",new Promise((function(e){r.verticalTween2=r.cat.scene.add.tween({targets:r.cat,duration:n,ease:Phaser.Math.Easing.Quadratic.In,props:{y:i.y},onComplete:function(){e()}})})));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),t.completeMoving=function(){var e,t,n;null==(e=this.horizontalTween)||e.complete(),null==(t=this.verticalTween1)||t.complete(),null==(n=this.verticalTween2)||n.complete()},e}(),yd=vd,bd={MOVE_UP:400,MOVE_DOWN:433},Ad={MOVE_UP:466,MOVE_DOWN:633,MOVE_VERTICALLY:400},Sd=100,Ed={MOVE_UP:1,MOVE_DOWN:.93},wd={MOVE_UP:1.3,MOVE_DOWN:.95,MOVE_VERTICALLY:1.3},Cd=1,Td=function(){function e(e){this.projectileStrategy=void 0,this.tripleTweenStrategy=void 0,this.isManuallyCompleted=!1,this.projectileStrategy=new gd(e),this.tripleTweenStrategy=new yd(e,{firstVerticalScale:{toHigher:.65,toLower:.5,toEqual:.5},peakY:40})}var t=e.prototype;return t.jumpAsync=function(){var e=(0,s.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.jumpOption,this.isManuallyCompleted=!1,"Projectile"!==n){e.next=4;break}return e.abrupt("return",this.projectileStrategy.jumpAsync(t));case 4:return e.abrupt("return",this.tripleTweenStrategy.jumpAsync(t));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.completeMoving=function(){this.projectileStrategy.completeMoving(),this.tripleTweenStrategy.completeMoving(),this.isManuallyCompleted=!0},t.getDuration=function(e){var t=e.current,n=e.target,i=70*t.branch.scene.gameManager.ratioScale,r=(n.branch.y-t.branch.y)/i,a=t.branch.isLeft===n.branch.isLeft,s=r<0,o=r>0,c=(Math.floor(Math.abs(r))-1)*Sd*Cd;if(a){var u=bd,l=u.MOVE_UP,h=u.MOVE_DOWN;return s?l*Ed.MOVE_UP+c:h*Ed.MOVE_DOWN+c}var d=Ad,p=d.MOVE_UP,f=d.MOVE_DOWN,m=d.MOVE_VERTICALLY;return s?p*wd.MOVE_UP+c:o?f*wd.MOVE_DOWN+c:m*wd.MOVE_VERTICALLY},e}(),Id=Td,xd=function(e){function t(t,n,i,r){var a;return(a=e.call(this,t,t.spine,0,0,i,r)||this).scene=void 0,a.gameManager=void 0,a.config=void 0,a.index=void 0,a.layerContainer=void 0,a.delayCallLanding=void 0,a.flySpeed=200,a.isHighlighting=!1,a.currentLastTrackEntryIdle=void 0,a.closeEyesInterval=void 0,a.originScale=.5,a.sound="",a.shouldVibrate=!1,a.birdState=cd.MOVING,a.jumpAnimator=new Id((0,vs.Z)(a)),a.handleOnAnimationStateComplete=function(e){e===a.currentLastTrackEntryIdle&&a.playIdleAnimation()},a.handleOnAnimationStateEvent=function(e,t){var n;"dau_event"===t.data.name&&(null==(n=a.layerContainer)||n.jiggle(a.index+1),a.performVibrating())},a.addCloseEyeInterval=function(){a.closeEyesInterval=a.scene.tweens.addCounter({duration:5e3*Math.random()+2e3,onComplete:function(){a.animationState.setAnimation(3,rd),a.addCloseEyeInterval()}})},a.playSignatureSound=(0,Si.D)((function(){a.scene.audio.playSound(a.sound,{volume:.5})}),1500,{isImmediate:!0,maxWait:1500}),a.scene=t,a.scene.add.existing((0,vs.Z)(a)),a.listenEvents(),a.initDefault(n),a}(0,o.Z)(t,e);var n=t.prototype;return n.sameConfig=function(e){var t=e.layerContainer,n=e.index,i=e.color,r=this.config.layerContainer===t,a=this.config.index===n,s=this.config.color===i;return r&&a&&s},n.listenEvents=function(){this.animationState.addListener({complete:this.handleOnAnimationStateComplete,event:this.handleOnAnimationStateEvent}),this.addCloseEyeInterval()},n.performVibrating=function(){this.shouldVibrate&&(this.shouldVibrate=!1,this.scene.player.getPlayerSettings().vibrate&&_u(200))},n.initDefault=function(e){this.animationState.clearTracks(),this.skeleton.setToSetupPose(),this.shouldVibrate=!1,this.config=JSON.parse(JSON.stringify(e)),this.setSoundFromColor(e.color),this.index=e.index,this.setDepth(nr.Z.BIRD+this.index/10),this.layerContainer=e.layerContainer,this.setScale(.5),this.playIdleAnimation(),this.hideHighlight()},n.setSoundFromColor=function(e){this.sound=od[e]},n.playIdleAnimation=function(){this.animationState.setAnimation(0,Phaser.Math.RND.pick(ed),!0);for(var e=Phaser.Math.RND.between(1,20),t=0;t<e;t++){var n=Phaser.Math.RND.pick(ed);n===ed[0]?(this.animationState.addAnimation(0,n),this.animationState.addAnimation(0,n)):this.animationState.addAnimation(0,n)}var i=Phaser.Math.FloatBetween(.8,1.2);this.animationState.timeScale=i,this.currentLastTrackEntryIdle=this.animationState.addAnimation(0,Phaser.Math.RND.pick(nd))},n.moveTo=function(){var e=(0,s.Z)(u().mark((function e(t,n,i,r,a){var s,o,c,l,h,d,p,f,m,g,v,y,b,A,S;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===i&&(i=0),void 0===r&&(r=!0),void 0===a&&(a=!1),this.completeMoving(),this.birdState=cd.MOVING,r&&this.scene.audio.playSound(po.Z.BIRD_FLY),o=this.scene.gameManager.getRatioScale(),null==(s=this.delayCallLanding)||s.remove(),this.setDepth(nr.Z.BIRD_FLY+this.index/10),this.currentLastTrackEntryIdle=void 0,c=t.getPositionLayer(n),l=t.config.index,c.x!=this.x&&(h=c.x-this.x<0?-1:1,this.scaleX=Math.abs(this.scaleX)*h),d=Phaser.Math.Distance.BetweenPoints(c,this),p=this.jumpAnimator.getDuration({current:{branch:this.layerContainer,index:this.index},target:{branch:t,index:n}}),this.layerContainer=t,this.index=n,f=Phaser.Math.RND.pick($h),m=Phaser.Math.RND.pick(td),g=a?d/(this.flySpeed*o)*1e3*.8:p,(v=g-100)<0&&(v=0),800,(y=Math.round(v/800))<1&&(y=1),b=Math.min(800*y/v/this.animationState.timeScale,1.4),e.next=28,this.scene.waitForMilliseconds(i);case 28:for(this.animationState.setEmptyAnimation(0,0),this.animationState.timeScale=1,A=0;A<y;A++)void 0,(0===A?this.animationState.setAnimation(0,f):this.animationState.addAnimation(0,f)).timeScale=b;return this.currentLastTrackEntryIdle=this.animationState.addAnimation(0,m),this.delayCallLanding=void 0,e.next=35,this.jumpAnimator.jumpAsync({duration:g,targetPosition:c,delay:0,canMoveHorizontally:!0,canMoveVertically:!0,jumpOption:"TripleTween"});case 35:if(!this.jumpAnimator.isManuallyCompleted){e.next=37;break}return e.abrupt("return");case 37:S=t.flipX?-1:1,this.scaleX=Math.abs(this.scaleX)*S,this.setDepth(nr.Z.BIRD+Math.floor(l/2)+this.index/10),this.birdState=cd.IDLE;case 41:case"end":return e.stop()}}),e,this)})));return function(t,n,i,r,a){return e.apply(this,arguments)}}(),n.showHighlight=function(){this.isHighlighting||(this.isHighlighting=!0,this.animationState.setAnimation(1,id),this.scene.audio.playSound(po.Z.HIGHLIGHT),this.playSignatureSound())},n.hideHighlight=function(){this.isHighlighting&&(this.isHighlighting=!1,this.animationState.setEmptyAnimation(1,0),this.scene.audio.playSound(po.Z.UN_HIGHLIGHT))},n.getPositionStartFly=function(){var e=this.layerContainer.isLeft?1:-1,t=this.layerContainer.getPositionLayer(this.index);return{x:t.x-180*e,y:t.y-100}},n.playStartAnimation=function(){var e=(0,s.Z)(u().mark((function e(){var t=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.scene.audio.playSound(po.Z.BIRDS_FLY),e.abrupt("return",new Promise((function(e){var n=t.getPositionStartFly();t.setPosition(n.x,n.y),t.moveTo(t.layerContainer,t.index,150*t.index+100*Math.random(),!1,!0).then((function(){return e()}))})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.playWinAnimation=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i,r,a,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.birdState=cd.MOVING,this.scene.audio.playSound(po.Z.BIRDS_FLY),203.5,t=this.layerContainer.isLeft,n={x:this.x+203.5*(t?-1:1),y:this.y},i=this.scene.gameManager.getRatioScale(),r=Phaser.Math.Distance.BetweenPoints(this,n),a=r/(this.flySpeed*i)*1e3*.6,this.scaleX*=-1,s=Phaser.Math.RND.pick($h),this.animationState.setAnimation(0,s,!0),e.abrupt("return",this.jumpAnimator.jumpAsync({duration:a,targetPosition:n,delay:0,canMoveHorizontally:!0,canMoveVertically:!0,jumpOption:"TripleTween"}));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.isMoving=function(){return this.birdState===cd.MOVING},n.completeMoving=function(){this.jumpAnimator.completeMoving()},t}(l.r$),kd=function(){function e(e){this.scene=void 0,this.birds=[],this.scene=e}var t=e.prototype;return t.spawn=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=this.birds.find((function(e){return!e.visible&&!e.active&&e.sameConfig(t)})))){e.next=5;break}return n.setActive(!0),n.setVisible(!0),e.abrupt("return",n);case 5:return e.next=7,this.createNewBird(t);case 7:return i=e.sent,this.birds.push(i),e.abrupt("return",i);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.clearAll=function(){this.birds.forEach((function(e){e.setVisible(!1),e.setActive(!1)}))},t.createNewBird=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.scene.catSpine.mapColorToSpineData(t.color),e.next=3,this.waitForLoadingSpine(n);case 3:return i=n.KEY_JSON,r=n.KEY_ATLAS,e.abrupt("return",new xd(this.scene,t,i,r));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.waitForLoadingSpine=function(){var e=(0,s.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.scene.game.cache.text.get(t.KEY_ATLAS)){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,(0,jc.qZ)(500);case 5:return e.next=7,this.waitForLoadingSpine(t);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),e}();function Pd(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Ld(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ld(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ld(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Od=ys.Z.DEFAULT,Rd=Od.KEY,Dd=Od.FRAME,Bd=function(){function e(e){this.scene=void 0,this.imageGroup=void 0,this.scene=e,this.createGroup()}var t=e.prototype;return t.createGroup=function(){this.imageGroup=this.scene.add.group({classType:Phaser.GameObjects.Image})},t.clearAlls=function(){var e=this;this.imageGroup.getChildren().forEach((function(t){t.setActive(!1),t.setVisible(!1),e.imageGroup.kill(t),e.scene.tweens.killTweensOf(t)}))},t.showRuleTutorial=function(){var e=this.scene.gameManager,t=e.currentSelected;if(t){for(var n,i=[],r=Pd(e.layerContainers);!(n=r()).done;){var a=n.value;if(a!==t){var s=this.imageGroup.getFirstDead(!0);s.revive(),0!==t.isCanGiveTo(a)?(s.setTexture(Rd,Dd.RULE_CHECK),s.setWorldSize(42,28)):(s.setTexture(Rd,Dd.RULE_X),s.setWorldSize(31.5,28));var o=Phaser.Math.Clamp(a.layers.length,0,3),c=a.getPositionLayer(o);s.setPosition(c.x,c.y-25),i.push(s)}}this.scene.tweens.add({targets:i,scale:"*= 0.9",yoyo:!0,repeat:-1,duration:400,repeatDelay:50,ease:Ns,easeParams:[0,.9]})}else this.clearAlls()},e}(),Nd=ys.Z.DEFAULT,Md=Nd.KEY,_d=Nd.FRAME,Zd=function(e){return e[e.Left=0]="Left",e[e.Right=1]="Right",e}({}),Gd=function(e){function t(t){var n;return(n=e.call(this,t)||this).hand=void 0,n.timeline=void 0,n.name="SuggestionHand",n.addHand(),n.kill(),n.setDepth(nr.Z.TUTORIAL),n.scene.add.existing((0,vs.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.addHand=function(){this.hand=this.scene.make.image({key:Md,frame:_d.HAND,origin:{x:.5,y:.5}}),this.hand.setWorldSize(65.5,55.5),this.add(this.hand)},n.createTimeline=function(e,t,n,i,r){var a=this;void 0===i&&(i=0),void 0===r&&(r=800);var s=1/this.scene.world.getPixelRatio(),o=e===Zd.Left?-30:30;this.hand.angle=o,this.hand.setPosition(t.x,t.y),this.hand.setScale(1.4*s);var c=this.scene.tweens.createTimeline({loop:2,loopDelay:r,onStart:function(){return a.revive()},onComplete:function(){a.stopTimeline(),a.scene.gameManager.hideHint()}});return c.add({delay:i,targets:[this.hand],ease:Phaser.Math.Easing.Cubic.Out,props:{alpha:{from:0,to:1,duration:400},scale:{duration:400,from:1.4*s,to:s},angle:{from:o,to:0,duration:400}}}),c.add({targets:[this.hand],delay:200,duration:400,ease:Phaser.Math.Easing.Cubic.Out,props:{x:n.x,y:n.y,scale:{duration:400,from:1*s,to:1.4*s},angle:{from:0,to:o,duration:200}}}),c.add({targets:[this.hand],delay:200,duration:400,ease:Phaser.Math.Easing.Cubic.Out,props:{scale:{duration:400,from:1.4*s,to:s},angle:{from:o,to:0,duration:400}}}),c.add({targets:[this.hand],delay:200,duration:400,ease:Phaser.Math.Easing.Cubic.Out,props:{alpha:{from:1,to:0,duration:200},scale:{duration:200,from:s,to:1.4*s}},onComplete:function(){a.hand.x=t.x,a.hand.y=t.y,a.hand.scale=s}}),c.play(),c},n.playAnimation=function(e,t,n,i,r){var a=this;void 0===i&&(i=0),void 0===r&&(r=800),this.hand.flipX=e===Zd.Left,this.timeline?this.timeline.once("loop",(function(){var s;null==(s=a.timeline)||s.stop(),a.timeline=a.createTimeline(e,t,n,i,r)})):this.timeline=this.createTimeline(e,t,n,i,r)},n.stopAnimation=function(){var e=this;this.timeline&&this.timeline.once("loop",(function(){e.stopTimeline()}))},n.stopTimeline=function(){var e;null==(e=this.timeline)||e.stop(),this.timeline=void 0,this.hand.setAlpha(0),this.kill()},n.preDestroy=function(){this.scene.tweens.killTweensOf(this.hand)},t}(Phaser.GameObjects.Container),Ud=Gd,Fd=function(){function e(e){this.scene=void 0,this.tapHand=void 0,this.suggestions=[],this.scene=e,this.createTapHand(e),this.tapHand.setDepth(nr.Z.ON_TOP)}var t=e.prototype;return t.createTapHand=function(e){void 0==this.tapHand&&(this.tapHand=new Ud(e))},t.clearSuggestion=function(){this.suggestions=[]},t.stop=function(){var e;null==(e=this.tapHand)||e.stopAnimation()},t.start=function(){this.tapHand.kill()},t.move=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i,r,a,s,o,c,l,h;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.scene.gameManager,n=this.scene.gameZone,i=n.width,n.height,!t.isWin()&&!t.isLose()){e.next=4;break}return e.abrupt("return",this.stop());case 4:return r=this.scene.footer,e.next=7,this.getBestSuggestion();case 7:if(a=e.sent,this.tapHand.revive(),0!==a.length){e.next=16;break}(s=r.addBranchButton.getIsDisabled()?r.undoButton.getWorldPosition():r.addBranchButton.getWorldPosition()).x+=20,s.y+=15,this.tapHand.playAnimation(Zd.Right,s,s),e.next=33;break;case 16:if(o=t.layerContainers[a[0]],c=t.layerContainers[a[1]],l=o.getPositionLayer(o.layers.length-1),h=c.getPositionLayer(c.layers.length),!(l.x<h.x)){e.next=26;break}return l.x+=20,h.x+=20,0===c.layers.length&&c.x>i/2&&((h=c.getPositionLayer(0)).x-=15),this.tapHand.playAnimation(Zd.Right,l,h),e.abrupt("return");case 26:if(!(l.x>h.x)){e.next=32;break}return l.x-=20,h.x-=20,0===c.layers.length&&c.x<i/2&&((h=c.getPositionLayer(0)).x+=15),this.tapHand.playAnimation(Zd.Left,l,h),e.abrupt("return");case 32:l.x<i/2?(l.x+=20,h.x+=20,this.tapHand.playAnimation(Zd.Right,l,h)):(l.x-=20,h.x-=20,this.tapHand.playAnimation(Zd.Left,l,h));case 33:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.getBestSuggestion=function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.findSuggestions();case 2:if(0!==this.suggestions.length){e.next=4;break}return e.abrupt("return",[]);case 4:return e.abrupt("return",this.suggestions[0]);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.findSuggestions=function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.clearSuggestion(),e.next=3,this.scene.gameManager.getSolution();case 3:this.suggestions=e.sent;case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e}(),Hd=Fd;function zd(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Kd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Kd(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Kd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Yd=ys.Z.GAME_PLAY,Wd=Yd.KEY,jd=Yd.FRAME,Vd=function(e){function t(t,n){var i;return(i=e.call(this,t,0,0,Wd,jd.TREE_BRANCH)||this).gameManager=void 0,i.isLeft=!0,i.config=void 0,i.layers=[],i.hitArea=void 0,i.jiggleTween=void 0,i.slideTween=void 0,i.originWidth=187,i.originHeight=9.5,i.positionLayerOffsetY=-3,i.gameManager=n,i.setWorldSize(187,9.5),i.scene.add.existing((0,vs.Z)(i)),i.hitArea=t.add.zone(0,0,i.width,8*i.height),i.addListenEvent(),i}(0,o.Z)(t,e);var n=t.prototype;return n.setWorldSize=function(t,n){var i;e.prototype.setWorldSize.call(this,t,n),null==(i=this.hitArea)||i.setDisplaySize(Math.min(1.2*this.width,187.5),7.3*this.height)},n.addListenEvent=function(){var e=this;this.hitArea.setInteractive({hitArea:this.hitArea,useHandCursor:!0}),this.hitArea.on(Phaser.Input.Events.POINTER_DOWN,(function(){e.gameManager.selectContainer(e),e.jiggle(2)}))},n.setLeft=function(e){this.isLeft=e,this.setFlipX(!e);var t=this.isLeft?1:-1;this.layers.forEach((function(e){return e.scaleX=Math.abs(e.scaleX)*t}));var n=this.isLeft?0:1;this.setOrigin(n,.5),this.hitArea.setOrigin(n,.5)},n.setPosition=function(t,n,i,r){var a=this;return e.prototype.setPosition.call(this,t,n,i,r),this.hitArea&&this.hitArea.setPosition(t,this.y-this.hitArea.height/2+this.height),this.config?(this.layers.forEach((function(e,t){var n=a.getPositionLayer(t);e.completeMoving(),e.setPosition(n.x,n.y)})),this):this},n.initDefault=function(e){this.setScale(1),this.setWorldSize(this.displayWidth,this.displayHeight),this.setDepth(nr.Z.TREE_BRANCH),this.config=JSON.parse(JSON.stringify(e)),this.layers=[].concat(e.layers),this.setLeft(e.index%2===0),this.setWorldSize(167,16)},n.isCanAddLayer=function(e){if(0===e.length)return!1;if(0===this.getEmptyLayerCount())return!1;if(this.isComplete())return!1;if(0===this.layers.length)return!0;var t=this.getTopColor();return!e.some((function(e){return e.config.color!=t}))},n.addLayers=function(e){var t,n=this.layers.length;e.forEach((function(e){e.index=n,n+=1})),(t=this.layers).push.apply(t,e)},n.removeLayer=function(e){for(var t=0;t<e;t++)this.layers.pop()},n.isEmpty=function(){return 0===this.layers.length},n.isComplete=function(){if(this.layers.length!=this.config.length)return!1;for(var e,t=this.getTopColor(),n=zd(this.layers);!(e=n()).done;){if(t!=e.value.config.color)return!1}return!0},n.getGiveableLayers=function(e){if(void 0===e&&(e=this.config.length),this.isComplete())return[];if(0===this.layers.length)return[];for(var t=[],n=this.getTopColor(),i=this.layers.length-1;i>=0;i--){var r=this.layers[i];if(n!=r.config.color)break;t.push(r)}return t.slice(0,e)},n.getTopColor=function(){if(0!==this.layers.length)return this.layers[this.layers.length-1].config.color},n.getEmptyLayerCount=function(){return this.config.length-this.layers.length},n.hasMovingLayers=function(){return this.layers.some((function(e){return e.isMoving()}))},n.showHighlight=function(){this.getGiveableLayers().forEach((function(e){e.showHighlight()}))},n.hideHighlight=function(){this.getGiveableLayers().forEach((function(e){return e.hideHighlight()}))},n.isCanGiveTo=function(e){var t=e.getEmptyLayerCount();if(0===t)return 0;var n=this.getGiveableLayers(t);return e.isCanAddLayer(n)?n.length:0},n.giveLayers=function(){var e=(0,s.Z)(u().mark((function e(t,n){var i,r,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.getEmptyLayerCount(),r=(r=this.getTopLayers(Math.min(n,i))).reverse(),a=Promise.all(r.map((function(e,n){return e.moveTo(t,t.layers.length+n,100*n)}))),t.addLayers(r),this.removeLayer(r.length),t.isComplete()&&(r[r.length-1].shouldVibrate=!0),e.next=10,a;case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.getPositionLayer=function(e){var t=this.gameManager.getRatioScale(),n=this.isLeft?1:-1;return{x:this.x+(50*t+40*e)*n,y:this.y+this.positionLayerOffsetY*t}},n.playShowTreeBranch=function(){var e,t=this,n=this.isLeft?1:-1,i=this.x-this.width*n,r=this.x;this.x=i;var a=this.scaleX;return null==(e=this.slideTween)||e.complete(),new Promise((function(e){t.slideTween=t.scene.add.tween({targets:t,x:{from:i,to:r},scaleX:{from:a,to:1.2*a,ease:Phaser.Math.Easing.Sine.Out,duration:350,yoyo:!0},ease:Phaser.Math.Easing.Sine.Out,duration:700,onComplete:function(){e(),t.slideTween=void 0}})}))},n.playHideAnimation=function(){var e,t=this,n=this.isLeft?1:-1,i=this.x-this.width*n,r=this.x;this.x=r;var a=this.scaleX;return null==(e=this.slideTween)||e.complete(),new Promise((function(e){t.scene.add.tween({targets:t,x:{from:r,to:i},scaleX:{from:a,to:1.2*a,ease:Phaser.Math.Easing.Sine.Out,duration:350,yoyo:!0},ease:Phaser.Math.Easing.Sine.In,duration:700,onComplete:function(){e(),t.slideTween=void 0}})}))},n.playStartAnimation=function(){var e=(0,s.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=this.layers.map((function(e){return e.playStartAnimation()}))).push(this.playShowTreeBranch()),e.next=4,Promise.all(t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.getTopLayers=function(e){return this.layers.slice(this.layers.length-e,this.layers.length)},n.setActive=function(t){return e.prototype.setActive.call(this,t),this.hitArea.setActive(t),this},n.setVisible=function(t){return e.prototype.setVisible.call(this,t),this.hitArea.setVisible(t),this},n.jiggle=function(e){var t=this;if(this.jiggleTween&&this.jiggleTween.remove(),0!=e){var n=this.isLeft?1:-1,i=this.angle||0,r=.4*e*n;this.jiggleTween=this.scene.add.tween({targets:this,angle:r,duration:(r-i)/(r-0)*100,ease:Phaser.Math.Easing.Linear,onUpdate:function(){var e=t.angle/r;t.layers.forEach((function(i){if(!i.isMoving()){var a=Math.tan(r*(Math.PI/180))*Math.abs(t.x-i.x);i.y=t.y+t.positionLayerOffsetY+n*a*e}}))},onComplete:function(){t.layers.forEach((function(e){if(!e.isMoving()){var i=Math.tan(r*(Math.PI/180))*Math.abs(t.x-e.x);e.y=t.y+t.positionLayerOffsetY+n*i}})),t.jiggleTween=t.scene.add.tween({targets:t,angle:0,duration:100,ease:Phaser.Math.Easing.Bounce.InOut,onUpdate:function(){var e=t.angle/r;t.layers.forEach((function(i){if(!i.isMoving()){var a=Math.tan(r*(Math.PI/180))*Math.abs(t.x-i.x);i.y=t.y+t.positionLayerOffsetY+n*a*e}}))},onComplete:function(){t.layers.forEach((function(e){e.isMoving()||(e.y=t.y+t.positionLayerOffsetY)})),t.jiggleTween=void 0}})}})}},n.playWinAnimation=function(){var e=(0,s.Z)(u().mark((function e(){var t,n=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.scene.waitForMilliseconds(Phaser.Math.RND.integerInRange(0,150));case 2:return t=[],this.layers.forEach((function(e,i){var r=n.playLayerWinAnimationAsync(e,200*i);t.push(r)})),e.next=6,Promise.all(t);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.playLayerWinAnimationAsync=function(){var e=(0,s.Z)(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.scene.waitForMilliseconds(n);case 2:return e.next=4,t.playWinAnimation();case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.isContainLayersSameColor=function(){for(var e,t=this.getTopColor(),n=zd(this.layers);!(e=n()).done;){if(t!=e.value.config.color)return!1}return!0},n.giveLayersAutoComplete=function(){var e=(0,s.Z)(u().mark((function e(t,n){var i,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=[].concat(this.layers),this.flipX!==t.flipX&&(i=i.reverse()),r=Promise.all(i.map((function(e,i){return e.moveTo(t,t.layers.length+i,n+100*i)}))),t.addLayers(i),this.removeLayer(i.length),t.isComplete()&&(i[i.length-1].shouldVibrate=!0),e.next=9,r;case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),t}(Phaser.GameObjects.Image),qd=function(e){function t(t){return e.call(this,t)||this}(0,o.Z)(t,e);var n=t.prototype;return n.spawn=function(){var e=this.getChildren().find((function(e){return!e.visible&&!e.active}));if(e)return e.setActive(!0),e.setVisible(!0),e;var t=this.createNewTreeBranch();return this.add(t),t},n.clearAll=function(){this.getChildren().forEach((function(e){e.setVisible(!1),e.setActive(!1)}))},n.createNewTreeBranch=function(){return new Vd(this.scene,this.scene.gameManager)},t}(Phaser.GameObjects.Group),Xd=function(){function e(e){this.scene=void 0,this.tapHand=void 0,this.isRunning=void 0,this.step=0,this.currentLayerContainer=void 0,this.scene=e,this.step=-1}var t=e.prototype;return t.createTapHand=function(){void 0==this.tapHand&&(this.tapHand=new $s(this.scene))},t.start=function(){this.isRunning||(this.isRunning=!0,this.createTapHand(),this.tapHand.kill(),this.step=-1,this.currentLayerContainer=-1)},t.stop=function(){var e;this.isRunning&&(this.isRunning=!1,null==(e=this.tapHand)||e.stopAnimation(),this.scene.analytics.event(At._.TUTORIAL_COMPLETE))},t.move=function(){if(!this.isRunning)return this.stop();var e=this.scene.gameManager;if(e.isWin()||e.isLose())return this.stop();this.tapHand.revive();var t=this.getCurrentValidMove();if(t){this.step+=1,0===this.step?this.scene.analytics.event(At._.TUTORIAL_BEGIN):this.scene.analytics.event(At._.TUTORIAL_STEP,{tutorial_step:this.step});var n=e.layerContainers[t[0]],i=e.layerContainers[t[1]],r=n.getPositionLayer(n.layers.length-1),a=i.getPositionLayer(i.layers.length);r.x+=15,a.x+=15,r.x=Phaser.Math.Clamp(r.x,20,355),a.x=Phaser.Math.Clamp(a.x,20,355);var s=r;this.step%2===0?(s=r,this.currentLayerContainer=t[0]):(s=a,this.currentLayerContainer=t[1]),this.tapHand.playAnimation(s)}},t.getCurrentLayerContainerIndex=function(){return this.currentLayerContainer},t.getCurrentValidMove=function(){var e=this.scene.gameManager,t=e.getAllValidMoves();if(0!==t.length){for(var n=t[0],i=n[0],r=n[1],a=1;a<t.length;a++){var s=t[a];if(i===s[1]&&r===s[0])return e.layerContainers[i].layers.length<e.layerContainers[r].layers.length?[i,r]:[r,i]}return[i,r]}},e}(),Jd=function(){function e(e){this.state=void 0,this.gameSuccessors=void 0,this.lastColors=void 0,this.score=void 0,this.state=e,this.calculateLastColors(),this.processState()}var t=e.prototype;return t.getScore=function(){return this.score},t.processState=function(){this.gameSuccessors=this.calculateAllSuccessors(),this.score=this.calculateStateScore()},t.getState=function(){return this.state},t.isWin=function(){for(var e=0;e<this.state.bottleList.length;e++){var t=this.getLastColor(e);if(0!==t.count&&t.count!==this.state.bottleVolume)return!1}return!0},t.isLose=function(){return 0===this.gameSuccessors.length},t.getAllSuccessors=function(){return this.gameSuccessors},t.calculateAllSuccessors=function(){var e=[],t=[];this.state.bottleList.forEach((function(e){0!==e.length&&t.push(e[0])}));for(var n=0;n<this.state.bottleList.length;n++)for(var i=0;i<this.state.bottleList.length;i++){if(n!==i)if(this.isCanGiveTo(n,i)){var r=this.give(n,i);e.push({from:n,to:i,state:r})}}return e},t.give=function(e,t){for(var n=JSON.parse(JSON.stringify(this.state)),i=n.bottleList,r=i[e],a=i[t],s=this.getLastColor(e),o=0;o<s.count;o++)r.pop(),a.push(s.color);return n},t.isCanGiveTo=function(e,t){var n=this.state.bottleList,i=n[e],r=n[t],a=this.getEmptyCount(t),s=this.getLastColor(t),o=this.getLastColor(e);if(o.count===i.length){if(0==s.count)return!1;if(s.count!=r.length)return!1}return 0!==o.count&&(0===s.count||!(o.count>a)&&o.color==s.color)},t.getLastColor=function(e){return this.lastColors[e]},t.calculateLastColors=function(){this.lastColors=[];for(var e=0;e<this.state.bottleList.length;e++)this.lastColors.push(this.calculateLastColor(e))},t.calculateLastColor=function(e){var t=this.state,n=t.bottleList,i=(t.bottleVolume,n[e]);if(0===i.length)return{count:0,color:""};for(var r=0,a=i[i.length-1],s=i.length-1;s>=0;s--){if(i[s]!=a)break;r+=1}return{color:a,count:r}},t.getEmptyCount=function(e){var t=this.state,n=t.bottleList;return t.bottleVolume-n[e].length},t.calculateStateScore=function(){if(this.isWin())return 999999999999999;if(this.isLose())return-99999999999999;var e=0;e+=this.getAllSuccessors().length;for(var t=0;t<this.state.bottleList.length;t++){var n=this.state.bottleList[t];if(0!==n.length)for(var i=n[0],r=1;r<n.length;r++)i===n[r]?e+=2*(this.state.bottleVolume-r):(i=n[r],e-=2*(r+1));else e+=2}return e},e}(),Qd=function(e,t){this.data=void 0,this.value=void 0,this.data=e,this.value=t};Qd.prototype.valueOf=function(){return this.value};var $d=function(){function e(){this.values=void 0,this.values=[]}var t=e.prototype;return t.isEmpty=function(){return 0===this.values.length},t.parent=function(e){return Math.floor((e-1)/2)},t.leftChild=function(e){return 2*e+1},t.rightChild=function(e){return 2*e+2},t.isLeaf=function(e){return e>=Math.floor(this.values.length/2)&&e<=this.values.length-1},t.swap=function(e,t){var n=[this.values[t],this.values[e]];this.values[e]=n[0],this.values[t]=n[1]},t.heapifyDown=function(e){if(!this.isLeaf(e)){var t=this.leftChild(e),n=this.rightChild(e),i=e;this.values[t]>this.values[i]&&(i=t),this.values[n]>=this.values[i]&&(i=n),i!==e&&(this.swap(e,i),this.heapifyDown(i))}},t.heapifyUp=function(e){for(var t=e,n=this.parent(t);t>0&&this.values[t]>this.values[n];)this.swap(t,n),t=n,n=this.parent(n)},t.add=function(e,t){var n=new Qd(e,t);this.values.push(n),this.heapifyUp(this.values.length-1)},t.peek=function(){return this.values[0]},t.extractMax=function(){var e=this.values[0],t=this.values.pop();return 0===this.values.length||(this.values[0]=t,this.heapifyDown(0)),e},t.buildHeap=function(e){this.values=e;for(var t=Math.floor(this.values.length/2);t>=0;t--)this.heapifyDown(t)},t.print=function(){for(var e=0;!this.isLeaf(e);)console.log("PARENT:",this.values[e]),console.log("LEFT CHILD:",this.values[this.leftChild(e)]),console.log("RIGHT CHILD:",this.values[this.rightChild(e)]),e++},e}(),ep=function(){function e(){this.count=0}var t=e.prototype;return t.solve=function(e){this.count=0;var t=new Jd(e),n=new $d,i=[];for(i=this.DFSSolve({state:t,move:[]},n);0==i.length&&!n.isEmpty()&&this.count<2e3;){var r=n.extractMax().data;i=this.DFSSolve(r,n)}return{moves:i,searchCount:this.count}},t.DFSSolve=function(e,t){if(this.count+=1,e.state.isWin()){console.log({searchNodes:this.count,currentHeapLength:t.values});for(var n=e,i=[];void 0!=(null==(r=n)?void 0:r.parentState);){var r;i.unshift(n.move),n=n.parentState}return i}if(!e.state.isLose())for(var a=e.state.getAllSuccessors(),s=0;s<a.length;s++){var o=a[s],c=o.state,u=[o.from,o.to],l=new Jd(c);t.add({state:l,move:u,parentState:e},l.getScore())}return t.isEmpty()?(console.log({searchNodes:this.count}),[]):[]},e}(),tp=function(){function e(e){this.scene=void 0,this.headerOriginalPosition=void 0,this.footerOriginalPosition=void 0,this.headerEntranceAnimation=void 0,this.headerExitAnimation=void 0,this.footerEntranceAnimation=void 0,this.footerExitAnimation=void 0,this.scene=e,this.headerOriginalPosition={x:e.header.x,y:e.header.y},this.footerOriginalPosition={x:e.footer.x,y:e.footer.y},this.hideBothHeaderFooter(!0)}var t=e.prototype;return t.showBothHeaderFooter=function(){var e=(0,s.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.showHeader(t),this.showFooter(t)]);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.hideBothHeaderFooter=function(){var e=(0,s.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.hideHeader(t),this.hideFooter(t)]);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.showFooter=function(){var e=(0,s.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.runFooterEntranceAnimation(t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.hideFooter=function(){var e=(0,s.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.runFooterExitAnimation(t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.showHeader=function(){var e=(0,s.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.runHeaderEntranceAnimation(t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.hideHeader=function(){var e=(0,s.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.runHeaderExitAnimation(t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.runFooterEntranceAnimation=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i,r,a=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.scene.footer,i=this.footerOriginalPosition,r=this.footerHidePosition,this.removeFooterAnimations(),n.setY(r.y),e.abrupt("return",new Promise((function(e){a.footerEntranceAnimation=a.scene.add.tween({targets:n,duration:t?0:500,ease:Phaser.Math.Easing.Back.Out,props:{alpha:{from:.2,to:1},y:i.y},onComplete:function(){e()}})})));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.runFooterExitAnimation=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i,r=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.scene.footer,i=this.footerHidePosition,this.removeFooterAnimations(),e.abrupt("return",new Promise((function(e){r.footerExitAnimation=r.scene.add.tween({targets:n,duration:t?0:300,ease:Phaser.Math.Easing.Cubic.In,props:{alpha:0,y:i.y},onComplete:function(){e()}})})));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.runHeaderEntranceAnimation=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i,r,a=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.scene.header,i=this.headerOriginalPosition,r=this.headerHidePosition,this.removeHeaderAnimations(),n.setY(r.y),e.abrupt("return",new Promise((function(e){a.headerEntranceAnimation=a.scene.add.tween({targets:n,duration:t?0:500,ease:Phaser.Math.Easing.Back.Out,props:{alpha:{from:.2,to:1},y:i.y},onComplete:function(){e()}})})));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.runHeaderExitAnimation=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i,r=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.scene.header,i=this.headerHidePosition,this.removeHeaderAnimations(),e.abrupt("return",new Promise((function(e){r.headerExitAnimation=r.scene.add.tween({targets:n,duration:t?0:300,ease:Phaser.Math.Easing.Cubic.In,props:{alpha:0,y:i.y},onComplete:function(){e()}})})));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.removeHeaderAnimations=function(){var e,t;null==(e=this.headerEntranceAnimation)||e.remove(),null==(t=this.headerExitAnimation)||t.remove()},t.removeFooterAnimations=function(){var e,t;null==(e=this.footerEntranceAnimation)||e.remove(),null==(t=this.footerExitAnimation)||t.remove()},(0,U.Z)(e,[{key:"headerHidePosition",get:function(){var e=this.headerOriginalPosition;return{x:e.x,y:e.y-40}}},{key:"footerHidePosition",get:function(){var e=this.footerOriginalPosition;return{x:e.x,y:e.y+40}}}]),e}(),np=tp;function ip(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return rp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rp(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function rp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var ap=function(){function e(e){var t=this;if(this.scene=void 0,this.layerManager=void 0,this.layerContainerManager=void 0,this.levelConfig=void 0,this.currentSelected=void 0,this.layerContainers=[],this.lastMoves=[],this.ratioScale=1,this.tutorialManager=void 0,this.ruleTutorialManager=void 0,this.lastPromiseGive=void 0,this.solveWorker=void 0,this.gameLogicSolver=void 0,this.loopHighlightHintButtonTimer=void 0,this.suggestionManager=void 0,this.headerFooterManager=void 0,this.startLevelTime=0,this.numberOfMoves=0,this.isLayerContainersContainLayersSameColor=function(){for(var e,n=ip(t.layerContainers);!(e=n()).done;){if(!e.value.isContainLayersSameColor())return!1}return!0},this.scene=e,this.layerContainerManager=new qd(e),this.layerManager=new kd(e),this.tutorialManager=new Xd(e),this.suggestionManager=new Hd(e),this.ruleTutorialManager=new Bd(e),this.headerFooterManager=new np(e),"undefined"!==typeof Worker)try{this.solveWorker=new Worker(new URL(n.p+n.u(26),n.b),{name:"solving-worker",type:void 0})}catch(i){this.solveWorker=void 0}this.gameLogicSolver=new ep}var t=e.prototype;return t.buildLevel=function(e){return this.startLevelTime=this.scene.time.now,this.numberOfMoves=0,this.tutorialManager.stop(),this.levelConfig=JSON.parse(JSON.stringify(e)),this.lastMoves=[],this.unSelectHighlight(),this.isTutorial()?(this.tutorialManager.start(),this.scene.footer.setVisible(!1)):this.scene.footer.setVisible(!0),this.initLayerContainer(e)},t.initLayerContainer=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i,r,a,o,c,l,h,d,p=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.bottleList,i=t.bottleVolume,r=t.coloredBottleCount,a=t.emptyBottleCount,o=window.game.globalScene,c="init",this.layerContainerManager.clearAll(),this.layerManager.clearAll(),this.layerContainers=[],this.scene.time.delayedCall(200,(function(){"init"===c&&(o.screen.open(ir.o4.NOTIFY_SCREEN,{message:"Loading...",duration:0,loading:!0}),c="opening")})),l=r+a,h=n.slice(0,l),d=h.map(function(){var e=(0,s.Z)(u().mark((function e(t,n){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.layerContainerManager.spawn(),p.moveLayerContainerOutOfScreen(r),e.t0=r,e.t1=n,e.t2=i,e.next=7,p.spawnLayers(r,t);case 7:return e.t3=e.sent,e.t4={index:e.t1,length:e.t2,layers:e.t3},e.t0.initDefault.call(e.t0,e.t4),e.abrupt("return",r);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),e.next=12,Promise.all(d);case 12:return this.layerContainers=e.sent,"opening"===c&&o.screen.close(ir.o4.NOTIFY_SCREEN),c="close",this.alignLayerContainers(),e.next=18,this.playStartAnimation();case 18:return e.next=20,this.headerFooterManager.showBothHeaderFooter(!1);case 20:this.tutorialManager.move();case 21:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.spawnLayers=function(e,t){var n=this,i=t.map(function(){var t=(0,s.Z)(u().mark((function t(i,r){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",n.layerManager.spawn({layerContainer:e,index:r,color:i}));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}());return Promise.all(i)},t.getSolution=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i,r,a,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(console.log("start get solution"),t=performance.now(),n={coloredBottleCount:this.levelConfig.coloredBottleCount,emptyBottleCount:this.levelConfig.emptyBottleCount,bottleVolume:this.levelConfig.bottleVolume,bottleList:[]},i=0;i<this.layerContainers.length;i++)n.bottleList.push(this.layerContainers[i].layers.map((function(e){return e.config.color})));if(console.log({currentState:n}),!this.solveWorker){e.next=11;break}return e.next=8,this.getSolutionWithWorker(n);case 8:r=e.sent,e.next=12;break;case 11:r=this.getSolutionWithGameLogicSolver(n);case 12:return a=performance.now(),s=a-t,console.log({result:r,timeProcess:s}),this.scene.analytics.event(At._.GET_SOLUTION,{hint_duration:Math.round(s),hint_move:JSON.stringify(r.moves[0]||-1)}),e.abrupt("return",r.moves);case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.getSolutionWithWorker=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i,r,a,o,c,l=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.scene.game.globalScene,i=new Promise((function(e){l.solveWorker?(l.solveWorker.postMessage({state:t}),l.solveWorker.onmessage=function(){var t=(0,s.Z)(u().mark((function t(n){var i;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=n.data,e(i);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()):e({moves:[],searchCount:-1})})),r=new Promise((function(e,t){l.scene.time.delayedCall(200,(function(){return t()}))})),a={moves:[],searchCount:-1},e.prev=4,e.next=7,Promise.race([i,r]);case 7:a=e.sent,e.next=27;break;case 10:return e.prev=10,e.t0=e.catch(4),n.screen.open(ir.o4.NOTIFY_SCREEN,{message:"Loading",duration:0,loading:!0}),o=new Promise((function(e,t){l.scene.time.delayedCall(2e3,(function(){return t()}))})),e.prev=14,e.next=17,Promise.race([i,o]);case 17:a=e.sent,e.next=24;break;case 20:e.prev=20,e.t1=e.catch(14),null==(c=this.solveWorker)||c.terminate(),this.scene.analytics.event(At._.GET_SOLUTION_TIME_OUT);case 24:return e.prev=24,n.screen.close(ir.o4.NOTIFY_SCREEN),e.finish(24);case 27:return e.abrupt("return",a);case 28:case"end":return e.stop()}}),e,this,[[4,10],[14,20,24,27]])})));return function(t){return e.apply(this,arguments)}}(),t.getSolutionWithGameLogicSolver=function(e){return this.gameLogicSolver?this.gameLogicSolver.solve(e):{moves:[],searchCount:-1}},t.playStartAnimation=function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(this.layerContainers.map((function(e){return e.playStartAnimation()})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.playWinAnimation=function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.playWinAnimationLayer(),this.headerFooterManager.hideBothHeaderFooter(!1)]);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.playLoseAnimation=function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.headerFooterManager.hideBothHeaderFooter(!1));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.playWinAnimationLayer=function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(this.layerContainers.map((function(e){return e.playWinAnimation()})));case 2:this.layerContainers.map((function(e){return e.playHideAnimation()}));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.alignLayerContainers=function(){var e=this;this.ratioScale=this.calculateRatioScale();var t=this.layerContainers.length,n=Math.ceil(t/2),i=Math.floor(t/2),r=this.scene.ads.getBannerHeight()+75,a=70*this.ratioScale,s=this.scene.world.getWorldSize(),o=s.width,c=s.height;this.layerContainers.forEach((function(t){t.setWorldSize(e.ratioScale*t.originWidth,e.ratioScale*t.originHeight);var n=t.layers,i=t.flipX?-1:1;n.forEach((function(t){var n=t.originScale*e.ratioScale;t.setScale(n*i,n)}))}));for(var u=0;u<n;u++){this.layerContainers[2*u].setPosition(-20,c/2+a*(-n/2+u)+(70-r)/2+a)}for(var l=0;l<i;l++){this.layerContainers[2*l+1].setPosition(o+20,c/2+a*(-i/2+l)+(70-r)/2+a)}},t.moveLayerContainerOutOfScreen=function(e){e.setY(-50)},t.isCanUndo=function(){return 0!==this.lastMoves.length},t.undo=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i,r,a,s,o,c=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isCanUndo()){e.next=2;break}return e.abrupt("return");case 2:return this.unSelectHighlight(),t=this.lastMoves.pop(),n=t.from,i=t.to,r=t.layerCount,a=this.layerContainers[n],s=this.layerContainers[i],o=s.giveLayers(a,r),this.lastPromiseGive=o,this.lastPromiseGive.then((function(){c.lastPromiseGive===o&&c.checkGameState()})),this.tutorialManager.move(),e.abrupt("return");case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.skipLevel=function(){var e=(0,s.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.scene.showRewardVideo();case 2:e.sent&&(t=this.scene.level.getLevel(),this.scene.updatePlayerLevel(t+1),this.scene.level.nextLevel(),this.scene.levelUp());case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.restartLevel=function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.buildLevel(this.levelConfig));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.selectContainer=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i,r,a,s,o=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=this.isTutorial())){e.next=5;break}if(i=this.tutorialManager.getCurrentLayerContainerIndex(),t.config.index==i){e.next=5;break}return e.abrupt("return");case 5:if(this.showHint(),this.currentSelected){e.next=11;break}t.getGiveableLayers().length>0&&this.selectHighLight(t),e.next=17;break;case 11:if(r=this.currentSelected,this.unSelectHighlight(),r!==t){e.next=15;break}return e.abrupt("return");case 15:0!=(a=r.isCanGiveTo(t))?(this.hideHint(),this.showHint(),this.numberOfMoves+=1,this.lastMoves.push({from:r.config.index,to:t.config.index,layerCount:a}),s=r.giveLayers(t,a),this.lastPromiseGive=s,this.lastPromiseGive.then((function(){o.lastPromiseGive===s&&o.checkGameState()})),this.isLayerContainersContainLayersSameColor()&&this.handleLayerContainersContainLayersSameColor(t)):this.selectContainer(t);case 17:return n&&this.tutorialManager.move(),e.abrupt("return",Promise.resolve());case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.selectHighLight=function(e){e.hasMovingLayers()||(this.currentSelected=e,e.showHighlight(),this.isRuleTutorial()&&this.ruleTutorialManager.showRuleTutorial())},t.unSelectHighlight=function(){var e;null==(e=this.currentSelected)||e.hideHighlight(),this.currentSelected=void 0,this.isRuleTutorial()&&this.ruleTutorialManager.clearAlls()},t.checkGameState=function(){this.isWin()?this.win():this.isLose()&&this.lose()},t.isWin=function(){for(var e,t=ip(this.layerContainers);!(e=t()).done;){var n=e.value;if(!n.isEmpty()&&!n.isComplete())return!1}return!0},t.isLose=function(){var e=this.getAllValidMoves();return console.log({validMoves:e}),0===e.length},t.win=function(){this.unSelectHighlight(),this.scene.win(),this.tutorialManager.stop()},t.lose=function(){this.unSelectHighlight(),this.scene.lose(this.levelConfig.level),this.tutorialManager.stop()},t.addMoreLayerContainer=function(){this.unSelectHighlight();var e=this.layerContainerManager.spawn();e.initDefault({index:this.layerContainers.length,length:this.levelConfig.bottleVolume,layers:[]}),this.layerContainers.push(e),this.alignLayerContainers()},t.getAllValidMoves=function(){for(var e=[],t=0;t<this.layerContainers.length;t++)for(var n=this.layerContainers[t],i=0;i<this.layerContainers.length;i++)if(t!=i){var r=this.layerContainers[i],a=r.getEmptyLayerCount(),s=n.getGiveableLayers();r.isCanAddLayer(s)&&a>=s.length&&e.push([t,i])}return e},t.calculateRatioScale=function(){var e=this.layerContainers.length,t=this.scene.ads.getBannerHeight()+75,n=this.scene.world.getWorldSize().height,i=70*Math.ceil(e/2),r=n-70-t;return r<i?r/i:1},t.getRatioScale=function(){return this.ratioScale},t.handleLayerContainersContainLayersSameColor=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i,r,a,s,o=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.isTutorial(),i=this.isRuleTutorial(),!n&&!i){e.next=4;break}return e.abrupt("return");case 4:this.unSelectHighlight(),r=[],this.layerContainers.forEach((function(e){e.isComplete()||0==e.layers.length||r.push(e)})),a=100,s=u().mark((function e(){var n,i,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=r[0].getTopColor(),(i=r.filter((function(e){if(e.getTopColor()===n)return e}))).length>0&&(a+=100*i.length,s=i[Phaser.Math.RND.between(0,i.length-1)],i.forEach((function(e){t===e&&(s=e)})),i.forEach((function(e){if(s!==e){var t=e.giveLayersAutoComplete(s,a);o.lastPromiseGive=t,o.lastPromiseGive.then((function(){o.lastPromiseGive===t&&o.checkGameState()}))}})),i.forEach((function(e){var t=r.indexOf(e);r.splice(t,1)})));case 3:case"end":return e.stop()}}),e)}));case 9:if(0===r.length){e.next=13;break}return e.delegateYield(s(),"t0",11);case 11:e.next=9;break;case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.showHint=function(){var e=this;this.hideHighLightHintButton(),this.loopHighlightHintButtonTimer=this.scene.time.addEvent({delay:2e4,loop:!0,callback:function(){e.scene.footer.showHighlightHintButton()}})},t.hideHighLightHintButton=function(){var e;null==(e=this.loopHighlightHintButtonTimer)||e.remove(),this.scene.footer.hideHighlightHintButton()},t.hideHint=function(){this.hideHighLightHintButton(),this.suggestionManager.stop(),this.scene.footer.hintButton.setDisabled(!1)},t.getCurrentLevelPlayTime=function(){return Math.floor((this.scene.time.now-this.startLevelTime)/1e3)},t.getCurrentLevelPlayMoves=function(){return this.numberOfMoves},t.isTutorial=function(){return GameCore.Configs.Tutorial.LevelTutorial.includes(this.levelConfig.level)},t.isRuleTutorial=function(){return GameCore.Configs.Tutorial.LevelRuleTutorial.includes(this.levelConfig.level)},e}(),sp={targets:[],duration:600,ease:Phaser.Math.Easing.Back.Out,props:{}},op=function(e){function t(t){return e.call(this,sp,t)||this}return(0,o.Z)(t,e),t}(Os.Z),cp=ys.Z.DEFAULT,up=cp.KEY,lp=cp.FRAME,hp=function(e){function t(t){var n;return(n=e.call(this,t)||this).cat=void 0,n.createEffect(),n.createCat(),n.runCatAnimation(),n.scene.add.existing((0,vs.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createCat=function(){this.cat=this.scene.make.image({key:up,frame:lp.BLANK,origin:{x:.5,y:1}}),this.cat.setWorldSize(100,117),this.cat.setY(this.cat.height/2),this.add(this.cat)},n.createEffect=function(){},n.runCatAnimation=function(){new Zs({targets:[this.cat],duration:1e3,props:{scale:"-=0.02"}}).play()},t}(Phaser.GameObjects.Container),dp=hp,pp=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.sadCat=void 0,n.board=void 0,n.titleText=void 0,n.descriptionText=void 0,n.boardAnimation=void 0,n.theCatAnimation=void 0,n.textsAnimation=void 0,n.existAnimation=void 0,n.runAnimation=function(){n.scene.tweens.killTweensOf(n.getAll()),n.setVisible(!0),n.runBoardAnimation(),n.runCatAnimation(),n.runTextsAnimation()},n.runExistAnimation=function(){if(!n.existAnimation){var e=n.getAll();n.existAnimation=new op({targets:e,duration:400,ease:Phaser.Math.Easing.Cubic.In,props:{y:{getStart:function(e){return e.y},getEnd:function(e){return e.y+150}},alpha:{value:0,delay:250,duration:150}},onComplete:function(){Phaser.Actions.IncY(e,-150),n.setVisible(!1)}})}n.existAnimation.play()},n.scene=t,n.setVisible(!1),n.createBoard(),n.createTitleText(),n.createDescriptionText(),n.createTheCat(),n.scene.add.existing((0,vs.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBoard=function(){this.board=new Dc(this.scene,0,0,600,102),this.board.setDepth(nr.Z.BACKGROUND),this.add(this.board)},n.createTheCat=function(){this.sadCat=new dp(this.scene),this.sadCat.setDepth(nr.Z.LOGO),this.add(this.sadCat),Phaser.Display.Align.In.Center(this.sadCat,this.board,-140,-19)},n.createTitleText=function(){this.titleText=this.scene.make.bitmapText({font:eo.Z.PRIMARY.KEY,size:this.scene.fontSize(22),depth:nr.Z.TEXT,origin:{x:.5,y:.5},text:"Level Failed"}),this.add(this.titleText),this.titleText.setTint(12010469),Phaser.Display.Align.In.Center(this.titleText,this.board,35,-20)},n.createDescriptionText=function(){this.descriptionText=this.scene.make.bitmapText({font:eo.Z.PRIMARY.KEY,size:this.scene.fontSize(20),depth:nr.Z.TEXT,origin:{x:.5,y:.5},text:"You did not reach the target score"}),this.add(this.descriptionText),this.descriptionText.setTint(11632977),Phaser.Display.Align.In.Center(this.descriptionText,this.board,35,10)},n.runBoardAnimation=function(){if(!this.boardAnimation){var e=this.board.y;this.boardAnimation=new op({targets:[this.board],duration:300,props:{y:{start:e+80,to:e},alpha:{start:0,from:0,to:1}}})}this.boardAnimation.play()},n.runCatAnimation=function(){if(!this.theCatAnimation){var e=this.sadCat.x;this.theCatAnimation=new op({targets:[this.sadCat],ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.6,1],delay:150,duration:800,props:{alpha:{start:0,from:0,to:1},scale:{start:.3,to:1},x:{start:e-80,to:e}}})}this.theCatAnimation.play()},n.runTextsAnimation=function(){this.titleText.setAlpha(0),this.descriptionText.setAlpha(0),this.textsAnimation||(this.textsAnimation=new op({targets:[this.titleText,this.descriptionText],duration:500,delay:this.scene.tweens.stagger(200,{start:200}),props:{y:{getEnd:function(e){return e.y}},alpha:{start:0,from:0,to:1}},completeDelay:1e3,onComplete:this.runExistAnimation})),this.textsAnimation.play()},t}(Phaser.GameObjects.Container),fp=pp,mp={targets:[],duration:200,repeat:5,props:{alpha:{start:1,to:.1}}},gp=function(e){function t(t){return e.call(this,mp,t)||this}return(0,o.Z)(t,e),t}(Os.Z),vp=function(e){function t(t){var n;(n=e.call(this,t,0,0,eo.Z.PRIMARY.KEY)||this).scene=void 0,n.flickerAnimation=void 0,n.scene=t;var i=n.scene.fontSize(14);return n.setFontSize(i),n.setOrigin(.5,.5),n.setNotifyText("Loading interstitial ad..."),n.setVisible(!1),n.scene.add.existing((0,vs.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.show=function(){this.setVisible(!0),this.runTextAnimation()},n.setNotifyText=function(e){this.setText(e)},n.runTextAnimation=function(){var e,t=this;this.flickerAnimation||(this.flickerAnimation=new gp({targets:[this],yoyo:!0,duration:300,repeat:3,ease:"Sine.easeInOut",onStart:function(){t.setVisible(!0)},onComplete:function(){t.setVisible(!1)}})),null==(e=this.flickerAnimation)||e.play()},t}(Phaser.GameObjects.BitmapText),yp=vp,bp=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.theCat=void 0,n.board=void 0,n.levelText=void 0,n.scoreTargetText=void 0,n.boardAnimation=void 0,n.existAnimation=void 0,n.runAnimation=function(){n.scene.tweens.killTweensOf(n.getAll()),n.setVisible(!0)},n.runExistAnimation=function(){if(!n.existAnimation){var e=n.getAll();n.existAnimation=new op({targets:e,duration:300,ease:Phaser.Math.Easing.Back.In,props:{y:{getStart:function(e){return e.y},getEnd:function(e){return e.y+-150}}},onComplete:function(){Phaser.Actions.IncY(e,150),n.setVisible(!1)}})}n.existAnimation.play()},n.scene=t,n.scene.add.existing((0,vs.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.setLevel=function(e){},n.setScoreTarget=function(e){},n.createBoard=function(){this.board=new Dc(this.scene,0,0,600,102),this.board.setDepth(nr.Z.BACKGROUND),this.add(this.board)},n.createTheCat=function(){this.theCat=new Gc(this.scene),this.theCat.setDepth(nr.Z.LOGO),this.add(this.theCat),Phaser.Display.Align.In.Center(this.theCat,this.board,-140,-17)},n.createLevelText=function(){this.levelText=this.scene.make.bitmapText({font:eo.Z.PRIMARY.KEY,size:this.scene.fontSize(22),depth:nr.Z.TEXT,origin:{x:.5,y:.5}}),this.add(this.levelText),this.levelText.setTint(12010469),Phaser.Display.Align.In.Center(this.levelText,this.board,25,-20)},n.createTargetText=function(){this.scoreTargetText=this.scene.make.bitmapText({font:eo.Z.PRIMARY.KEY,size:this.scene.fontSize(26),depth:nr.Z.TEXT,origin:{x:.5,y:.5}}),this.add(this.scoreTargetText),this.scoreTargetText.setTint(11632977),Phaser.Display.Align.In.Center(this.scoreTargetText,this.board,25,10)},n.runBoardAnimation=function(){if(!this.boardAnimation){var e=this.board.y;this.boardAnimation=new op({targets:[this.board],duration:300,props:{y:{start:e+80,to:e}}})}this.boardAnimation.play()},t}(Phaser.GameObjects.Container),Ap=bp,Sp=ys.Z.GAME_PLAY,Ep=Sp.KEY,wp=Sp.FRAME,Cp=function(e){function t(t){var n;(n=e.call(this,t,Ep,wp.BUTTON_CIRCLE_BLUE,41,41)||this).isDisabled=void 0,n.isDisabled=!1,n.setName("AddBranchButton");var i=n.scene.make.image({key:Ep,frame:wp.ICON_BRANCH});i.setWorldSize(28,29.5);var r=n.scene.make.image({key:Ep,frame:wp.ICON_AD});return r.setWorldSize(18,16.5),n.add([i,r]),r.setPosition(18.3,-18.6),n}(0,o.Z)(t,e);var n=t.prototype;return n.setDisabled=function(t){e.prototype.setDisabled.call(this,t),this.isDisabled=t},n.getIsDisabled=function(){return this.isDisabled},t}(Vs.Z),Tp=Cp,Ip=ys.Z.GAME_PLAY,xp=Ip.KEY,kp=Ip.FRAME,Pp=function(e){function t(t,n,i,r,a){var s;return(s=e.call(this,t,xp,kp.BUTTON_CIRCLE_BLUE,41,41)||this).dotIcon=void 0,s.adIcon=void 0,s.countItemText=void 0,s.countItem=0,s.createBigIcon(n,i,r,a),s.createDotIcon(),s.createAdIcon(),s}(0,o.Z)(t,e);var n=t.prototype;return n.createBigIcon=function(e,t,n,i){var r=this.scene.make.image({key:e,frame:t});r.setDisplaySize(n,i),this.add(r)},n.createDotIcon=function(){this.dotIcon=this.scene.make.image({key:xp,frame:kp.ICON_DOT}),this.dotIcon.setWorldSize(19.5,20),this.countItemText=this.scene.make.bitmapText({font:eo.Z.MIKADO.KEY,size:this.scene.fontSize(12),text:"0",origin:{x:.5,y:.5}}),this.add([this.dotIcon,this.countItemText]),this.dotIcon.setPosition(18,-18),Phaser.Display.Align.In.Center(this.countItemText,this.dotIcon,0,-.75)},n.createAdIcon=function(){var e=this.scene.make.image({key:xp,frame:kp.ICON_AD});e.setWorldSize(18,16.5),this.add(e),e.setPosition(18.3,-18.6),this.adIcon=e},n.updateCountItem=function(e){0==e?(this.adIcon.revive(),this.dotIcon.kill(),this.countItemText.kill()):(this.adIcon.kill(),this.dotIcon.revive(),this.countItemText.revive(),this.countItemText.setText(""+e))},n.resetCountItem=function(e){this.countItem=e,this.updateCountItem(e)},n.decreaseCountItem=function(){0!==this.countItem&&(this.countItem-=1,this.updateCountItem(this.countItem))},n.getCountItem=function(){return this.countItem},t}(Vs.Z),Lp=Pp,Op=ys.Z.GAME_PLAY,Rp=Op.KEY,Dp=Op.FRAME,Bp=function(e){function t(t){var n;return(n=e.call(this,t,Rp,Dp.ICON_HINT,19,28.5)||this).pulsateBubbleAnimation=void 0,n.isPlayingBubbleAnimation=!1,n.stopPulsateAnimation=void 0,n.setName("HintButton"),n.scaleDownPress=1,n}(0,o.Z)(t,e);var n=t.prototype;return n.runPulsateBubbleAnimation=function(){var e=(0,s.Z)(u().mark((function e(){var t,n=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPlayingBubbleAnimation){e.next=2;break}return e.abrupt("return");case 2:return this.isPlayingBubbleAnimation=!0,null==(t=this.pulsateBubbleAnimation)||t.remove(),e.next=6,this.waitStopPulsateAnimationAsync();case 6:this.pulsateBubbleAnimation=new Zs({targets:[this],duration:500,props:{scale:{from:1,to:1.1}}}),this.pulsateBubbleAnimation.play(),this.hitZone.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,(function(){var e;null==(e=n.pulsateBubbleAnimation)||e.stop()})),this.hitZone.on(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,(function(){var e;null!=(e=n.pulsateBubbleAnimation.tween)&&e.isPlaying()||n.pulsateBubbleAnimation.play()}));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.stopPulsateBubbleAnimation=function(){var e,t;null==(e=this.pulsateBubbleAnimation)||e.stop(),null==(t=this.stopPulsateAnimation)||t.stop(),1!==this.scale&&(this.stopPulsateAnimation=this.scene.add.tween({targets:this,duration:Math.abs(this.scale-1)/(1.1-1)*500,props:{scale:1}})),this.isPlayingBubbleAnimation=!1},n.waitStopPulsateAnimationAsync=function(){var e=(0,s.Z)(u().mark((function e(){var t=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.stopPulsateAnimation){e.next=2;break}return e.abrupt("return");case 2:if(this.stopPulsateAnimation.isPlaying()){e.next=4;break}return e.abrupt("return");case 4:return e.abrupt("return",new Promise((function(e){var n;null==(n=t.stopPulsateAnimation)||n.once(Phaser.Tweens.Events.TWEEN_COMPLETE,(function(){e()}))})));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Lp),Np=Bp,Mp=ys.Z.GAME_PLAY,_p=Mp.KEY,Zp=Mp.FRAME,Gp=function(e){function t(t){var n;return(n=e.call(this,t,_p,Zp.ICON_BACK,25,26)||this).setName("UndoButton"),n}return(0,o.Z)(t,e),t}(Lp),Up=Gp,Fp=ys.Z.GAME_PLAY,Hp=Fp.KEY,zp=Fp.FRAME,Kp=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.addFriendButton=void 0,n.removeBombButton=void 0,n.addBranchButton=void 0,n.undoButton=void 0,n.hintButton=void 0,n.handleAddFriend=function(){},n.handleAddBranch=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.scene.gameManager.hideHint(),!n.isWinOrLose()){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,n.scene.showRewardVideo();case 5:e.sent&&(n.scene.gameManager.addMoreLayerContainer(),n.addBranchButton.setDisabled(!0),n.addBranchButton.setAlpha(.5)),n.scene.gameManager.showHint();case 8:case"end":return e.stop()}}),e)}))),n.handleNext=function(){n.isWinOrLose()||n.scene.gameManager.skipLevel()},n.handleUndo=function(){if(!n.isWinOrLose()){var e=n.scene.gameManager.isCanUndo();if(0!==n.undoButton.getCountItem()){if(e){n.scene.gameManager.hideHint(),n.scene.gameManager.showHint(),n.undoButton.decreaseCountItem();var t=n.undoButton.getCountItem(),i=n.scene.player.getCountItems();n.updatePlayerCountItems(t,i.hintCount,i.lastTimeUpdate),n.scene.gameManager.undo()}}else n.claimUndo()}},n.handleHint=(0,s.Z)(u().mark((function e(){var t,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.isWinOrLose()){e.next=2;break}return e.abrupt("return");case 2:if(n.scene.gameManager.hideHint(),0!==n.hintButton.getCountItem()){e.next=7;break}return n.claimHint(),e.abrupt("return");case 7:n.hintButton.setDisabled(!0),n.scene.gameManager.suggestionManager.move(),n.hintButton.decreaseCountItem(),t=n.hintButton.getCountItem(),i=n.scene.player.getCountItems(),n.updatePlayerCountItems(i.undoCount,t,i.lastTimeUpdate);case 13:case"end":return e.stop()}}),e)}))),n.updateCountItems=(0,s.Z)(u().mark((function e(){var t,i,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=n.scene.player.getCountItems())&&(!t||(0,jc.Gm)(t.lastTimeUpdate))&&!GameCore.Configs.DailyCountItems.ForceNewDay){e.next=5;break}return e.next=4,n.resetCountItems();case 4:return e.abrupt("return");case 5:i=t.undoCount,r=t.hintCount,n.setUndoCountOnStartLevel(i),n.setHintCountOnStartLevel(r);case 9:case"end":return e.stop()}}),e)}))),n.resetCountItems=(0,s.Z)(u().mark((function e(){var t,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=GameCore.Configs.Gameplay.UndoCount,i=GameCore.Configs.Gameplay.HintCount,n.setUndoCountOnStartLevel(t),n.setHintCountOnStartLevel(i),e.next=6,n.updatePlayerCountItems(t,i,(new Date).getTime());case 6:case"end":return e.stop()}}),e)}))),n.scene=t,n.scene.add.existing((0,vs.Z)(n)),n.createButtons(),n.createEvents(),n}(0,o.Z)(t,e);var n=t.prototype;return n.initDefault=function(){this.addBranchButton.setAlpha(1),this.hintButton.setAlpha(1),this.updateCountItems()},n.createButtons=function(){this.createAddFriendButton(),this.createAddBranchButton(),this.createUndoButton(),this.createHintButton()},n.createEvents=function(){this.addFriendButton.onClick=this.handleAddFriend,this.addBranchButton.onClick=this.handleAddBranch,this.undoButton.onClick=this.handleUndo,this.hintButton.onClick=this.handleHint},n.createAddFriendButton=function(){this.addFriendButton=new Vs.Z(this.scene,Hp,zp.BUTTON_CIRCLE_BLUE,41,41),this.addFriendButton.setName("AddFriendButton");var e=this.scene.make.image({key:Hp,frame:zp.ICON_ADD_FRIEND});e.setWorldSize(30.5,29.5),this.addFriendButton.add(e),Phaser.Display.Align.In.Center(e,this.addFriendButton,3),this.add(this.addFriendButton),Phaser.Display.Align.In.Center(this.addFriendButton,this,-153,0),this.addFriendButton.kill()},n.createRemoveBombButton=function(){var e=new Vs.Z(this.scene,Hp,zp.BUTTON_CIRCLE_BLUE,41,41);e.setName("RemoveBombButton");var t=this.scene.make.image({key:ys.Z.DEFAULT.KEY,frame:ys.Z.DEFAULT.FRAME.ICON_REMOVE_BOMB});t.setWorldSize(29.5,25),e.add(t),this.add(e),e.setX(-70.3125),this.removeBombButton=e},n.createAddBranchButton=function(){this.addBranchButton=new Tp(this.scene),this.add(this.addBranchButton),this.addBranchButton.setX(-152.5)},n.createUndoButton=function(){this.undoButton=new Up(this.scene),this.add(this.undoButton)},n.createHintButton=function(){this.hintButton=new Np(this.scene),this.add(this.hintButton),Phaser.Display.Align.In.Center(this.hintButton,this,151,0)},n.createNextButton=function(){},n.setHintCountOnStartLevel=function(e){this.hintButton.resetCountItem(e)},n.setUndoCountOnStartLevel=function(e){this.undoButton.resetCountItem(e)},n.setDisable=function(e){this.addFriendButton.setDisabled(e),this.addBranchButton.setDisabled(e),this.undoButton.setDisabled(e),this.hintButton.setDisabled(e);var t=GameCore.Configs.Tutorial.LevelTutorial,n=this.scene.level.getLevel();t.includes(n)&&(this.addBranchButton.setDisabled(!0),this.addBranchButton.setAlpha(.5),this.hintButton.setDisabled(!0),this.hintButton.setAlpha(.5))},n.isWinOrLose=function(){var e=this.scene.gameManager.isWin(),t=this.scene.gameManager.isLose();return!(!e&&!t)},n.claimUndo=function(){var e=(0,s.Z)(u().mark((function e(){var t,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.scene.gameManager.hideHint(),e.next=3,this.scene.showRewardVideo();case 3:e.sent&&(t=GameCore.Configs.Gameplay.UndoClaim,n=this.scene.player.getCountItems(),this.updatePlayerCountItems(t,n.hintCount,n.lastTimeUpdate),this.undoButton.resetCountItem(t)),this.scene.gameManager.showHint();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.claimHint=function(){var e=(0,s.Z)(u().mark((function e(){var t,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.scene.showRewardVideo();case 2:e.sent?(t=GameCore.Configs.Gameplay.HintClaim,n=this.scene.player.getCountItems(),this.updatePlayerCountItems(n.undoCount,t,n.lastTimeUpdate),this.hintButton.resetCountItem(t),this.hintButton.setDisabled(!0),this.scene.gameManager.suggestionManager.move()):this.scene.gameManager.showHint();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.showHighlightHintButton=function(){this.hintButton.runPulsateBubbleAnimation()},n.hideHighlightHintButton=function(){this.hintButton.stopPulsateBubbleAnimation()},n.updatePlayerCountItems=function(){var e=(0,s.Z)(u().mark((function e(t,n,i){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={undoCount:t,hintCount:n,lastTimeUpdate:i},e.next=3,FBInstant.player.setDataAsync({countItems:r});case 3:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}(),t}(Phaser.GameObjects.Container),Yp=Kp,Wp=ys.Z.DEFAULT,jp=Wp.KEY,Vp=Wp.FRAME,qp=function(e){function t(t){var n;return(n=e.call(this,t)||this).background=void 0,n.text=void 0,n.textFontSize=12,n.setSize(79,26),n.createBackground(),n.createLevelText(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=this.scene.add.image(0,0,jp,Vp.COIN_TOP_PANEL);e.setWorldSize(79,26),this.add(e),this.background=e},n.createLevelText=function(){var e=this.scene.make.bitmapText({font:eo.Z.MIKADO.KEY,size:this.scene.fontSize(this.textFontSize),text:"Level 1",origin:{x:.5,y:.5}});e.setTint(0),this.add(e),this.text=e},n.updateLevelText=function(e){for(this.text.setText("Level "+e);this.isTextOverflow();){if(this.textFontSize--,this.textFontSize<=0){this.textFontSize=1;break}var t=this.scene.fontSize(this.textFontSize);this.text.setFontSize(t)}},n.isTextOverflow=function(){return this.text.width>=this.background.width-10},t}(Phaser.GameObjects.Container),Xp=qp,Jp=ys.Z.GAME_PLAY,Qp=Jp.KEY,$p=Jp.FRAME,ef=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.pauseButton=void 0,n.restartButton=void 0,n.levelBar=void 0,n.handlePause=function(){n.scene.scene.switch(Yi.C.PAUSE_SCENE)},n.handleRestart=(0,s.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.isWinOrLose(),!n.scene.gameManager.isCanUndo()||t){e.next=8;break}return e.next=5,n.scene.showInterstitialAd();case 5:n.scene.restartLevel(),n.scene.gameManager.hideHint(),n.scene.gameManager.showHint();case 8:case"end":return e.stop()}}),e)}))),n.scene=t,n.scene.add.existing((0,vs.Z)(n)),n.createButtons(),n.createLevelBar(),n.createEvents(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createButtons=function(){this.createPauseButton(),this.createRestartButton()},n.createEvents=function(){this.pauseButton.onClick=this.handlePause,this.restartButton.onClick=this.handleRestart},n.createPauseButton=function(){this.pauseButton=new Vs.Z(this.scene,Qp,$p.BUTTON_CIRCLE_BLUE,41,41),this.pauseButton.setName("PauseButton");var e=this.scene.make.image({key:Qp,frame:$p.ICON_PAUSE});e.setWorldSize(23.5,25),this.pauseButton.add(e),Phaser.Display.Align.In.Center(e,this.pauseButton),this.add(this.pauseButton),Phaser.Display.Align.In.Center(this.pauseButton,this,-152.5,0)},n.createRestartButton=function(){this.restartButton=new Vs.Z(this.scene,Qp,$p.BUTTON_CIRCLE_BLUE,41,41),this.restartButton.setName("RestartButton");var e=this.scene.make.image({key:Qp,frame:$p.ICON_RETURN});e.setWorldSize(24.5,24.5),this.restartButton.add(e),Phaser.Display.Align.In.Center(e,this.restartButton),this.add(this.restartButton),Phaser.Display.Align.In.Center(this.restartButton,this,151,0)},n.createLevelBar=function(){var e=new Xp(this.scene);this.add(e),this.levelBar=e},n.updateLevelText=function(e){this.levelBar.updateLevelText(e)},n.setDisable=function(e){this.pauseButton.setDisabled(e),this.restartButton.setDisabled(e)},n.isWinOrLose=function(){var e=this.scene.gameManager.isWin(),t=this.scene.gameManager.isLose();return!(!e&&!t)},t}(Phaser.GameObjects.Container),tf=ef,nf=ys.Z.DEFAULT,rf=nf.KEY,af=nf.FRAME,sf=function(e){function t(t){var n;return(n=e.call(this,t,rf)||this).leftConfettiEmitter=void 0,n.leftRibbonEmitter=void 0,n.rightConfettiEmitter=void 0,n.rightRibbonEmitter=void 0,n.listEmitter=[],n.setDepth(nr.Z.ON_TOP),n.createExplodeAnimation(),n.scene.add.existing((0,vs.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createExplodeAnimation=function(){var e=1/this.scene.world.getPixelRatio(),t=this.scene.world.getWorldSize(),n=t.width,i=(t.height,[af.CONFETTI_PARTICLE_1,af.CONFETTI_PARTICLE_2,af.CONFETTI_PARTICLE_3,af.CONFETTI_PARTICLE_4,af.CONFETTI_PARTICLE_5,af.CONFETTI_PARTICLE_6,af.CONFETTI_PARTICLE_7]),r=[7195886,10149736,13328216,15697845],a=[af.RIBBON_PARTICLE_1,af.RIBBON_PARTICLE_2,af.RIBBON_PARTICLE_3,af.RIBBON_PARTICLE_4,af.RIBBON_PARTICLE_5,af.RIBBON_PARTICLE_6],s={frame:i,tint:r,x:-n/2-20,y:0,speed:{min:200,max:2e3},gravityY:250,scale:{start:.1*e,end:.8*e,ease:Phaser.Math.Easing.Expo.Out},angle:{start:270,end:360,steps:30},alpha:{start:1,end:0,ease:Phaser.Math.Easing.Expo.In},lifespan:{min:1500,max:2e3},maxParticles:0,on:!1,particleClass:of},o={frame:a,tint:r,x:-n/2-20,y:0,speed:{min:1500,max:1800},angle:{start:272,end:360,steps:7},gravityY:0,gravityX:0,lifespan:400,scale:{start:.1*e,end:.55*e,ease:Phaser.Math.Easing.Expo.Out},alpha:{start:1,end:0,ease:Phaser.Math.Easing.Linear},maxParticles:0,on:!1,particleClass:cf},c={frame:i,tint:r,x:n/2+20,y:0,speed:{min:200,max:2e3},gravityY:250,scale:{start:.1*e,end:.8*e,ease:Phaser.Math.Easing.Expo.Out},angle:{start:180,end:270,steps:30},alpha:{start:1,end:0,ease:Phaser.Math.Easing.Expo.In},lifespan:{min:1500,max:2e3},maxParticles:0,on:!1,particleClass:of},u={frame:a,tint:r,x:n/2+20,y:0,speed:{min:1500,max:1800},angle:{start:180,end:268,steps:7},gravityY:0,gravityX:0,lifespan:400,scale:{start:.1*e,end:.55*e,ease:Phaser.Math.Easing.Expo.Out},alpha:{start:1,end:0,ease:Phaser.Math.Easing.Linear},maxParticles:0,on:!1,particleClass:cf};this.leftConfettiEmitter=this.createEmitter(s),this.leftRibbonEmitter=this.createEmitter(o),this.rightConfettiEmitter=this.createEmitter(c),this.rightRibbonEmitter=this.createEmitter(u),this.listEmitter=[this.leftConfettiEmitter,this.leftRibbonEmitter,this.rightConfettiEmitter,this.rightRibbonEmitter]},n.explode=function(e,t){this.leftConfettiEmitter.flow(1e5,30),this.leftRibbonEmitter.flow(1e5,7),this.rightConfettiEmitter.flow(1e5,30),this.rightRibbonEmitter.flow(1e5,7),this.scene.time.delayedCall(500,this.stop.bind(this))},n.stop=function(){this.listEmitter.forEach((function(e){e.stop()}))},n.killAll=function(){var e=this;this.listEmitter.forEach((function(t){t.killAll(),t.forEachDead((function(e){e.resetPosition()}),e)}))},t}(Phaser.GameObjects.Particles.ParticleEmitterManager),of=function(e){function t(t){var n;return(n=e.call(this,t)||this).windX=1,n.airFrictionX=.05,n.airFrictionY=.01,n._lastRotation=0,n.airFrictionX=.01*Math.random()+.01,n.airFrictionY=.004*Math.random()+.006,(0,vs.Z)(n)||(0,vs.Z)(n)}return(0,o.Z)(t,e),t.prototype.update=function(t,n,i){for(var r=e.prototype.update.call(this,t,n,i),a=t;a>16.67;)this.velocityX-=uf(this.velocityX,.2,this.airFrictionX)/60,this.velocityY-=uf(this.velocityY,.2,this.airFrictionY)/60,a-=16.67;return this.velocityX-=uf(this.velocityX,.2,this.airFrictionX)*a/1e3,this.velocityY-=uf(this.velocityY,.2,this.airFrictionY)*a/1e3,this.rotation=this._lastRotation+Math.random()*Math.PI/180*4*t/16.67,this._lastRotation=this.rotation,r},t}(Phaser.GameObjects.Particles.Particle),cf=function(e){function t(t){var n;return n=e.call(this,t)||this,(0,vs.Z)(n)||(0,vs.Z)(n)}return(0,o.Z)(t,e),t.prototype.update=function(t,n,i){for(var r=e.prototype.update.call(this,t,n,i),a=Math.atan(this.velocityY/this.velocityX),s=t;s>16.67;){var o=Math.sqrt(Math.pow(this.velocityX,2)+Math.pow(this.velocityY,2));o-=uf(o,.2,.01)/60,this.velocityX=Math.sign(this.velocityX)*o*Math.abs(Math.cos(a)),this.velocityY=Math.sign(this.velocityY)*o*Math.abs(Math.sin(a)),s-=16.67}var c=Math.sqrt(Math.pow(this.velocityX,2)+Math.pow(this.velocityY,2));return c-=uf(c,.2,.01)*s/1e3,this.velocityX=Math.sign(this.velocityX)*c*Math.abs(Math.cos(a)),this.velocityY=Math.sign(this.velocityY)*c*Math.abs(Math.sin(a)),this.rotation=a,r},t}(Phaser.GameObjects.Particles.Particle),uf=function(e,t,n){return void 0===t&&(t=.1),void 0===n&&(n=.04),t*e+Math.sign(e)*n*e*e},lf=sf,hf=ys.Z.DEFAULT,df=hf.KEY,pf=hf.FRAME,ff=function(e){function t(t){var n;(n=e.call(this,t,df,pf.BUTTON_LONG_BLUE,173,51)||this).animation=void 0,n.setName("NextLevelButton");var i=t.add.container(),r=n.scene.make.image({key:df,frame:pf.ICON_NEXT_LEVEL});r.setWorldSize(27.5,30);var a=n.scene.make.bitmapText({font:eo.Z.PRIMARY.KEY,size:n.scene.fontSize(20),text:"NEXT",origin:{x:.5,y:.5}});return i.add([r,a]),r.setPosition(-40,0),a.setPosition(13,0),n.add(i),n}(0,o.Z)(t,e);var n=t.prototype;return n.runAnimation=function(){var e,t,n=this;null==(e=this.animation)||e.remove(),this.animation=new Zs({targets:[this],duration:1e3,props:{scale:{from:.9,to:1}}}),null==(t=this.animation)||t.play(),this.hitZone.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,(function(){var e;null==(e=n.animation)||e.stop()})),this.hitZone.on(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,(function(){var e,t;null!=(e=n.animation.tween)&&e.isPlaying()||null==(t=n.animation)||t.play()}))},n.setDisabled=function(e){var t,n;e?null==(t=this.hitArea)||t.disableInteractive():null==(n=this.hitArea)||n.setInteractive()},t}(Vs.Z),mf=ff,gf=ys.Z.DEFAULT,vf=gf.KEY,yf=gf.FRAME,bf=function(e){function t(t,n,i,r){var a;return(a=e.call(this,t,n,i,r)||this).scene=void 0,a.stars=[],a.emptyStars=[],a.cat=void 0,a.ribbonContainer=void 0,a.levelText=void 0,a.buttonsContainer=void 0,a.nextLevelButton=void 0,a.catShowUpAnimation=void 0,a.ribbonShowUpAnimation=void 0,a.levelTextShowUpAnimation=void 0,a.buttonsContainerShowUpAnimation=void 0,a.backgroundShowUpAnimation=void 0,a.starShowUpAnimations=[],a.starMoveUpAnimations=[],a.screenExitAnimation=void 0,a.levelCompleteParticle=void 0,a.showAdAfterDelay=void 0,a.open=function(){e.prototype.open.call((0,vs.Z)(a));var t=a.scene.gameManager.levelConfig.level;a.setLevelText(t),a.setDisableButton(!0),a.runScreenShowUpAnimation(),a.scene.audio.playSound(po.Z.YOU_WIN)},a.handleShare=function(){a.scene.storage.dispatch(fh())},a.handleNextLevel=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.setDisableButton(!0),a.runScreenExitAnimation((0,s.Z)(u().mark((function e(){var t,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a.scene.level.getLevel()>GameCore.Configs.Level.maxLevel)){e.next=4;break}return a.scene.scene.switch(Yi.C.COMPLETE_ALL_LEVEL_SCENE),e.abrupt("return");case 4:if(a.scene.level.getLevelData()){e.next=20;break}return t=a.scene.game,n=t.globalScene,t.audio,n.screen.open(ir.o4.NOTIFY_SCREEN,{message:"Loading...",duration:0,loading:!0}),e.prev=8,e.next=11,a.scene.level.preloadLevelDataAsync();case 11:if(void 0!==e.sent){e.next=14;break}throw new Error("Can not load new level!");case 14:n.screen.close(ir.o4.NOTIFY_SCREEN),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(8),n.screen.open(ir.o4.NOTIFY_SCREEN,{message:"Can not load new level!\nPlease restart game.",duration:0,loading:!1});case 20:a.scene.screen.close(a.name),a.scene.levelUp();case 22:case"end":return e.stop()}}),e,null,[[8,17]])}))));case 2:case"end":return e.stop()}}),e)}))),a.scene=t,a.createEmptyStars(),a.createStars(),a.createHappyCat(),a.createRibbon(),a.createLevelText(),a.createButtonsContainer(),a.createLevelCompleteParticle(),a.alignObjects(),a.createInputs(),a.setDepth(ir.Ks.POPUP),a}(0,o.Z)(t,e);var n=t.prototype;return n.createStars=function(){var e=this,t=Array(3).fill(null).map((function(t){var n=e.scene.add.image(0,0,vf,yf.STAR);return n.setWorldSize(58.5,56.5),n}));this.stars=t},n.createEmptyStars=function(){var e=this;this.emptyStars=Array(3).fill(null).map((function(t){var n=e.scene.add.image(0,0,vf,yf.EMPTY_STAR);return n.setWorldSize(58.5,56.5),n}))},n.createHappyCat=function(){var e=this.scene.add.image(0,0,vf,yf.HAPPY_CAT);e.setWorldSize(125.5,125),this.cat=e},n.createRibbon=function(){var e=this.scene.add.container();e.setSize(211,40.5);var t=this.scene.make.image({key:vf,frame:yf.RIBBON_RED});t.setWorldSize(205,38);var n=this.scene.make.bitmapText({font:eo.Z.PRIMARY.KEY,size:this.scene.fontSize(25),text:"COMPLETED",origin:{x:.5,y:.5}});e.add([t,n]),t.setPosition(5,0),n.setPosition(2,1),this.ribbonContainer=e},n.createLevelText=function(){this.levelText=this.scene.make.bitmapText({font:eo.Z.MIKADO.KEY,size:this.scene.fontSize(44),text:"Level 1",origin:{x:.5,y:.5}}),this.levelText.setCenterAlign()},n.setLevelText=function(e){this.levelText.setText("Level "+e)},n.createButtonsContainer=function(){this.buttonsContainer=this.scene.add.container(),this.nextLevelButton=new mf(this.scene),this.buttonsContainer.add([this.nextLevelButton])},n.createLevelCompleteParticle=function(){this.levelCompleteParticle=new lf(this.scene)},n.alignObjects=function(){var e=this.stars,t=e[0],n=e[1],i=e[2],r=this.emptyStars,a=r[0],s=r[1],o=r[2];this.add([a,s,o,t,n,i,this.cat,this.ribbonContainer,this.levelText,this.buttonsContainer,this.levelCompleteParticle]),this.moveAbove(this.levelCompleteParticle,this.ribbonContainer),t.setPosition(-75,-220),n.setY(-240),i.setPosition(75,-220),a.setPosition(-75,-220),s.setY(-240),o.setPosition(75,-220),this.cat.setY(-150),Phaser.Display.Align.In.Center(this.ribbonContainer,this,0,-105),Phaser.Display.Align.In.Center(this.levelText,this),Phaser.Display.Align.In.Center(this.buttonsContainer,this,0,130)},n.createInputs=function(){this.nextLevelButton.onClick=this.handleNextLevel},n.setDisableButton=function(e){this.nextLevelButton.setDisabled(e)},n.setOverlayAlpha=function(e){return this.scene.setOuterOverlayAlpha(e)},n.runScreenShowUpAnimation=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i,r,a,s,o,c,l,h,d,p,f,m,g,v,y,b,A,S,E,w,C,T,I,x=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==(t=this.catShowUpAnimation)||t.remove(),null==(n=this.ribbonShowUpAnimation)||n.remove(),null==(i=this.levelTextShowUpAnimation)||i.remove(),null==(r=this.buttonsContainerShowUpAnimation)||r.remove(),null==(a=this.backgroundShowUpAnimation)||a.remove(),s=this.cat,o=s.x,c=s.y,l=s.scale,h=this.ribbonContainer,d=h.x,p=h.y,f=h.scale,m=this.levelText,g=m.x,v=m.y,y=m.scale,b=this.buttonsContainer,A=b.x,S=b.y,E=b.scale,this.cat.setAlpha(0),this.ribbonContainer.setAlpha(0),this.levelText.setAlpha(0),this.buttonsContainer.setAlpha(0),this.background.setAlpha(0),this.setOverlayAlpha(0),this.stars.forEach((function(e){return e.setAlpha(0)})),w=this.getShowUpTweenConfig([this.cat],300,c,l,(function(){return x.cat.setPosition(o,c)})),C=this.getShowUpTweenConfig([this.ribbonContainer],0,p,f,(function(){return x.ribbonContainer.setPosition(d,p)})),T=this.getShowUpTweenConfig([this.levelText],300,v,y,(function(){x.levelText.setPosition(g,v)})),this.setDisableButton(!1),I=this.getShowUpTweenConfig([this.buttonsContainer],600,S,E,(function(){x.buttonsContainer.setPosition(A,S)})),this.backgroundShowUpAnimation=this.scene.tweens.add({targets:[this.background],duration:300,ease:Phaser.Math.Easing.Sine.In,alpha:{from:0,to:.8},onStart:function(){x.background.setAlpha(0),x.setOverlayAlpha(0)},onUpdate:function(){x.setOverlayAlpha(x.background.alpha)},onComplete:function(){x.background.setAlpha(.8),x.setOverlayAlpha(.8)}}),this.scene.time.delayedCall(200,(function(){var e=x.scene.world.getWorldSize().width;x.scene.audio.playSound(po.Z.CONFETTI),x.levelCompleteParticle.explode(e/2+50,0)})),this.catShowUpAnimation=this.scene.tweens.add(w),this.ribbonShowUpAnimation=this.scene.tweens.add(C),this.levelTextShowUpAnimation=this.scene.tweens.add(T),this.buttonsContainerShowUpAnimation=this.scene.tweens.add(I),this.nextLevelButton.runAnimation(),e.next=30,this.runStarAnimations();case 30:if(1!==this.scene.gameManager.levelConfig.level){e.next=33;break}return e.abrupt("return");case 33:this.showAdAfterDelay=this.scene.time.delayedCall(1700,(function(){x.scene.showInterstitialAd()}));case 34:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runStarAnimations=function(){var e=(0,s.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.starShowUpAnimations.forEach((function(e){return e.remove()})),this.starShowUpAnimations=[],this.starMoveUpAnimations.forEach((function(e){return e.remove()})),this.starMoveUpAnimations=[],t=this.stars.map((function(e){return{x:e.x,y:e.y,scale:e.scale}})),this.stars.forEach((function(e){return e.setAlpha(0)})),this.emptyStars.forEach((function(e){return e.setAlpha(1)})),e.next=9,this.runStarShowUpAnimations(t);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runStarShowUpAnimations=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.stars.map((function(e,n){var r=t[n].scale;return new Promise((function(t){var a=i.scene.tweens.add({targets:e,duration:300,delay:500+360*n,props:{scale:{from:3*r,to:1*r,ease:Phaser.Math.Easing.Quadratic.Out},alpha:{from:.5,to:1},angle:{from:0,to:0,ease:Phaser.Math.Easing.Quadratic.Out}},onComplete:function(){t()}});i.starShowUpAnimations.push(a)}))})),e.next=3,Promise.all(n);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.runStarMoveUpAnimations=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.stars.map((function(e,n){return new Promise((function(r){var a=i.scene.tweens.add({targets:[e,i.emptyStars[n]],duration:200,ease:Phaser.Math.Easing.Expo.Out,props:{x:t[n].x,y:t[n].y},onComplete:function(){r()}});i.starMoveUpAnimations.push(a)}))})),e.next=3,Promise.all(n);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.runScreenExitAnimation=function(e){var t,n=this;null==(t=this.screenExitAnimation)||t.remove();var i=[].concat(this.stars,this.emptyStars,[this.cat,this.ribbonContainer,this.levelText,this.buttonsContainer,this.background]);this.screenExitAnimation=this.scene.tweens.add({targets:i,duration:200,alpha:0,ease:Phaser.Math.Easing.Quadratic.Out,onUpdate:function(){var e=n.background.alpha;n.setOverlayAlpha(e)},onComplete:function(){n.ribbonContainer.setAlpha(0),n.levelText.setAlpha(0),n.buttonsContainer.setAlpha(0),n.background.setAlpha(0),n.setOverlayAlpha(0),null==e||e()}})},n.getShowUpTweenConfig=function(e,t,n,i,r){return{targets:e,delay:t,props:{y:{from:n+200,to:n,ease:Phaser.Math.Easing.Back.Out,duration:500},alpha:{from:0,to:1,ease:Phaser.Math.Easing.Cubic.Out,duration:500},scale:{from:i-.15,to:i,ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45],duration:200}},onComplete:function(){null==r||r()}}},t}(GameCore.Screen),Af=bf,Sf=ys.Z.DEFAULT,Ef=Sf.KEY,wf=Sf.FRAME,Cf=function(e){function t(t){var n;(n=e.call(this,t,Ef,wf.BUTTON_LONG_BLUE,173,51)||this).setName("RetryButton");var i=n.scene.make.image({key:ys.Z.GAME_PLAY.KEY,frame:ys.Z.GAME_PLAY.FRAME.ICON_RETURN_BIG});i.setWorldSize(28,28);var r=n.scene.make.bitmapText({font:eo.Z.PRIMARY.KEY,size:n.scene.fontSize(20),text:"RETRY",origin:{x:.5,y:.5}});return n.add([i,r]),i.setPosition(-40,0),r.setPosition(13,0),n}return(0,o.Z)(t,e),t.prototype.setDisabled=function(e){var t,n;e?null==(t=this.hitArea)||t.disableInteractive():null==(n=this.hitArea)||n.setInteractive()},t}(Vs.Z),Tf=Cf,If=ys.Z.DEFAULT,xf=If.KEY,kf=If.FRAME,Pf=function(e){function t(t,n,i,r){var a;return(a=e.call(this,t,n,i,r)||this).ribbonContainer=void 0,a.cat=void 0,a.outOfMovesText=void 0,a.buttonsContainer=void 0,a.skipButton=void 0,a.retryButton=void 0,a.ribbonShowUpAnimation=void 0,a.catShowUpAnimation=void 0,a.buttonsContainerShowUpAnimation=void 0,a.backgroundShowUpAnimation=void 0,a.screenExitAnimation=void 0,a.outOfMovesTextAnimation=void 0,a.showAdAfterDelay=void 0,a.holdDownShowBirdsButton=!1,a.pulsateBubbleAnimation=void 0,a.isSkipButtonClicked=!1,a.isRetryButtonClicked=!1,a.open=function(){e.prototype.open.call((0,vs.Z)(a));var t=a.scene.gameManager.levelConfig.level;a.setLevelText(t),a.runOutOfMovesTextAnimation(),a.holdDownShowBirdsButton=!1,a.isRetryButtonClicked=!1,a.isSkipButtonClicked=!1,a.scene.audio.playSound(po.Z.YOU_LOSE)},a.handleShare=function(){a.scene.storage.dispatch(fh())},a.handleSkip=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.isSkipButtonClicked&&!a.isRetryButtonClicked){e.next=2;break}return e.abrupt("return");case 2:return a.isSkipButtonClicked=!0,e.next=5,a.closeScreenAndShowAd();case 5:a.scene.win();case 6:case"end":return e.stop()}}),e)}))),a.handleRetry=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.isRetryButtonClicked&&!a.isSkipButtonClicked){e.next=2;break}return e.abrupt("return");case 2:return a.isRetryButtonClicked=!0,e.next=5,a.closeScreenAndShowAd();case 5:a.scene.restartLevel();case 6:case"end":return e.stop()}}),e)}))),a.handleShowBirds=function(){a.holdDownShowBirdsButton=!0,a.runScreenExitAnimation()},a.createRibbon(),a.createSadCat(),a.createButtonsContainer(),a.createSkipButton(),a.createRetryButton(),a.createOutOfMovesText(),a.alignObjects(),a.createInputs(),a.setDepth(ir.Ks.POPUP),a}(0,o.Z)(t,e);var n=t.prototype;return n.createRibbon=function(){var e=this.scene.add.container(),t=this.scene.make.image({key:xf,frame:kf.RIBBON_GREY}),n=this.scene.make.bitmapText({font:eo.Z.PRIMARY.KEY,size:this.scene.fontSize(25),text:"TRY AGAIN",origin:{x:.5,y:.5}});e.setSize(211,40.5),t.setWorldSize(205,38),e.add([t,n]),t.setPosition(5,0),n.setPosition(2,1),this.ribbonContainer=e},n.createSadCat=function(){var e=this.scene.add.image(0,0,xf,kf.SAD_CAT);e.setWorldSize(141,140),this.cat=e},n.setLevelText=function(e){},n.createButtonsContainer=function(){this.buttonsContainer=this.scene.add.container()},n.createSkipButton=function(){var e=new Vs.Z(this.scene,xf,kf.BUTTON_LONG_GREEN,173,51);e.setName("SkipButton");var t=this.scene.add.image(0,0,xf,kf.ICON_AD);t.setWorldSize(33,28);var n=this.scene.make.bitmapText({font:eo.Z.PRIMARY.KEY,size:this.scene.fontSize(20),text:"SKIP",origin:{x:.5,y:.5}});e.add([t,n]),t.setX(-45),n.setPosition(10,2),this.buttonsContainer.add(e),this.skipButton=e},n.createRetryButton=function(){this.retryButton=new Tf(this.scene),this.buttonsContainer.add(this.retryButton),this.retryButton.setY(68)},n.createOutOfMovesText=function(){this.outOfMovesText=this.scene.make.bitmapText({font:eo.Z.MIKADO.KEY,size:this.scene.fontSize(36),text:"OUT OF MOVES",origin:{x:.5,y:.5}})},n.alignObjects=function(){this.add([this.ribbonContainer,this.cat,this.buttonsContainer,this.outOfMovesText]),Phaser.Display.Align.In.Center(this.ribbonContainer,this,0,-130),Phaser.Display.Align.In.Center(this.buttonsContainer,this,0,110),Phaser.Display.Align.In.Center(this.outOfMovesText,this)},n.createInputs=function(){var e=this;this.skipButton.onClick=this.handleSkip,this.retryButton.onClick=this.handleRetry,this.scene.input.on("pointerup",(function(){e.holdDownShowBirdsButton&&(e.holdDownShowBirdsButton=!1,e.runScreenShowUpAnimation(!0))}))},n.closeScreenAndShowAd=function(){var e=(0,s.Z)(u().mark((function e(){var t=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.runScreenExitAnimation((function(){return t.scene.screen.close(t.name)})),!this.showAdAfterDelay.hasDispatched){e.next=3;break}return e.abrupt("return");case 3:return this.showAdAfterDelay.destroy(),e.next=6,this.scene.showInterstitialAd();case 6:this.showAdAfterDelay.remove();case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.setOverlayAlpha=function(e){return this.scene.setOuterOverlayAlpha(e)},n.runOutOfMovesTextAnimation=function(){var e,t,n=this;null==(e=this.outOfMovesTextAnimation)||e.remove(),null==(t=this.backgroundShowUpAnimation)||t.remove(),this.ribbonContainer.setAlpha(0),this.cat.setAlpha(0),this.buttonsContainer.setAlpha(0),this.background.setAlpha(0),this.setOverlayAlpha(0),this.outOfMovesText.setAlpha(0);var i=this.outOfMovesText,r=i.y,a=i.scale;this.backgroundShowUpAnimation=this.scene.tweens.add({targets:[this.background],duration:300,ease:Phaser.Math.Easing.Sine.Out,alpha:{from:0,to:.8},onStart:function(){n.background.setAlpha(0),n.setOverlayAlpha(0)},onUpdate:function(){n.setOverlayAlpha(n.background.alpha)},onComplete:function(){n.background.setAlpha(.8),n.setOverlayAlpha(.8)}});var s=this.getShowUpTweenConfig([this.outOfMovesText],0,r,a,(function(){n.scene.tweens.add({targets:[n.outOfMovesText],duration:400,ease:Phaser.Math.Easing.Sine.Out,props:{alpha:{from:1,to:0}},onComplete:function(){n.runScreenShowUpAnimation(),n.showAdAfterDelay=n.scene.time.delayedCall(1200,(function(){n.scene.showInterstitialAd()}))}})}));this.outOfMovesTextAnimation=this.scene.tweens.add(s)},n.runScreenShowUpAnimation=function(e){var t,n,i,r,a=this;void 0===e&&(e=!1),null==(t=this.ribbonShowUpAnimation)||t.remove(),null==(n=this.catShowUpAnimation)||n.remove(),null==(i=this.buttonsContainerShowUpAnimation)||i.remove(),null==(r=this.backgroundShowUpAnimation)||r.remove();var s=this.ribbonContainer,o=s.x,c=s.y,u=s.scale,l=this.cat,h=l.x,d=l.y,p=l.scale,f=this.buttonsContainer,m=f.x,g=f.y,v=f.scale;this.ribbonContainer.setAlpha(0),this.cat.setAlpha(0),this.buttonsContainer.setAlpha(0),e&&(this.background.setAlpha(0),this.setOverlayAlpha(0));var y=this.getShowUpTweenConfig([this.ribbonContainer],0,c,u,(function(){return a.ribbonContainer.setPosition(o,c)})),b=this.getShowUpTweenConfig([this.cat],0,d,p,(function(){return a.cat.setPosition(h,d)})),A=this.getShowUpTweenConfig([this.buttonsContainer],200,g,v,(function(){a.buttonsContainer.setPosition(m,g)}));this.ribbonShowUpAnimation=this.scene.tweens.add(y),this.catShowUpAnimation=this.scene.tweens.add(b),this.buttonsContainerShowUpAnimation=this.scene.tweens.add(A),e&&(this.backgroundShowUpAnimation=this.scene.tweens.add({targets:[this.background],duration:300,ease:Phaser.Math.Easing.Sine.Out,alpha:{from:0,to:.8},onStart:function(){a.background.setAlpha(0),a.setOverlayAlpha(0)},onUpdate:function(){a.setOverlayAlpha(a.background.alpha)},onComplete:function(){a.background.setAlpha(.8),a.setOverlayAlpha(.8)}}))},n.runScreenExitAnimation=function(e){var t,n=this;null==(t=this.screenExitAnimation)||t.remove(),this.screenExitAnimation=this.scene.tweens.add({targets:[this.ribbonContainer,this.cat,this.buttonsContainer,this.background],duration:200,alpha:0,ease:Phaser.Math.Easing.Quadratic.Out,onUpdate:function(){n.setOverlayAlpha(n.background.alpha)},onComplete:function(){n.ribbonContainer.setAlpha(0),n.cat.setAlpha(0),n.buttonsContainer.setAlpha(0),n.background.setAlpha(0),n.setOverlayAlpha(0),e&&e()}})},n.getShowUpTweenConfig=function(e,t,n,i,r){return{targets:e,delay:t,props:{y:{from:n+150,to:n,ease:Phaser.Math.Easing.Back.Out,duration:500},alpha:{from:0,to:1,ease:Phaser.Math.Easing.Cubic.Out,duration:500},scale:{from:.85*i,to:i,ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45],duration:1e3}},onComplete:function(){r&&r()}}},t}(GameCore.Screen),Lf=Pf,Of=ys.Z.DEFAULT,Rf=Of.KEY,Df=Of.FRAME,Bf=GameCore.Configs,Nf=Bf.Network,Mf=Bf.Match,_f=function(e){function t(t,n,i,r){var a;return(a=e.call(this,t,n,i,r)||this).isUseRescue=void 0,a.countdownText=void 0,a.countdownTimer=void 0,a.countdownCount=void 0,a.progressColor=0,a.progressTween=void 0,a.progressCircle=void 0,a.progressAngle=void 0,a.progressSize=void 0,a.progressRadius=void 0,a.skipText=void 0,a.continueButton=void 0,a.continueButtonAnimation=void 0,a.adsTimer=void 0,a.open=function(){e.prototype.open.call((0,vs.Z)(a)),a.isUseRescue=!1,a.progressColor=4249855,a.countdownCount=Mf.RescueGamePopupTimeout,a.setTime(a.countdownCount),a.runCountdown(),a.runContinueButtonAnimation()},a.handleShowRewardedVideoAd=(0,s.Z)(u().mark((function e(){var t,n,i,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.scene.game,n=t.globalScene,i=t.audio,e.prev=1,!a.isUseRescue){e.next=4;break}return e.abrupt("return");case 4:return a.scene.storage.dispatch((function(e,t){var n=t(),i=ua(n).level,r=void 0===i?0:i,a=Br(n);window.game.analytics.event(At._.MATCH_RESCUE,{game_mode:GameCore.Utils.String.toUpperCamelCase(a),level:r,level_name:"level_"+r}),e({type:rn,payload:{}})})),a.isUseRescue=!0,a.progressTween.pause(),a.countdownTimer.remove(),n.screen.open(ir.o4.NOTIFY_SCREEN,{message:"Loading ads...",duration:0,loading:!0}),i.pauseMusic(),e.next=12,new Promise((function(e,t){var n;null==(n=a.adsTimer)||n.remove(),a.adsTimer=a.scene.time.delayedCall(Nf.Timeout,t),a.scene.ads.getAdStatus(GameCore.Ads.Types.REWARDED)===GameCore.Ads.Status.LOADING?a.scene.ads.events.once(GameCore.Ads.Events.LOADED,e):a.scene.ads.preloadRewardedVideoAsync().then(e).catch(t)}));case 12:return e.next=14,a.scene.ads.showRewardedVideoAsync();case 14:a.scene.ads.preloadRewardedVideoAsync().catch((function(e){})),n.screen.events.off(GameCore.Screens.Events.CLOSE),ms.emit(Jh.RESCUE),n.screen.close(ir.o4.NOTIFY_SCREEN),e.next=27;break;case 20:if(e.prev=20,e.t0=e.catch(1),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=26;break}if("USER_INPUT"!==e.t0.code){e.next=26;break}return a.showNotifySkipAds(),e.abrupt("return");case 26:a.showNotifyNoAds();case 27:return e.prev=27,null==(r=a.adsTimer)||r.destroy(),a.scene.audio.playMusic(),a.scene.screen.close(a.name),e.finish(27);case 32:case"end":return e.stop()}}),e,null,[[1,20,27,32]])}))),a.showNotifyNoAds=function(e){if(!e||e.name===ir.o4.NOTIFY_SCREEN){var t=a.scene.game.globalScene;t.screen.events.off(GameCore.Screens.Events.CLOSE),t.screen.events.once(GameCore.Screens.Events.CLOSE,a.showGameOver),t.screen.open(ir.o4.NOTIFY_SCREEN,{message:"No ads to display!",duration:2e3,loading:!1})}},a.showNotifySkipAds=function(){var e=a.scene.game.globalScene;e.screen.events.off(GameCore.Screens.Events.CLOSE),e.screen.events.once(GameCore.Screens.Events.CLOSE,a.showGameOver),e.screen.open(ir.o4.NOTIFY_SCREEN,{message:"Sorry, No Rewards!\nYou have cancelled the ad!",duration:3e3,loading:!1})},a.showGameOver=function(e){e&&e.name!==ir.o4.NOTIFY_SCREEN||(a.countdownTimer.remove(),a.progressTween.pause(),a.scene.screen.close(a.name),a.scene.storage.dispatch(os()))},a.handleSkip=function(){a.countdownTimer.remove(),a.progressTween.pause(),a.scene.screen.close(a.name),a.scene.storage.dispatch(os())},a.handleRunCountdown=function(){if(a.countdownCount-=1,5===a.countdownCount&&(a.progressColor=15812177),a.countdownCount<=0)return a.countdownTimer.remove(),a.progressTween.complete(),void a.rescueTimeout();a.setTime(a.countdownCount)},a.progressColor=0,a.progressAngle=-90,a.progressSize=15,a.progressRadius=70,a.countdownCount=Mf.MaxRescueCount,a.setDepth(ir.Ks.POPUP),a.background.setAlpha(.8),a.createContent(),a}(0,o.Z)(t,e);var n=t.prototype;return n.createContent=function(){this.createProgressCircle(),this.createCountdown(),this.createContinueButton(),this.createSkipText()},n.createCountdown=function(){this.countdownText=this.scene.make.bitmapText({size:this.scene.fontSize(75),font:eo.Z.PRIMARY.KEY,origin:{x:.6,y:.5}}),this.add(this.countdownText),this.setTime(this.countdownCount)},n.runCountdown=function(){var e={delay:1e3,loop:!0,callback:this.handleRunCountdown};this.countdownTimer=this.scene.time.addEvent(e),this.startProgressCircle()},n.setProgressCircle=function(e){var t=this.countdownText,n=t.x,i=t.y,r=Phaser.Math.DegToRad(e-360+this.progressAngle),a=Phaser.Math.DegToRad(this.progressAngle);this.progressCircle.clear(),this.progressCircle.beginPath(),this.progressCircle.lineStyle(this.progressSize,this.progressColor),this.progressCircle.arc(n,i,this.progressRadius,r,a,!0,.02),this.progressCircle.strokePath(),this.progressCircle.closePath()},n.setTime=function(e){this.countdownText.setText(""+e),Phaser.Display.Align.In.Center(this.countdownText,this.zone,0,-120)},n.createProgressCircle=function(){this.progressCircle=this.scene.add.graphics(),this.add(this.progressCircle)},n.startProgressCircle=function(){var e=this;this.progressTween=this.scene.tweens.addCounter({from:360,to:0,duration:1e3*Mf.RescueGamePopupTimeout,onUpdate:function(t){var n=+t.getValue().toFixed(2);e.setProgressCircle(n)}})},n.createContinueButton=function(){this.continueButton=new Vs.Z(this.scene,Rf,Df.BLANK,232,68),this.continueButton.setName("Continue"),this.add(this.continueButton),this.continueButton.onClick=this.handleShowRewardedVideoAd;var e=this.scene.add.image(0,0,Rf,Df.BLANK);Phaser.Display.Align.In.Center(e,this.continueButton),e.setWorldSize(36.5,33.5),e.setX(this.continueButton.x-70),this.continueButton.add(e);var t=this.scene.make.bitmapText({size:this.scene.fontSize(28),text:"CONTINUE",font:eo.Z.PRIMARY.KEY,origin:{x:.35,y:.55}});this.continueButton.add(t),Phaser.Display.Align.In.Center(this.continueButton,this.zone,0,30)},n.createSkipText=function(){this.skipText=new Vs.Z(this.scene,Rf,Df.BLANK,128,24),this.skipText.setName("NoThanks"),this.add(this.skipText),this.skipText.onClick=this.handleSkip,Phaser.Display.Align.In.BottomCenter(this.skipText,this.continueButton,0,60)},n.rescueTimeout=function(){this.scene.screen.close(this.name),this.scene.storage.dispatch(os())},n.runContinueButtonAnimation=function(){var e;this.continueButtonAnimation||(this.continueButtonAnimation=new Zs({targets:[this.continueButton],props:{scale:"-=0.02"}})),null==(e=this.continueButtonAnimation)||e.play()},t}(GameCore.Screen),Zf=_f,Gf=ys.Z.DEFAULT,Uf=Gf.KEY,Ff=Gf.FRAME,Hf=GameCore.Configs.Match,zf=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this).gameState=void 0,t.gameManager=void 0,t.prevScore=0,t.gameplayMode=void 0,t.currentScore=0,t.currentDiamond=0,t.prevTargetScore=0,t.isReachTargetScore=!1,t.rewardScreen=void 0,t.opponentInfo=void 0,t.showAdNotify=void 0,t.gameOverBoard=void 0,t.startLevelBoard=void 0,t.saveTimer=void 0,t.hideableObjects=void 0,t.header=void 0,t.footer=void 0,t.create=function(){e.prototype.create.call((0,vs.Z)(t)),t.createBackground(Ri.Z.BACKGROUND.KEY),t.updateLandscapeBackground(),t.createHandler(),t.createHeader(),t.createFooter(),t.createManager(),t.createUI(),t.listenEvents(),t.startLevel()},t.updateLandscapeBackground=function(){if(t.world.getScreenRatio()>GameCore.Configs.Game.PortraitRatio){var e=document.getElementById("app-bg");if(e){var n=Ri.Z.LANDSCAPE_BACKGROUND,i=n.KEY,r=n.FILE,a=Phaser.Loader.Events.FILE_KEY_COMPLETE+"image-"+i;t.load.off(a,t.updateLandscapeBackground);var s="url("+r+")";e.style.backgroundImage!==s&&(t.textures.exists(i)?e.style.backgroundImage=s:(t.load.once(a,t.updateLandscapeBackground),t.load.image(i,r),t.load.start()))}}},t.run=function(){t.setOuterOverlayAlpha(0),t.level.getLevel()>GameCore.Configs.Level.maxLevel?t.scene.switch(Yi.C.COMPLETE_ALL_LEVEL_SCENE):(t.gameManager.showHint(),t.startGame(),t.checkAndAddShortcut(),t.ads.showBannerAdAsync().catch((function(e){console.warn(e)})))},t.lose=function(){var e=(0,s.Z)(u().mark((function e(n){var i,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.gameManager.getCurrentLevelPlayTime(),r=t.gameManager.getCurrentLevelPlayMoves(),t.analytics.levelFail(n,t.currentScore,void 0,{level_play_time:i,level_moves:r}),e.next=5,t.gameManager.playLoseAnimation();case 5:t.screen.open(ir.o4.LEVEL_FAILED_SCREEN);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.rescued=function(){t.startLevel(),t.initManager(),t.time.addEvent({delay:0,callback:function(){t.startManager(),t.updateMove()}})},t.replay=function(){t.startGame()},t.levelUp=function(){t.stopManager(),t.disableButtons(!1),t.handleNextLevel(),ms.emit(rr.PASS_LEVELS.EVENTS.PASS_LEVEL,{type:"level",value:1}),t.startLevel()},t.handleNextLevel=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.initManager(),t.startManager();case 2:case"end":return e.stop()}}),e)}))),t.showInterstitialAd=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!==t.level.getLevel()){e.next=2;break}return e.abrupt("return");case 2:if(t.audio.pauseMusic(),console.log(t.ads.canbeShowInterstitialAd()),!t.ads.canbeShowInterstitialAd()){e.next=14;break}return e.prev=5,t.analytics.showInterstitialAd(t.getSceneName()),e.next=9,t.ads.showInterstitialAdAsync();case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(5),t.analytics.showAdFail(GameCore.Ads.Types.INTERSTITIAL,t.getSceneName(),e.t0);case 14:t.audio.playMusic(),t.ads.preloadInterstitialAdAsync().catch((function(){}));case 16:case"end":return e.stop()}}),e,null,[[5,11]])}))),t.handleCloseBannerAds=function(){t.ads.hideBannerAdAsync().catch((function(e){console.warn(e)}))},t.updateMove=function(){var e;Hf.ContinueSingleMatchEnabled&&t.gameplayMode===Bi&&(null==(e=t.saveTimer)||e.remove(),t.saveTimer=t.time.addEvent({delay:1500,callback:function(){var e=t.storage.getState(),n=Qr(e);t.storage.dispatch(Za(n,{score:t.currentScore,data:{diamond:t.currentDiamond},updateAt:Date.now()}))}}))},t.clearMove=function(){var e=t.storage.getState(),n=Qr(e);t.storage.dispatch(Za(n,{score:t.currentScore,data:{fen:"",diamond:t.currentDiamond},updateAt:Date.now()}))},t.showNotifyNoAds=function(e){if(!e||e.name===ir.o4.NOTIFY_SCREEN){var n=t.game.globalScene;n.screen.events.off(GameCore.Screens.Events.CLOSE),n.screen.open(ir.o4.NOTIFY_SCREEN,{message:"No ads to display!",duration:2e3,loading:!1})}},t.showNotifySkipAds=function(){var e=t.game.globalScene;e.screen.events.off(GameCore.Screens.Events.CLOSE),e.screen.open(ir.o4.NOTIFY_SCREEN,{message:"Sorry, No Rewards!\nYou have cancelled the ad!",duration:3e3,loading:!1})},t}(0,o.Z)(t,e);var n=t.prototype;return n.preload=function(){this.events.on(Phaser.Scenes.Events.WAKE,this.run),this.events.on(Phaser.Scenes.Events.CREATE,this.run),this.events.on(Phaser.Scenes.Events.SLEEP,this.handleCloseBannerAds)},n.setOuterOverlayAlpha=function(e){var t=document.getElementById("app-bg-overlay");t&&(t.style.opacity=e.toString(),t.style.visibility=e>0?"visible":"hidden")},n.createHandler=function(){},n.initHandler=function(){},n.createManager=function(){this.gameManager=new ap(this)},n.initManager=function(){},n.stopManager=function(){},n.startManager=function(){},n.listenEvents=function(){ms.on(Jh.RESCUE,this.rescued),ms.on(Jh.REPLAY,this.replay)},n.startGame=function(){var e=(0,s.Z)(u().mark((function e(){var t,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.ads.preloadInterstitialAdAsync().catch((function(){})),this.ads.preloadRewardedVideoAsync().catch((function(){})),e.next=4,this.level.preloadLevelDataAsync(this.level.getLevel());case 4:t=this.storage.getState(),this.gameplayMode=Br(t),this.initHandler(),this.initManager(),n=this.level.getLevel(),this.header.updateLevelText(n);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.startLevel=function(){var e=(0,s.Z)(u().mark((function e(){var t,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.level.getLevelData())){e.next=10;break}return n=this.level.getLevel(),this.header.updateLevelText(n),this.footer.initDefault(),this.analytics.levelStart(null==t?void 0:t.level),this.disableButtons(),e.next=9,this.gameManager.buildLevel(t);case 9:this.disableButtons(!1);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.createUI=function(){this.createRewardScreen(),this.createRescueScreen(),this.createCompleteLevelScreen(),this.createLevelFailedScreen(),this.createAdNotify(),this.createGameOverBoard(),this.createStartLevelBoard(),this.createHideableObjects(),this.createDevTools()},n.createRewardScreen=function(){this.rewardScreen=this.screen.add(ir.o4.REWARD_SCREEN,bo)},n.createRescueScreen=function(){this.screen.add(ir.o4.RESCUE_SCREEN,Zf)},n.createCompleteLevelScreen=function(){this.screen.add(ir.o4.LEVEL_COMPLETE_SCREEN,Af)},n.createLevelFailedScreen=function(){this.screen.add(ir.o4.LEVEL_FAILED_SCREEN,Lf)},n.createDevTools=function(){var e=this;if(GameCore.Utils.Valid.isDebugger()){var t=new Vs.Z(this,Uf,Ff.BLANK,50,50);t.setAlpha(.5).setPosition(250,50),t.onClick=function(){return e.win()};var n=new Vs.Z(this,Uf,Ff.BLANK,50,50);n.setAlpha(.5).setPosition(185,50),n.onClick=function(){var t=e.level.getLevel()-1;e.level.setLevel(t),e.updatePlayerLevel(t),e.level.preloadLevelDataAsync().then((function(){e.startLevel()}))};var i=new Vs.Z(this,Uf,Ff.BLANK,50,50);i.setAlpha(.5).setPosition(125,50),i.onClick=function(){return e.lose(1)}}},n.createHideableObjects=function(){this.hideableObjects=this.make.group({})},n.createHeader=function(){this.header=new tf(this),Phaser.Display.Align.In.TopCenter(this.header,this.gameZone,0,-30)},n.createFooter=function(){var e=this.ads.getBannerHeight();this.footer=new Yp(this);var t=GameCore.Utils.Device.isMobile();Phaser.Display.Align.In.BottomCenter(this.footer,this.gameZone,0,(t?-30:-32)-e)},n.createAdNotify=function(){this.showAdNotify=new yp(this),Phaser.Display.Align.In.TopCenter(this.showAdNotify,this.gameZone,0,-200)},n.createGameOverBoard=function(){this.gameOverBoard=new fp(this),this.gameOverBoard.setDepth(nr.Z.POPUP),Phaser.Display.Align.In.Center(this.gameOverBoard,this.gameZone,0,25)},n.createStartLevelBoard=function(){this.startLevelBoard=new Ap(this),this.startLevelBoard.setDepth(nr.Z.POPUP),Phaser.Display.Align.In.Center(this.startLevelBoard,this.gameZone,0,25)},n.disableButtons=function(e){void 0===e&&(e=!0),this.header.setDisable(e),this.footer.setDisable(e)},n.win=function(){var e=(0,s.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.disableButtons(),t=this.level.getLevel(),this.updatePlayerLevel(t+1),this.level.nextLevel(),this.analytics.levelComplete(t,this.currentScore,void 0),e.next=7,this.gameManager.playWinAnimation();case 7:this.screen.open(ir.o4.LEVEL_COMPLETE_SCREEN);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.restartLevel=function(){this.startLevel()},n.endGame=function(){this.clearMove(),this.prevTargetScore=0,this.storage.dispatch(os())},n.checkAndAddShortcut=function(){if(!this.game.player.getPlayerIsNew()){var e=this.storage.getState();Gi(e)!=_i&&this.facebook.attemptToAddShortcut()}},n.showRewardVideo=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i,r=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game,n=t.globalScene,i=t.audio,e.prev=1,n.screen.open(ir.o4.NOTIFY_SCREEN,{message:"Loading ads...",duration:0,loading:!0}),i.pauseMusic(),i.muteAll(),e.next=7,new Promise((function(e,t){r.ads.getAdStatus(GameCore.Ads.Types.REWARDED)===GameCore.Ads.Status.LOADING?r.ads.events.once(GameCore.Ads.Events.LOADED,e):r.ads.preloadRewardedVideoAsync().then(e).catch(t)}));case 7:return e.next=9,this.ads.showRewardedVideoAsync();case 9:return this.analytics.showRewardedVideoAd(this.getSceneName()),this.ads.preloadRewardedVideoAsync().catch((function(e){})),n.screen.events.off(GameCore.Screens.Events.CLOSE),n.screen.close(ir.o4.NOTIFY_SCREEN),e.abrupt("return",!0);case 16:if(e.prev=16,e.t0=e.catch(1),this.analytics.showAdFail(GameCore.Ads.Types.REWARDED,this.getSceneName(),e.t0),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=23;break}if("USER_INPUT"!==e.t0.code){e.next=23;break}return this.showNotifySkipAds(),e.abrupt("return",!1);case 23:return this.showNotifyNoAds(),e.abrupt("return",!1);case 25:return e.prev=25,i.unmuteAll(),i.playMusic(),e.finish(25);case 29:case"end":return e.stop()}}),e,this,[[1,16,25,29]])})));return function(){return e.apply(this,arguments)}}(),n.updatePlayerLevel=function(){var e=(0,s.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t=1),e.next=3,FBInstant.player.setDataAsync({level:t});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.waitForMilliseconds=function(){var e=(0,s.Z)(u().mark((function e(t){var n=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){n.time.delayedCall(t,e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t}(gs.Z);var Kf=zf,Yf=n(43),Wf=ys.Z.DEFAULT,jf=Wf.KEY,Vf=Wf.FRAME,qf=function(e){function t(t){var n;return(n=e.call(this,t,jf,Vf.BLANK)||this).scene=void 0,n.scene=t,n.button.setSize(87,68).setDisplaySize(87,68),n.setName("Home"),n.createIcon(),n}return(0,o.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.add.image(0,0,jf,Vf.BLANK);e.setSize(43,43).setDisplaySize(43,43),this.add(e),Phaser.Display.Align.In.Center(e,this)},t}(Vs.Z),Xf=qf,Jf=ys.Z.DEFAULT,Qf=Jf.KEY,$f=Jf.FRAME,em=function(e){function t(t){var n;return(n=e.call(this,t,Qf,$f.BLANK)||this).scene=void 0,n.scene=t,n.button.setWorldSize(170,72),n.setName("PlayWithFriends"),n.createLabel(),n}return(0,o.Z)(t,e),t.prototype.createLabel=function(){var e=this.scene.make.bitmapText({font:eo.Z.PRIMARY.KEY,size:13,text:"PLAY"}),t=10;Phaser.Display.Align.In.Center(e,this,0,-t);var n=this.scene.make.bitmapText({font:eo.Z.PRIMARY.KEY,size:9,text:"WITH FRIENDS"});t=12,Phaser.Display.Align.In.Center(n,this,0,t),this.add([e,n])},t}(Vs.Z),tm=em,nm=ys.Z.DEFAULT,im=nm.KEY,rm=nm.FRAME,am=function(e){function t(t){var n;return(n=e.call(this,t,im,rm.BLANK)||this).scene=void 0,n.scene=t,n.button.setSize(87,68).setDisplaySize(87,68),n.setName("Share"),n.createIcon(),n}return(0,o.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.add.image(0,0,im,rm.BLANK);e.setSize(43,43).setDisplaySize(43,43),this.add(e),Phaser.Display.Align.In.Center(e,this)},t}(Vs.Z),sm=am,om=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.homeButton=void 0,n.playButton=void 0,n.shareButton=void 0,n.scene=t,n.setName("FooterBar"),n.createButtons(),n.alignButtons(),n.scene.add.existing((0,vs.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.alignButtons=function(){Phaser.Display.Align.In.Center(this.homeButton,this,-140),Phaser.Display.Align.In.Center(this.playButton,this,0),Phaser.Display.Align.In.Center(this.shareButton,this,140)},n.createButtons=function(){this.createHomeButton(),this.createPlayButton(),this.createShareButton()},n.createHomeButton=function(){this.homeButton=new Xf(this.scene),this.add(this.homeButton)},n.createPlayButton=function(){this.playButton=new tm(this.scene),this.add(this.playButton)},n.createShareButton=function(){this.shareButton=new sm(this.scene),this.add(this.shareButton)},t}(Phaser.GameObjects.Container),cm=om,um=n(66),lm=(function(e){function t(t){var n;return(n=e.call(this,t,"UpdateAbleObject")||this).updateInfo=void 0,n}(0,o.Z)(t,e)}(Phaser.GameObjects.GameObject),function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).classType=void 0,i.listConfigs=void 0,i.padding=void 0,i.startObjectIndex=void 0,i.endObjectIndex=void 0,i.listObjects=void 0,i.classType=n.classType,i.listConfigs=n.listConfigs,i.padding=n.padding?n.padding:0,i.objects.classType=i.classType,i.updateConfig(i.listConfigs),i}(0,o.Z)(t,e);var n=t.prototype;return n.reset=function(){e.prototype.reset.call(this),this.killAndHideAll()},n.getChildren=function(){return this.listObjects.filter((function(e){return void 0!=e&&e.active}))},n.updateConfig=function(e){this.reset(),this.listConfigs=e,this.listObjects=new Array(e.length).fill(void 0),this.addObjectIndex(0,0);var t=this.getEndObjectIndex();this.addObjectIndex(1,t),this.startObjectIndex=this.getStartObjectIndex(),this.endObjectIndex=this.getEndObjectIndex(),this.updateMaxHeight(),this.value=this.marginTop},n.killAndHideAll=function(){var e=this;this.listObjects instanceof Array&&this.listObjects.map((function(t){void 0!==t&&e.objects.killAndHide(t)}))},n.setItemPosition=function(e,t){var n=e.height;e.setPosition(0,n/2+(n+this.padding)*t-this.height/2)},n.updateMaxHeight=function(){return this.maxHeight=Math.max(this.listConfigs.length*(this.objHeight+this.padding)-this.padding+this.marginBottom-this.height,0)},n.updateObject=function(e){this.objects.incY(e);var t=this.getStartObjectIndex(),n=this.getEndObjectIndex();this.killObjectIndex(this.startObjectIndex,this.endObjectIndex),this.startObjectIndex=t,this.endObjectIndex=n,this.addObjectIndex(this.startObjectIndex,this.endObjectIndex)},n.killObjectIndex=function(e,t){for(var n=e;n<=t;n++){var i=this.listObjects[n];i&&(this.objects.killAndHide(i),this.listObjects[n]=void 0)}},n.addObjectIndex=function(e,t){for(var n=e;n<=t;n++){var i=this.padding,r=this.listConfigs;if(n>=r.length)return;var a=this.objects.getFirstDead(!0),s=a.height,o=s/2+(s+i)*n+this.value-this.height/2;a.updateInfo(r[n]),a.setPosition(0,o),a.setActive(!0),a.setVisible(!0),this.addAt(a),this.listObjects[n]=a}},n.getStartObjectIndex=function(){var e=this.objHeight,t=this.padding;return Math.max(Math.floor((0-this.value)/(e+t)),0)},n.getEndObjectIndex=function(){var e=this.objHeight,t=this.padding,n=this.listConfigs,i=e+t;return Math.min(Math.floor((this.height-this.value)/i),n.length)},(0,U.Z)(t,[{key:"objHeight",get:function(){var e=this.objects.getChildren();return 0==e.length?this.maxHeight=0:e[0].height}}]),t}(um.Z)),hm={targets:[],props:{alpha:{duration:500,value:{start:0,from:0,to:1},ease:Phaser.Math.Easing.Cubic.Out},scale:{duration:1e3,value:{start:.8,from:.8,to:1},ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45]}}},dm=function(e){function t(t){return e.call(this,hm,t)||this}return(0,o.Z)(t,e),t}(Os.Z),pm={targets:[],props:{alpha:{start:0,to:1,duration:500,ease:Phaser.Math.Easing.Cubic.Out},scale:{start:.8,to:1,duration:1e3,ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45]},y:{start:0,to:0,duration:500,ease:Phaser.Math.Easing.Back.Out}},delay:0},fm=function(e){function t(t){return e.call(this,pm,t)||this}return(0,o.Z)(t,e),t}(Os.Z),mm=ys.Z.DEFAULT,gm=mm.KEY,vm=mm.FRAME,ym=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).button=void 0,i.avatar=void 0,i.rankIcon=void 0,i.rankText=void 0,i.username=void 0,i.score=void 0,i.scoreText=void 0,i.background=void 0,i.showPopUp=void 0,i.showItems=void 0,i.payload=void 0,i.handleChallengeFriend=function(){var e=i.payload.playerId;i.scene.storage.dispatch(is(e))},i.createBackground(),i.updateSize(),i.createAvatar(),i.createRank(),i.createUsername(),i.createScore(),i.createButton(),n&&i.updateInfo(n),i.scene.add.existing((0,vs.Z)(i)),i}(0,o.Z)(t,e);var n=t.prototype;return n.updateInfo=function(e){this.payload=(0,a.Z)({scoreRight:!0,isHighlight:!1,useChallenge:!1},e),this.updateBackground(),this.updateAvatar(),this.updateRank(),this.updateUsername(),this.updateScore(),this.updatePosition()},n.updatePosition=function(){var e=this.payload.scoreRight,t=this.payload.useChallenge;this.button.setVisible(!!t),e?Phaser.Display.Align.To.RightCenter(this.score,this.avatar,120):Phaser.Display.Align.To.RightCenter(this.score,this.avatar,80)},n.createBackground=function(){this.background=this.scene.make.image({key:gm,frame:vm.BLANK}),this.background.setWorldSize(264,56),this.add(this.background)},n.updateBackground=function(){this.payload.isHighlight;var e="";e=vm.BLANK,this.background.setFrame(e),this.background.setWorldSize(264,56)},n.updateSize=function(){var e=this.background,t=e.width,n=e.height;this.setSize(t,n)},n.createAvatar=function(){this.avatar=new ah(this.scene,{key:gm,frame:vm.BLANK,background:vm.BLANK,width:47.5,height:49.5,radius:40}),this.add(this.avatar),Phaser.Display.Align.In.LeftCenter(this.avatar,this,-10)},n.updateAvatar=function(){var e=this.payload,t=e.playerId,n=e.photo;this.avatar.loadPhoto(t,n)},n.createRank=function(){this.createRankIcon(1),this.createRankText(1)},n.updateRank=function(){var e=this.payload.rank;this.updateRankIcon(e),this.updateRankText(e)},n.getRankIconFrame=function(e){var t=vm.BLANK;switch(e){case 1:case 2:case 3:t=vm.BLANK}return t},n.createRankIcon=function(e){var t=this.getRankIconFrame(e);this.rankIcon=this.scene.make.image({key:gm,frame:t}),t!=vm.BLANK?this.rankIcon.setWorldSize(46,30):this.rankIcon.setWorldSize(27,27),this.add(this.rankIcon);var n=e<=3?13:16;Phaser.Display.Align.In.Center(this.rankIcon,this.avatar,0,n)},n.updateRankIcon=function(e){var t=this.getRankIconFrame(e);this.rankIcon.setFrame(t),t!=vm.BLANK?this.rankIcon.setWorldSize(46,30):this.rankIcon.setWorldSize(27,27)},n.createRankText=function(e){this.rankText=this.scene.make.bitmapText({font:eo.Z.PRIMARY.KEY,size:this.scene.fontSize(15),text:""+e,origin:{x:.5,y:.5}}),this.add(this.rankText),Phaser.Display.Align.In.Center(this.rankText,this.rankIcon,0,-2)},n.updateRankText=function(e){this.rankText.setText(""+e)},n.getShortName=function(e){var t=e.substring(0,7);return t.split(" ")[0]||t},n.createUsername=function(){this.username=this.scene.make.text({text:this.getShortName("FRIEND NAME"),style:{fontFamily:eo.Z.FONT_FAMILY,fontSize:"15px",fontStyle:"bold"}}),this.username.setTint(10317116),this.username.setHighQuality(),Phaser.Display.Align.In.LeftCenter(this.username,this.avatar,-53),this.add(this.username)},n.updateUsername=function(){var e=this.payload.name;this.username.setText(this.getShortName(e))},n.createScore=function(){this.score=this.scene.add.container(),this.scoreText=this.scene.make.bitmapText({font:eo.Z.PRIMARY.KEY,size:this.scene.fontSize(18),text:"132500",origin:{x:.5,y:.5}}),this.scoreText.setTint(6565e3);var e=this.scene.make.image({key:gm,frame:vm.BLANK});e.setWorldSize(17,18),this.score.add([this.scoreText,e]);var t=-20;Phaser.Display.Align.In.LeftCenter(this.scoreText,e,t),this.add(this.score),t=10,Phaser.Display.Align.In.Center(this.score,this,t)},n.updateScore=function(){var e=this.payload.score;this.scoreText.setText(e)},n.createButton=function(){this.button=new Vs.Z(this.scene,gm,vm.BLANK,54,34.5),this.button.setName("ChallengeFriend");var e=this.scene.make.bitmapText({font:eo.Z.PRIMARY.KEY,size:this.scene.fontSize(18),text:"PLAY"});Phaser.Display.Align.In.Center(e,this.button,0,-2),this.button.add(e),Phaser.Display.Align.In.RightCenter(this.button,this,-2),this.add(this.button),this.button.onClick=this.handleChallengeFriend},n.runShowPopUpAnimation=function(e,t){this.scene.tweens.killTweensOf(this),this.showPopUp=new fm({targets:[this],delay:e,duration:t,props:{y:{start:this.y+70,to:this.y}}}),this.showPopUp.play()},n.runShowItemAnimation=function(e,t){var n=this.getAll();this.scene.tweens.killTweensOf(n),this.showItems=new dm({targets:n,duration:t,delay:this.scene.tweens.stagger(50,{start:e+50}),props:{scale:{duration:1e3,getStart:function(e){return.8*e.scale},getEnd:function(e){return e.scale},ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45]}}}),this.showItems.play()},n.runShowUpAnimation=function(e,t){void 0===e&&(e=0),void 0===t&&(t=300);var n=100*e;this.runShowPopUpAnimation(n,t),this.runShowItemAnimation(n,t)},t}(Phaser.GameObjects.Container),bm=ym;function Am(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Sm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Sm(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Sm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Em=function(e){function t(t){var n;(n=e.call(this,t)||this).scene=void 0,n.currentPlayerId=void 0,n.scroller=void 0,n.scene=t;var i=n.scene.player;return n.currentPlayerId=i.getPlayerId(),n.createReuseScroller(),n.scene.add.existing((0,vs.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createReuseScroller=function(){this.scroller=new lm(this.scene,{classType:bm,listConfigs:[],width:280,height:310,padding:10,marginTop:10,marginBottom:10}),this.scene.renderer instanceof Phaser.Renderer.WebGL.WebGLRenderer&&this.scroller.createBound(ys.Z.DEFAULT.KEY,ys.Z.DEFAULT.FRAME.BLANK,40,16643027),this.scroller.createMask(),this.scroller.setPosition(0,25),this.add(this.scroller)},n.updateData=function(e){var t=this.scene.layoutManager.objects.board,n=Object.values(e)||[];if(n.length<1)return this.scene.isSwitchable=!0,void t.showMessage(!0,"Leaderboard is empty!");for(var i,r=[],a=Am(n.sort((function(e,t){return+t.score-+e.score})));!(i=a()).done;){var s=i.value,o=s.playerId,c=s.photo,u=s.score,l=s.name,h=s.rank;if(o){var d=this.currentPlayerId===o,p={playerId:o,photo:c,name:l,rank:h,score:u,scoreRight:this.scene.tabId===or,useChallenge:!d&&this.scene.tabId===cr,isHighlight:d};r.push(p)}}this.scroller.updateConfig(r),this.showLeaders()},n.removeLeaders=function(){this.scroller.updateConfig([])},n.getLeaders=function(){return this.scroller.getChildren()},n.showLeaders=function(){var e=this,t=this.scene.layoutManager.objects.board,n=this.getLeaders();if(n.length<1)return this.scene.isSwitchable=!0,void t.showMessage(!0,"Leaderboard is empty!");for(var i=Math.min(n.length,6),r=0;r<i;r++){var a=n[r];a&&(a.setVisible(!0),a.runShowUpAnimation(r,300))}var s=300+100*i+250;this.scene.time.delayedCall(s,(function(){e.scene.isSwitchable=!0,e.scroller.setEnable(!0)}))},t}(Phaser.GameObjects.Container),wm=Em,Cm=ys.Z.DEFAULT,Tm=Cm.KEY,Im=Cm.FRAME,xm=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.tabWorld=void 0,n.tabFriends=void 0,n.scene=t,n.createTabFriends(),n.createTabWorld(),n}(0,o.Z)(t,e);var n=t.prototype;return n.selectTabFriends=function(){this.tabFriends.button.setFrame(Im.BLANK),this.tabWorld.button.setFrame(Im.BLANK)},n.selectTabWorld=function(){this.tabFriends.button.setFrame(Im.BLANK),this.tabWorld.button.setFrame(Im.BLANK)},n.createTabFriends=function(){this.tabFriends=new Vs.Z(this.scene,Tm,Im.BLANK),this.tabFriends.button.setSize(85,33).setDisplaySize(85,33),this.tabFriends.setName("FriendsTab");var e=this.scene.make.bitmapText({font:eo.Z.PRIMARY.KEY,size:9,text:"FRIENDS",origin:{x:.5,y:.55}});this.tabFriends.add(e),Phaser.Display.Align.In.Center(this.tabFriends,this,-55),this.add(this.tabFriends)},n.createTabWorld=function(){this.tabWorld=new Vs.Z(this.scene,Tm,Im.BLANK),this.tabWorld.button.setSize(85,33).setDisplaySize(85,33),this.tabWorld.setName("WorldTab");var e=this.scene.make.bitmapText({font:eo.Z.PRIMARY.KEY,size:9,text:"WORLD",origin:{x:.5,y:.55}});this.tabWorld.add(e),Phaser.Display.Align.In.Center(this.tabWorld,this,55),this.add(this.tabWorld)},t}(Phaser.GameObjects.Container),km=xm,Pm=ys.Z.DEFAULT,Lm=Pm.KEY,Om=Pm.FRAME,Rm=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.background=void 0,n.tabs=void 0,n.leaders=void 0,n.loading=void 0,n.message=void 0,n.messageAnimation=void 0,n.scene=t,n.setSize(310,430),n.createBackground(),n.createLoading(),n.createMessage(),n.createContents(),n.createAnimation(),n.scene.add.existing((0,vs.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.showLoading=function(e){this.loading.setVisible(e),this.showMessage(!1)},n.showMessage=function(e,t){this.message.setVisible(e),t&&(this.message.setText(t),this.messageAnimation.play())},n.createBackground=function(){this.background=new Dc(this.scene,0,0,310,430),this.add(this.background)},n.createLoading=function(){this.loading=new cu.Z(this.scene),this.loading.setTint(12237498),this.loading.setWorldSize(113,113),this.add(this.loading),Phaser.Display.Align.In.Center(this.loading,this.background)},n.createMessage=function(){this.message=this.scene.make.bitmapText({font:eo.Z.PRIMARY.KEY,size:this.scene.fontSize(18),origin:{x:.5,y:.5}}),this.message.setTint(10317116),this.add(this.message),Phaser.Display.Align.In.Center(this.message,this.background)},n.createContents=function(){this.createLeaders(),this.createTitle(),this.createTabs()},n.createLeaders=function(){this.leaders=new wm(this.scene),this.add(this.leaders),Phaser.Display.Align.In.Center(this.leaders,this.background,0,0)},n.createTitle=function(){var e=this.scene.add.container(),t=this.scene.make.image({key:Lm,frame:Om.BLANK});t.setWorldSize(271,81);var n=this.scene.make.bitmapText({font:eo.Z.PRIMARY.KEY,size:this.scene.fontSize(30),text:"Leaderboards"});Phaser.Display.Align.In.Center(n,t,0,-10),e.add([t,n]),Phaser.Display.Align.In.TopCenter(e,this.background,0,5),this.add(e)},n.createTabs=function(){this.tabs=new km(this.scene),this.add(this.tabs),Phaser.Display.Align.In.TopCenter(this.tabs,this.background,0,-55)},n.createAnimation=function(){this.messageAnimation=new Fs({targets:[this.message],duration:60,repeat:2})},t}(Phaser.GameObjects.Container),Dm=Rm,Bm=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.screen=void 0,n.board=void 0,n.footer=void 0,n.scene=t,n.screen=t.screen,n.createObjects(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createObjects=function(){this.createMainContent(),this.createFooterBar()},n.createMainContent=function(){this.board=new Dm(this.scene)},n.createFooterBar=function(){this.footer=new cm(this.scene)},t}(Ls),Nm=Bm,Mm=function(e){function t(t){var n;return(n=e.call(this,t)||this).objects=void 0,n.objects=null,n}(0,o.Z)(t,e);var n=t.prototype;return n.alignUI=function(){if(null!==this.objects){var e=this.scene.gameZone,t=this.objects,n=t.board,i=t.footer;Phaser.Display.Align.In.Center(n,e,0,-20),Phaser.Display.Align.In.BottomCenter(i,e,0,-50)}},n.createGroups=function(){e.prototype.createGroups.call(this)},n.setUIObjects=function(t){e.prototype.setUIObjects.call(this,t),this.addUIObjectsToGroups()},n.addUIObjectsToGroups=function(){null!==this.objects&&this.addObjectForGuideUI()},n.addObjectForGuideUI=function(){this.objects},t}(Wu),_m=Mm,Zm=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.alignUI=function(){e.prototype.alignUI.call(this)},t}(_m),Gm=Zm,Um=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.scene=t,n}(0,o.Z)(t,e);var n=t.prototype;return n.createObjects=function(){this.objects=new Nm(this.scene)},n.createLayouts=function(){this.scene.world.isLandscape()?this.layout=new Gm(this.scene):this.layout=new _m(this.scene),this.layout.setUIObjects(this.objects)},n.initUILogic=function(){var e=this.objects,t=e.footer,n=e.board;t.homeButton.onClick=this.scene.handleHomeClick,t.playButton.onClick=this.scene.handlePlayWithFriend,t.shareButton.onClick=this.scene.handleShareLeaderboard,n.tabs.tabFriends.onClick=this.scene.handleSelectFriendTab,n.tabs.tabWorld.onClick=this.scene.handleSelectWorldTab},n.updateUIState=function(){},t}(rl),Fm=Um,Hm=GameCore.Configs.LeadersBoard,zm=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this).layoutManager=void 0,t.tabId=void 0,t.offset=void 0,t.isRequesting=void 0,t.isSwitchable=void 0,t.run=function(){t.layoutManager.init();var e=t.layoutManager.objects.board;t.isRequesting=!1;var n=[{selector:Il,callback:function(n){if(t.isRequesting=n,e.showLoading(n),!1===n){var i=t.game.storage.getState(),r=Tl(i);e.leaders.updateData(r)}}}];t.handleStateChange(n),t.selectFriendTab(),t.layoutManager.start()},t.handleSelectFriendTab=function(){t.isRequesting||t.isSwitchable&&(t.isSwitchable=!1,t.selectFriendTab())},t.handleSelectWorldTab=function(){t.isRequesting||t.isSwitchable&&(t.isSwitchable=!1,t.selectWorldTab())},t.handlePlayWithFriend=function(){t.storage.dispatch(rs())},t.handleHomeClick=function(){t.scene.switch(Yi.C.DASHBOARD_SCENE)},t.handleShareLeaderboard=function(){t.storage.dispatch(vh())},t}(0,o.Z)(t,e);var n=t.prototype;return n.preload=function(){this.events.on("wake",this.run),this.events.on("create",this.run)},n.create=function(){e.prototype.create.call(this),this.gameZone.setPosition(0,0),this.createBackground(Ri.Z.BACKGROUND.KEY,"0"),this.scene.bringToTop(),this.createLayoutManager()},n.selectFriendTab=function(){var e=this.layoutManager.objects.board;this.tabId=cr,this.offset=0,e.showLoading(!0),e.leaders.removeLeaders(),e.tabs.selectTabFriends(),this.storage.dispatch(Sl(Hm.LeaderboardId,cr,Hm.Limit,this.offset))},n.selectWorldTab=function(){var e=this.layoutManager.objects.board;this.tabId=or,this.offset=0,e.showLoading(!0),e.leaders.removeLeaders(),e.tabs.selectTabWorld(),this.storage.dispatch(Sl(Hm.LeaderboardId,or,Hm.Limit,this.offset))},n.loadMoreTabFriend=function(){this.isRequesting||(this.offset+=Hm.Limit,this.storage.dispatch(Sl(Hm.LeaderboardId,cr,Hm.Limit,this.offset)))},n.loadMoreTabWorld=function(){this.isRequesting||(this.offset+=Hm.Limit,this.storage.dispatch(Sl(Hm.LeaderboardId,or,Hm.Limit,this.offset)))},n.createLayoutManager=function(){this.layoutManager=new Fm(this)},t}(gs.Z);var Km,Ym,Wm=zm,jm=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="LoadResourceFail",i.message=t||"Load resource fail",i.payload=n,i}return(0,o.Z)(t,e),t}((0,T.Z)(Error)),Vm=function(){function e(e,t){var n=this;this.game=void 0,this.id=void 0,this.taskData=void 0,this.requireTypes=void 0,this.process=function(e){var t=e.type,i=e.value;if(!(i<1)&&(-1!==n.requireTypes.indexOf(t)&&!n.isPassRequiredTarget(t)&&n.processMore(e))){t=e.type,i=e.value;var r=n.getCorrectValue(t,i);n.game.storage.dispatch(function(e,t,n){return function(i){var r=Xc();if(GameCore.Utils.Valid.isObject(r)){var a=r;GameCore.Utils.Object.hasOwn(a,e)&&(a[e].rewarded||(a[e][t]+=n,window.game.player.setCustomData("dailyTasks",{logTasks:a}),i({type:Qn,payload:{id:e,type:t,value:n}})))}}}(n.id,t,r)),n.isTaskFinished(t)&&n.game.storage.dispatch(function(e){return function(t){t({type:ti,payload:{id:e}}),ms.emit(rr.EVENTS.NOTICE_UPDATE)}}(n.id))}},this.game=e,this.id=t,this.init()}var t=e.prototype;return t.init=function(){var e=this,t=this.game.storage.getState(),n=Eo(t)||[];if(!((null==n?void 0:n.length)<1)){var i=null==n?void 0:n.find((function(t){return t.id===e.id}));i&&(this.taskData=i,this.requireTypes=Object.keys(this.taskData.require),this.initEvents())}},t.getDataByType=function(e){var t=this.game.storage.getState(),n=wo(t),i={value:0,target:0};if(!n)return i;if(!GameCore.Utils.Object.hasOwn(n,this.taskData.id))return i;var r=n[this.taskData.id];if(GameCore.Utils.Valid.isObject(r)&&GameCore.Utils.Object.hasOwn(r,e)){var a=r[e];"number"===typeof a&&(i.value=a)}return i.target=this.taskData.require[e]||0,i},t.getCorrectValue=function(e,t){var n=this.getDataByType(e),i=n.value,r=n.target,a=t;return i+t>r&&(a=r-i),Math.round(a)},t.isPassRequiredTarget=function(e){var t=this.getDataByType(e);return t.value>=t.target},t.isTaskFinished=function(e){var t=this.getDataByType(e);return t.value>=t.target},e}(),qm=Vm,Xm=rr.COLLECT_DIAMONDS,Jm=Xm.ID,Qm=Xm.EVENTS,$m=function(e){function t(t){return e.call(this,t,Jm)||this}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){ms.off(Qm.COLLECT_DIAMONDS,this.process),ms.on(Qm.COLLECT_DIAMONDS,this.process)},n.processMore=function(){return!0},t}(qm),eg=$m,tg=rr.INVITE_FRIENDS,ng=tg.ID,ig=tg.EVENTS,rg=function(e){function t(t){var n;return(n=e.call(this,t,ng)||this).invitedFriends=void 0,n.resetData=function(){n.invitedFriends=[]},n.resetData(),n}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){var e=this;ms.off(ig.INVITED_FRIEND,this.process),ms.on(ig.INVITED_FRIEND,this.process),ms.on(rr.EVENTS.TASKS_RESET,(function(){e.resetData()}))},n.processMore=function(e){var t=e.opponentId;return!!t&&(-1===this.invitedFriends.indexOf(t)&&(this.invitedFriends.push(t),!0))},t}(qm),ag=rg,sg=rr.PASS_LEVELS,og=sg.ID,cg=sg.EVENTS,ug=function(e){function t(t){return e.call(this,t,og)||this}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){ms.off(cg.PASS_LEVEL,this.process),ms.on(cg.PASS_LEVEL,this.process)},n.processMore=function(){return!0},t}(qm),lg=ug,hg=rr.REACH_SCORE,dg=hg.ID,pg=hg.EVENTS,fg=function(e){function t(t){var n;return(n=e.call(this,t,dg)||this).totalScore=void 0,n.lastUpdate=void 0,n.totalScore=0,n.lastUpdate=Date.now(),n}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){ms.off(pg.ADD_SCORE,this.process),ms.on(pg.ADD_SCORE,this.process)},n.processMore=function(e){var t=e.value,n=Date.now();return n-this.lastUpdate<3e3?(this.totalScore+=t,!1):(e.value+=this.totalScore,this.totalScore=0,this.lastUpdate=n,!0)},t}(qm),mg=fg,gg=function(){function e(e){var t=this;this.game=void 0,this.eventsListener=void 0,this.init=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.eventsListener={},e.next=3,t.initData();case 3:t.initEvents();case 4:case"end":return e.stop()}}),e)}))),this.initData=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.game.storage.dispatch(function(){var e=(0,s.Z)(u().mark((function e(t,n){var i,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n(),!Co(i)){e.next=4;break}return e.abrupt("return");case 4:return t({type:qn,payload:{}}),e.next=7,Fc();case 7:r=e.sent,t(zc(r));case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)}))),this.game=e,this.init()}var t=e.prototype;return t.getEventListener=function(e){return this.eventsListener[e]},t.initEvents=function(){this.eventsListener[rr.PASS_LEVELS.ID]=new lg(this.game),this.eventsListener[rr.REACH_SCORE.ID]=new mg(this.game),this.eventsListener[rr.INVITE_FRIENDS.ID]=new ag(this.game),this.eventsListener[rr.COLLECT_DIAMONDS.ID]=new eg(this.game)},e}(),vg=gg,yg=[{name:"collect-red-gems",id:"collect-gems",require:{red:5},reward:50},{name:"collect-blue-gems",id:"collect-gems",require:{blue:5},reward:50},{name:"collect-pink-gems",id:"collect-gems",require:{pink:5},reward:50},{name:"collect-green-gems",id:"collect-gems",require:{green:5},reward:50},{name:"collect-yellow-gems",id:"collect-gems",require:{yellow:5},reward:50},{name:"collect-red-blue-gems",id:"collect-gems",require:{red:5,blue:5},reward:120},{name:"collect-red-pink-gems",id:"collect-gems",require:{red:5,pink:5},reward:120},{name:"collect-red-green-gems",id:"collect-gems",require:{red:5,green:5},reward:120},{name:"collect-red-yellow-gems",id:"collect-gems",require:{red:5,yellow:5},reward:120},{name:"collect-blue-pink-gems",id:"collect-gems",require:{blue:5,pink:5},reward:120},{name:"collect-blue-green-gems",id:"collect-gems",require:{blue:5,green:5},reward:120},{name:"collect-blue-yellow-gems",id:"collect-gems",require:{blue:5,yellow:5},reward:120},{name:"collect-pink-green-gems",id:"collect-gems",require:{pink:5,green:5},reward:120},{name:"collect-pink-yellow-gems",id:"collect-gems",require:{pink:5,yellow:5},reward:120},{name:"collect-green-yellow-gems",id:"collect-gems",require:{green:5,yellow:5},reward:120},{name:"collect-red-blue-pink-gems",id:"collect-gems",require:{red:5,blue:5,pink:5},reward:210},{name:"collect-red-blue-green-gems",id:"collect-gems",require:{red:5,blue:5,green:5},reward:210},{name:"collect-red-blue-yellow-gems",id:"collect-gems",require:{red:5,blue:5,yellow:5},reward:210},{name:"collect-red-pink-green-gems",id:"collect-gems",require:{red:5,pink:5,green:5},reward:210},{name:"collect-red-pink-yellow-gems",id:"collect-gems",require:{red:5,pink:5,yellow:5},reward:210},{name:"collect-red-green-yellow-gems",id:"collect-gems",require:{red:5,green:5,yellow:5},reward:210},{name:"collect-blue-pink-green-gems",id:"collect-gems",require:{blue:5,pink:5,green:5},reward:210},{name:"collect-blue-pink-yellow-gems",id:"collect-gems",require:{blue:5,pink:5,yellow:5},reward:210},{name:"collect-blue-green-yellow-gems",id:"collect-gems",require:{blue:5,green:5,yellow:5},reward:210},{name:"collect-pink-green-yellow-gems",id:"collect-gems",require:{pink:5,green:5,yellow:5},reward:210}],bg=function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",yg);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ag=(0,K.P1)([function(e){var t;return null==(t=e[Fn])?void 0:t.missions}],(function(e){return e})),Sg=(0,K.P1)([function(e){var t;return null==(t=e[Fn])?void 0:t.isRequesting}],(function(e){return e})),Eg=((0,K.P1)([Ag,function(e,t){return t.name}],(function(e,t){return e?"string"!==typeof t?null:GameCore.Utils.Object.hasOwn(e,t)?e[t]:null:null})),function(e){return{type:zn,payload:{missions:e}}}),wg=ys.Z.DEFAULT.FRAME,Cg=wg.BLANK,Tg=wg.BLANK,Ig=wg.BLANK,xg=wg.BLANK,kg=wg.BLANK,Pg=wg.BLANK,Lg=wg.BLANK,Og=wg.BLANK,Rg={RED:"red",BLUE:"blue",PINK:"pink",GREEN:"green",YELLOW:"yellow"},Dg={FREEZE:"freeze",COLORFUL:"colorful",COLOR_CHANGE:"color_change"},Bg=Rg.RED,Ng=Rg.BLUE,Mg=Rg.PINK,_g=Rg.GREEN,Zg=Rg.YELLOW,Gg=Dg.FREEZE,Ug=Dg.COLORFUL,Fg=Dg.COLOR_CHANGE,Hg=((Km={})[Bg]="r",Km[Ng]="b",Km[Mg]="p",Km[_g]="g",Km[Zg]="y",Km[Gg]="f",Km[Ug]="c",Km[Fg]="m",Km),zg={SIZE:37,STATUS:{READY:"ready",MOVING:"moving",CAPTURED:"captured"},FRAME:(Ym={},Ym[Bg]=Cg,Ym[Ng]=Tg,Ym[Mg]=Ig,Ym[_g]=xg,Ym[Zg]=kg,Ym[Gg]=Pg,Ym[Ug]=Lg,Ym[Fg]=Og,Ym),SETS:{SET_3:"set_3",SET_4:"set_4",SET_5:"set_5",SET_6:"set_6",SET_7:"set_7",SET_8:"set_8",SET_9:"set_9"},COLORS:Rg,SPECIALS:Dg,HASH:Hg},Kg={GIFT:{ID:"ItemGift"},PAINT:{ID:"ItemPaint"},HAMMER:{ID:"ItemHammer"},SHUFFLE:{ID:"ItemShuffle"},CHANGE_COLOR:{ID:"ItemChangeColor"}},Yg={TYPES:{COLLECT_GEMS:"collect-gems",USE_ITEM:"use-item",COMBO:"combo"},EVENTS:{MISSION_START:"mission-start",MISSION_UPDATE:"mission-update",MISSION_FAILED:"mission-failed",MISSION_COMPLETED:"mission-completed"},OBJECTS:(0,a.Z)({},zg.COLORS,zg.SPECIALS,{PAINT:Kg.PAINT.ID,HAMMER:Kg.HAMMER.ID,SHUFFLE:Kg.SHUFFLE.ID})},Wg=(0,K.P1)([function(e){var t;return null==(t=e[Fn])?void 0:t.mission}],(function(e){return e})),jg=((0,K.P1)([Wg],(function(e){return e?e.name:null})),function(){function e(e,t,n){var i=this;this.game=void 0,this.id=void 0,this.name=void 0,this.reward=void 0,this.process=function(e){var t=e.id,n=e.type,r=e.value;r<1||i.id===t&&i.isTypeRequired(n)&&i.processMore(e)&&(i.game.storage.dispatch(function(e,t,n){return{type:Kn,payload:{name:e,type:t,value:n}}}(i.name,n,r)),i.isMissionComplete()&&(ms.emit(Yg.EVENTS.MISSION_COMPLETED,{name:i.name,reward:i.reward}),i.game.storage.dispatch(function(e){return{type:Yn,payload:{name:e}}}(i.name))))},this.id=t,this.name=n,this.game=e}var t=e.prototype;return t.start=function(){var e=this.game.storage.getState(),t=Wg(e);t&&t.name===this.name&&(this.reward=t.reward,this.initEvents())},t.getMissionData=function(){var e=this.game.storage.getState(),t=Wg(e);return t?t.name!==this.name?null:t:null},t.getDataByType=function(e){var t=this.getMissionData();if(!t)return null;var n=t.require[e];return{value:t.process[e],target:n}},t.isTypeRequired=function(e){var t=this.getDataByType(e);return!!t&&t.target>0},t.isMissionComplete=function(){var e=this.getMissionData();if(!e)return!0;var t=e.require,n=e.process,i=!0;return Object.keys(t).forEach((function(e){if(i){var r=t[e];n[e]<r&&(i=!1)}})),i},e}()),Vg=jg,qg=Yg.EVENTS,Xg=Yg.TYPES,Jg=function(e){function t(t,n){return e.call(this,t,Xg.COLLECT_GEMS,n)||this}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){ms.off(qg.MISSION_UPDATE,this.process),ms.on(qg.MISSION_UPDATE,this.process)},n.processMore=function(){return!0},t}(Vg),Qg=Jg,$g=Yg.EVENTS,ev=Yg.TYPES,tv=function(e){function t(t,n){return e.call(this,t,ev.COMBO,n)||this}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){ms.off($g.MISSION_UPDATE,this.process),ms.on($g.MISSION_UPDATE,this.process)},n.processMore=function(e){var t=this.getMissionData();if(!t)return!1;var n=e.type;return e.value>=t.require[n]},t}(Vg),nv=tv,iv=Yg.EVENTS,rv=Yg.TYPES,av=function(e){function t(t,n){return e.call(this,t,rv.USE_ITEM,n)||this}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){ms.off(iv.MISSION_UPDATE,this.process),ms.on(iv.MISSION_UPDATE,this.process)},n.processMore=function(e){return console.log("UseItem",{payload:e}),!0},t}(Vg),sv=av,ov=function(){function e(e){var t=this;this.game=void 0,this.listener=void 0,this.init=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.initData();case 2:t.initListeners(),t.initEvents();case 4:case"end":return e.stop()}}),e)}))),this.initData=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.game.storage.dispatch(function(){var e=(0,s.Z)(u().mark((function e(t,n){var i,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n(),!Sg(i)){e.next=4;break}return e.abrupt("return");case 4:return t({type:Hn,payload:{}}),e.next=7,bg();case 7:r=e.sent,t(Eg(r));case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)}))),this.startListener=function(e){t.listener[e]&&t.listener[e].start()},this.game=e,this.init()}var t=e.prototype;return t.initListeners=function(){var e=this;this.listener={};var t=this.game.storage.getState(),n=Ag(t);n&&Object.keys(n).forEach((function(t){switch(n[t].id){case Yg.TYPES.COLLECT_GEMS:e.listener[t]=new Qg(e.game,t);break;case Yg.TYPES.COMBO:e.listener[t]=new nv(e.game,t);break;case Yg.TYPES.USE_ITEM:e.listener[t]=new sv(e.game,t)}}))},t.initEvents=function(){ms.off(Yg.EVENTS.MISSION_START,this.startListener),ms.on(Yg.EVENTS.MISSION_START,this.startListener)},e}(),cv=ov,uv=function(e){try{var t=Zi(e),n=window.game.player,i=t.entryPointData||{},r=i.playerId,a=i.playerName,s=i.playerPhoto;return n.getPlayer().playerId===r?Di:new xe.Z(r,a,s).toObject()}catch(o){return console.warn(o),Di}},lv=function(){return function(e){try{window.game.facebook.getTournamentAsync().then((function(t){var n=t.getID().toString();e(Fr(n))})).catch((function(e){console.warn(e)})),e(ts())}catch(t){console.warn(t)}}},hv=function(){return function(e,t){try{var n=t(),i=Zi(n),r=window.game.player,a=r.getPlayer(),s=i.contextId,o=(i.entryPointData||{}).playerId,c=a.playerId===o,u=uv(n);c||r.updateConnectedPlayers([u]);var l=u.playerId;e(rs(s,l,!0))}catch(h){throw new Error("processInviteMode: "+h)}}},dv=function(){return function(e,t){try{var n=t(),i=Zi(n),r=window.game.player.getPlayer(),a=i.entryPointData||{},s=a.matchId,o=a.opponentId,c=a.playerId,u=r.playerId===c;e(ss(s,u?o:c))}catch(l){throw new Error("processChallengeFriendMode: "+l)}}},pv=function(){return function(e,t){try{var n=t(),i=Zi(n).entryPointData||{},r=i.playerId,s=i.playerScore;e(Xa(r,{score:s,level:0}));var o=uv(n),c=(0,a.Z)({},o,{score:s});e(as(c))}catch(u){throw new Error("processMatchingGroupMode: "+u)}}},fv=function(){return function(e){try{e(ns())}catch(t){throw new Error("processNewUserMode: "+t)}}},mv=n(40),gv={};Object.values(po.Z).forEach((function(e){gv[e]="./assets/sounds/"+e+".ogg"}));var vv={BACKGROUND:{KEY:"background",FILE:"./assets/music/bg_music.mp3"},EFFECTS:gv},yv=n(32),bv="How about diving into the game for a relaxing experience?",Av=GameCore.Configs.Notification.DailyNotificationMessages,Sv=void 0===Av?{}:Av,Ev=function(){function e(){}e.sendNewUserNotification=function(){var e=(0,s.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getInstance(),e.abrupt("return",t.sendNewUserNotificationInstance());case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e.sendDailyNotification=function(){var e=(0,s.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getInstance(),e.abrupt("return",t.sendDailyNotificationInstance());case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e.sendTestDailyNotification=function(){var e=(0,s.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.getInstance();case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),e.getInstance=function(){return this._instance||(this._instance=new e),this._instance};var t=e.prototype;return t.sendNewUserNotificationInstance=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i,r,a,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.game,n=t.player,i=t.facebook,r=t.rollbar,e.prev=1,n.getPlayerIsNew()){e.next=5;break}return e.abrupt("return");case 5:if(n.getPlayerASID()){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,FBInstant.player.getDataAsync(["isNotificationFirstSent"]);case 10:if(e.t0=e.sent,e.t0){e.next=13;break}e.t0={};case 13:if(a=e.t0,!0!==a.isNotificationFirstSent){e.next=17;break}return e.abrupt("return");case 17:return s={message:bv,delayTime:14400,type:yv.Z.NEW_USER_NOTIFICATION},e.next=20,i.sendNotificationAsync(s);case 20:FBInstant.player.setDataAsync({isNotificationFirstSent:!0}),e.next=26;break;case 23:e.prev=23,e.t1=e.catch(1),r.sendException(e.t1);case 26:case"end":return e.stop()}}),e,null,[[1,23]])})));return function(){return e.apply(this,arguments)}}(),t.sendDailyNotificationInstance=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=window.game.rollbar,e.prev=1,n=new Date,i=n.getDay(),e.t0=i,e.next=0===e.t0?7:1===e.t0?10:2===e.t0?13:3===e.t0?16:4===e.t0?19:22;break;case 7:return e.next=9,this.sendMondayNotification();case 9:return e.abrupt("break",22);case 10:return e.next=12,this.sendTuesdayNotification();case 12:return e.abrupt("break",22);case 13:return e.next=15,this.sendWednesdayNotification();case 15:return e.abrupt("break",22);case 16:return e.next=18,this.sendThursdayNotification();case 18:return e.abrupt("break",22);case 19:return e.next=21,this.sendFridayNotification();case 21:return e.abrupt("break",22);case 22:return e.next=24,this.sendSaturdayNotification();case 24:return e.next=26,this.sendSundayNotification();case 26:e.next=31;break;case 28:e.prev=28,e.t1=e.catch(1),t.sendException(e.t1);case 31:case"end":return e.stop()}}),e,this,[[1,28]])})));return function(){return e.apply(this,arguments)}}(),t.sendMondayNotification=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i,r,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,i=t.rollbar,e.prev=1,a={message:null!=(r=Sv.MONDAY)?r:bv,delayTime:86400,type:yv.Z.MONDAY_NOTIFICATION},e.next=5,n.sendNotificationAsync(a);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),i.sendException(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),t.sendTuesdayNotification=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i,r,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,i=t.rollbar,e.prev=1,a={message:null!=(r=Sv.TUESDAY)?r:bv,delayTime:86400,type:yv.Z.TUESDAY_NOTIFICATION},e.next=5,n.sendNotificationAsync(a);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),i.sendException(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),t.sendWednesdayNotification=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i,r,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,i=t.rollbar,e.prev=1,a={message:null!=(r=Sv.WEDNESDAY)?r:bv,delayTime:86400,type:yv.Z.WEDNESDAY_NOTIFICATION},e.next=5,n.sendNotificationAsync(a);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),i.sendException(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),t.sendThursdayNotification=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i,r,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,i=t.rollbar,e.prev=1,a={message:null!=(r=Sv.THURSDAY)?r:bv,delayTime:86400,type:yv.Z.THURSDAY_NOTIFICATION},e.next=5,n.sendNotificationAsync(a);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),i.sendException(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),t.sendFridayNotification=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i,r,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,i=t.rollbar,e.prev=1,a={message:null!=(r=Sv.FRIDAY)?r:bv,delayTime:86400,type:yv.Z.FRIDAY_NOTIFICATION},e.next=5,n.sendNotificationAsync(a);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),i.sendException(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),t.sendSaturdayNotification=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i,r,a,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,i=t.rollbar,e.prev=1,a=this.findDelayTimeForNextDay(6,10),s={message:null!=(r=Sv.SATURDAY)?r:bv,delayTime:a,type:yv.Z.SATURDAY_NOTIFICATION},e.next=6,n.sendNotificationAsync(s);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),i.sendException(e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),t.sendSundayNotification=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i,r,a,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,i=t.rollbar,e.prev=1,a=this.findDelayTimeForNextDay(0,10),s={message:null!=(r=Sv.SUNDAY)?r:bv,delayTime:a,type:yv.Z.SUNDAY_NOTIFICATION},e.next=6,n.sendNotificationAsync(s);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),i.sendException(e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),t.findDelayTimeForNextDay=function(e,t){if(e<0||e>6)throw new Error("Invalid day for notification");if(t<0||t>23)throw new Error("Invalid hour for notification");var n=Date.now(),i=new Date(n).getDay(),r=new Date(n).getHours(),a=e,s=t;if(i===a&&r>=s){var o=3600*(168-r+s);if(o>604800)throw new Error("Notification delay time is more than 7 days");return o}var c=a<i?7-i+a:a-i;s<r&&c--;var u=3600*(24*c+(s<r?24-r+s:s-r));if(u>604800)throw new Error("Notification delay time is more than 7 days");return u},t.sendTestDailyNotificationInstance=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i,r,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={0:"SUNDAY",1:"MONDAY",2:"TUESDAY",3:"WEDNESDAY",4:"THURSDAY",5:"FRIDAY",6:"SATURDAY"},e.prev=1,r=bv,!(t<0||t>6)){e.next=5;break}throw new Error("Invalid day for notification. Day must be between 0 (Sunday) and 6 (Saturday)");case 5:return r=null!=(i=Sv[n[t]])?i:bv,a={message:r,delayTime:300,type:yv.Z.GENERIC_NOTIFICATION},e.next=9,window.game.facebook.sendNotificationAsync(a);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.warn(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),e}();Ev._instance=void 0;var wv=Ev,Cv=GameCore.Configs.Notification.ApiUrl,Tv=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.playerId,e.next=3,(0,ve.v)("players/"+n,t,{},Cv,10);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Iv=Phaser.Loader.Events.FILE_KEY_COMPLETE,xv=GameCore.Configs,kv=xv.AppId,Pv=xv.Notification,Lv=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this).loadLevelAndSpinesReadyPromise=void 0,t.handleFBInstantGameStarted=function(){window.__fbGameReady=!0,window.__fbPlatform=FBInstant.getPlatform(),t.player.requestConnectedPlayers()},t.processAfterUpdatePlayerProfile=function(){Pv.Enable&&(t.updatePlayerProfileToNotificationService(),Pv.DisableSendNotification||(wv.sendNewUserNotification(),wv.sendDailyNotification()))},t.startGame=function(){t.analytics.event(At._.APP_READY),t.storage.dispatch((0,mv.I)(Yi.C.LOAD_SCENE)),t.storage.dispatch((function(e,t){var n=window.game,i=n.player,r=n.analytics;n.globalScene;try{var a=t(),s=Zi(a),o=Gi(a),c=(i.getPlayer(),(s.entryPointData||{}).type),u=i.getPlayerIsNew();if(u&&r.event(At._.NEW_USER),o===_i)return void e(lv());if(o===Ni){if(c===Li)return void e(hv());if(c===Oi)return void e(dv())}if(o===Mi)return void e(pv());if(u)return void e(fv());e(ns())}catch(l){e(ns()),console.warn(l)}}))},t.handleLoadMusicCompleted=function(){t.audio.initMusic(vv.BACKGROUND.KEY),!!t.game.player.getPlayerSetting("music")&&t.audio.playMusic()},t.loadSpine=function(e){var n=e.KEY_JSON,i=e.jsonPATH,r=e.KEY_ATLAS,a=e.atlasPATH;t.load.spineJson(n,i),t.load.spineAtlas(r,a)},t}(0,o.Z)(t,e);var n=t.prototype;return n.preload=function(){var e=this;this.facebook.progressLoading.loadingProgressFbLoadScene(),this.analytics.event(At._.SCREEN_OPEN,{screen_name:"LoadScene"}),this.load.on("progress",(function(t){e.facebook.progressLoading.onProgress(t)})),this.load.on(Phaser.Loader.Events.FILE_LOAD_ERROR,(function(e){var t=new jm("Load resources at LoadScene failed.");(0,i.R0)(t,{file:null==e?void 0:e.url})})),this.load.bitmapFont(eo.Z.PRIMARY.KEY,eo.Z.PRIMARY.en.TEXTURE,eo.Z.PRIMARY.en.DATA),this.load.bitmapFont(eo.Z.MIKADO.KEY,eo.Z.MIKADO.en.TEXTURE,eo.Z.MIKADO.en.DATA),this.load.image(Ri.Z.BACKGROUND.KEY,Ri.Z.BACKGROUND.FILE),this.world.getScreenRatio()>GameCore.Configs.Game.PortraitRatio&&this.load.image(Ri.Z.LANDSCAPE_BACKGROUND.KEY,Ri.Z.LANDSCAPE_BACKGROUND.FILE),this.load.atlas({key:ys.Z.GAME_PLAY.KEY,textureURL:ys.Z.GAME_PLAY.TEXTURE,atlasURL:ys.Z.GAME_PLAY.JSON}),this.load.atlas({key:ys.Z.DEFAULT.KEY,textureURL:ys.Z.DEFAULT.TEXTURE,atlasURL:ys.Z.DEFAULT.JSON});this.load.audio("cat-movement_jump",vv.EFFECTS.cat_movement_jump),this.loadLevelAndSpinesReadyPromise=this.loadLevelAndSpinesAsync()},n.create=function(){this.createAsync()},n.createAsync=function(){var e=(0,s.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadLevelAndSpinesReadyPromise;case 2:this.player.updateData().then(this.processAfterUpdatePlayerProfile).catch(i.tO),t=this.player.getLevel(),this.level.preloadLevelDataAsync(t+1),this.audio.initSound(),this.audio.importSoundEffectKeys(vv.EFFECTS),this.analytics.event(At._.LOAD_COMPLETE),this.facebook.on("startgame",this.handleFBInstantGameStarted),this.facebook.gameStarted(),this.setupGlobalScene(),this.lazyLoadResource(),this.handleShowAdWhenStartGame(),this.startGame();case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.updatePlayerProfileToNotificationService=function(){var e=this.player.getPlayer(),t=e.playerId,n=e.name,i=e.photo,r=e.locale,a=e.ASID,s={appId:kv,playerId:t,name:n,photo:i,locale:r,ASID:a};console.info("\ud83d\ude80 > profileData",s),Tv(s)},n.setupGlobalScene=function(){var e=this.scene.get(Yi.C.GLOBAL_SCENE);e instanceof Yf.Z&&e.setup()},n.initModules=function(){new cv(this.game),new vg(this.game)},n.lazyLoadResource=function(){var e=this;setTimeout((function(){e.scene.wake(),e.loadSounds(),e.loadWideframesResource(),e.lazyLoadAllCatSpines(),e.load.once(Phaser.Loader.Events.COMPLETE,(function(){e.scene.sleep()}))}),1500)},n.loadSounds=function(){var e=this;this.load.once(Iv+"audio-"+vv.BACKGROUND.KEY,this.handleLoadMusicCompleted),this.load.audio(vv.BACKGROUND.KEY,vv.BACKGROUND.FILE),Object.keys(vv.EFFECTS).forEach((function(t){e.load.audio(t,vv.EFFECTS[t])}))},n.loadWideframesResource=function(){this.frameCapture.preload({"wide-frame-message-win":"./assets/wideframes/wide-frame-message-win.png"})},n.loadLevelPromises=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,r,a,s,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,FBInstant.player.getDataAsync(["level","countItems"]);case 3:r=e.sent,a=null!=(t=null==r?void 0:r.level)?t:1,s=null!=(n=null==r?void 0:r.countItems)?n:{undoCount:GameCore.Configs.Gameplay.UndoCount,hintCount:GameCore.Configs.Gameplay.HintCount,lastTimeUpdate:(new Date).getTime()},o={level:a,countItems:s},this.storage.dispatch(Ve(o)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),(0,i.tO)(e.t0);case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),n.loadLevelAndSpinesAsync=function(){var e=(0,s.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t=3),e.prev=1,e.next=4,this.loadLevelPromises();case 4:return n=this.player.getLevel(),this.level.setLevel(n),e.next=8,this.level.preloadLevelDataAsync(n);case 8:this.loadCatSpinesInCurrentLevel(),e.next=17;break;case 11:if(e.prev=11,e.t0=e.catch(1),0!==t){e.next=15;break}return e.abrupt("return");case 15:return e.next=17,this.loadLevelAndSpinesAsync(t-1);case 17:case"end":return e.stop()}}),e,this,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),n.loadCatSpinesInCurrentLevel=function(){var e=this.level.getLevelData();if(e){var t=this.catSpine.mapLevelDataToSpineDataMap(e);Object.values(t).forEach(this.loadSpine)}},n.lazyLoadAllCatSpines=function(){var e=this;Object.values(ys.Z).forEach((function(t){"KEY_JSON"in t&&e.loadSpine(t)}))},n.handleShowAdWhenStartGame=function(){var e=this;if(GameCore.Configs.Ads.InterstitialAdOptions.showWhenStartGame){var t={en:"Initializing...",ru:"\u0418\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f...",pt:"Inicializando...",es:"Inicializando...",ar:"\u062a\u0647\u064a\u0626\u0629...",hi:"\u092a\u094d\u0930\u093e\u0930\u0902\u092d \u0915\u0930 \u0930\u0939\u093e \u0939\u0948...",zh:"\u521d\u59cb\u5316\u4e2d...",tr:"Ba\u015flat\u0131l\u0131yor...",ja:"\u521d\u671f\u5316\u4e2d...",fr:"Initialisation en cours...",id:"Menginisialisasi...",de:"Initialisierung...",it:"Inizializzazione..."}[this.lang.getCurrentLanguage()||""]||"",n=document.createElement("div");n.id="wait-ads-mask";var r=document.createElement("div");r.id="wait-ads-content",n.appendChild(r);var a=document.createElement("div");a.id="wait-ads-dual-ring",r.appendChild(a);var o=document.createElement("div");o.id="wait-ads-text",o.innerHTML=t,r.appendChild(o),document.body.appendChild(n),this.audio.muteAll(),setTimeout((0,s.Z)(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.audio.stopMusic(),e.audio.muteAll(),t.next=5,e.ads.preloadInterstitialAdAsync();case 5:return t.next=7,e.ads.showInterstitialAdAsync();case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),(0,i.tO)(t.t0);case 12:return t.prev=12,n.remove(),e.audio.unmuteAll(),e.audio.playMusic(),t.finish(12);case 17:case"end":return t.stop()}}),t,null,[[0,9,12,17]])}))),0)}},t}(Phaser.Scene),Ov=Lv,Rv=ys.Z.DEFAULT,Dv=Rv.KEY,Bv=Rv.FRAME,Nv=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.avatar=void 0,n.crown=void 0,n.playerName=void 0,n.playerScore=void 0,n.scene=t,n.createAvatar(),n.updateSize(),n.createWinCrown(),n.createPlayerName(),n.createPlayerScore(),n.scene.add.existing((0,vs.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.showCrown=function(e){this.crown.setVisible(e),this.avatar.setFrame(Bv.BLANK),this.avatar.setBackground(Bv.BLANK)},n.setPlayerName=function(e){this.playerName.setText(e)},n.setPlayerScore=function(e){this.playerScore.setText(""+e)},n.loadPhoto=function(e,t){this.avatar.loadPhoto(e,t,60)},n.updateSize=function(){var e=this.avatar,t=e.width,n=e.height;this.setSize(t,n)},n.createAvatar=function(){this.avatar=new ah(this.scene,{key:Dv,frame:Bv.BLANK,background:Bv.BLANK,width:89,height:89}),this.add(this.avatar)},n.createWinCrown=function(){this.crown=this.scene.make.image({key:Dv,frame:Bv.BLANK}),this.crown.setWorldSize(52,36),Phaser.Display.Align.In.TopCenter(this.crown,this.avatar,0,75),this.add(this.crown)},n.createPlayerName=function(){this.playerName=this.scene.make.text({style:{fontFamily:eo.Z.FONT_FAMILY,fontSize:this.scene.fontSize(42)+"px",fontStyle:"bold"},origin:{x:.5,y:.5}}),this.playerName.setTint(11632207),this.playerName.setHighQuality(),Phaser.Display.Align.In.BottomCenter(this.playerName,this.avatar,0,25),this.add(this.playerName)},n.createPlayerScore=function(){this.playerScore=this.scene.make.bitmapText({size:this.scene.fontSize(30),font:eo.Z.PRIMARY.KEY,origin:{x:.5,y:.5}}),this.playerScore.setTint(6762627),Phaser.Display.Align.In.BottomCenter(this.playerScore,this.playerName,0,25),this.add(this.playerScore)},t}(Phaser.GameObjects.Container),Mv=Nv,_v=ys.Z.DEFAULT,Zv=_v.KEY,Gv=_v.FRAME,Uv=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.board=void 0,n.titleText=void 0,n.playerScore=void 0,n.opponentScore=void 0,n.buttonClose=void 0,n.buttonRestart=void 0,n.buttonShare=void 0,n.scene=t,n.createBoard(),n.createTitle(),n.createVSText(),n.createPlayers(),n.createRestartButton(),n.createShareButton(),n.scene.add.existing((0,vs.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBoard=function(){this.board=new Dc(this.scene,0,0,600,340),this.board.setDepth(nr.Z.BACKGROUND),this.add(this.board),Phaser.Display.Align.In.Center(this.board,this)},n.createTitle=function(){var e=this.scene.add.container(),t=this.scene.make.image({key:Zv,frame:Gv.BLANK});t.setWorldSize(340,75),this.titleText=this.scene.make.bitmapText({font:eo.Z.PRIMARY.KEY,size:this.scene.fontSize(32),origin:{x:.5,y:.5}}),Phaser.Display.Align.In.Center(this.titleText,t,0,-10),this.buttonClose=new Vs.Z(this.scene,Zv,Gv.BLANK,41.8,41.8),this.buttonClose.setName("Close"),Phaser.Display.Align.In.RightCenter(this.buttonClose,t,0,-3),e.setDepth(nr.Z.TILE),e.add([t,this.titleText,this.buttonClose]),this.add(e),Phaser.Display.Align.In.Center(e,this.board,0,-170)},n.createVSText=function(){var e=this.scene.make.bitmapText({font:eo.Z.PRIMARY.KEY,size:this.scene.fontSize(70),text:"VS",origin:{x:.5,y:.5}});e.setTint(11632207),e.setDepth(nr.Z.TEXT),this.add(e),Phaser.Display.Align.In.Center(e,this.board,0,-45)},n.createPlayers=function(){this.playerScore=new Mv(this.scene),this.playerScore.setDepth(nr.Z.ITEM),this.add(this.playerScore),Phaser.Display.Align.In.Center(this.playerScore,this.board,-100,-50),this.opponentScore=new Mv(this.scene),this.opponentScore.setDepth(nr.Z.ITEM),this.add(this.opponentScore),Phaser.Display.Align.In.Center(this.opponentScore,this.board,100,-50)},n.createRestartButton=function(){this.buttonRestart=new sh.Z(this.scene,{key:Zv,button:Gv.BLANK,icon:Gv.BLANK,text:"Restart"},170,72),this.buttonRestart.setName("Restart"),this.buttonRestart.setDepth(nr.Z.BUTTON),this.add(this.buttonRestart),Phaser.Display.Align.In.Center(this.buttonRestart,this.opponentScore,0,155)},n.createShareButton=function(){this.buttonShare=new sh.Z(this.scene,{key:Zv,button:Gv.BLANK,icon:Gv.BLANK,text:"Share"},153,72),this.buttonShare.setName("Restart"),this.buttonShare.setDepth(nr.Z.BUTTON),this.add(this.buttonShare),Phaser.Display.Align.In.Center(this.buttonShare,this.playerScore,0,155)},t}(Phaser.GameObjects.Container),Fv=Uv,Hv=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).main=void 0,t.run=function(){t.getResultInfo()},t.handleClose=function(){t.scene.sleep(Yi.C.RESULT_MATCH_SCENE),t.scene.run(Yi.C.GAME_OVER_SCENE)},t.handleShareScore=function(){t.storage.dispatch(function(){var e=(0,s.Z)(u().mark((function e(t,n){var r,a,s,o,c,l,h,d,p,f,m;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=window.game,a=r.player,s=r.analytics,o=r.facebook,c=r.globalScene,e.prev=1,c.screen.open(ir.o4.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),l=n(),e.next=6,Ah(l);case 6:return h=e.sent,ph(h),d=a.getPlayer(),p=d.playerId,f=d.name,m=d.photo,e.next=11,o.shareAsync({text:"Pheww, a great match!",intent:"SHARE",image:h||"",data:{playerId:p,playerName:f,playerPhoto:m,type:Li}});case 11:s.event(At._.SHARE,{share_content_type:"MatchResult",success:!0}),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),s.event(At._.SHARE,{share_content_type:"MatchResult",success:!1}),(0,i.tO)(e.t0);case 18:return e.prev=18,c.screen.close(ir.o4.NOTIFY_SCREEN),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[1,14,18,21]])})));return function(t,n){return e.apply(this,arguments)}}())},t.handleRestartMatch=function(){t.storage.dispatch(function(){var e=(0,s.Z)(u().mark((function e(t,n){var r,a,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,window.game.globalScene.screen.open(ir.o4.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),r=n(),a=Br(r),[Bi,_i].indexOf(a)>=0&&(t(Fa()),t(_a())),s=null,a===Ni&&(s=ia(r),t({type:yn,payload:{}})),t(qa()),e.next=11,t(us(a,s));case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),(0,i.tO)(e.t0);case 16:return e.prev=16,es(300),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[0,13,16,19]])})));return function(t,n){return e.apply(this,arguments)}}()),t.scene.sleep(Yi.C.RESULT_MATCH_SCENE),t.scene.sleep(Yi.C.GAME_OVER_SCENE)},t}(0,o.Z)(t,e);var n=t.prototype;return n.preload=function(){this.events.on("wake",this.run),this.events.on("create",this.run)},n.create=function(){e.prototype.create.call(this),this.createMask(.8),this.createMain(),this.createInput()},n.getResultInfo=function(){var e=this.storage.getState(),t=ca(e),n=Br(e),i=this.player.getPlayer(),r=i.photo,a=i.name,s=i.playerId,o=ia(e),c=o.playerId,u=o.name,l=o.photo,h=(t[s]||{}).score,d=void 0===h?0:h,p=(t[c]||{}).score,f=void 0===p?0:p,m=aa(e,{playerId:s}),g=sa(e,{opponentId:c});n===Mi&&(m=!0,g=!0);var v=m&&g;this.main.playerScore.loadPhoto(s,r),this.main.opponentScore.loadPhoto(c,l),this.main.playerScore.setPlayerName(a),this.main.opponentScore.setPlayerName(u),this.main.playerScore.setPlayerScore(d),this.main.opponentScore.setPlayerScore(f),this.main.playerScore.showCrown(v&&d>f),this.main.opponentScore.showCrown(v&&f>d),m&&g?d===f?this.main.titleText.setText("Draw"):d>f?this.main.titleText.setText("You Win"):d<f&&this.main.titleText.setText("You Lose"):this.main.titleText.setText("Waiting for Opponent")},n.createMain=function(){this.main=new Fv(this),Phaser.Display.Align.In.Center(this.main,this.gameZone,0,13)},n.createInput=function(){this.main.buttonClose.onClick=this.handleClose,this.main.buttonRestart.onClick=this.handleRestartMatch,this.main.buttonShare.onClick=this.handleShareScore},t}(gs.Z);var zv=Hv,Kv=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this).isVisible=!0,t.browserPrefixes=["moz","ms","o","","webkit"],t.visibleCallbacks=[],t.hiddenCallbacks=[],t.handleVisibilityChange=function(e){if("boolean"===typeof e)return e?t.onVisibleEvent():t.onHiddenEvent();var n=t.getBrowserPrefix(),i=t.getHiddenPropertyName(n);return document[i]?t.onHiddenEvent():t.onVisibleEvent()},t}(0,o.Z)(t,e);var n=t.prototype;return n.configure=function(){var e=this,t=this.getBrowserPrefix(),n=this.getVisibilityEvent(t);document.addEventListener(n,this.handleVisibilityChange,!1),document.addEventListener("focus",(function(){e.handleVisibilityChange(!0)}),!1),document.addEventListener("blur",(function(){e.handleVisibilityChange(!1)}),!1),window.addEventListener("focus",(function(){e.handleVisibilityChange(!0)}),!1),window.addEventListener("blur",(function(){e.handleVisibilityChange(!1)}),!1)},n.addEventVisible=function(e){this.visibleCallbacks.push(e)},n.addEventHidden=function(e){this.hiddenCallbacks.push(e)},n.isGameVisible=function(){return this.isVisible},n.getHiddenPropertyName=function(e){return e?e+"Hidden":"hidden"},n.getVisibilityEvent=function(e){return(e||"")+"visibilitychange"},n.getBrowserPrefix=function(){for(var e=0;e<this.browserPrefixes.length;e++)if(this.getHiddenPropertyName(this.browserPrefixes[e])in document)return this.browserPrefixes[e];return""},n.onVisibleEvent=function(){this.isVisible||(this.isVisible=!0,console.log("visible"),this.visibleCallbacks.forEach((function(e){e()})))},n.onHiddenEvent=function(){this.isVisible&&(this.isVisible=!1,console.log("hidden"),this.hiddenCallbacks.forEach((function(e){e()})))},t}(Phaser.Plugins.BasePlugin),Yv=Kv,Wv=n(67),jv=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this).level=1,t.maxLevel=1,t.promisePreloadLevel={},t.loadedLevel={},t.stepLevel=100,t}(0,o.Z)(t,e);var n=t.prototype;return n.getLevel=function(){return this.level},n.getMaxLevel=function(){return this.maxLevel},n.setLevel=function(e){this.level=e,this.maxLevel=Math.max(this.level,e)},n.setMaxLevel=function(e){this.maxLevel=e},n.setLevelCustom=function(e){this.loadedLevel[this.getKeyLevel(this.level)]=e},n.nextLevel=function(){this.level+=1,this.preloadCurrentLevel()},n.preloadCurrentLevel=function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.preloadLevelDataAsync(this.level);case 2:return e.next=4,this.preloadLevelDataAsync(this.level+1);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.getKeyLevel=function(e){return"level_"+GameCore.Utils.Number.padStart(e,5)},n.getLevelPath=function(e){var t=Math.floor((e-1)/this.stepLevel);return"level_"+GameCore.Utils.Number.padStart(t*this.stepLevel+1,5)+"-"+this.stepLevel},n.preloadLevelDataAsync=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i,r,a,s,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=GameCore.Configs.Level,!((t=t||this.level)>n.maxLevel)){e.next=4;break}return e.abrupt("return");case 4:if(i=this.getKeyLevel(t),r=this.getLevelPath(t),!(a=this.loadedLevel[i])){e.next=9;break}return e.abrupt("return",a);case 9:return(!Object.keys(this.promisePreloadLevel).includes(r)||n.alwaysLoadNew)&&(this.promisePreloadLevel[r]=this.preloadLevelWithRetry(t,n.retryCount,n.retryDelay)),e.next=13,this.promisePreloadLevel[r];case 13:if(s=e.sent){e.next=19;break}return delete this.promisePreloadLevel[r],e.abrupt("return");case 19:for(o=1;o<=s.length;o++)this.loadedLevel[this.getKeyLevel(Math.floor((t-1)/this.stepLevel)*this.stepLevel+o)]=s[o-1];return e.abrupt("return",this.loadedLevel[i]);case 21:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.preloadLevelWithRetry=function(){var e=(0,s.Z)(u().mark((function e(t,n,i){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===n&&(n=3),void 0===i&&(i=2e3),!(n<0)){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,this.preloadLevel(t);case 6:if(r=e.sent){e.next=11;break}return e.next=10,(0,jc.qZ)(i);case 10:return e.abrupt("return",this.preloadLevelWithRetry(t,n-1));case 11:return e.abrupt("return",r);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n,i){return e.apply(this,arguments)}}(),n.preloadLevel=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i,r,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=this.getLevelPath(t),i=GameCore.Configs.Level.url,e.next=5,fetch(""+i+n+".json",{method:"GET"});case 5:return r=e.sent,e.next=8,r.json();case 8:return a=e.sent,e.abrupt("return",a);case 12:return e.prev=12,e.t0=e.catch(0),e.abrupt("return");case 15:case"end":return e.stop()}}),e,this,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),n.getLevelDataAsync=function(){var e=(0,s.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.preloadLevelDataAsync(t||this.level);case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return");case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),n.getLevelData=function(e){var t=this.getKeyLevel(e||this.level);return this.loadedLevel[t]},t}(Phaser.Plugins.BasePlugin),Vv=jv,qv=function(e){return e.PASSED="passed",e.READY="ready",e.WAITING="waiting",e}({}),Xv=ys.Z.DEFAULT,Jv=Xv.KEY,Qv=Xv.FRAME,$v=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).scene=void 0,i.levelBackground=void 0,i.tick=void 0,i.lock=void 0,i.overlay=void 0,i.levelNumber=void 0,i.level=void 0,i.tweenClick=void 0,i.payload=void 0,i.scene=t,i.init(),n&&i.updateInfo(n),i.scene.add.existing((0,vs.Z)(i)),i}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){var e=this;this.createLevelBackground(),this.createText(),this.createOverlay(),this.createImageCheck(),this.createLock(),this.updateSize(),this.alignLevelItem(),this.setInteractive({useHandCursor:!0}),this.on(Phaser.Input.Events.POINTER_DOWN,(function(){e.disableInteractive(),e.scene.audio.playSound(po.Z.BUTTON_CLICK),e.tweenClick?e.tweenClick.play():e.scene.handlePlay()}))},n.createLevelBackground=function(){this.levelBackground=this.scene.make.image({key:Jv,frame:Qv.ICON_MAP_LOCK}),this.levelBackground.setWorldSize(57,64.5),this.levelBackground.setVisible(!1),this.add(this.levelBackground)},n.updateSize=function(){var e=this.levelBackground,t=e.width,n=e.height;this.setSize(t,n)},n.createImageCheck=function(){this.tick=this.scene.make.image({key:Jv,frame:Qv.ICON_CHECK}),this.tick.setWorldSize(33.5,30.5),this.tick.setVisible(!1),this.add(this.tick)},n.createText=function(){this.levelNumber=this.scene.make.bitmapText({font:eo.Z.PRIMARY.KEY,size:this.scene.fontSize(25),text:""+this.level,origin:{x:.2,y:.5}}),this.add(this.levelNumber)},n.createLock=function(){this.lock=this.scene.make.image({key:Jv,frame:Qv.ICON_LOCK}),this.lock.setWorldSize(23,28),this.add(this.lock)},n.createOverlay=function(){this.overlay=this.scene.make.image({key:Jv,frame:Qv.ICON_MAP_INCOMPLETE}),this.overlay.setWorldSize(57,64.5),this.overlay.setTint(4473924),this.overlay.setAlpha(.4),this.overlay.setVisible(!1),this.add(this.overlay)},n.getLevel=function(){return this.level},n.updateInfoLevel=function(){switch(this.disableInteractive(),this.payload.status){case qv.PASSED:this.levelBackground.setFrame(Qv.ICON_MAP_INCOMPLETE),this.tick.setVisible(!0),this.overlay.setVisible(!0),this.lock.setVisible(!1);break;case qv.READY:this.setInteractive({useHandCursor:!0}),this.createTweenClick(),this.levelBackground.setFrame(Qv.ICON_MAP_INCOMPLETE),this.tick.setVisible(!1),this.overlay.setVisible(!1),this.lock.setVisible(!1);break;case qv.WAITING:this.levelBackground.setFrame(Qv.ICON_MAP_LOCK),this.tick.setVisible(!1),this.overlay.setVisible(!1),this.lock.setVisible(!0)}},n.updateInfo=function(e){this.payload=(0,a.Z)({},e),this.updateInfoLevel(),this.updateText(),this.updateBackground(),this.alignLevelItem()},n.createTweenClick=function(){var e=this,t=this.scale;this.tweenClick=this.scene.tweens.add({targets:[this],duration:100,paused:!0,yoyo:!0,scale:{from:t,to:.9*t},onComplete:function(){e.scene.handlePlay()}})},n.updateBackground=function(){this.levelBackground.setVisible(!0)},n.updateText=function(){var e=""+this.payload.level;this.levelNumber.setText(e),e.length>=4?this.levelNumber.setFontSize(this.scene.fontSize(22)):this.levelNumber.setFontSize(this.scene.fontSize(26)),Phaser.Display.Align.In.Center(this.levelNumber,this.levelBackground)},n.alignLevelItem=function(){Phaser.Display.Align.In.Center(this.lock,this.levelBackground,-23,-25),Phaser.Display.Align.In.Center(this.tick,this.levelBackground),Phaser.Display.Align.In.Center(this.levelNumber,this.levelBackground)},n.setStatus=function(e){this.payload.status=e},n.setTextLevel=function(e){this.payload.level=e},t}(Phaser.GameObjects.Container),ey=ys.Z.DEFAULT,ty=ey.KEY,ny=ey.FRAME,iy=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).scene=void 0,i.background=void 0,i.levelItem1=void 0,i.levelItem2=void 0,i.levelItem3=void 0,i.levelItem4=void 0,i.payload=void 0,i.scene=t,i.init(),n&&(i.updateInfo(n),console.log(i.payload)),i.scene.add.existing((0,vs.Z)(i)),i}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.createBackground(),this.updateSize(),this.createLevelItem()},n.createBackground=function(){this.background=this.scene.make.image({key:ty,frame:ny.BLANK}),this.background.setWorldSize(325,85),this.background.setVisible(!1),this.add(this.background)},n.updateSize=function(){var e=this.background,t=e.width,n=e.height;this.setSize(t,n)},n.updateInfo=function(e){this.payload=(0,a.Z)({levelItem2:{level:0,status:""},levelItem3:{level:0,status:""},levelItem4:{level:0,status:""}},e),this.updateLevelItem()},n.createLevelItem=function(){this.levelItem1=new $v(this.scene,{level:1,status:qv.WAITING}),this.add(this.levelItem1),Phaser.Display.Align.In.Center(this.levelItem1,this,-105,0),this.levelItem2=new $v(this.scene,{level:2,status:qv.WAITING}),this.add(this.levelItem2),this.levelItem2.setVisible(!1),Phaser.Display.Align.In.Center(this.levelItem2,this,-35,0),this.levelItem3=new $v(this.scene,{level:3,status:qv.WAITING}),this.add(this.levelItem3),this.levelItem3.setVisible(!1),Phaser.Display.Align.In.Center(this.levelItem3,this,35,0),this.levelItem4=new $v(this.scene,{level:4,status:qv.WAITING}),this.add(this.levelItem4),this.levelItem4.setVisible(!1),Phaser.Display.Align.In.Center(this.levelItem4,this,105,0)},n.updateLevelItem=function(){if(this.levelItem1.setStatus(this.payload.levelItem1.status),this.levelItem1.updateInfoLevel(),this.levelItem1.setTextLevel(this.payload.levelItem1.level),this.levelItem1.updateText(),this.levelItem2){if(""==this.payload.levelItem2.status)return this.levelItem2.setVisible(!1),this.levelItem3&&this.levelItem3.setVisible(!1),void(this.levelItem4&&this.levelItem4.setVisible(!1));this.levelItem2.setStatus(this.payload.levelItem2.status),this.levelItem2.updateInfoLevel(),this.levelItem2.setVisible(!0),this.levelItem2.setTextLevel(this.payload.levelItem2.level),this.levelItem2.updateText()}if(this.levelItem3){if(""==this.payload.levelItem3.status)return this.levelItem3.setVisible(!1),void(this.levelItem4&&this.levelItem4.setVisible(!1));this.levelItem3.setStatus(this.payload.levelItem3.status),this.levelItem3.updateInfoLevel(),this.levelItem3.setVisible(!0),this.levelItem3.setTextLevel(this.payload.levelItem3.level),this.levelItem3.updateText()}if(this.levelItem4){if(""==this.payload.levelItem4.status)return void this.levelItem4.setVisible(!1);this.levelItem4.setStatus(this.payload.levelItem4.status),this.levelItem4.updateInfoLevel(),this.levelItem4.setVisible(!0),this.levelItem4.setTextLevel(this.payload.levelItem4.level),this.levelItem4.updateText()}},t}(Phaser.GameObjects.Container),ry=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.scroller=void 0,n.scene=t,n.createReuseScroller(),n.scene.add.existing((0,vs.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createReuseScroller=function(){this.scroller=new lm(this.scene,{classType:iy,listConfigs:[],width:300,height:340,padding:0,marginTop:0,marginBottom:0,maxScrollOver:.3,scrollingBackRate:5}),this.scroller.setVisible(!1),this.scroller.createMask(),this.scroller.setPosition(0,0),this.add(this.scroller)},n.updateData=function(){var e=this.scene.player.getLevel();0===e&&(e=1);for(var t=[],n={levelItem1:{status:"",level:0}},i={levelItem1:{status:"",level:0}},r=1;r<=GameCore.Configs.Level.maxLevel;r++){var s="";s=r>e?qv.WAITING:r<e?qv.PASSED:qv.READY;var o="";switch(r%4){case 1:o="levelItem1";break;case 2:o="levelItem2";break;case 3:o="levelItem3";break;case 0:o="levelItem4"}n[o]={level:r,status:s},i[o]={level:r,status:s},r%4===0&&(t.push((0,a.Z)({},n)),i={levelItem1:{status:"",level:0}})}GameCore.Configs.Level.maxLevel%4>0&&t.push((0,a.Z)({},i)),this.scroller.updateConfig(t);var c=this.scroller.getChildren()[0].height;(this.scroller.value=-c*this.showDefaultLevel(e),e>GameCore.Configs.Level.maxLevel)&&this.scene.game.globalScene.screen.open(ir.o4.NOTIFY_SCREEN,{message:"UPDATING NEW LEVELS...",duration:3e3});this.showLeaders()},n.showDefaultLevel=function(e){var t=Math.ceil(e/4),n=Math.ceil(GameCore.Configs.Level.maxLevel/4);return n-t<3?n-4>0?n-4:0:t<3?0:t-2},n.removeLevelItems=function(){this.scroller.updateConfig([])},n.resetScroller=function(){this.scroller.destroy(),this.createReuseScroller()},n.getLevelItems=function(){return this.scroller.getChildren()},n.showLeaders=function(){var e=this.getLevelItems();if(!(e.length<1)){for(var t=e.length>8?8:e.length,n=0;n<t;n++){var i=e[n];if(!i)return;i.setVisible(!0)}this.scroller.setEnable(!0)}},t}(Phaser.GameObjects.Container),ay=ry,sy=ys.Z.DEFAULT,oy=sy.KEY,cy=sy.FRAME,uy=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this).popup=void 0,t.mainScreen=void 0,t.closeButton=void 0,t.mapRibbon=void 0,t.popupShowUpAnimation=void 0,t.popupExitAnimation=void 0,t.run=function(){t.mainScreen.updateData(),t.setDisabledButton(!1),t.runOpenAnimation()},t.handleCloseBtnClick=function(){var e=t.player.getLevel();t.level.setLevel(e),t.runCloseAnimation(),t.setDisabledButton(!0)},t.handlePlaySingle=function(){t.storage.dispatch(ns())},t.runCloseAnimation=function(){t.runPopupExitAnimation((function(){t.storage.dispatch(ns())}))},t}(0,o.Z)(t,e);var n=t.prototype;return n.preload=function(){this.events.on("wake",this.run),this.events.on("resume",this.run),this.events.on("create",this.run)},n.create=function(){e.prototype.create.call(this),this.createBackground(Ri.Z.BACKGROUND.KEY),this.createPopup(),this.createLevelScroller(),this.createCloseButton(),this.createMapRibbon(),this.popup.add([this.mainScreen,this.closeButton,this.mapRibbon]),Phaser.Display.Align.In.Center(this.popup,this.gameZone)},n.createPopup=function(){this.popup=new Dc(this,0,0,328,417)},n.createLevelScroller=function(){var e=this.world.getWorldSize(),t=e.width,n=e.height;this.mainScreen=new ay(this),this.mainScreen.setPosition(t/2,n/2),this.mainScreen.updateData(),this.mainScreen.scroller.setVisible(!0),Phaser.Display.Align.In.Center(this.mainScreen,this.popup,0,3)},n.createMapRibbon=function(){this.mapRibbon=this.make.image({key:oy,frame:cy.RIBBON_MAP}),this.mapRibbon.setWorldSize(276,63.5),Phaser.Display.Align.To.TopCenter(this.mapRibbon,this.popup,0,-24)},n.createCloseButton=function(){this.closeButton=new Vs.Z(this,oy,cy.BUTTON_CLOSE,38.5,38.5),this.closeButton.onClick=this.handleCloseBtnClick,Phaser.Display.Align.To.TopRight(this.closeButton,this.popup,12,-40)},n.runPopupEntrancesAnimation=function(e,t){var n,i=this;null==(n=this.popupShowUpAnimation)||n.remove();var r=this.popup,a=r.x,s=r.y;this.popup.setAlpha(0).setPosition(a,s+70),this.popupShowUpAnimation=this.tweens.add({targets:this.popup,duration:300,props:{y:{from:s+70,to:s,ease:Phaser.Math.Easing.Back.Out,duration:500},alpha:{from:0,to:1,ease:Phaser.Math.Easing.Cubic.Out,duration:500},scale:{from:.85,to:1,ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45],duration:1e3}},onComplete:function(){i.popup.setAlpha(1).setPosition(a,s),i.setDisabledButton(!1)}})},n.runPopupExitAnimation=function(e){var t,n=this;null==(t=this.popupExitAnimation)||t.remove();var i=this.popup,r=i.x,a=i.y;this.popupShowUpAnimation=this.tweens.add({targets:this.popup,duration:200,ease:Phaser.Math.Easing.Sine.Out,props:{alpha:{from:1,to:0}},onComplete:function(){n.popup.setAlpha(0).setPosition(r,a),e&&e()}})},n.runOpenAnimation=function(){this.runPopupEntrancesAnimation(0,300)},n.handlePlay=function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.runCloseAnimation();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.setDisabledButton=function(e){void 0===e&&(e=!0),this.closeButton.setDisabled(e)},t}(gs.Z);var ly=uy,hy=ys.Z.DEFAULT,dy=hy.KEY,py=hy.FRAME,fy=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this).popup=void 0,t.ribbonContainer=void 0,t.textContent=void 0,t.popupShowUpAnimation=void 0,t.run=function(){t.runPopupShowUpAnimation();var e=document.getElementById("app-bg-overlay");e&&(e.style.opacity="0",e.style.visibility="hidden")},t}(0,o.Z)(t,e);var n=t.prototype;return n.preload=function(){this.events.on("wake",this.run),this.events.on("create",this.run)},n.create=function(){e.prototype.create.call(this),this.createBackground(Ri.Z.BACKGROUND.KEY),this.createPopup(),this.createRibbon(),this.createTextContent(),this.alignContainers()},n.createTextContent=function(){var e=this.make.bitmapText({font:eo.Z.PRIMARY.KEY,size:this.fontSize(20),text:"CONGRATULATION",origin:{x:.5,y:.5}});this.ribbonContainer.add(e),this.textContent=this.make.bitmapText({font:eo.Z.MIKADO.KEY,size:this.fontSize(18),text:"You have passed all levels.\nPlease come back later,\nwe will update soon!",origin:{x:.5,y:.5}}),this.textContent.setCenterAlign(),this.textContent.setTint(0),this.popup.add([this.textContent])},n.createPopup=function(){this.popup=new Dc(this,0,0,276,300)},n.createRibbon=function(){this.ribbonContainer=this.add.container();var e=this.make.image({key:dy,frame:py.RIBBON_RED});e.setWorldSize(205,38),this.ribbonContainer.setSize(205,38),this.ribbonContainer.add([e]),this.popup.add(this.ribbonContainer)},n.alignContainers=function(){Phaser.Display.Align.In.TopCenter(this.ribbonContainer,this.popup,0,-20),Phaser.Display.Align.In.Center(this.textContent,this.popup),Phaser.Display.Align.In.Center(this.popup,this.gameZone)},n.runPopupShowUpAnimation=function(){var e,t=this;null==(e=this.popupShowUpAnimation)||e.remove();var n=this.popup,i=n.x,r=n.y;this.popup.setAlpha(0).setPosition(i,r+70),this.popupShowUpAnimation=this.tweens.add({targets:this.popup,duration:300,props:{y:{from:r+70,to:r,ease:Phaser.Math.Easing.Back.Out,duration:500},alpha:{from:0,to:1,ease:Phaser.Math.Easing.Cubic.Out,duration:500},scale:{from:.85,to:1,ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45],duration:1e3}},onComplete:function(){t.popup.setAlpha(1).setPosition(i,r)}})},t}(gs.Z),my=fy,gy=ys.Z.DEFAULT.FRAME,vy=function(e){function t(t){var n;return(n=e.call(this,t,{enable:!0,frameOn:gy.BLANK,frameOff:gy.BLANK,backgroundOn:gy.TOGGLE_BUTTON_ON,backgroundOff:gy.TOGGLE_BUTTON_OFF})||this).labelOn=void 0,n.labelOff=void 0,n.icon.setWorldSize(65,30),n.button.setWorldSize(65,30),n.icon.kill(),n.createLabelOn(),n.createLabelOff(),n}(0,o.Z)(t,e);var n=t.prototype;return n.updateStatus=function(t){e.prototype.updateStatus.call(this,t),t?(this.button.setX(0),this.labelOff.kill(),this.labelOn.revive()):(this.button.setX(-4),this.labelOff.revive(),this.labelOn.kill())},n.createLabelOn=function(){var e=this.scene.make.bitmapText({font:eo.Z.MIKADO.KEY,size:this.scene.fontSize(14),text:"ON",origin:{x:.5,y:.5}});e.setTint(0),this.add(e),e.setX(-12),this.labelOn=e},n.createLabelOff=function(){var e=this.scene.make.bitmapText({font:eo.Z.MIKADO.KEY,size:this.scene.fontSize(14),text:"OFF",origin:{x:.5,y:.5}});e.setTint(0),this.add(e),e.setX(10),this.labelOff=e},t}(Du),yy={en:20,ru:16},by=function(e){function t(t,n){var i,r=n.name,a=n.button,s=a.key,o=a.frame,c=a.width,u=a.height;return(i=e.call(this,t,s,o,c,u)||this).config=void 0,i.icon=void 0,i.label=void 0,i.config=n,i.setName(r),i.createIcon(),i.createLabel(),i}(0,o.Z)(t,e);var n=t.prototype;return n.createIcon=function(){var e=this.config.icon,t=e.key,n=e.frame,i=e.width,r=e.height,a=e.x,s=e.y,o=this.scene.make.image({key:t,frame:n});o.setWorldSize(i,r),this.add(o),o.setPosition(a,s),this.icon=o},n.createLabel=function(){var e=this.config.label,t=e.text,n=e.x,i=e.y,r=this.scene.lang.getCurrentLanguage(),a=this.scene.make.bitmapText({font:eo.Z.PRIMARY.KEY,size:this.scene.fontSize(yy[r]),text:t,origin:{x:.5,y:.5}});this.add(a),a.setPosition(n,i),this.label=a},t}(Vs.Z),Ay=ys.Z.DEFAULT,Sy=Ay.KEY,Ey=Ay.FRAME,wy={x:-47,y:0},Cy={x:20,y:0},Ty={en:15,ru:12},Iy=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this).popup=void 0,t.closeButton=void 0,t.musicToggleButton=void 0,t.soundToggleButton=void 0,t.resumeButton=void 0,t.inviteButton=void 0,t.catSortShareButton=void 0,t.soundStatus=void 0,t.musicStatus=void 0,t.popupShowUpAnimation=void 0,t.popupExitAnimation=void 0,t.originalPopupPosition=void 0,t.run=function(){var e=(0,vs.Z)(t).player.getPlayerSettings(),n=e.music,i=e.sound;t.updateSoundStatus(i),t.updateMusicStatus(n),t.setDisabledButton(!1),t.runPopupShowUpAnimation();var r=document.getElementById("app-bg-overlay");r&&(r.style.opacity="0",r.style.visibility="hidden")},t.handleCloseScene=function(){t.runPopupExitAnimation((function(){return t.scene.switch(Yi.C.GAME_SCENE)}))},t.handleSetSound=function(e){t.player.setSetting("sound",e),t.updateSoundStatus(e)},t.handleSetMusic=function(e){t.player.setSetting("music",e),e?t.audio.playMusic():t.audio.pauseMusic(),t.updateMusicStatus(e)},t.handleShare=function(){t.storage.dispatch(fh())},t.handleAddFriend=function(){},t}(0,o.Z)(t,e);var n=t.prototype;return n.preload=function(){this.events.on("wake",this.run),this.events.on("create",this.run)},n.create=function(){e.prototype.create.call(this),this.createBackground(Ri.Z.BACKGROUND.KEY),this.createPopup(),this.createCloseButton(),this.createTitle(),this.createMusicLine(),this.createSoundLine(),this.createResumeButton(),this.createInviteButton(),this.createShareButton(),this.alignContainers(),this.createInputs()},n.createInputs=function(){var e=this;this.closeButton.onClick=this.handleCloseScene,this.soundToggleButton.onClick=function(){return e.handleSetSound(e.soundStatus)},this.musicToggleButton.onClick=function(){return e.handleSetMusic(e.musicStatus)}},n.createPopup=function(){this.popup=new Dc(this,0,0,270,286)},n.createCloseButton=function(){var e=new Vs.Z(this,Sy,Ey.BUTTON_CLOSE,39,39);e.setName("CloseButton"),this.popup.add(e),e.setPosition(this.popup.width/2-8,-this.popup.height/2+5),this.closeButton=e},n.createTitle=function(){var e=this.add.image(0,0,Sy,Ey.RIBBON_PINK_SHORT);e.setWorldSize(159,39.5);var t=this.make.bitmapText({font:eo.Z.PRIMARY.KEY,size:this.fontSize(26),text:"SETTINGS",origin:{x:.5,y:.5}});this.popup.add([e,t]),e.setPosition(4,-95),t.setPosition(5,-95)},n.createSoundLine=function(){var e=this.lang.getCurrentLanguage(),t=this.add.image(0,0,Sy,Ey.ICON_SOUND_ON);t.setWorldSize(31*1.2,34.8);var n=this.make.bitmapText({font:eo.Z.MIKADO.KEY,size:this.fontSize(Ty[e]),text:"Sound",origin:{x:.5,y:.5}});n.setTint(0);var i=new vy(this);i.setName("SoundSettingButton");var r=[t,n,i];this.popup.add(r),r.forEach((function(e){return e.setY(20)})),t.setX(-65),t.y-=4,n.setX(-15),n.y-=2,i.setX(56),this.soundToggleButton=i},n.createMusicLine=function(){var e=this.lang.getCurrentLanguage(),t=this.add.image(0,0,Sy,Ey.ICON_MUSIC_ON);t.setWorldSize(37.8,36.6);var n=this.make.bitmapText({font:eo.Z.MIKADO.KEY,size:this.fontSize(Ty[e]),text:"Music",origin:{x:.5,y:.5}});n.setTint(0);var i=new vy(this);i.setName("MusicSettingButton");var r=[t,n,i];this.popup.add(r),r.forEach((function(e){return e.setY(-34)})),t.setX(-65),t.y+=3,n.setX(-14),i.setX(56),this.musicToggleButton=i},n.createResumeButton=function(){var e=new by(this,{name:"ResumeButton",button:{key:Sy,frame:Ey.BUTTON_LONG_GREEN,width:173,height:51},icon:(0,a.Z)({key:Sy,frame:Ey.ICON_RESUME,width:26.5,height:26.5},wy),label:(0,a.Z)({},Cy,{text:"RESUME"})});this.popup.add(e),e.setY(87),e.onClick=this.handleCloseScene,this.resumeButton=e},n.createInviteButton=function(){var e=new by(this,{name:"InviteButton",button:{key:Sy,frame:Ey.BUTTON_LONG_GREEN,width:173,height:51},icon:(0,a.Z)({key:ys.Z.GAME_PLAY.KEY,frame:ys.Z.GAME_PLAY.FRAME.ICON_ADD_FRIEND,width:30.5,height:29.5},wy),label:(0,a.Z)({},Cy,{text:"INVITE"})});this.popup.add(e),e.setY(84),e.onClick=this.handleAddFriend,e.kill(),this.inviteButton=e},n.createShareButton=function(){var e=new by(this,{name:"ShareButton",button:{key:Sy,frame:Ey.BUTTON_LONG_BLUE,width:173,height:51},icon:(0,a.Z)({key:Sy,frame:Ey.ICON_SHARE,width:27,height:31},wy,{x:wy.x-2}),label:(0,a.Z)({},Cy,{text:"SHARE"})});this.popup.add(e),e.setY(150),e.onClick=this.handleShare,e.kill(),this.catSortShareButton=e},n.alignContainers=function(){Phaser.Display.Align.In.Center(this.popup,this.gameZone),this.originalPopupPosition={x:this.popup.x,y:this.popup.y}},n.updateSoundStatus=function(e){this.soundStatus=!e,this.soundToggleButton.updateStatus(e)},n.updateMusicStatus=function(e){var t=this.musicToggleButton,n=t.labelOn,i=t.labelOff;this.musicStatus=!e,this.musicToggleButton.updateStatus(e),n.setVisible(e),i.setVisible(!e)},n.runPopupShowUpAnimation=function(){var e,t=this;null==(e=this.popupShowUpAnimation)||e.remove();var n=this.originalPopupPosition,i=n.x,r=n.y;this.popup.setAlpha(0).setPosition(i,r+70),this.popupShowUpAnimation=this.tweens.add({targets:this.popup,duration:300,props:{y:{from:r+70,to:r,ease:Phaser.Math.Easing.Back.Out,duration:500},alpha:{from:0,to:1,ease:Phaser.Math.Easing.Cubic.Out,duration:500},scale:{from:.85,to:1,ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45],duration:1e3}},onComplete:function(){t.popup.setAlpha(1).setPosition(i,r),t.setDisabledButton(!1)}})},n.runPopupExitAnimation=function(e){var t,n=this;this.setDisabledButton(!0),null==(t=this.popupExitAnimation)||t.remove();var i=this.originalPopupPosition,r=i.x,a=i.y;this.popupShowUpAnimation=this.tweens.add({targets:this.popup,duration:300,ease:Phaser.Math.Easing.Cubic.In,props:{alpha:{from:1,to:0},y:a-50},onComplete:function(){n.popup.setAlpha(0).setPosition(r,a),null==e||e()}})},n.setDisabledButton=function(e){void 0===e&&(e=!0),[this.musicToggleButton,this.soundToggleButton,this.closeButton,this.resumeButton,this.inviteButton,this.catSortShareButton].forEach((function(t){return t.setDisabled(e)}))},t}(gs.Z),xy=Iy,ky={KEY_JSON:"",KEY_ATLAS:"",jsonPATH:"",atlasPATH:""},Py={4:13},Ly=function(e){function t(){return e.apply(this,arguments)||this}(0,o.Z)(t,e);var n=t.prototype;return n.mapColorToSpineData=function(e){var t=Object.keys(ad).findIndex((function(t){return t===e}));if(-1===t)return ky;var n=t+1;n in Py&&(n=Py[n]);var i="BIRD_SPINE_"+n,r=ys.Z[i];return r&&"KEY_JSON"in r?r:ky},n.mapLevelDataToSpineDataMap=function(e){var t=this,n=e.bottleList,i={};return n.forEach((function(e){e.forEach((function(e){var n=t.mapColorToSpineData(e);n.KEY_ATLAS in i||(i[n.KEY_ATLAS]=n)}))})),i},t}(Phaser.Plugins.BasePlugin),Oy=Ly,Ry=["Enable"],Dy=function(e){function t(){return e.apply(this,arguments)||this}(0,o.Z)(t,e);var i=t.prototype;return i.boot=function(){var t=(0,s.Z)(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.prototype.boot.call(this),this.addExtraGameObjectMethods(),this.addExtraFBInstantFunctions(),this.addPlugins(),t.next=6,this.addDevPlugins();case 6:return t.next=8,this.initAdsAsync();case 8:this.addScenes(),this.addDevScenes(),this.initWorld(),this.initStorage(),this.initLanguage(),this.initVisibilityChangeHandler(),this.initUtils(),this.initRollbar(),this.initConsole(),this.initDebugger(),this.initStatistics(),this.initParticleEditor(),this.initProfilerPlugin(),this.initAdaptivePerformance(),this.initCanvasRecorderPlugin();case 23:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.start=function(){e.prototype.start.call(this)},i.addExtraGameObjectMethods=function(){var e=new v(this);e.addKillRevive(),e.addKillReviveGroup(),e.addDrawDebugBox(),e.addSetWorldSize(),e.addSetWorldSizeForContainer(),e.addGetWorldPosition(),e.addHighQuality(),e.addSetLineHeightForBitmapText()},i.addExtraFBInstantFunctions=function(){var e=new h.Z(this.facebook);this.facebook.getLocale=e.getLocale,this.facebook.shareAsync=e.shareAsync,this.facebook.inviteAsync=e.inviteAsync,this.facebook.switchAsync=e.switchAsync,this.facebook.chooseAsync=e.chooseAsync,this.facebook.createAsync=e.createAsync,this.facebook.sendMessage=e.sendMessage,this.facebook.getContextID=e.getContextID,this.facebook.getPlayerToken=e.getPlayerToken,this.facebook.matchPlayerAsync=e.matchPlayerAsync,this.facebook.getContextPlayers=e.getContextPlayers,this.facebook.setLoadingProgress=e.setLoadingProgress,this.facebook.attemptToAddShortcut=e.attemptToAddShortcut,this.facebook.attemptToSubscribeBot=e.attemptToSubscribeBot,this.facebook.postSessionScoreAsync=e.postSessionScoreAsync,this.facebook.getRewardedVideoAsync=e.getRewardedVideoAsync,this.facebook.sendNotificationAsync=e.sendNotificationAsync,this.facebook.getInterstitialAdAsync=e.getInterstitialAdAsync,this.facebook.isSupportedAPI=e.isSupportedAPI,e.injectTournament(),this.facebook.progressLoading=new m(this)},i.addPlugins=function(){this.plugins.install("Storage",fi,!0,"storage"),this.plugins.install("Rollbar",vt,!0,"rollbar"),this.plugins.install("AdsManager",P,!0,"ads"),this.plugins.install("AuthManager",X,!0,"auth"),this.plugins.install("AudioManager",G,!0,"audio"),this.plugins.install("WorldManager",Ti,!0,"world"),this.plugins.install("PlayerManager",Xe,!0,"player"),this.plugins.install("ProfileManager",at,!0,"profile"),this.plugins.install("LanguageManager",Ji,!0,"lang"),this.plugins.install("AnalyticsManager",D,!0,"analytics"),this.plugins.install("AdaptivePerformance",re,!0,"performance"),this.plugins.install("VisibilityChangeHandler",Yv,!0,"visibility"),this.plugins.install("LevelManager",Vv,!0,"level"),this.plugins.install("CatSpineManager",Oy,!0,"catSpine"),this.plugins.installScenePlugin("textStyler",Ai,"textStyler"),this.plugins.installScenePlugin("ScreenManager",It,"screen"),this.plugins.installScenePlugin("FrameCapture",$,"frameCapture"),this.plugins.installScenePlugin("spine.SpinePlugin",l.cq,"spine"),this.storage=this.plugins.get("Storage"),this.rollbar=this.plugins.get("Rollbar"),this.ads=this.plugins.get("AdsManager"),this.auth=this.plugins.get("AuthManager"),this.audio=this.plugins.get("AudioManager"),this.world=this.plugins.get("WorldManager"),this.player=this.plugins.get("PlayerManager"),this.lang=this.plugins.get("LanguageManager"),this.profile=this.plugins.get("ProfileManager"),this.analytics=this.plugins.get("AnalyticsManager"),this.performance=this.plugins.get("AdaptivePerformance"),this.visibility=this.plugins.get("VisibilityChangeHandler"),this.level=this.plugins.get("LevelManager"),this.catSpine=this.plugins.get("CatSpineManager")},i.addDevPlugins=function(){var e=(0,s.Z)(u().mark((function e(){var t,i,r,a,s,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(GameCore.Utils.Valid.isDebugger()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Promise.all([n.e(7),n.e(942)]).then(n.bind(n,68));case 4:return t=e.sent.default,e.next=7,Promise.all([n.e(498),n.e(739),n.e(530)]).then(n.bind(n,69));case 7:return i=e.sent.default,e.next=10,n.e(401).then(n.bind(n,70));case 10:return r=e.sent.default,e.next=13,Promise.all([n.e(498),n.e(123)]).then(n.bind(n,71));case 13:return a=e.sent.default,e.next=16,Promise.all([n.e(498),n.e(803)]).then(n.bind(n,72));case 16:return s=e.sent.default,e.next=19,Promise.all([n.e(498),n.e(616),n.e(613)]).then(n.bind(n,73));case 19:o=e.sent.default,this.plugins.install("Console",t,!0,"console"),this.plugins.install("Debugger",i,!0,"debugger"),this.plugins.install("Statistics",r,!0,"statistics"),this.plugins.install("Profiler",a,!0,"profiler"),this.plugins.install("ParticleEditor",s,!0,"particle-editor"),this.plugins.install("CanvasRecorder",o,!0,"canvasRecorder"),this.eruda=this.plugins.get("Console"),this.debugger=this.plugins.get("Debugger"),this.statistics=this.plugins.get("Statistics"),this.profiler=this.plugins.get("Profiler"),this.particleEditor=this.plugins.get("ParticleEditor"),this.canvasRecorder=this.plugins.get("CanvasRecorder");case 32:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.addScenes=function(){this.scene.add(Yi.C.BOOT_SCENE,tr,!0),this.scene.add(Yi.C.LOAD_SCENE,Ov,!1),this.scene.add(Yi.C.GAME_SCENE,Kf,!1),this.scene.add(Yi.C.GAME_OVER_SCENE,Xh,!1),this.scene.add(Yi.C.DASHBOARD_SCENE,ul,!1),this.scene.add(Yi.C.LEADERBOARD_SCENE,Wm,!1),this.scene.add(Yi.C.RESULT_MATCH_SCENE,zv,!1),this.scene.add(Yi.C.PAUSE_SCENE,xy,!1),this.scene.add(Yi.C.LEVEL_SCENE,ly,!1),this.scene.add(Yi.C.COMPLETE_ALL_LEVEL_SCENE,my,!1),this.scene.add(Yi.C.GLOBAL_SCENE,Yf.Z,!1)},i.addDevScenes=function(){var e=(0,s.Z)(u().mark((function e(){var t,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(GameCore.Utils.Valid.isDebugger()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,n.e(638).then(n.bind(n,74));case 4:return t=e.sent.default,e.next=7,n.e(360).then(n.bind(n,75));case 7:i=e.sent.default,this.scene.add(Yi.C.TEST_SCENE,t,!1),this.scene.add(Yi.C.ANIMATIONS_SCENE,i,!1);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.initAdsAsync=function(){var e=(0,s.Z)(u().mark((function e(){var t,i,r,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=GameCore.Configs.Ads,Wv.Z.setGame(this),i=Wv.Z,!t.Mockup.Enable){e.next=8;break}return e.next=6,n.e(131).then(n.bind(n,76));case 6:r=e.sent.default,i=r;case 8:s=(0,a.Z)({},t.InterstitialAdOptions),this.ads.configure(i,{enabled:t.Enabled,calculateSafeAreaBottom:t.CalculateSafeAreaBottom,enableRewardVideoResetInterstitial:t.EnableRewardVideoResetInterstitial,interstitialAdOptions:s,rewardAdOptions:t.RewardAdOptions,bannerAdOptions:t.BannerAdOptions});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.initWorld=function(){var e=GameCore.Configs.Game,t=e.AutoResize,n=e.PortraitRatio,i=e.PortraitWidth,r=e.PortraitHeight,a=e.LandscapeRatio,s=e.LandscapeWidth,o=e.LandscapeHeight,c=t,u=e.DisableLandscape,l=e.FullSizeOnLandscape,h=n,d=i,p=r,f=a,m=s,g=o;console.info("\ud83d\ude80 > portraitRatio",h),console.info("\ud83d\ude80 > landscapeRatio",f),this.world.configure({autoResize:c,portraitRatio:h,portraitWidth:d,portraitHeight:p,landscapeRatio:f,landscapeWidth:m,landscapeHeight:g,disableLandscape:u,fullSizeOnLandscape:l}),this.world.resize(e.ForcePixelRatio)},i.initStorage=function(){var e=new Ki(this);this.storage.setInitiator(e)},i.initLanguage=function(){var e=this.facebook.getLocale();this.lang.configure({locale:e,upperCaseText:!0})},i.initVisibilityChangeHandler=function(){this.visibility.configure()},i.initUtils=function(){this.handlePauseAudio(),this.removeUnusedPipelines()},i.initConsole=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.Debugger.ShowConsole&&this.eruda.configure({tool:["console","info"],defaults:{theme:"Dark"}}))},i.initDebugger=function(){if(GameCore.Utils.Valid.isDebugger()){var e=GameCore.Configs.Debugger,t=e.ShowInspector,n=e.ShowMonitoring;(t||n)&&this.debugger.configure(GameCore.Configs.Debugger)}},i.initStatistics=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.Statistics.Enable&&this.statistics.configure(GameCore.Configs.Statistics))},i.initParticleEditor=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.ParticleEditor.Enable&&this.particleEditor.configure(GameCore.Configs.ParticleEditor))},i.initProfilerPlugin=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.ProfilerPlugin.Enable&&this.profiler.configure())},i.initAdaptivePerformance=function(){var e=GameCore.Configs.Performance,t=e.Enable,n=(0,r.Z)(e,Ry);if(t){var i=this.world.getPixelRatio();this.performance.configure((0,a.Z)({pixelRatio:i},n)),this.performance.active()}},i.initCanvasRecorderPlugin=function(){var e=this;if(GameCore.Utils.Valid.isDebugger()){var t=GameCore.Configs.CanvasRecorder;if(t.Enable){var n=t.Options,i=n.Type,r=n.Quality,a=n.RecordFps,o=n.SyncFps;this.canvasRecorder.configure({type:i,quality:r,syncFps:o,recordFps:a});var c=document.querySelector("canvas");if(!c)return console.error("Canvas not found");this.canvasRecorder.setCanvas(c);var l=this.canvasRecorder.getOptions(),h=this.canvasRecorder.waitNextFrame;this.canvasRecorder.waitNextFrame=(0,s.Z)(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!l.syncFps){t.next=5;break}return e.loop.sleep(),t.abrupt("return",new Promise((function(t){e.events.once(Phaser.Core.Events.POST_RENDER,t),e.loop.lastTime=1e3/l.recordFps,e.loop.step()})));case 5:return e.loop.wake(),t.abrupt("return",h.call(e.canvasRecorder));case 7:case"end":return t.stop()}}),t)})))}}},i.initRollbar=function(){var e=GameCore.Configs.Rollbar.Enable;console.warn({isRollbarEnabled:e}),e&&this.rollbar.setup()},i.handlePauseAudio=function(){var e=this;this.sound.pauseOnBlur=!1,this.visibility.addEventVisible((function(){e.audio.playMusic(),e.audio.resumeAllSounds()})),this.visibility.addEventHidden((function(){e.audio.pauseMusic(),e.audio.pauseAllSounds()}))},i.removeUnusedPipelines=function(){var e=this.renderer;if(e instanceof Phaser.Renderer.WebGL.WebGLRenderer){var t=e.pipelines,n=Phaser.Renderer.WebGL.Pipelines;if(n)[n.ROPE_PIPELINE,n.LIGHT_PIPELINE,n.POSTFX_PIPELINE,n.POINTLIGHT_PIPELINE].forEach((function(e){var n;null==(n=t.get(e))||n.destroy(),t.remove(e)}))}},t}(Phaser.Game),By=Dy,Ny=GameCore.Configs.Debugger.ShowInspector,My={parent:"app",type:Phaser.AUTO,width:0,height:0,scale:{autoRound:!0},dom:{createContainer:!1},loader:{maxParallelDownloads:6,crossOrigin:"no-cros"},input:{gamepad:!1,keyboard:Ny,touch:{capture:!0},smoothFactor:1,activePointers:1,windowEvents:!1},disableContextMenu:!0,render:{pixelArt:!1,antialias:!0,antialiasGL:!0,transparent:!0,desynchronized:!1,powerPreference:"high-performance",clearBeforeRender:!1,roundPixels:!1},plugins:{global:[]}};(0,i.j6)();var _y=setInterval((function(){window.__analyticsInitiated&&(window.__fbGameReady=!1,clearInterval(_y),clearInterval(window.__fbInstantLoadingTimer),GameSDK.setLoadingProgress(30),gtag("event","app_initialize",{send_to:["GA"]}),function(){try{var e=new By(My);window.game=e}catch(t){(0,i.tO)(t)}}())}),50)},,function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var i=JSON.parse('{"data":["Smith","Johnson","Williams","Brown","Jones","Miller","Davis","Garcia","Rodriguez","Wilson","Martinez","Anderson","Taylor","Thomas","Hernandez","Moore","Martin","Jackson","Thompson","White","Lopez","Lee","Gonzalez","Harris","Clark","Lewis","Robinson","Walker","Perez","Hall","Young","Allen","Sanchez","Wright","King","Scott","Green","Baker","Adams","Nelson","Hill","Ramirez","Campbell","Mitchell","Roberts","Carter","Phillips","Evans","Turner","Torres","Parker","Collins","Edwards","Stewart","Flores","Morris","Nguyen","Murphy","Rivera","Cook","Rogers","Morgan","Peterson","Cooper","Reed","Bailey","Bell","Gomez","Kelly","Howard","Ward","Cox","Diaz","Richardson","Wood","Watson","Brooks","Bennett","Gray","James","Reyes","Cruz","Hughes","Price","Myers","Long","Foster","Sanders","Ross","Morales","Powell","Sullivan","Russell","Ortiz","Jenkins","Gutierrez","Perry","Butler","Barnes","Fisher","Henderson","Coleman","Simmons","Patterson","Jordan","Reynolds","Hamilton","Graham","Kim","Gonzales","Alexander","Ramos","Wallace","Griffin","West","Cole","Hayes","Chavez","Gibson","Bryant","Ellis","Stevens","Murray","Ford","Marshall","Owens","Mcdonald","Harrison","Ruiz","Kennedy","Wells","Alvarez","Woods","Mendoza","Castillo","Olson","Webb","Washington","Tucker","Freeman","Burns","Henry","Vasquez","Snyder","Simpson","Crawford","Jimenez","Porter","Mason","Shaw","Gordon","Wagner","Hunter","Romero","Hicks","Dixon","Hunt","Palmer","Robertson","Black","Holmes","Stone","Meyer","Boyd","Mills","Warren","Fox","Rose","Rice","Moreno","Schmidt","Patel","Ferguson","Nichols","Herrera","Medina","Ryan","Fernandez","Weaver","Daniels","Stephens","Gardner","Payne","Kelley","Dunn","Pierce","Arnold","Tran","Spencer","Peters","Hawkins","Grant","Hansen","Castro","Hoffman","Hart","Elliott","Cunningham","Knight","Bradley","Carroll","Hudson","Duncan","Armstrong","Berry","Andrews","Johnston","Ray","Lane","Riley","Carpenter","Perkins","Aguilar","Silva","Richards","Willis","Matthews","Chapman","Lawrence","Garza","Vargas","Watkins","Wheeler","Larson","Carlson","Harper","George","Greene","Burke","Guzman","Morrison","Munoz","Jacobs","Obrien","Lawson","Franklin","Lynch","Bishop","Carr","Salazar","Austin","Mendez","Gilbert","Jensen","Williamson","Montgomery","Harvey","Oliver","Howell","Dean","Hanson","Weber","Garrett","Sims","Burton","Fuller","Soto","Mccoy","Welch","Chen","Schultz","Walters","Reid","Fields","Walsh","Little","Fowler","Bowman","Davidson","May","Day","Schneider","Newman","Brewer","Lucas","Holland","Wong","Banks","Santos","Curtis","Pearson","Delgado","Valdez","Pena","Rios","Douglas","Sandoval","Barrett","Hopkins","Keller","Guerrero","Stanley","Bates","Alvarado","Beck","Ortega","Wade","Estrada","Contreras","Barnett","Caldwell","Santiago","Lambert","Powers","Chambers","Nunez","Craig","Leonard","Lowe","Rhodes","Byrd","Gregory","Shelton","Frazier","Becker","Maldonado","Fleming","Vega","Sutton","Cohen","Jennings","Parks","Mcdaniel","Watts","Barker","Norris","Vaughn","Vazquez","Holt","Schwartz","Steele","Benson","Neal","Dominguez","Horton","Terry","Wolfe","Hale","Lyons","Graves","Haynes","Miles","Park","Warner","Padilla","Bush","Thornton","Mccarthy","Mann","Zimmerman","Erickson","Fletcher","Mckinney","Page","Dawson","Joseph","Marquez","Reeves","Klein","Espinoza","Baldwin","Moran","Love","Robbins","Higgins","Ball","Cortez","Le","Griffith","Bowen","Sharp","Cummings","Ramsey","Hardy","Swanson","Barber","Acosta","Luna","Chandler","Blair","Daniel","Cross","Simon","Dennis","Oconnor","Quinn","Gross","Navarro","Moss","Fitzgerald","Doyle","Mclaughlin","Rojas","Rodgers","Stevenson","Singh","Yang","Figueroa","Harmon","Newton","Paul","Manning","Garner","Mcgee","Reese","Francis","Burgess","Adkins","Goodman","Curry","Brady","Christensen","Potter","Walton","Goodwin","Mullins","Molina","Webster","Fischer","Campos","Avila","Sherman","Todd","Chang","Blake","Malone","Wolf","Hodges","Juarez","Gill","Farmer","Hines","Gallagher","Duran","Hubbard","Cannon","Miranda","Wang","Saunders","Tate","Mack","Hammond","Carrillo","Townsend","Wise","Ingram","Barton","Mejia","Ayala","Schroeder","Hampton","Rowe","Parsons","Frank","Waters","Strickland","Osborne","Maxwell","Chan","Deleon","Norman","Harrington","Casey","Patton","Logan","Bowers","Mueller","Glover","Floyd","Hartman","Buchanan","Cobb","French","Kramer","Mccormick","Clarke","Tyler","Gibbs","Moody","Conner","Sparks","Mcguire","Leon","Bauer","Norton","Pope","Flynn","Hogan","Robles","Salinas","Yates","Lindsey","Lloyd","Marsh","Mcbride","Owen","Solis","Pham","Lang","Pratt","Lara","Brock","Ballard","Trujillo","Shaffer","Drake","Roman","Aguirre","Morton","Stokes","Lamb","Pacheco","Patrick","Cochran","Shepherd","Cain","Burnett","Hess","Li","Cervantes","Olsen","Briggs","Ochoa","Cabrera","Velasquez","Montoya","Roth","Meyers","Cardenas","Fuentes","Weiss","Hoover","Wilkins","Nicholson","Underwood","Short","Carson","Morrow","Colon","Holloway","Summers","Bryan","Petersen","Mckenzie","Serrano","Wilcox","Carey","Clayton","Poole","Calderon","Gallegos","Greer","Rivas","Guerra","Decker","Collier","Wall","Whitaker","Bass","Flowers","Davenport","Conley","Houston","Huff","Copeland","Hood","Monroe","Massey","Roberson","Combs","Franco","Larsen","Pittman","Randall","Skinner","Wilkinson","Kirby","Cameron","Bridges","Anthony","Richard","Kirk","Bruce","Singleton","Mathis","Bradford","Boone","Abbott","Charles","Allison","Sweeney","Atkinson","Horn","Jefferson","Rosales","York","Christian","Phelps","Farrell","Castaneda","Nash","Dickerson","Bond","Wyatt","Foley","Chase","Gates","Vincent","Mathews","Hodge","Garrison","Trevino","Villarreal","Heath","Dalton","Valencia","Callahan","Hensley","Atkins","Huffman","Roy","Boyer","Shields","Lin","Hancock","Grimes","Glenn","Cline","Delacruz","Camacho","Dillon","Parrish","Oneill","Melton","Booth","Kane","Berg","Harrell","Pitts","Savage","Wiggins","Brennan","Salas","Marks","Russo","Sawyer","Baxter","Golden","Hutchinson","Liu","Walter","Mcdowell","Wiley","Rich","Humphrey","Johns","Koch","Suarez","Hobbs","Beard","Gilmore","Ibarra","Keith","Macias","Khan","Andrade","Ware","Stephenson","Henson","Wilkerson","Dyer","Mcclure","Blackwell","Mercado","Tanner","Eaton","Clay","Barron","Beasley","Oneal","Preston","Small","Wu","Zamora","Macdonald","Vance","Snow","Mcclain","Stafford","Orozco","Barry","English","Shannon","Kline","Jacobson","Woodard","Huang","Kemp","Mosley","Prince","Merritt","Hurst","Villanueva","Roach","Nolan","Lam","Yoder","Mccullough","Lester","Santana","Valenzuela","Winters","Barrera","Leach","Orr","Berger","Mckee","Strong","Conway","Stein","Whitehead","Bullock","Escobar","Knox","Meadows","Solomon","Velez","Odonnell","Kerr","Stout","Blankenship","Browning","Kent","Lozano","Bartlett","Pruitt","Buck","Barr","Gaines","Durham","Gentry","Mcintyre","Sloan","Melendez","Rocha","Herman","Sexton","Moon","Hendricks","Rangel","Stark","Lowery","Hardin","Hull","Sellers","Ellison","Calhoun","Gillespie","Mora","Knapp","Mccall","Morse","Dorsey","Weeks","Nielsen","Livingston","Leblanc","Mclean","Bradshaw","Glass","Middleton","Buckley","Schaefer","Frost","Howe","House","Mcintosh","Ho","Pennington","Reilly","Hebert","Mcfarland","Hickman","Noble","Spears","Conrad","Arias","Galvan","Velazquez","Huynh","Frederick","Randolph","Cantu","Fitzpatrick","Mahoney","Peck","Villa","Michael","Donovan","Mcconnell","Walls","Boyle","Mayer","Zuniga","Giles","Pineda","Pace","Hurley","Mays","Mcmillan","Crosby","Ayers","Case","Bentley","Shepard","Everett","Pugh","David","Mcmahon","Dunlap","Bender","Hahn","Harding","Acevedo","Raymond","Blackburn","Duffy","Landry","Dougherty","Bautista","Shah","Potts","Arroyo","Valentine","Meza","Gould","Vaughan","Fry","Rush","Avery","Herring","Dodson","Clements","Sampson","Tapia","Bean","Lynn","Crane","Farley","Cisneros","Benton","Ashley","Mckay","Finley","Best","Blevins","Friedman","Moses","Sosa","Blanchard","Huber","Frye","Krueger","Bernard","Rosario","Rubio","Mullen","Benjamin","Haley","Chung","Moyer","Choi","Horne","Yu","Woodward","Ali","Nixon","Hayden","Rivers","Estes","Mccarty","Richmond","Stuart","Maynard","Brandt","Oconnell","Hanna","Sanford","Sheppard","Church","Burch","Levy","Rasmussen","Coffey","Ponce","Faulkner","Donaldson","Schmitt","Novak","Costa","Montes","Booker","Cordova","Waller","Arellano","Maddox","Mata","Bonilla","Stanton","Compton","Kaufman","Dudley","Mcpherson","Beltran","Dickson","Mccann","Villegas","Proctor","Hester","Cantrell","Daugherty","Cherry","Bray","Davila","Rowland","Levine","Madden","Spence","Good","Irwin","Werner","Krause","Petty","Whitney","Baird","Hooper","Pollard","Zavala","Jarvis","Holden","Haas","Hendrix","Mcgrath","Bird","Lucero","Terrell","Riggs","Joyce","Mercer","Rollins","Galloway","Duke","Odom","Andersen","Downs","Hatfield","Benitez","Archer","Huerta","Travis","Mcneil","Hinton","Zhang","Hays","Mayo","Fritz","Branch","Mooney","Ewing","Ritter","Esparza","Frey","Braun","Gay","Riddle","Haney","Kaiser","Holder","Chaney","Mcknight","Gamble","Vang","Cooley","Carney","Cowan","Forbes","Ferrell","Davies","Barajas","Shea","Osborn","Bright","Cuevas","Bolton","Murillo","Lutz","Duarte","Kidd","Key","Cooke"]}'),r=function(e){return Math.floor(Math.random()*e)},a=function(){if(!i)return"Unknown";if(!i.data)return"Unknown";var e=i.data;if(!Array.isArray(e))return"Unknown";var t=e.length;return e[r(t)]+" "+e[r(t)]}},function(e,t,n){"use strict";n.d(t,{J:function(){return I},Z:function(){return k}});var i=n(3),r=n(1),a=n.n(r),s=n(7),o=function(e){return function(t){t.preventDefault();var n=document.getElementById("popup-add-shortcut");null==n||n.remove(),e()}},c=function(e){var t=document.createElement("div");return t.innerHTML=e.trim(),t.firstChild},u=function(){var e=(0,i.Z)(a().mark((function e(t,n){var i,r,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=c('<div style="height: 50vh;width: 53vh;max-width: 95vw;position:absolute;background-color: rgba(31, 120, 136, 0.48);border-radius: 2vh;margin: auto;right: 0;left: 0;top: 0;bottom: 0;display: flex;flex-direction:column;justify-content:space-evenly;">\n            <p style="color:white;font-size:40px;text-align:center">Add shortcut for this game</p>\n            <p style="color:white;font-size:20px;text-align:center">This game wants to add a shortcut.</p>\n        </div>'),r=c('<button style="border: none;background-color: #1877f2;color: #fff;width: 90%;height: 50px;border-radius: 15px;margin-left: auto;margin-right: auto;font-size: 20px;cursor: pointer;">No</button>'),s=c('<button style="border: none;background-color: #1877f2;color: #fff;width: 90%;height: 50px;border-radius: 15px;margin-left: auto;margin-right: auto;font-size: 20px;cursor: pointer;">Yes</button>'),i&&r&&s||n({code:"CREATE_POPUP_ERROR",message:"Show popup failed"}),i.id="popup-add-shortcut",i.appendChild(r),i.appendChild(s),document.body.appendChild(i),r.addEventListener("click",o(n)),s.addEventListener("click",o(t));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),l=function(){function e(){this.isFirstCall=!0}var t=e.prototype;return t.canCreateShortcutAsync=function(){var e=(0,i.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isFirstCall){e.next=3;break}return this.isFirstCall=!1,e.abrupt("return",!0);case 3:return e.abrupt("return",!1);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.createShortcutAsync=function(){var e=(0,i.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){u(e,t)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e}(),h=l,d=function(e){return function(t){t.preventDefault();var n=document.getElementById("popup-subscribe-bots");null==n||n.remove(),e()}},p=function(e){var t=document.createElement("div");return t.innerHTML=e.trim(),t.firstChild},f=function(){var e=(0,i.Z)(a().mark((function e(t,n){var i,r,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=p('<div style="height: 50vh;width: 53vh;max-width: 95vw;position:absolute;background-color: rgba(31, 120, 136, 0.48);border-radius: 2vh;margin: auto;right: 0;left: 0;top: 0;bottom: 0;display: flex;flex-direction:column;justify-content:space-evenly;">\n            <p style="color:white;font-size:40px;text-align:center">Turn on messages from this game</p>\n            <p style="color:white;font-size:20px;text-align:center">This game wants to send messages, announcements and more.</p>\n        </div>'),r=p('<button style="border: none;background-color: #1877f2;color: #fff;width: 90%;height: 50px;border-radius: 15px;margin-left: auto;margin-right: auto;font-size: 20px;cursor: pointer;">Not Now</button>'),s=p('<button style="border: none;background-color: #1877f2;color: #fff;width: 90%;height: 50px;border-radius: 15px;margin-left: auto;margin-right: auto;font-size: 20px;cursor: pointer;">Turn On</button>'),i&&r&&s||n({code:"CREATE_POPUP_ERROR",message:"Show popup failed"}),i.id="popup-subscribe-bots",i.appendChild(r),i.appendChild(s),document.body.appendChild(i),r.addEventListener("click",d(n)),s.addEventListener("click",d(t));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),m=function(){function e(){this.isFirstCall=!0}var t=e.prototype;return t.canSubscribeBotAsync=function(){var e=(0,i.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isFirstCall){e.next=3;break}return this.isFirstCall=!1,e.abrupt("return",!0);case 3:return e.abrupt("return",!1);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.subscribeBotAsync=function(){var e=(0,i.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){f(e,t)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e}(),g=m,v=n(30),y=n(9),b=n(82),A=n(32),S=GameCore.Configs,E=S.Notification,w=S.AddShortcut,C=S.SubscribeBot,T=E.GameTitle,I=(E.GameImage,function(){function e(){}var t=e.prototype;return t.createAsync=function(){var e=(0,i.Z)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.createAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.shareAsync=function(){var e=(0,i.Z)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.shareAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.joinAsync=function(){var e=(0,i.Z)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.joinAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.postScoreAsync=function(){var e=(0,i.Z)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.postScoreAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getTournamentsAsync=function(){var e=(0,i.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.getTournamentsAsync();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e}()),x=function(){function e(e){var t=this;this.facebook=void 0,this.supportedAPIs=[],this.mockSubscribeBot=void 0,this.mockAddShortcut=void 0,this.isCalledSubscribeBot=!1,this.isCalledCreateShortcut=!1,this.isCanPlayerMatch=null,this.isCanSubscribeBot=null,this.isCanCreateShortcut=null,this.attemptToAddShortcut=(0,i.Z)(a().mark((function e(){var n,i,r,o,c,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isCalledCreateShortcut){e.next=2;break}return e.abrupt("return",!1);case 2:if(e.prev=2,null===t.isCanCreateShortcut&&(w.UseMock?t.isCanCreateShortcut=!0:t.isCanCreateShortcut=t.isSupportedAPI("canCreateShortcutAsync")),t.isCanCreateShortcut){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,GameSDK.player.getDataAsync(["lastCallCreateShortcut"]);case 8:if(e.t0=e.sent,e.t0){e.next=11;break}e.t0={};case 11:if(n=e.t0,!(i=n.lastCallCreateShortcut||0)||!(0,y.Gm)(+i)){e.next=15;break}return e.abrupt("return",!1);case 15:if(!w.UseMock){e.next=21;break}return e.next=18,t.mockAddShortcut.canCreateShortcutAsync();case 18:e.t1=e.sent,e.next=24;break;case 21:return e.next=23,GameSDK.canCreateShortcutAsync();case 23:e.t1=e.sent;case 24:if(r=e.t1,o=Date.now(),GameSDK.player.setDataAsync({lastCallCreateShortcut:o}),!r){e.next=49;break}return c=s._.SHORTCUT_CREATE,u=s._.SHORTCUT_CREATE_POPUP,t.isCalledCreateShortcut=!0,window.game.analytics.event(u),e.prev=31,e.next=34,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 34:if(!w.UseMock){e.next=39;break}return e.next=37,t.mockAddShortcut.createShortcutAsync();case 37:e.next=41;break;case 39:return e.next=41,FBInstant.createShortcutAsync();case 41:return window.game.analytics.event(c,{success:!0}),e.abrupt("return",!0);case 45:return e.prev=45,e.t2=e.catch(31),window.game.analytics.event(c,{success:!1}),e.abrupt("return",!1);case 49:return e.abrupt("return",!1);case 52:return e.prev=52,e.t3=e.catch(2),e.abrupt("return",!1);case 55:case"end":return e.stop()}}),e,null,[[2,52],[31,45]])}))),this.attemptToSubscribeBot=(0,i.Z)(a().mark((function e(){var n,i,r,o,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isCalledSubscribeBot){e.next=2;break}return e.abrupt("return",!1);case 2:if(e.prev=2,null===t.isCanSubscribeBot&&(C.UseMock?t.isCanSubscribeBot=!0:t.isCanSubscribeBot=t.isSupportedAPI("player.canSubscribeBotAsync")),t.isCanSubscribeBot){e.next=6;break}return e.abrupt("return",!1);case 6:if(!C.UseMock){e.next=12;break}return e.next=9,t.mockSubscribeBot.canSubscribeBotAsync();case 9:e.t0=e.sent,e.next=15;break;case 12:return e.next=14,GameSDK.player.canSubscribeBotAsync();case 14:e.t0=e.sent;case 15:if(!e.t0){e.next=49;break}return e.next=19,GameSDK.player.getDataAsync(["lastCallSubscribeBot"]);case 19:if(e.t1=e.sent,e.t1){e.next=22;break}e.t1={};case 22:if(n=e.t1,!(i=n.lastCallSubscribeBot)||!(0,y.Gm)(+i)){e.next=26;break}return e.abrupt("return",!1);case 26:return r=Date.now(),GameSDK.player.setDataAsync({lastCallSubscribeBot:r}),o=s._.BOT_SUBSCRIBE,c=s._.BOT_SUBSCRIBE_POPUP,t.isCalledSubscribeBot=!0,window.game.analytics.event(c),e.prev=31,e.next=34,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 34:if(!C.UseMock){e.next=39;break}return e.next=37,t.mockSubscribeBot.subscribeBotAsync();case 37:e.next=41;break;case 39:return e.next=41,GameSDK.player.subscribeBotAsync();case 41:return window.game.analytics.event(o,{success:!0}),e.abrupt("return",!0);case 45:return e.prev=45,e.t2=e.catch(31),window.game.analytics.event(o,{success:!1}),e.abrupt("return",!1);case 49:return e.abrupt("return",!1);case 52:return e.prev=52,e.t3=e.catch(2),e.abrupt("return",!1);case 55:case"end":return e.stop()}}),e,null,[[2,52],[31,45]])}))),this.matchPlayerAsync=function(){var e=(0,i.Z)(a().mark((function e(n,i,r){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,null===t.isCanPlayerMatch&&(t.isCanPlayerMatch=t.isSupportedAPI("checkCanPlayerMatchAsync")),t.isCanPlayerMatch){e.next=4;break}return e.abrupt("return",!1);case 4:return e.next=6,GameSDK.checkCanPlayerMatchAsync();case 6:if(e.sent){e.next=9;break}return e.abrupt("return",!1);case 9:return e.next=11,GameSDK.matchPlayerAsync(n,i,r);case 11:return e.abrupt("return",!0);case 14:return e.prev=14,e.t0=e.catch(0),e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n,i){return e.apply(this,arguments)}}(),this.getTournamentAsync=(0,i.Z)(a().mark((function e(){var n,i,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.facebook.tournament.getTournamentsAsync();case 2:if(n=e.sent,i=GameSDK.context.getID(),!(r=n.find((function(e){return e.getContextID()===i})))){e.next=7;break}return e.abrupt("return",Promise.resolve(r));case 7:return e.abrupt("return",Promise.reject(new b.Z(null)));case 8:case"end":return e.stop()}}),e)}))),this.requestTournamentAsync=function(){var e=(0,i.Z)(a().mark((function e(n){var i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.facebook.getTournamentAsync();case 3:return e.next=5,t.facebook.tournament.shareAsync({score:n});case 5:e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(0),i=GameSDK.player.getName(),e.next=12,t.facebook.tournament.createAsync({initialScore:n,config:{tournamentTitle:i+"'s Tournament"}});case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),this.isSupportedAPI=function(e){return 0===t.supportedAPIs.length&&(t.supportedAPIs=GameSDK.getSupportedAPIs()),t.supportedAPIs.includes(e)},this.facebook=e,this.mockSubscribeBot=new g,this.mockAddShortcut=new h}var t=e.prototype;return t.switchAsync=function(){var e=(0,i.Z)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 2:return e.next=4,GameSDK.context.switchAsync(t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.chooseAsync=function(){var e=(0,i.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 3:return e.next=5,GameSDK.context.chooseAsync({filters:["INCLUDE_EXISTING_CHALLENGES"],minSize:2,maxSize:2});case 5:case 15:return e.abrupt("return",GameSDK.context.getID());case 8:if(e.prev=8,e.t0=e.catch(0),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=16;break}e.t1=e.t0.code,e.next="USER_INPUT"===e.t1?14:"SAME_CONTEXT"===e.t1?15:16;break;case 14:return e.abrupt("return",!1);case 16:return e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),t.createAsync=function(){var e=(0,i.Z)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 3:return e.next=5,GameSDK.context.createAsync(""+t);case 5:case 15:return e.abrupt("return",GameSDK.context.getID());case 8:if(e.prev=8,e.t0=e.catch(0),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=16;break}e.t1=e.t0.code,e.next="USER_INPUT"===e.t1?14:"SAME_CONTEXT"===e.t1?15:16;break;case 14:return e.abrupt("return",!1);case 16:return e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),t.getPlayerToken=function(){var e=(0,i.Z)(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.player.getSignedPlayerInfoAsync();case 2:return t=e.sent,e.abrupt("return",t.getSignature());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.getContextPlayers=function(){var e=(0,i.Z)(a().mark((function e(t){var n,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,GameSDK.context.getPlayersAsync();case 3:return n=e.sent,i=[],n.forEach((function(e){var n=e.getID();if(n!==t){var r=e.getName();if(r){var a=e.getPhoto();i.push(new v.Z(n,r,a).toObject())}}})),e.abrupt("return",GameCore.Utils.Array.unique(i));case 9:return e.prev=9,e.t0=e.catch(0),console.warn("getPlayersAsync",{error:e.t0}),e.abrupt("return",[]);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),t.shareAsync=function(){var e=(0,i.Z)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.shareAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.sendMessage=function(){var e=(0,i.Z)(a().mark((function e(t){var n,i,r,s,o,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data,i=t.image,r=t.template,s=t.cta,o=t.text,c={data:n,image:i,action:"CUSTOM",template:r,cta:s,text:o,strategy:"IMMEDIATE",notification:"PUSH"},e.next=4,GameSDK.updateAsync(c);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.inviteAsync=function(){var e=(0,i.Z)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.inviteAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.postSessionScoreAsync=function(){var e=(0,i.Z)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.postSessionScoreAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getRewardedVideoAsync=function(){var e=(0,i.Z)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.getRewardedVideoAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getInterstitialAdAsync=function(){var e=(0,i.Z)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.getInterstitialAdAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getContextID=function(){return GameSDK.context.getID()},t.setLoadingProgress=function(e){GameSDK.setLoadingProgress(e)},t.getLocale=function(){return GameSDK.getLocale()||"en"},t.injectTournament=function(){var e=(0,i.Z)(a().mark((function e(){var t,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!GameCore.Configs.Tournament.UseMock){e.next=11;break}return e.next=4,n.e(302).then(n.bind(n,77));case 4:t=e.sent.default,i=new t,this.facebook.tournament=i,GameSDK.getTournamentAsync=this.getTournamentAsync,GameSDK.tournament=i,e.next=12;break;case 11:this.facebook.tournament=new I;case 12:this.facebook.getTournamentAsync=function(){return FBInstant.getTournamentAsync()},this.facebook.requestTournamentAsync=this.requestTournamentAsync;case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.sendNotificationAsync=function(){var e=(0,i.Z)(a().mark((function e(t){var n,i,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("\ud83e\udd16 ? sendNotificationAsync",t),n=t.message,i=t.delayTime,r=t.type,e.next=5,FBInstant.scheduleNotificationAsync({title:T,minDelayInSeconds:i,description:n,type:null!=r?r:A.Z.GENERIC_NOTIFICATION});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("\ud83e\udd16 ? sendNotificationAsync",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),e}(),k=x},,function(e,t,n){"use strict";n.d(t,{H$:function(){return f},Z5:function(){return p},aV:function(){return m},xB:function(){return g}});var i=n(5),r=n(3),a=n(1),s=n.n(a),o=n(38),c=n(9),u=GameCore.Configs,l=u.AppId,h=u.OtherHost,d=u.LeadersBoard,p=function(){var e=(0,r.Z)(s().mark((function e(t){var n,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={appId:l,resetScore:0,numberOfLeaders:15,timezone:"utc+0",sortOrder:"desc",statistics:"max",resettable:"manually",description:"no description"},!d.UseMock){e.next=5;break}return e.next=4,(0,c.qZ)(1e3);case 4:return e.abrupt("return",(0,i.Z)({},n,t,{_id:d.LeaderboardId,type:"app_leaderboard",description:"mockup_leaderboard",createdAt:new Date(Date.now()).toISOString(),updatedAt:new Date(Date.now()).toISOString()}));case 5:return"leaderboards",e.next=8,(0,o.v)("leaderboards",(0,i.Z)({},n,t),{},h);case 8:return r=e.sent,e.abrupt("return",(null==r?void 0:r.data)||{});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=(0,r.Z)(s().mark((function e(t,n){var i,r,a,u,l,p,f,m,g,v;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===n&&(n={}),i=[],!d.UseMock){e.next=7;break}return e.next=5,(0,c.qZ)(1e3);case 5:return a=(r=n).limit,u=void 0===a?10:a,l=r.offset,p=void 0===l?0:l,e.abrupt("return",new Array(u).fill(null).map((function(e,t){var n=(t+1)*(p+1),i=d.MockOptions.PlayerEntryIndex===t,r={playerId:"player-0"+n,name:"MPlayer "+n,photo:"./assets/images/others/avatar.jpg",rank:n,score:Math.floor(1e5/n+1e4*Math.random())};if(i){var a=window.game.player.getPlayer(),s=a.playerId,o=a.name,c=a.photo;r.playerId=s,r.name=o,r.photo=c}return r})));case 7:return f=GameCore.Utils.String.params(n),m="leaderboards/"+t+"/leaders",e.next=11,(0,o.U)(m+"?"+f,{},h);case 11:if((g=e.sent)&&(null==g||!g.error)){e.next=14;break}throw new Error((null==g?void 0:g.error)||"Leaderboard not found");case 14:if(!((v=(null==g?void 0:g.data)||[]).length<1)){e.next=17;break}return e.abrupt("return",i);case 17:return i=v,e.abrupt("return",i);case 19:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),m=function(){var e=(0,r.Z)(s().mark((function e(t,n,i){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,o.v)("leaderboards/"+t+"/players/"+n,{score:i},{},h);case 2:return r=e.sent,e.abrupt("return",(null==r?void 0:r.data)||{});case 4:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}(),g=function(){var e=(0,r.Z)(s().mark((function e(t,n){var i,r,a,c,u;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=null,t){e.next=3;break}return e.abrupt("return",i);case 3:if(r=d.Prefix+"/"+n+"/players"){e.next=6;break}return e.abrupt("return",i);case 6:return a=GameCore.Utils.String.params({playerIds:t}),e.next=9,(0,o.U)(r+"?"+a,{},h);case 9:if(c=e.sent,!((u=(null==c?void 0:c.data)||[]).length<1)){e.next=13;break}return e.abrupt("return",i);case 13:return i=u[0],e.abrupt("return",i);case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},function(e,t,n){"use strict";var i=n(2),r=n(0),a=n(8).Z.DEFAULT,s=a.KEY,o=a.FRAME,c=function(e){function t(t){var n;return(n=e.call(this,t,s,o.BLANK)||this).deathZone=void 0,n.emitter=void 0,n.createDeathZone(),n.createEmitters(),n.setActive(!1),n.setVisible(!1),n.scene.add.existing((0,i.Z)(n)),n}(0,r.Z)(t,e);var n=t.prototype;return n.createDeathZone=function(){this.deathZone=new Phaser.Geom.Circle},n.createEmitters=function(){var e=1/GameCore.Utils.Image.getImageScale();this.emitter=this.createEmitter({on:!1,frame:o.BLANK,speed:{min:10,max:1200},scale:{start:1.33*e,end:0},alpha:{start:1,end:0,ease:Phaser.Math.Easing.Expo.Out},deathZone:{source:this.deathZone,type:"onLeave"},lifespan:3e3})},n.explode=function(e,t,n,i){this.setActive(!0),this.setVisible(!0),this.deathZone.radius=i,this.deathZone.setPosition(t,n),this.emitter.explode(e,t,n)},t}(Phaser.GameObjects.Particles.ParticleEmitterManager);t.Z=c},function(e,t,n){"use strict";var i=n(2),r=n(0),a=n(8).Z.DEFAULT,s=a.KEY,o=a.FRAME,c=function(e){function t(t){var n;return(n=e.call(this,t,s,o.BLANK)||this).emitZone=void 0,n.emitter=void 0,n.createEmitZone(),n.scene.add.existing((0,i.Z)(n)),n}(0,r.Z)(t,e);var n=t.prototype;return n.createEmitZone=function(){this.emitZone=new Phaser.Geom.Rectangle},n.createEmitters=function(){var e=1/GameCore.Utils.Image.getImageScale();this.emitter=this.createEmitter({on:!1,frame:o.BLANK,emitZone:{source:this.emitZone,type:"random"},timeScale:1,frequency:100,alpha:{start:1,end:0,ease:Phaser.Math.Easing.Expo.Out},scale:{start:1*e,end:0,ease:Phaser.Math.Easing.Expo.Out},lifespan:{min:800,max:1500}})},n.run=function(e,t,n,i,r){this.stop(),this.reset(),this.emitZone.setSize(i,r),this.emitZone.setPosition(t-i/2,n-r/2),this.emitter.setQuantity(e),this.emitter.start()},n.stop=function(){var e,t;null==(e=this.emitter)||e.killAll(),null==(t=this.emitter)||t.stop()},n.reset=function(){this.createEmitters()},t}(Phaser.GameObjects.Particles.ParticleEmitterManager);t.Z=c},function(e,t,n){"use strict";var i=n(0),r=n(16),a=function(e){function t(t,n,i,r){var a;return(a=e.call(this,t,n.key,n.button,i,r)||this).payload=void 0,a.payload=n,a.createIcon(),a.createText(),a}(0,i.Z)(t,e);var n=t.prototype;return n.createIcon=function(){var e=this.scene.add.image(0,0,this.payload.key,this.payload.icon);e.setWorldSize(43,43),this.add(e),Phaser.Display.Align.In.LeftCenter(e,this,-25)},n.createText=function(){var e=this.payload.text,t=this.scene.make.bitmapText({font:r.Z.PRIMARY.KEY,size:this.scene.fontSize(24),text:e,origin:{x:.2,y:.5}});this.add(t)},t}(n(51).Z);t.Z=a},function(e,t,n){"use strict";var i=n(0),r=n(4),a={targets:[],duration:400,ease:n(17).Z,props:{scale:"+=0.1"}},s=function(e){function t(t){return e.call(this,a,t)||this}return(0,i.Z)(t,e),t}(r.Z);t.Z=s},function(e,t,n){"use strict";var i=n(5),r=n(6),a=n(2),s=n(0),o=n(10),c=n(13);function u(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var h=function(e){function t(t,n){var r;(r=e.call(this,t)||this).config=void 0,r.isEnable=void 0,r.maxHeight=void 0,r.isScrolling=void 0,r.boundTop=void 0,r.boundBottom=void 0,r.maskGraphics=void 0,r.objects=void 0,r._value=0,r.velocity=0,r.isScrollingSmooth=void 0,r.lastScrollY=void 0,r.isScrollingBack=void 0,r.scrollingBackTo=void 0,r.lastScrollYCount=0,r.hitArea=void 0,r.onScrollEvents=[],r.update=function(e,t){r.isScrollingSmooth&&r.velocity&&r.scrollingSmooth(t),r.isScrollingBack&&r.scrollingBack(t)},r.checkReachBound=function(){return r.isReachTop()||r.isReachBottom()},r.onMouseScroll=(0,c.D)((function(e,t,n){if(r.isEnable){if(r.isScrolling=!0,r.checkReachBound())return r.lastScrollY=r.lastScrollY.map((function(){return 0})),void(r.isScrolling=!1);r.stopScrollingBack(),r.startScrollSmooth(-n*r.scrollSmooth/15)}}),100,{isImmediate:!0,maxWait:100}),r.onTouchScroll=function(e){if(r.isEnable){r.velocity&&r.stopScrollSmooth(),r.stopScrollingBack(),r.isScrolling=!0;var t=r.scene.game.world.getZoomRatio(),n=e.position,i=e.prevPosition,a=(n.y-i.y)/t,s=r.height*r.maxScrollOver,o=1;if(r.lastScrollY[++r.lastScrollYCount%r.lastScrollY.length]=a,r.isReachTop()&&a>=0){var c=(s-(r.value-r.marginTop))/s;o=Math.min(o,c)}if(r.isReachBottom()&&a<=0){var u=(s-(-r.maxHeight-r.value))/s;o=Math.min(o,u)}var l=a*o,h=r.maxScrollOver*r.height;r.value+l>r.marginTop+h?r.value=r.marginTop+h:r.value+l<-r.maxHeight-h?r.value=-r.maxHeight-h:r.value+=l,r.callOnScrollEvents(r.value,l)}},r.onTouchDown=function(){r.isEnable&&(r.velocity&&r.stopScrollSmooth(),r.stopScrollingBack())},r.onTouchEnd=function(){if(r.isReachTop()&&(r.startScrollingBack(r.marginTop),r.stopScrollSmooth()),r.isReachBottom()&&(r.startScrollingBack(-r.maxHeight),r.stopScrollSmooth()),r.isScrolling){var e=r.lastScrollY.reduce((function(e,t){return e+t}))/r.lastScrollY.length;r.startScrollSmooth(e*r.scrollSmooth),r.lastScrollY=r.lastScrollY.map((function(){return 0}))}},r.config=(0,i.Z)({marginTop:0,marginBottom:0,acceleration:1400,maxScrollOver:.15,scrollSmooth:40,scrollingBackRate:5},n);var s=n.width,o=n.height;return r.isEnable=!1,r.maxHeight=0,r.lastScrollY=new Array(3).fill(0),r.setSize(s,o),r.createGroup(),r.createInput(),r.createEvents(),r.scene.add.existing((0,a.Z)(r)),r}(0,s.Z)(t,e);var n=t.prototype;return n.onScroll=function(e){this.onScrollEvents.push(e)},n.gotoTop=function(){this.value=this.config.marginTop},n.reset=function(){this.maxHeight=0,this.isScrolling=!1,this.isScrollingBack=!1,this.isScrollingSmooth=!1,this.gotoTop(),this.setEnable(!1)},n.createDebug=function(){var e=this.drawDebugBox(16711680,.8);console.log(null==e?void 0:e.x,null==e?void 0:e.y,null==e?void 0:e.displayWidth,null==e?void 0:e.displayHeight)},n.setEnable=function(e){this.isEnable=e,e?this.setInteractive({draggable:!0,useHandCursor:!0}):this.disableInteractive()},n.addItem=function(e){this.addAt(e),this.objects.add(e);var t=e.y+e.height+this.marginBottom-this.height/2;this.maxHeight=Math.max(this.maxHeight,t,0),this.updateObjectVisible()},n.addItems=function(e){var t=this;this.addAt(e),this.objects.addMultiple(e);var n=e.map((function(e){return e.y+e.height+t.marginBottom-t.height/2}));this.maxHeight=Math.max(this.maxHeight,Math.max.apply(Math,n),0),this.updateObjectVisible()},n.clearItem=function(){this.objects.clear(!0,!0),this.reset()},n.getChildren=function(){return this.objects.getChildren().filter((function(e){return e.active}))},n.createBound=function(e,t,n,i){this.boundTop=this.scene.make.image({key:e,frame:t}),this.boundBottom=this.scene.make.image({key:e,frame:t}),this.boundTop.setTint(i),this.boundBottom.setTint(i),this.boundTop.setAlpha(1,1,0,0),this.boundBottom.setAlpha(0,0,1,1),this.boundTop.setDepth(o.Z.PRIORITY),this.boundBottom.setDepth(o.Z.PRIORITY);var r=this.width,a=n,s=this.getWorldPosition(),c=s.x,u=s.y;this.boundTop.setDisplaySize(r,a),this.boundBottom.setDisplaySize(r,a),this.boundTop.setY(-this.displayHeight/2+a/2+u-this.y-1),this.boundBottom.setY(this.displayHeight/2-a/2+u-this.y+1),this.boundTop.setX(c-this.x),this.boundBottom.setX(c-this.x),this.add([this.boundTop,this.boundBottom])},n.createMask=function(){var e;null==(e=this.maskGraphics)||e.destroy(),this.maskGraphics=this.scene.make.graphics({fillStyle:{color:255,alpha:1},visible:!0}),this.maskGraphics.setName("MaskGraphics");var t=this.width,n=this.height;this.maskGraphics.fillRoundedRect(0-t/2,0-n/2,t,n,0),this.setMask(this.maskGraphics.createGeometryMask()),this.scene.events.off(Phaser.Scenes.Events.UPDATE,this.updateMask,this),this.scene.events.on(Phaser.Scenes.Events.UPDATE,this.updateMask,this)},n.updateMask=function(){var e=this.getWorldPosition(),t=e.x,n=e.y;this.maskGraphics.setPosition(t,n)},n.createGroup=function(){this.objects=this.scene.make.group({})},n.updateObject=function(e){this.objects.incY(e),this.updateObjectVisible()},n.updateObjectVisible=function(){for(var e=this.objects.getChildren(),t=0;t<e.length;t++){var n=e[t];n.y+n.height<-this.height/2||n.y-n.height>this.height/2?n.setVisible(!1):n.setVisible(!0)}},n.createInput=function(){this.setInteractive({draggable:!0,useHandCursor:!0}),this.on(Phaser.Input.Events.POINTER_WHEEL,this.onMouseScroll),this.on(Phaser.Input.Events.GAMEOBJECT_DRAG,this.onTouchScroll),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.onTouchDown),this.scene.input.on(Phaser.Input.Events.POINTER_UP,this.onTouchEnd,this)},n.createEvents=function(){this.scene.events.on(Phaser.Scenes.Events.UPDATE,this.update)},n.callOnScrollEvents=function(e,t){for(var n,i=u(this.onScrollEvents);!(n=i()).done;){(0,n.value)(this,e,t)}},n.scrollingBack=function(e){var t=(this.scrollingBackTo-this.value)*e*this.scrollingBackRate/1e3;this.value+=t,Math.abs(this.scrollingBackTo-this.value)<.5&&(this.value=this.scrollingBackTo,this.stopScrollingBack()),this.callOnScrollEvents(this.value,t)},n.startScrollingBack=function(e){this.isScrollingBack=!0,this.scrollingBackTo=e},n.stopScrollingBack=function(){this.isScrollingBack=!1},n.scrollingSmooth=function(e){var t=this.velocity*e/1e3;this.value+=t;var n=Math.abs(this.velocity)/this.velocity;this.velocity-=n*this.acceleration*e/1e3,Math.abs(this.velocity)<this.acceleration*e/1e3&&this.stopScrollSmooth(),this.isReachTop()&&(this.startScrollingBack(this.marginTop),this.stopScrollSmooth()),this.isReachBottom()&&(this.startScrollingBack(-this.maxHeight),this.stopScrollSmooth()),this.callOnScrollEvents(this.value,t)},n.startScrollSmooth=function(e){this.isScrollingSmooth=!0,e&&(e*this.velocity>0?this.velocity+=e:this.velocity=e)},n.stopScrollSmooth=function(){this.isScrollingSmooth=!1,this.isScrolling=!1,this.velocity=0},n.isReachTop=function(){return this.value>this.marginTop},n.isReachBottom=function(){return-this.value>this.maxHeight},(0,r.Z)(t,[{key:"marginTop",get:function(){return this.config.marginTop}},{key:"marginBottom",get:function(){return this.config.marginBottom}},{key:"acceleration",get:function(){return this.config.acceleration}},{key:"maxScrollOver",get:function(){return this.config.maxScrollOver}},{key:"scrollSmooth",get:function(){return this.config.scrollSmooth}},{key:"scrollingBackRate",get:function(){return this.config.scrollingBackRate}},{key:"value",get:function(){return this._value},set:function(e){var t=e-this._value;this._value=e,this.updateObject(t)}}]),t}(Phaser.GameObjects.Container);t.Z=h},function(e,t,n){"use strict";var i=n(3),r=n(0),a=n(1),s=n.n(a),o=n(7),c=n(43),u=GameCore.Utils.Object,l=GameCore.Ads,h=l.Types,d=l.Status,p=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).instance=void 0,i.placementId=void 0,i.instanceLoadFailedQueue=void 0,i.isHasTooManyInstancesError=void 0,i.instance=null,i.placementId=n,i.instanceLoadFailedQueue=[],i.isHasTooManyInstancesError=!1,i}(0,r.Z)(t,e),t.setGame=function(e){self.game=e};var n=t.prototype;return n.loadAsync=function(){var e=(0,i.Z)(s().mark((function e(){var t,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.status===d.IDLE){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,this.status=d.LOADING,e.next=6,this.createInstanceByType(this.type);case 6:if(this.instance=e.sent,null!==this.instance){e.next=9;break}throw new GameCore.Ads.AdError("AD_INSTANCE_NOT_INITIATED","Ad instance didn't initiated.");case 9:return e.next=11,this.instance.loadAsync();case 11:this.status=d.FILLED,t=this.getSceneName(),this.type===h.PRE_ROLL&&self.game.analytics.loadPreRollAd(t),this.type===h.INTERSTITIAL&&self.game.analytics.loadInterstitialAd(t),this.type===h.REWARDED&&self.game.analytics.loadRewardedVideoAd(t),e.next=26;break;case 18:throw e.prev=18,e.t0=e.catch(2),this.status=d.IDLE,this.instance&&this.instanceLoadFailedQueue.push(this.instance),this.instance=null,n=this.getSceneName(),self.game.analytics.loadAdFail(this.type,n,e.t0),e.t0;case 26:case"end":return e.stop()}}),e,this,[[2,18]])})));return function(){return e.apply(this,arguments)}}(),n.showAsync=function(){var e=(0,i.Z)(s().mark((function e(){var t,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!1,e.prev=1,this.status===d.FILLED){e.next=4;break}throw new GameCore.Ads.AdError("AD_NOT_FILLED","Ads no fill.");case 4:if(this.status=d.SHOWING,null!==this.instance){e.next=7;break}throw new GameCore.Ads.AdError("AD_INSTANCE_NOT_INITIATED","Ad instance didn't initiated.");case 7:return this.isHasTooManyInstancesError&&self.game.analytics.event(o._.MISSING_AD_SHOW,{ad_type:this.type}),e.next=10,this.instance.showAsync();case 10:t=!0,this.status=d.IDLE,this.instance=null,e.next=19;break;case 15:throw e.prev=15,e.t0=e.catch(1),e.t0 instanceof Object&&u.hasOwn(e.t0,"code")?("ADS_NOT_LOADED"===e.t0.code?this.status=d.FILLED:(this.status=d.IDLE,this.instance=null),"USER_INPUT"===e.t0.code&&(this.status=d.IDLE,this.instance=null,t=!0)):(this.status=d.IDLE,this.instance=null),e.t0;case 19:return e.prev=19,window.focus(),n=this.getSceneName(),t?(this.type===h.PRE_ROLL&&self.game.analytics.showPreRollAd(n),this.type===h.INTERSTITIAL&&self.game.analytics.showInterstitialAd(n),this.type===h.REWARDED&&self.game.analytics.showRewardedVideoAd(n)):self.game.analytics.showAdFail(this.type,n),e.finish(19);case 24:case"end":return e.stop()}}),e,this,[[1,15,19,24]])})));return function(){return e.apply(this,arguments)}}(),n.getStatus=function(){return this.status},n.createInstanceByType=function(){var e=(0,i.Z)(s().mark((function e(t){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=self.game.facebook,e.prev=1,e.t0=t,e.next=e.t0===h.REWARDED?5:e.t0===h.INTERSTITIAL||e.t0===h.PRE_ROLL?8:11;break;case 5:return e.next=7,n.getRewardedVideoAsync(this.placementId);case 7:case 10:return e.abrupt("return",e.sent);case 8:return e.next=10,n.getInterstitialAdAsync(this.placementId);case 11:case 20:return e.abrupt("return",null);case 12:e.next=21;break;case 14:if(e.prev=14,e.t1=e.catch(1),!(e.t1 instanceof Object&&u.hasOwn(e.t1,"code"))){e.next=20;break}if("ADS_TOO_MANY_INSTANCES"!==e.t1.code){e.next=20;break}return this.isHasTooManyInstancesError=!0,e.abrupt("return",this.instanceLoadFailedQueue.shift()||null);case 21:case"end":return e.stop()}}),e,this,[[1,14]])})));return function(t){return e.apply(this,arguments)}}(),n.getSceneName=function(){try{var e=self.game.globalScene;return e instanceof c.Z?e.getCurrentScene().scene.getSceneName():"unknown"}catch(t){return"unknown"}},t}(GameCore.Ads.AdInstance);t.Z=p},,,,,,,,,,,,,,,function(e,t,n){"use strict";var i=n(0),r=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="TournamentNotFound",i.message=t||"A Tournament with current context was not found",i.payload=n,i.code="TOURNAMENT_NOT_FOUND",i}return(0,i.Z)(t,e),t}((0,n(15).Z)(Error));t.Z=r}],t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var a=t[i]={exports:{}};return e[i].call(a.exports,a,a.exports,n),a.exports}n.m=e,function(){var e=[];n.O=function(t,i,r,a){if(!i){var s=1/0;for(l=0;l<e.length;l++){i=e[l][0],r=e[l][1],a=e[l][2];for(var o=!0,c=0;c<i.length;c++)(!1&a||s>=a)&&Object.keys(n.O).every((function(e){return n.O[e](i[c])}))?i.splice(c--,1):(o=!1,a<s&&(s=a));if(o){e.splice(l--,1);var u=r();void 0!==u&&(t=u)}}return t}a=a||0;for(var l=e.length;l>0&&e[l-1][2]>a;l--)e[l]=e[l-1];e[l]=[i,r,a]}}(),n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,i){return n.f[i](e,t),t}),[]))},n.u=function(e){return(26===e?"solving-worker":e)+"."+{7:"e3d0c4db810265307481",26:"5d85e8f8955c580b2595",109:"30f8aa655e1930dc98e7",123:"e196cf24a710a309488d",131:"c0caaf93a65dd6db43c4",302:"82af17dc0ceb6d24d176",360:"bd942aef72a762606bda",401:"7d79d60ba6a7ee79eeb6",498:"40c843d04aa108f23eb2",530:"da1b4dfa2c8577aef3ed",613:"17479971aaa07381b93f",616:"8656f09ec01ec3c6a10a",638:"f637c2696409b5e1ab97",739:"967218945b9b75404e1a",803:"9152d2ad8a08c1f0f7f6",942:"7ddc6cb2311f89b243b9",961:"2310097d24d3345b9063"}[e]+".bundle.js"},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="game-core:";n.l=function(i,r,a,s){if(e[i])e[i].push(r);else{var o,c;if(void 0!==a)for(var u=document.getElementsByTagName("script"),l=0;l<u.length;l++){var h=u[l];if(h.getAttribute("src")==i||h.getAttribute("data-webpack")==t+a){o=h;break}}o||(c=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+a),o.src=i),e[i]=[r];var d=function(t,n){o.onerror=o.onload=null,clearTimeout(p);var r=e[i];if(delete e[i],o.parentNode&&o.parentNode.removeChild(o),r&&r.forEach((function(e){return e(n)})),t)return t(n)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=d.bind(null,o.onerror),o.onload=d.bind(null,o.onload),c&&document.head.appendChild(o)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");if(i.length)for(var r=i.length-1;r>-1&&!e;)e=i[r--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e}(),function(){n.b=document.baseURI||self.location.href;var e={757:0};n.f.j=function(t,i){var r=n.o(e,t)?e[t]:void 0;if(0!==r)if(r)i.push(r[2]);else{var a=new Promise((function(n,i){r=e[t]=[n,i]}));i.push(r[2]=a);var s=n.p+n.u(t),o=new Error;n.l(s,(function(i){if(n.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var a=i&&("load"===i.type?"missing":i.type),s=i&&i.target&&i.target.src;o.message="Loading chunk "+t+" failed.\n("+a+": "+s+")",o.name="ChunkLoadError",o.type=a,o.request=s,r[1](o)}}),"chunk-"+t,t)}},n.O.j=function(t){return 0===e[t]};var t=function(t,i){var r,a,s=i[0],o=i[1],c=i[2],u=0;if(s.some((function(t){return 0!==e[t]}))){for(r in o)n.o(o,r)&&(n.m[r]=o[r]);if(c)var l=c(n)}for(t&&t(i);u<s.length;u++)a=s[u],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(l)},i=self.webpackChunkgame_core=self.webpackChunkgame_core||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}(),n.O(void 0,[216,630,542],(function(){return n(78)})),n.O(void 0,[216,630,542],(function(){return n(79)})),n.O(void 0,[216,630,542],(function(){return n(80)})),n.O(void 0,[216,630,542],(function(){return n(54)})),n.O(void 0,[216,630,542],(function(){return n(55)})),n.O(void 0,[216,630,542],(function(){return n(81)})),n.O(void 0,[216,630,542],(function(){return n(25)}));var i=n.O(void 0,[216,630,542],(function(){return n(56)}));i=n.O(i)})();